undefined(function ($) {
  Drupal.behaviors.commentNotify = {
    attach: function (context) {
      $("#edit-notify", context)
        .bind("change", function () {
          $("#edit-notify-type", context)
            [this.checked ? "show" : "hide"]()
            .find("input[type=checkbox]:checked")
            .attr("checked", "checked");
        })
        .trigger("change");
    },
  };
})(jQuery);
/*jslint bitwise: true, eqeqeq: true, immed: true, newcap: true, nomen: false,
 onevar: false, plusplus: false, regexp: true, undef: true, white: true, indent: 2
 browser: true */

/*global jQuery: true Drupal: true window: true document: true ThemeBuilder: true */

(function ($, window, document, undefined) {
  /**
   * Respond to the jQuery UI dialogopen event.
   */
  function userDialogOpen(event) {
    // The dialog.
    var $dialog = $(this);
    // Wrap the field items in a div
    $dialog
      .find("form")
      .children("div")
      .once("dialog-content", function (index) {
        $(this)
          .children(
            '[class^="form"], [class^="field"], .tos-and-disclaimer, .message'
          )
          .wrapAll($("<div>").addClass("user-fields"))
          .parent()
          .wrapAll($("<div>").addClass("auth-methods"));
      });
    $dialog
      .find("form")
      // Add Drupal Gardens attribution if it does not already exist.
      .addClass("clearfix")
      .end()
      .once("service-attribution", function (index) {
        $(this).append(
          $("<ul>", {
            html: Drupal.behaviors.gardensFeaturesUIDialog.getServiceAttribution(),
          }).addClass("service-attribution")
        );
      })
      // Display the signin widget and trigger contentupdate to resize it.
      .trigger("contentupdate");
  }

  function userDialogClose(event) {
    return;
  }

  /**
   * Responds to the custom event 'contentupdate'.
   *
   * Resizes the dialog to accomodate its contents.
   */
  function userDialogResize(event) {
    // The dialog.
    var $dialog = $(this),
      // Resize the dialog.
      dialogWidth = $dialog.outerWidth(),
      dialogPadding = $dialog.outerWidth() - $dialog.width(),
      $dialogContent = $(".ui-dialog-content", $dialog),
      contentPadding = $dialogContent.outerWidth() - $dialogContent.width(),
      $form = $dialogContent.find("#dialog-form-wrapper > form"),
      formPadding = $form.outerWidth() - $form.width(),
      width = dialogPadding + contentPadding + formPadding,
      // Add the width of the form contents to the total width.
      $formUnits = $dialogContent.find(".auth-methods").children(":visible"),
      unitLength = $formUnits.length,
      maxWidth = (document.documentElement.clientWidth * 0.95) / unitLength;
    if (unitLength > 1) {
      $formUnits.each(function (index) {
        var $unit = $(this);
        var totalWidth = $unit.outerWidth(true),
          outerWidth = totalWidth - $unit.width(),
          w = totalWidth < maxWidth ? totalWidth : maxWidth;
        // Increase the dialog width.
        width += w;
        $unit.width(w - outerWidth);
      });
    } else {
      width = $dialogContent.width();
    }

    var left = (document.documentElement.clientWidth - width) / 2;

    // show the dialog.
    // There is a lot of manipulation here to smooth out visual
    // changes in the dialog's content as calculations happen.
    if (unitLength > 1) {
      $dialog
        .stop(true, true)
        // These keep the dialog's height even without changing the height property.
        .css({
          "max-height": "300px",
          "min-height": "300px",
        })
        .find("form > div")
        .css({
          visibility: "hidden",
        })
        .end()
        .animate(
          {
            left: left,
            width: width,
          },
          500,
          function () {
            $(this)
              .css({
                "max-height": "none",
              })
              .find("form > div")
              .hide()
              .css({
                visibility: "visible",
              })
              .fadeIn(500);
          }
        );
    }
  }

  /**
   * Utility function to remove 'px' string from css values in jQuery
   */
  function stripPX(value) {
    var index = value.indexOf("px");
    if (index === -1) {
      return Number(value);
    } else {
      return Number(value.substring(0, index));
    }
  }

  /**
   * Bind handlers to the user login and register dialogs in order to resize
   * and reposition them.
   *
   * We might expand this to most UI Dialogs eventually.
   */
  Drupal.behaviors.gardensFeaturesUIDialog = {
    attach: function (context, settings) {
      // Prepare the login and register dialogs.
      $(
        ".user-login-dialog, .user-register-form-dialog, .user-pass-dialog"
      ).once("gardensFeaturesEnhancedDialog", function (context, settings) {
        $(this)
          .bind(
            "dialogopen.gardensFeaturesUIDialog",
            { context: context, settings: settings },
            userDialogOpen
          )
          .bind(
            "dialogclose.gardensFeaturesUIDialog",
            { context: context, settings: settings },
            userDialogClose
          )
          .bind(
            "contentupdate.gardensFeaturesUIDialog",
            { context: context, settings: settings },
            userDialogResize
          );
      });
    },
  };

  /**
   * Get service attribution
   */
  Drupal.behaviors.gardensFeaturesUIDialog.getServiceAttribution = function () {
    var isSMB = Drupal.settings.gardensFeatures.isSMB;
    var $output = $("<li>").addClass("service");
    $output.append(
      $("<span>", {
        text: Drupal.t("Site powered by"),
      })
    );
    $output.append(
      $("<span>", {
        html: "&nbsp;",
      }).addClass("spacer")
    );
    $output.append(
      $("<a>", {
        href: isSMB
          ? "http://www.drupalgardens.com/"
          : Drupal.settings.gardensFeatures.siteFactoryProductPage,
        text: isSMB
          ? Drupal.t("Drupal Gardens")
          : Drupal.t("Acquia Cloud Site Factory"),
      }).addClass("service-uri")
    );
    return $output;
  };
})(jQuery, window, document);
function isTouchDevice() {
  return typeof window.ontouchstart !== "undefined";
}
jQuery(document).ready(function () {
  var mediaElements = jQuery(".instagramDetail");
  mediaElements.each(function () {
    var $this = jQuery(this);
    var photoSource = $this
      .find(".views-field-field-photo-asset img")
      .attr("src");
    if ($this.find(".views-field-field-instagram-video").length < 1) {
      $this.addClass("ig-photo");
    } else {
      $this.addClass("ig-video");
      var videoSrc = $this
        .find(".views-field-field-instagram-video")
        .text()
        .trim();
      //if (Modernizr.mq("only screen and (min-width : 1023px)")) {
      if (!isTouchDevice()) {
        $this
          .find(
            ".views-field-field-photo-asset img, .views-field-field-photo-asset .play"
          )
          .live("click", function () {
            jQuery(this)
              .parents(".views-field-field-photo-asset")
              .html(
                "<video autoplay controls>" +
                  '<source src="' +
                  videoSrc +
                  '" type="video/mp4"></source>' +
                  "</video>"
              );
            //jQuery(this).parents('.views-field-field-instagram-photo').find('video').get(0).play();
          });
      } else {
        $this
          .find(".views-field-field-photo-asset")
          .html(
            '<video poster="' +
              photoSource +
              '" autoplay controls>' +
              '<source src="' +
              videoSrc +
              '" type="video/mp4"></source>' +
              "</video>"
          );
      }
    }
  });
});
/**
 * jquery.linky.js v0.1.8
 * https://github.com/AnSavvides/jquery.linky
 * The MIT License (MIT)
 *
 * Copyright (c) 2013 - 2015 Andreas Savvides
 */
(function ($) {
  $.fn.linky = function (options) {
    return this.each(function () {
      var $el = $(this),
        linkifiedContent = _linkify($el, options);

      $el.html(linkifiedContent);
    });
  };

  function _linkify($el, options) {
    var links = {
        instagram: {
          baseUrl: "http://instagram.com/",
          hashtagSearchUrl: "explore/tags/",
        },
      },
      defaultOptions = {
        mentions: true,
        hashtags: true,
        urls: true,
        linkTo: "instagram", // Let's default to Twitter
      },
      extendedOptions = $.extend(defaultOptions, options),
      elContent = $el.html(),
      // Regular expression courtesy of Matthew O'Riordan, see: http://goo.gl/3syEKK
      urlRegEx = /((([A-Za-z]{3,9}:(?:\/\/)?)(?:[\-;:&=\+\$,\w]+@)?[A-Za-z0-9\.\-]+|(?:www\.|[\-;:&=\+\$,\w]+@)[A-Za-z0-9\.\-]+)((?:\/[\+~%\/\.\w\-]*)?\??(?:[\-\+=&;%@\.\w]*)#?(?:[\.\!\/\\\w]*))?)/g,
      matches;

    // Linkifying URLs
    if (extendedOptions.urls) {
      matches = elContent.match(urlRegEx);
      if (matches) {
        elContent = _linkifyUrls(matches, $el);
      }
    }

    // Linkifying mentions
    if (extendedOptions.mentions) {
      elContent = _linkifyMentions(
        elContent,
        links[extendedOptions.linkTo].baseUrl
      );
    }

    // Linkifying hashtags
    if (extendedOptions.hashtags) {
      elContent = _linkifyHashtags(elContent, links[extendedOptions.linkTo]);
    }

    return elContent;
  }

  // For any URLs present, unless they are already identified within
  // an `a` element, linkify them.
  function _linkifyUrls(matches, $el) {
    var elContent = $el.html();

    $.each(matches, function () {
      // Only linkify URLs that are not already identified as
      // `a` elements with an `href`.
      if ($el.find("a[href='" + this + "']").length === 0) {
        elContent = elContent.replace(
          this,
          "<a href='" + this + "' target='_blank'>" + this + "</a>"
        );
      }
    });

    return elContent;
  }

  // Find any mentions (e.g. @andrs) and turn them into links that
  // refer to the appropriate social profile (e.g. twitter or instagram).
  function _linkifyMentions(text, baseUrl) {
    return text.replace(
      /(^|\s|\(|>)@(\w+)/g,
      "$1<a href='" + baseUrl + "$2' target='_blank'>@$2</a>"
    );
  }

  // Find any hashtags (e.g. #linkyrocks) and turn them into links that refer
  // to the appropriate social profile.
  function _linkifyHashtags(text, links) {
    // If there is no search URL for a hashtag, there isn't much we can do
    if (links.hashtagSearchUrl === null) return text;
    return text.replace(
      /(^|\s|\(|>)#((\w|[\u00A1-\uFFFF])+)/g,
      "$1<a href='" +
        links.baseUrl +
        links.hashtagSearchUrl +
        "$2' target='_blank'>#$2</a>"
    );
  }
})(jQuery);
/***==[Infinite Scroll ]==***/
WMG = WMG || {};
WMG.namespace("InfiniteScrollDetail");
WMG.InfiniteScrollDetail = (function () {
  var targeturl = "",
    tempurl = "",
    nodeCounter = 1,
    y_scroll_pos,
    flippyPosition;

  //Function to append the URL when the node changes
  /* Get the next URL,
	 Get the URL From flippy pager.
	 If flippy pager not present, ??
	 Load the next URL
	 Use Ajax to get the next URL
	 Append the node details
	 Send the ajax and get the callback
	 Set the history state
	 Send to omniture
	 */

  var replaceURL = function () {
    tempurl = jQuery(jQuery("div.block-flippy:in-viewport(-400)")[0]).attr(
      "data-url"
    );
    if (typeof tempurl === "undefined") {
      tempurl = "";
    }
    if (targeturl != tempurl) {
      targeturl = tempurl;
      history.pushState({}, "", targeturl);
      pageNameScroll = {};
      pageNameScroll.pageName =
        "[site:name]:blogDetail" +
        ":onScroll" +
        ":" +
        jQuery(jQuery("div.block-flippy:in-viewport(-400)")[0])
          .find(".views-field.views-field-title:first")
          .text() +
        " - [site:name] Official Blog";
      s_dtm.t(pageNameScroll);
    }
  };
  var appendNewNode = function () {
    jQuery(window).unbind("scroll", onPageScroll);
    var nextNode = jQuery("#block-flippy-flippy-pager .prev a").attr("href");
    if (typeof nextNode !== "undefined" && nextNode !== "") {
      jQuery("#block-flippy-flippy-pager").attr("id", "node" + nodeCounter);
      jQuery(".region-content").append(
        jQuery("#node" + nodeCounter).load(
          nextNode + " .region-content > *",
          function () {
            nodeCallBack(nextNode);
          }
        )
      );
    }
  };

  //callback function on new node load
  var nodeCallBack = function (nodeUrl) {
    jQuery("#node" + nodeCounter).attr("data-url", nodeUrl);
    nodeCounter++;
    jQuery(window).bind("scroll", onPageScroll);
  };

  var onPageScroll = function () {
    if (jQuery("#block-flippy-flippy-pager")) {
      //Load next node on first scroll
      if (nodeCounter === 1) {
        appendNewNode();
      }
      //Load next node when the scroll reaches 1000px before the node1
      else {
        flippyPosition =
          jQuery("#node" + (nodeCounter - 1)).offset().top - 1000;
        y_scroll_pos = window.pageYOffset;
        if (y_scroll_pos > flippyPosition) {
          appendNewNode();
        }
      }
    }
  };

  var init = function () {
    jQuery(window).scroll(replaceURL);
    jQuery(window).scroll(onPageScroll);
  };

  return {
    init: init,
  };
})();

WMG = WMG || {};
WMG.namespace("TurnKey");
var sml_res;
WMG.TurnKey = (function () {
  var closeFlag = 0;
  var jsonOutput, parsedFile, timeout;
  var wmgSignUpFormOptions = {
    callBacks: {
      onSuccess: function () {
        if (
          !WMG.Utils.isUser("administrator") &&
          !WMG.Utils.isUser("Reviewer")
        ) {
          closeFlag++;
          if (closeFlag === 1) {
            clearTimeout(timeout);
          }
          if (closeFlag === 2) {
            setTimeout(hideToaster, 5000);
            jQuery.cookie("turnkeyPassCookie", 1);
          }
        }
      },
    },
  };
  var pageNameOption = {};
  function OmniPrep(omniVars, description) {
    if (typeof omniVars === "string") {
      s_dtm.linkTrackVars = "events";
      s_dtm.linkTrackEvents = omniVars;
      s_dtm.events = omniVars;
    } else {
      //s_dtm.linkTrackVars = 'events, linkTrackEvents';
      s_dtm.linkTrackVars = "prop1,eVar7,eVar52,products,events";
      s_dtm = jQuery.extend(s_dtm, omniVars);
    }
    s_dtm.tl(this, "o", description);
  }
  function hideToaster() {
    jQuery("#lightBoxContent.lightBoxContent.tkt")
      .removeClass("show_toaster")
      .addClass("hide_toaster");
  }

  function sendOmnitureEvent() {
    var omniVars = {};
    omniVars.events = "event63";
    omniVars.linkTrackEvents = "event63";
    s_account = digitalData.settings.reportSuites;
    var turnkeyLightboxDescription =
      s_dtm.pageName + ":Email Sign-up Form:Toaster";
    OmniPrep(omniVars, turnkeyLightboxDescription);
    setTimeout(function () {
      s_dtm.clearVars();
    }, 100);
  }

  var scrollHandler = function () {
    var maxScroll;
    var scrollValue;
    var timeOutval = parsedFile.field_toaster_timeout;
    var toasterPos = parsedFile.field_toaster_position;
    var displayrate = parsedFile.field_display_rates;
    var tkeyHt = parsedFile.field_turnkey_height;
    if (
      window.url_args.length >= 2 &&
      window.url_args[0] == "news" &&
      !window.url_args[1] == ""
    ) {
      maxScroll =
        jQuery("#content-area .middle").position().top +
        jQuery("#content-area .middle").height() -
        window.innerHeight;
    } else {
      maxScroll = jQuery(document).height() - jQuery(window).height();
    }
    if (toasterPos == "From Bottom") {
      scrollValue = maxScroll - tkeyHt;
    } else {
      scrollValue = tkeyHt;
    }
    console.log(scrollValue);
    if (
      jQuery(this).scrollTop() >= scrollValue &&
      (jQuery.cookie("turnkeyPassCookie") == null ||
        jQuery.cookie("turnkeyPassCookie") == undefined)
    ) {
      console.log("toasterShown");
      jQuery("#lightBoxContent.lightBoxContent.tkt")
        .removeClass("hidetoaster")
        .addClass("show_toaster");
      var turnkeyLightboxOmniVars = {};
      turnkeyLightboxOmniVars.eVar52 = "Toaster:Email Sign-up Form";
      turnkeyLightboxOmniVars.events = "event62";
      turnkeyLightboxOmniVars.linkTrackEvents = "event62";
      s_account = digitalData.settings.reportSuites;
      var turnkeyLightboxDescription =
        digitalData.page.pageInfo.pageName + ":Email Sign-up Form:Toaster";
      OmniPrep(turnkeyLightboxOmniVars, turnkeyLightboxDescription);
      // jQuery("#tktContainer .lightBoxContent.tkt .submit").live("click", function () {
      //     sendOmnitureEvent();
      // })
      setTimeout(function () {
        s_dtm.clearVars();
      }, 100);
      jQuery(
        "#lightBoxContent.lightBoxContent.tkt .lightBoxClose.turnKeyClose a"
      ).click(function () {
        hideToaster();
        if (
          !WMG.Utils.isUser("administrator") &&
          !WMG.Utils.isUser("Reviewer")
        ) {
          jQuery.cookie("turnkeyPassCookie", 1);
        }
      });

      if (!WMG.Utils.isUser("administrator") && !WMG.Utils.isUser("Reviewer")) {
        timeout = setTimeout(hideToaster, timeOutval);
        var touchStart =
          document.ontouchstart !== null ? "click" : "touchstart";

        jQuery("#tktContainer .lightBoxContent").live({
          mouseover: function () {
            clearTimeout(timeout);
          },
          mouseout: function () {
            timeout = setTimeout(hideToaster, timeOutval);
          },
          focus: function () {
            clearTimeout(timeout);
            jQuery("#tktContainer .lightBoxContent").die("mouseout");
          },
          blur: function () {
            timeout = setTimeout(hideToaster, timeOutval);
            jQuery("#tktContainer .lightBoxContent").live(
              "mouseout",
              function () {
                timeout = setTimeout(hideToaster, timeOutval);
              }
            );
          },
        });

        jQuery(".lightBoxContent.tkt").live({
          touchstart: function () {
            clearTimeout(timeout);
          },
          touchcancel: function () {
            timeout = setTimeout(hideToaster, timeOutval);
          },
        });
      }
      jQuery(window).unbind("scroll", scrollHandler);
    }
  };
  var createToaster = function () {
    var template;
    jsonOutput = jQuery(
      ".view-id-turnkey_lightbox_toaster.view-display-id-block_2 .view-content"
    ).html();
    var initiateTkt = function () {
      jQuery("body").addClass("toaster");
      SplashLightbox.init(
        '{"blockSelector" : "#tktContainer", "isLightBox":"lightbox","displayRate":"' +
          parsedFile.field_display_rates +
          '","cookieName":"turnkey-toaster-cookie","lboxHeight":"200","lboxWidth":"800"}'
      );
      $jq18("#tktContainer .lightBoxContent.tkt #lightBoxSignup").wmgSignUpForm(
        wmgSignUpFormOptions
      );
      if (ONEPAGE.mq.tabletNarrower) {
        $jq18("body > .lightBoxContent.tkt #lightBoxSignup").wmgSignUpForm(
          wmgSignUpFormOptions
        );
      }
    };
    if (jsonOutput !== null && JSON.parse(jsonOutput.trim()).length > 0) {
      jsonOutput = jsonOutput.trim();
      parsedFile = JSON.parse(jsonOutput)[0].parent;
      parsedFile.title = parsedFile.title.substring(0, 204);
      if (
        parsedFile.field_newsletter_id !== "" &&
        parsedFile.field_newsletter_id !== null
      ) {
        if (
          parsedFile.field_mailing_list_params_toast !== null &&
          parsedFile.field_mailing_list_params_toast !== "" &&
          parsedFile.field_mailing_list_params_toast !== undefined
        ) {
          var mlistArr = parsedFile.field_mailing_list_params_toast.split(
            "&amp;"
          );
          var targetElement = jQuery(".turnKeyToaster .primary-list-values");
          createMailinglistParams(mlistArr, targetElement);
        }
        if (
          parsedFile.field_mailing_list_params_se !== null &&
          parsedFile.field_mailing_list_params_se !== "" &&
          parsedFile.field_mailing_list_parameters_se !== undefined
        ) {
          var mlistArr = parsedFile.field_mailing_list_params_se.split("&amp;");
          var targetElement = jQuery(".turnKeyToaster .secondary-list-values");
          createMailinglistParams(mlistArr, targetElement);
        }
        template = jQuery(".turnKeyToaster").html();
      }
      var html = template.supplant(parsedFile);

      jQuery("#tktContainer").append(html);
      if (parsedFile.field_preview_mode.toLowerCase() === "true") {
        if (WMG.Utils.isUser("administrator") || WMG.Utils.isUser("Reviewer")) {
          initiateTkt();
          jQuery(window).scroll(scrollHandler);
        }
      } else {
        initiateTkt();
        jQuery(window).scroll(scrollHandler);
      }
    }
  };

  var createMailinglistParams = function (params, targetElement) {
    if (params != "") {
      params.shift();
      var mlistObj = {};

      jQuery.each(params, function (key, value) {
        var listArr = value.split("=");
        mlistObj[listArr[0]] = listArr[1];
      });

      jQuery.each(mlistObj, function (key, value) {
        if (targetElement.find("input[name='" + key + "']").length > 0) {
          targetElement.find("input[name='" + key + "']").attr("value", value);
        } else {
          targetElement.append(
            '<input id="mailinglistParams" name="' +
              encodeURIComponent(key) +
              '" type="hidden" value="' +
              encodeURIComponent(value) +
              '">'
          );
        }
      });
    }
  };

  var createTurnKeyLightbox = function () {
    var jsonOutput = jQuery(
      ".view-id-turnkey_lightbox_toaster.view-display-id-block_1 .view-content"
    ).html();
    if (jsonOutput !== null && JSON.parse(jsonOutput.trim()).length > 0) {
      jQuery("body").addClass("tklightbox");
      jsonOutput = jsonOutput.trim();
      var parsedFile = JSON.parse(jsonOutput)[0].parent;
      parsedFile.title = parsedFile.title.substring(0, 204);
      turnkeyLightboxTitle = parsedFile.title.substring(0, 204);
      var template;
      var lightboxType = "";
      function captureOmniture() {
        var omniVars = {};
        omniVars.eVar52 = "Lightbox:" + lightboxType;
        omniVars.events = "event62";
        omniVars.linkTrackEvents = "event62";
        omniVars.description =
          digitalData.page.pageInfo.pageName +
          ":" +
          turnkeyLightboxTitle +
          ":Lightbox";
        OmniPrep(omniVars, omniVars.description);
        setTimeout(function () {
          s_dtm.clearVars();
        }, 100);
        function sendLightboxEvent() {
          var omniVars = {};
          omniVars.events = "event63";
          omniVars.linkTrackEvents = "event63";
          s_account = digitalData.settings.reportSuites;
          var turnkeyLightboxDescription =
            s_dtm.pageName + ":Email Sign-up Form:Lightbox";
          OmniPrep(omniVars, turnkeyLightboxDescription);
          setTimeout(function () {
            s_dtm.clearVars();
          }, 100);
        }
        jQuery("#tklbContainer .lightBoxContent.tklb .submit").live(
          "click",
          function () {
            sendLightboxEvent();
          }
        );
        $jq18(".lightBoxContent.tklb .merchLink a").on("click", function () {
          var description =
            digitalData.page.pageInfo.pageName +
            ":lightbox:" +
            turnkeyLightboxTitle +
            ":click";
          OmniPrep(omniVars, description);
          setTimeout(function () {
            s_dtm.clearVars();
          }, 100);
        });
        $jq18(".lightBoxContent.tklb .genericCTA a").on("click", function () {
          var description =
            digitalData.page.pageInfo.pageName +
            ":lightbox:" +
            turnkeyLightboxTitle +
            ":click";
          OmniPrep(omniVars, description);
          setTimeout(function () {
            s_dtm.clearVars();
          }, 100);
        });
        $jq18(".lightBoxContent.tklb .lightBoxClose a").on(
          "click",
          function () {
            var description =
              digitalData.page.pageInfo.pageName + ":Lightbox: Close:Click";
            OmniPrep(omniVars, description);
            setTimeout(function () {
              s_dtm.clearVars();
            }, 100);
          }
        );
      }
      if (
        parsedFile.field_newsletter_id !== "" &&
        parsedFile.field_newsletter_id !== null
      ) {
        if (
          parsedFile.field_mailing_list_parameters !== null &&
          parsedFile.field_mailing_list_parameters !== "" &&
          parsedFile.field_mailing_list_parameters !== undefined
        ) {
          var mlistArr = parsedFile.field_mailing_list_parameters.split(
            "&amp;"
          );
          var targetElement = jQuery(
            "#turnkeyLightbox .mlistTemplate .primary-list-values"
          );
          createMailinglistParams(mlistArr, targetElement);
        }
        if (
          parsedFile.field_mailing_list_parameters_se !== null &&
          parsedFile.field_mailing_list_parameters_se !== "" &&
          parsedFile.field_mailing_list_parameters_se !== undefined
        ) {
          var mlistArr = parsedFile.field_mailing_list_parameters_se.split(
            "&amp;"
          );
          var targetElement = jQuery(
            "#turnkeyLightbox .mlistTemplate .secondary-list-values"
          );
          createMailinglistParams(mlistArr, targetElement);
        }
        template = jQuery("#turnkeyLightbox .mlistTemplate").html();
        lightboxType = "Newsletter";
      } else if (
        parsedFile.field_merch_item_name !== "" &&
        parsedFile.field_merch_item_name !== null
      ) {
        template = jQuery("#turnkeyLightbox .merchTemplate").html();
        lightboxType = "Product Promotion";
      } else {
        var ctaObj = jQuery.parseJSON(parsedFile.field_cta_button_1);
        var ctaDom = "";
        for (var key in ctaObj) {
          var ctaDiv = document.createElement("div");
          ctaDiv.className = "genericCTA";
          var ctaA = document.createElement("a");
          ctaA.setAttribute("href", ctaObj[key]);
          ctaA.setAttribute("target", "_blank");
          ctaA.innerHTML = key;
          ctaDiv.appendChild(ctaA);
          jQuery("#turnkeyLightbox .genericDesc").append(ctaDiv);
        }
        template = jQuery("#turnkeyLightbox .genericTemplate").html();
        lightboxType = "General";
      }
      var html = template.supplant(parsedFile);
      var initiateTklb = function () {
        var lboxHeight = 400;
        var lboxWidth = 800;
        SplashLightbox.init(
          '{"blockSelector" : "#tklbContainer", "isLightBox":"lightbox","displayRate":"' +
            parsedFile.field_display_rate +
            '","cookieName":"turnkey-lightbox-cookie","lboxHeight":"400","lboxWidth":"800"}'
        );
        pageNameOption.customPageName = turnkeyLightboxTitle;
        setTimeout(function () {
          $jq18(
            "#tklbContainer .lightBoxContent.tklb #lightBoxSignup"
          ).wmgSignUpForm();
          if (ONEPAGE.mq.tabletNarrower) {
            $jq18(
              "body > .lightBoxContent.tklb #lightBoxSignup"
            ).wmgSignUpForm();
          }
        }, 1000);
        $jq18(window).on("load", function () {
          captureOmniture();
          if (window.innerWidth < 768) {
            sml_res = true;
          }
        });
        window.addEventListener("resize", function (event) {
          if (window.innerWidth > 768) {
            $lightBoxContent = jQuery("body #tklbContainer #lightBoxContent");
            var win_height = document.documentElement.clientHeight;
            var set_height = (win_height - lboxHeight) / 2;
            var win_width = document.documentElement.clientWidth;
            var set_width = (win_width - lboxWidth) / 2;
            $lightBoxContent.css("top", set_height + "px");
            $lightBoxContent.css("left", set_width + "px");
            $lightBoxContent.css("width", lboxWidth + "px");
            $lightBoxContent.css("height", lboxHeight + "px");
          }
        });
      };
      jQuery("#tklbContainer").append(html);
      if (parsedFile.field_trigger_id === "") {
        jQuery("#tklbContainer #triggerId").remove();
      }
      if (parsedFile.field_data_ext === "") {
        jQuery("#tklbContainer #dataext").remove();
      }
      var hideImage = {};
      hideImage.callBacks = {
        onSuccess: function () {
          jQuery(".turnKeyImageWrapper").hide();
        },
      };
      if (parsedFile.field_preview_mode.toLowerCase() === "true") {
        if (WMG.Utils.isUser("administrator") || WMG.Utils.isUser("Reviewer")) {
          initiateTklb();
        }
      } else {
        setTimeout(function () {
          initiateTklb();
        }, 500);
      }
    }
  };
  var init = function (options) {
    jQuery.extend(true, wmgSignUpFormOptions, options);
    if (wmgSignUpFormOptions.option === "createToaster") {
      if (
        (ONEPAGE.mq.tabletNarrower &&
          !jQuery("body > .lightBoxContent").is(":visible")) ||
        ONEPAGE.mq.tabletWider
      ) {
        createToaster();
      }
    } else {
      jQuery.extend(true, pageNameOption, options);
      createTurnKeyLightbox();
    }
  };
  return {
    init: init,
  };
})();

// t: current time, b: begInnIng value, c: change In value, d: duration
jQuery.easing["jswing"] = jQuery.easing["swing"];

jQuery.extend(jQuery.easing, {
  def: "easeOutQuad",
  swing: function (x, t, b, c, d) {
    //alert(jQuery.easing.default);
    return jQuery.easing[jQuery.easing.def](x, t, b, c, d);
  },
  easeInQuad: function (x, t, b, c, d) {
    return c * (t /= d) * t + b;
  },
  easeOutQuad: function (x, t, b, c, d) {
    return -c * (t /= d) * (t - 2) + b;
  },
  easeInOutQuad: function (x, t, b, c, d) {
    if ((t /= d / 2) < 1) return (c / 2) * t * t + b;
    return (-c / 2) * (--t * (t - 2) - 1) + b;
  },
  easeInCubic: function (x, t, b, c, d) {
    return c * (t /= d) * t * t + b;
  },
  easeOutCubic: function (x, t, b, c, d) {
    return c * ((t = t / d - 1) * t * t + 1) + b;
  },
  easeInOutCubic: function (x, t, b, c, d) {
    if ((t /= d / 2) < 1) return (c / 2) * t * t * t + b;
    return (c / 2) * ((t -= 2) * t * t + 2) + b;
  },
  easeInQuart: function (x, t, b, c, d) {
    return c * (t /= d) * t * t * t + b;
  },
  easeOutQuart: function (x, t, b, c, d) {
    return -c * ((t = t / d - 1) * t * t * t - 1) + b;
  },
  easeInOutQuart: function (x, t, b, c, d) {
    if ((t /= d / 2) < 1) return (c / 2) * t * t * t * t + b;
    return (-c / 2) * ((t -= 2) * t * t * t - 2) + b;
  },
  easeInQuint: function (x, t, b, c, d) {
    return c * (t /= d) * t * t * t * t + b;
  },
  easeOutQuint: function (x, t, b, c, d) {
    return c * ((t = t / d - 1) * t * t * t * t + 1) + b;
  },
  easeInOutQuint: function (x, t, b, c, d) {
    if ((t /= d / 2) < 1) return (c / 2) * t * t * t * t * t + b;
    return (c / 2) * ((t -= 2) * t * t * t * t + 2) + b;
  },
  easeInSine: function (x, t, b, c, d) {
    return -c * Math.cos((t / d) * (Math.PI / 2)) + c + b;
  },
  easeOutSine: function (x, t, b, c, d) {
    return c * Math.sin((t / d) * (Math.PI / 2)) + b;
  },
  easeInOutSine: function (x, t, b, c, d) {
    return (-c / 2) * (Math.cos((Math.PI * t) / d) - 1) + b;
  },
  easeInExpo: function (x, t, b, c, d) {
    return t == 0 ? b : c * Math.pow(2, 10 * (t / d - 1)) + b;
  },
  easeOutExpo: function (x, t, b, c, d) {
    return t == d ? b + c : c * (-Math.pow(2, (-10 * t) / d) + 1) + b;
  },
  easeInOutExpo: function (x, t, b, c, d) {
    if (t == 0) return b;
    if (t == d) return b + c;
    if ((t /= d / 2) < 1) return (c / 2) * Math.pow(2, 10 * (t - 1)) + b;
    return (c / 2) * (-Math.pow(2, -10 * --t) + 2) + b;
  },
  easeInCirc: function (x, t, b, c, d) {
    return -c * (Math.sqrt(1 - (t /= d) * t) - 1) + b;
  },
  easeOutCirc: function (x, t, b, c, d) {
    return c * Math.sqrt(1 - (t = t / d - 1) * t) + b;
  },
  easeInOutCirc: function (x, t, b, c, d) {
    if ((t /= d / 2) < 1) return (-c / 2) * (Math.sqrt(1 - t * t) - 1) + b;
    return (c / 2) * (Math.sqrt(1 - (t -= 2) * t) + 1) + b;
  },
  easeInElastic: function (x, t, b, c, d) {
    var s = 1.70158;
    var p = 0;
    var a = c;
    if (t == 0) return b;
    if ((t /= d) == 1) return b + c;
    if (!p) p = d * 0.3;
    if (a < Math.abs(c)) {
      a = c;
      var s = p / 4;
    } else var s = (p / (2 * Math.PI)) * Math.asin(c / a);
    return (
      -(
        a *
        Math.pow(2, 10 * (t -= 1)) *
        Math.sin(((t * d - s) * (2 * Math.PI)) / p)
      ) + b
    );
  },
  easeOutElastic: function (x, t, b, c, d) {
    var s = 1.70158;
    var p = 0;
    var a = c;
    if (t == 0) return b;
    if ((t /= d) == 1) return b + c;
    if (!p) p = d * 0.3;
    if (a < Math.abs(c)) {
      a = c;
      var s = p / 4;
    } else var s = (p / (2 * Math.PI)) * Math.asin(c / a);
    return (
      a * Math.pow(2, -10 * t) * Math.sin(((t * d - s) * (2 * Math.PI)) / p) +
      c +
      b
    );
  },
  easeInOutElastic: function (x, t, b, c, d) {
    var s = 1.70158;
    var p = 0;
    var a = c;
    if (t == 0) return b;
    if ((t /= d / 2) == 2) return b + c;
    if (!p) p = d * (0.3 * 1.5);
    if (a < Math.abs(c)) {
      a = c;
      var s = p / 4;
    } else var s = (p / (2 * Math.PI)) * Math.asin(c / a);
    if (t < 1)
      return (
        -0.5 *
          (a *
            Math.pow(2, 10 * (t -= 1)) *
            Math.sin(((t * d - s) * (2 * Math.PI)) / p)) +
        b
      );
    return (
      a *
        Math.pow(2, -10 * (t -= 1)) *
        Math.sin(((t * d - s) * (2 * Math.PI)) / p) *
        0.5 +
      c +
      b
    );
  },
  easeInBack: function (x, t, b, c, d, s) {
    if (s == undefined) s = 1.70158;
    return c * (t /= d) * t * ((s + 1) * t - s) + b;
  },
  easeOutBack: function (x, t, b, c, d, s) {
    if (s == undefined) s = 1.70158;
    return c * ((t = t / d - 1) * t * ((s + 1) * t + s) + 1) + b;
  },
  easeInOutBack: function (x, t, b, c, d, s) {
    if (s == undefined) s = 1.70158;
    if ((t /= d / 2) < 1)
      return (c / 2) * (t * t * (((s *= 1.525) + 1) * t - s)) + b;
    return (c / 2) * ((t -= 2) * t * (((s *= 1.525) + 1) * t + s) + 2) + b;
  },
  easeInBounce: function (x, t, b, c, d) {
    return c - jQuery.easing.easeOutBounce(x, d - t, 0, c, d) + b;
  },
  easeOutBounce: function (x, t, b, c, d) {
    if ((t /= d) < 1 / 2.75) {
      return c * (7.5625 * t * t) + b;
    } else if (t < 2 / 2.75) {
      return c * (7.5625 * (t -= 1.5 / 2.75) * t + 0.75) + b;
    } else if (t < 2.5 / 2.75) {
      return c * (7.5625 * (t -= 2.25 / 2.75) * t + 0.9375) + b;
    } else {
      return c * (7.5625 * (t -= 2.625 / 2.75) * t + 0.984375) + b;
    }
  },
  easeInOutBounce: function (x, t, b, c, d) {
    if (t < d / 2)
      return jQuery.easing.easeInBounce(x, t * 2, 0, c, d) * 0.5 + b;
    return (
      jQuery.easing.easeOutBounce(x, t * 2 - d, 0, c, d) * 0.5 + c * 0.5 + b
    );
  },
});
/*! Picturefill - v2.3.1 - 2015-04-09
 * http://scottjehl.github.io/picturefill
 * Copyright (c) 2015 https://github.com/scottjehl/picturefill/blob/master/Authors.txt; Licensed MIT */
window.matchMedia ||
  (window.matchMedia = (function () {
    "use strict";
    var a = window.styleMedia || window.media;
    if (!a) {
      var b = document.createElement("style"),
        c = document.getElementsByTagName("script")[0],
        d = null;
      (b.type = "text/css"),
        (b.id = "matchmediajs-test"),
        c.parentNode.insertBefore(b, c),
        (d =
          ("getComputedStyle" in window && window.getComputedStyle(b, null)) ||
          b.currentStyle),
        (a = {
          matchMedium: function (a) {
            var c = "@media " + a + "{ #matchmediajs-test { width: 1px; } }";
            return (
              b.styleSheet ? (b.styleSheet.cssText = c) : (b.textContent = c),
              "1px" === d.width
            );
          },
        });
    }
    return function (b) {
      return { matches: a.matchMedium(b || "all"), media: b || "all" };
    };
  })()),
  (function (a, b, c) {
    "use strict";
    function d(b) {
      "object" == typeof module && "object" == typeof module.exports
        ? (module.exports = b)
        : "function" == typeof define &&
          define.amd &&
          define("picturefill", function () {
            return b;
          }),
        "object" == typeof a && (a.picturefill = b);
    }
    function e(a) {
      var b,
        c,
        d,
        e,
        f,
        i = a || {};
      b = i.elements || g.getAllElements();
      for (var j = 0, k = b.length; k > j; j++)
        if (
          ((c = b[j]),
          (d = c.parentNode),
          (e = void 0),
          (f = void 0),
          "IMG" === c.nodeName.toUpperCase() &&
            (c[g.ns] || (c[g.ns] = {}), i.reevaluate || !c[g.ns].evaluated))
        ) {
          if (d && "PICTURE" === d.nodeName.toUpperCase()) {
            if ((g.removeVideoShim(d), (e = g.getMatch(c, d)), e === !1))
              continue;
          } else e = void 0;
          ((d && "PICTURE" === d.nodeName.toUpperCase()) ||
            (!g.sizesSupported && c.srcset && h.test(c.srcset))) &&
            g.dodgeSrcset(c),
            e
              ? ((f = g.processSourceSet(e)), g.applyBestCandidate(f, c))
              : ((f = g.processSourceSet(c)),
                (void 0 === c.srcset || c[g.ns].srcset) &&
                  g.applyBestCandidate(f, c)),
            (c[g.ns].evaluated = !0);
        }
    }
    function f() {
      function c() {
        clearTimeout(d), (d = setTimeout(h, 60));
      }
      g.initTypeDetects(), e();
      var d,
        f = setInterval(function () {
          return (
            e(),
            /^loaded|^i|^c/.test(b.readyState) ? void clearInterval(f) : void 0
          );
        }, 250),
        h = function () {
          e({ reevaluate: !0 });
        };
      a.addEventListener
        ? a.addEventListener("resize", c, !1)
        : a.attachEvent && a.attachEvent("onresize", c);
    }
    if (a.HTMLPictureElement) return void d(function () {});
    b.createElement("picture");
    var g = a.picturefill || {},
      h = /\s+\+?\d+(e\d+)?w/;
    (g.ns = "picturefill"),
      (function () {
        (g.srcsetSupported = "srcset" in c),
          (g.sizesSupported = "sizes" in c),
          (g.curSrcSupported = "currentSrc" in c);
      })(),
      (g.trim = function (a) {
        return a.trim ? a.trim() : a.replace(/^\s+|\s+$/g, "");
      }),
      (g.makeUrl = (function () {
        var a = b.createElement("a");
        return function (b) {
          return (a.href = b), a.href;
        };
      })()),
      (g.restrictsMixedContent = function () {
        return "https:" === a.location.protocol;
      }),
      (g.matchesMedia = function (b) {
        return a.matchMedia && a.matchMedia(b).matches;
      }),
      (g.getDpr = function () {
        return a.devicePixelRatio || 1;
      }),
      (g.getWidthFromLength = function (a) {
        var c;
        if (
          !a ||
          a.indexOf("%") > -1 != !1 ||
          !(parseFloat(a) > 0 || a.indexOf("calc(") > -1)
        )
          return !1;
        (a = a.replace("vw", "%")),
          g.lengthEl ||
            ((g.lengthEl = b.createElement("div")),
            (g.lengthEl.style.cssText =
              "border:0;display:block;font-size:1em;left:0;margin:0;padding:0;position:absolute;visibility:hidden"),
            (g.lengthEl.className = "helper-from-picturefill-js")),
          (g.lengthEl.style.width = "0px");
        try {
          g.lengthEl.style.width = a;
        } catch (d) {}
        return (
          b.body.appendChild(g.lengthEl),
          (c = g.lengthEl.offsetWidth),
          0 >= c && (c = !1),
          b.body.removeChild(g.lengthEl),
          c
        );
      }),
      (g.detectTypeSupport = function (b, c) {
        var d = new a.Image();
        return (
          (d.onerror = function () {
            (g.types[b] = !1), e();
          }),
          (d.onload = function () {
            (g.types[b] = 1 === d.width), e();
          }),
          (d.src = c),
          "pending"
        );
      }),
      (g.types = g.types || {}),
      (g.initTypeDetects = function () {
        (g.types["image/jpeg"] = !0),
          (g.types["image/gif"] = !0),
          (g.types["image/png"] = !0),
          (g.types["image/svg+xml"] = b.implementation.hasFeature(
            "http://www.w3.org/TR/SVG11/feature#Image",
            "1.1"
          )),
          (g.types["image/webp"] = g.detectTypeSupport(
            "image/webp",
            "data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="
          ));
      }),
      (g.verifyTypeSupport = function (a) {
        var b = a.getAttribute("type");
        if (null === b || "" === b) return !0;
        var c = g.types[b];
        return "string" == typeof c && "pending" !== c
          ? ((g.types[b] = g.detectTypeSupport(b, c)), "pending")
          : "function" == typeof c
          ? (c(), "pending")
          : c;
      }),
      (g.parseSize = function (a) {
        var b = /(\([^)]+\))?\s*(.+)/g.exec(a);
        return { media: b && b[1], length: b && b[2] };
      }),
      (g.findWidthFromSourceSize = function (c) {
        for (
          var d, e = g.trim(c).split(/\s*,\s*/), f = 0, h = e.length;
          h > f;
          f++
        ) {
          var i = e[f],
            j = g.parseSize(i),
            k = j.length,
            l = j.media;
          if (k && (!l || g.matchesMedia(l)) && (d = g.getWidthFromLength(k)))
            break;
        }
        return d || Math.max(a.innerWidth || 0, b.documentElement.clientWidth);
      }),
      (g.parseSrcset = function (a) {
        for (var b = []; "" !== a; ) {
          a = a.replace(/^\s+/g, "");
          var c,
            d = a.search(/\s/g),
            e = null;
          if (-1 !== d) {
            c = a.slice(0, d);
            var f = c.slice(-1);
            if (
              (("," === f || "" === c) &&
                ((c = c.replace(/,+$/, "")), (e = "")),
              (a = a.slice(d + 1)),
              null === e)
            ) {
              var g = a.indexOf(",");
              -1 !== g
                ? ((e = a.slice(0, g)), (a = a.slice(g + 1)))
                : ((e = a), (a = ""));
            }
          } else (c = a), (a = "");
          (c || e) && b.push({ url: c, descriptor: e });
        }
        return b;
      }),
      (g.parseDescriptor = function (a, b) {
        var c,
          d = b || "100vw",
          e = a && a.replace(/(^\s+|\s+$)/g, ""),
          f = g.findWidthFromSourceSize(d);
        if (e)
          for (var h = e.split(" "), i = h.length - 1; i >= 0; i--) {
            var j = h[i],
              k = j && j.slice(j.length - 1);
            if (("h" !== k && "w" !== k) || g.sizesSupported) {
              if ("x" === k) {
                var l = j && parseFloat(j, 10);
                c = l && !isNaN(l) ? l : 1;
              }
            } else c = parseFloat(parseInt(j, 10) / f);
          }
        return c || 1;
      }),
      (g.getCandidatesFromSourceSet = function (a, b) {
        for (
          var c = g.parseSrcset(a), d = [], e = 0, f = c.length;
          f > e;
          e++
        ) {
          var h = c[e];
          d.push({
            url: h.url,
            resolution: g.parseDescriptor(h.descriptor, b),
          });
        }
        return d;
      }),
      (g.dodgeSrcset = function (a) {
        a.srcset &&
          ((a[g.ns].srcset = a.srcset),
          (a.srcset = ""),
          a.setAttribute("data-pfsrcset", a[g.ns].srcset));
      }),
      (g.processSourceSet = function (a) {
        var b = a.getAttribute("srcset"),
          c = a.getAttribute("sizes"),
          d = [];
        return (
          "IMG" === a.nodeName.toUpperCase() &&
            a[g.ns] &&
            a[g.ns].srcset &&
            (b = a[g.ns].srcset),
          b && (d = g.getCandidatesFromSourceSet(b, c)),
          d
        );
      }),
      (g.backfaceVisibilityFix = function (a) {
        var b = a.style || {},
          c = "webkitBackfaceVisibility" in b,
          d = b.zoom;
        c && ((b.zoom = ".999"), (c = a.offsetWidth), (b.zoom = d));
      }),
      (g.setIntrinsicSize = (function () {
        var c = {},
          d = function (a, b, c) {
            b && a.setAttribute("width", parseInt(b / c, 10));
          };
        return function (e, f) {
          var h;
          e[g.ns] &&
            !a.pfStopIntrinsicSize &&
            (void 0 === e[g.ns].dims &&
              (e[g.ns].dims =
                e.getAttribute("width") || e.getAttribute("height")),
            e[g.ns].dims ||
              (f.url in c
                ? d(e, c[f.url], f.resolution)
                : ((h = b.createElement("img")),
                  (h.onload = function () {
                    if (((c[f.url] = h.width), !c[f.url]))
                      try {
                        b.body.appendChild(h),
                          (c[f.url] = h.width || h.offsetWidth),
                          b.body.removeChild(h);
                      } catch (a) {}
                    e.src === f.url && d(e, c[f.url], f.resolution),
                      (e = null),
                      (h.onload = null),
                      (h = null);
                  }),
                  (h.src = f.url))));
        };
      })()),
      (g.applyBestCandidate = function (a, b) {
        var c, d, e;
        a.sort(g.ascendingSort), (d = a.length), (e = a[d - 1]);
        for (var f = 0; d > f; f++)
          if (((c = a[f]), c.resolution >= g.getDpr())) {
            e = c;
            break;
          }
        e &&
          ((e.url = g.makeUrl(e.url)),
          b.src !== e.url &&
            (g.restrictsMixedContent() &&
            "http:" === e.url.substr(0, "http:".length).toLowerCase()
              ? void 0 !== window.console &&
                console.warn("Blocked mixed content image " + e.url)
              : ((b.src = e.url),
                g.curSrcSupported || (b.currentSrc = b.src),
                g.backfaceVisibilityFix(b))),
          g.setIntrinsicSize(b, e));
      }),
      (g.ascendingSort = function (a, b) {
        return a.resolution - b.resolution;
      }),
      (g.removeVideoShim = function (a) {
        var b = a.getElementsByTagName("video");
        if (b.length) {
          for (var c = b[0], d = c.getElementsByTagName("source"); d.length; )
            a.insertBefore(d[0], c);
          c.parentNode.removeChild(c);
        }
      }),
      (g.getAllElements = function () {
        for (
          var a = [], c = b.getElementsByTagName("img"), d = 0, e = c.length;
          e > d;
          d++
        ) {
          var f = c[d];
          ("PICTURE" === f.parentNode.nodeName.toUpperCase() ||
            null !== f.getAttribute("srcset") ||
            (f[g.ns] && null !== f[g.ns].srcset)) &&
            a.push(f);
        }
        return a;
      }),
      (g.getMatch = function (a, b) {
        for (var c, d = b.childNodes, e = 0, f = d.length; f > e; e++) {
          var h = d[e];
          if (1 === h.nodeType) {
            if (h === a) return c;
            if ("SOURCE" === h.nodeName.toUpperCase()) {
              null !== h.getAttribute("src") &&
                void 0 !== typeof console &&
                console.warn(
                  "The `src` attribute is invalid on `picture` `source` element; instead, use `srcset`."
                );
              var i = h.getAttribute("media");
              if (h.getAttribute("srcset") && (!i || g.matchesMedia(i))) {
                var j = g.verifyTypeSupport(h);
                if (j === !0) {
                  c = h;
                  break;
                }
                if ("pending" === j) return !1;
              }
            }
          }
        }
        return c;
      }),
      f(),
      (e._ = g),
      d(e);
  })(window, window.document, new window.Image());
if (typeof Drupal !== "undefined" && typeof jQuery !== "undefined") {
  (function (e) {
    Drupal.behaviors.picture = {
      attach: function (t) {
        if (!("HTMLPictureElement" in window)) {
          var n = e(t).find("img");
          if (n.length) {
            window.picturefill({ elements: n.get() });
          }
        }
        if (t === "#cboxLoadedContent" && e(t).find("picture").length) {
          e.colorbox.resize();
          e("img", t).once("colorbox-lazy-load", function () {
            e(this).load(function () {
              this.style.maxHeight = e(window).height() + "px";
              this.style.maxWidth = e(window).width() + "px";
              e.colorbox.resize({
                innerHeight: this.height,
                innerWidth: this.width,
              });
              this.style.maxHeight = null;
              this.style.maxWidth = null;
            });
          });
        }
      },
    };
  })(jQuery);
}
/*!
	Colorbox v1.4.37 - 2014-02-11
	jQuery lightbox and modal window plugin
	(c) 2014 Jack Moore - http://www.jacklmoore.com/colorbox
	license: http://www.opensource.org/licenses/mit-license.php
*/
(function (e, t, i) {
  function o(i, o, n) {
    var r = t.createElement(i);
    return o && (r.id = Z + o), n && (r.style.cssText = n), e(r);
  }
  function n() {
    return i.innerHeight ? i.innerHeight : e(i).height();
  }
  function r(e) {
    var t = k.length,
      i = (j + e) % t;
    return 0 > i ? t + i : i;
  }
  function h(e, t) {
    return Math.round(
      (/%/.test(e) ? ("x" === t ? E.width() : n()) / 100 : 1) * parseInt(e, 10)
    );
  }
  function s(e, t) {
    return e.photo || e.photoRegex.test(t);
  }
  function l(e, t) {
    return e.retinaUrl && i.devicePixelRatio > 1
      ? t.replace(e.photoRegex, e.retinaSuffix)
      : t;
  }
  function a(e) {
    "contains" in g[0] &&
      !g[0].contains(e.target) &&
      (e.stopPropagation(), g.focus());
  }
  function d() {
    var t,
      i = e.data(N, Y);
    null == i
      ? ((B = e.extend({}, X)),
        console &&
          console.log &&
          console.log("Error: cboxElement missing settings object"))
      : (B = e.extend({}, i));
    for (t in B)
      e.isFunction(B[t]) && "on" !== t.slice(0, 2) && (B[t] = B[t].call(N));
    (B.rel = B.rel || N.rel || e(N).data("rel") || "nofollow"),
      (B.href = B.href || e(N).attr("href")),
      (B.title = B.title || N.title),
      "string" == typeof B.href && (B.href = e.trim(B.href));
  }
  function c(i, o) {
    e(t).trigger(i), st.triggerHandler(i), e.isFunction(o) && o.call(N);
  }
  function u(i) {
    q ||
      ((N = i),
      d(),
      (k = e(N)),
      (j = 0),
      "nofollow" !== B.rel &&
        ((k = e("." + et).filter(function () {
          var t,
            i = e.data(this, Y);
          return (
            i && (t = e(this).data("rel") || i.rel || this.rel), t === B.rel
          );
        })),
        (j = k.index(N)),
        -1 === j && ((k = k.add(N)), (j = k.length - 1))),
      w
        .css({
          opacity: parseFloat(B.opacity),
          cursor: B.overlayClose ? "pointer" : "auto",
          visibility: "visible",
        })
        .show(),
      J && g.add(w).removeClass(J),
      B.className && g.add(w).addClass(B.className),
      (J = B.className),
      B.closeButton ? K.html(B.close).appendTo(x) : K.appendTo("<div/>"),
      U ||
        ((U = $ = !0),
        g.css({ visibility: "hidden", display: "block" }),
        (H = o(lt, "LoadedContent", "width:0; height:0; overflow:hidden")),
        x.css({ width: "", height: "" }).append(H),
        (O = y.height() + C.height() + x.outerHeight(!0) - x.height()),
        (_ = b.width() + T.width() + x.outerWidth(!0) - x.width()),
        (D = H.outerHeight(!0)),
        (A = H.outerWidth(!0)),
        (B.w = h(B.initialWidth, "x")),
        (B.h = h(B.initialHeight, "y")),
        H.css({ width: "", height: B.h }),
        Q.position(),
        c(tt, B.onOpen),
        P.add(L).hide(),
        g.focus(),
        B.trapFocus &&
          t.addEventListener &&
          (t.addEventListener("focus", a, !0),
          st.one(rt, function () {
            t.removeEventListener("focus", a, !0);
          })),
        B.returnFocus &&
          st.one(rt, function () {
            e(N).focus();
          })),
      m());
  }
  function f() {
    !g &&
      t.body &&
      ((V = !1),
      (E = e(i)),
      (g = o(lt)
        .attr({
          id: Y,
          class: e.support.opacity === !1 ? Z + "IE" : "",
          role: "dialog",
          tabindex: "-1",
        })
        .hide()),
      (w = o(lt, "Overlay").hide()),
      (W = e([o(lt, "LoadingOverlay")[0], o(lt, "LoadingGraphic")[0]])),
      (v = o(lt, "Wrapper")),
      (x = o(lt, "Content").append(
        (L = o(lt, "Title")),
        (S = o(lt, "Current")),
        (I = e('<button type="button"/>').attr({ id: Z + "Previous" })),
        (R = e('<button type="button"/>').attr({ id: Z + "Next" })),
        (M = o("button", "Slideshow")),
        W
      )),
      (K = e('<button type="button"/>').attr({ id: Z + "Close" })),
      v
        .append(
          o(lt).append(
            o(lt, "TopLeft"),
            (y = o(lt, "TopCenter")),
            o(lt, "TopRight")
          ),
          o(lt, !1, "clear:left").append(
            (b = o(lt, "MiddleLeft")),
            x,
            (T = o(lt, "MiddleRight"))
          ),
          o(lt, !1, "clear:left").append(
            o(lt, "BottomLeft"),
            (C = o(lt, "BottomCenter")),
            o(lt, "BottomRight")
          )
        )
        .find("div div")
        .css({ float: "left" }),
      (F = o(
        lt,
        !1,
        "position:absolute; width:9999px; visibility:hidden; display:none; max-width:none;"
      )),
      (P = R.add(I).add(S).add(M)),
      e(t.body).append(w, g.append(v, F)));
  }
  function p() {
    function i(e) {
      e.which > 1 ||
        e.shiftKey ||
        e.altKey ||
        e.metaKey ||
        e.ctrlKey ||
        (e.preventDefault(), u(this));
    }
    return g
      ? (V ||
          ((V = !0),
          R.click(function () {
            Q.next();
          }),
          I.click(function () {
            Q.prev();
          }),
          K.click(function () {
            Q.close();
          }),
          w.click(function () {
            B.overlayClose && Q.close();
          }),
          e(t).bind("keydown." + Z, function (e) {
            var t = e.keyCode;
            U && B.escKey && 27 === t && (e.preventDefault(), Q.close()),
              U &&
                B.arrowKey &&
                k[1] &&
                !e.altKey &&
                (37 === t
                  ? (e.preventDefault(), I.click())
                  : 39 === t && (e.preventDefault(), R.click()));
          }),
          e.isFunction(e.fn.on)
            ? e(t).on("click." + Z, "." + et, i)
            : e("." + et).live("click." + Z, i)),
        !0)
      : !1;
  }
  function m() {
    var n,
      r,
      a,
      u = Q.prep,
      f = ++at;
    ($ = !0),
      (z = !1),
      (N = k[j]),
      d(),
      c(ht),
      c(it, B.onLoad),
      (B.h = B.height
        ? h(B.height, "y") - D - O
        : B.innerHeight && h(B.innerHeight, "y")),
      (B.w = B.width
        ? h(B.width, "x") - A - _
        : B.innerWidth && h(B.innerWidth, "x")),
      (B.mw = B.w),
      (B.mh = B.h),
      B.maxWidth &&
        ((B.mw = h(B.maxWidth, "x") - A - _),
        (B.mw = B.w && B.w < B.mw ? B.w : B.mw)),
      B.maxHeight &&
        ((B.mh = h(B.maxHeight, "y") - D - O),
        (B.mh = B.h && B.h < B.mh ? B.h : B.mh)),
      (n = B.href),
      (G = setTimeout(function () {
        W.show();
      }, 100)),
      B.inline
        ? ((a = o(lt).hide().insertBefore(e(n)[0])),
          st.one(ht, function () {
            a.replaceWith(H.children());
          }),
          u(e(n)))
        : B.iframe
        ? u(" ")
        : B.html
        ? u(B.html)
        : s(B, n)
        ? ((n = l(B, n)),
          (z = t.createElement("img")),
          e(z)
            .addClass(Z + "Photo")
            .bind("error", function () {
              (B.title = !1), u(o(lt, "Error").html(B.imgError));
            })
            .one("load", function () {
              var t;
              f === at &&
                (e.each(["alt", "longdesc", "aria-describedby"], function (
                  t,
                  i
                ) {
                  var o = e(N).attr(i) || e(N).attr("data-" + i);
                  o && z.setAttribute(i, o);
                }),
                B.retinaImage &&
                  i.devicePixelRatio > 1 &&
                  ((z.height = z.height / i.devicePixelRatio),
                  (z.width = z.width / i.devicePixelRatio)),
                B.scalePhotos &&
                  ((r = function () {
                    (z.height -= z.height * t), (z.width -= z.width * t);
                  }),
                  B.mw &&
                    z.width > B.mw &&
                    ((t = (z.width - B.mw) / z.width), r()),
                  B.mh &&
                    z.height > B.mh &&
                    ((t = (z.height - B.mh) / z.height), r())),
                B.h &&
                  (z.style.marginTop = Math.max(B.mh - z.height, 0) / 2 + "px"),
                k[1] &&
                  (B.loop || k[j + 1]) &&
                  ((z.style.cursor = "pointer"),
                  (z.onclick = function () {
                    Q.next();
                  })),
                (z.style.width = z.width + "px"),
                (z.style.height = z.height + "px"),
                setTimeout(function () {
                  u(z);
                }, 1));
            }),
          setTimeout(function () {
            z.src = n;
          }, 1))
        : n &&
          F.load(n, B.data, function (t, i) {
            f === at &&
              u(
                "error" === i
                  ? o(lt, "Error").html(B.xhrError)
                  : e(this).contents()
              );
          });
  }
  var w,
    g,
    v,
    x,
    y,
    b,
    T,
    C,
    k,
    E,
    H,
    F,
    W,
    L,
    S,
    M,
    R,
    I,
    K,
    P,
    B,
    O,
    _,
    D,
    A,
    N,
    j,
    z,
    U,
    $,
    q,
    G,
    Q,
    J,
    V,
    X = {
      html: !1,
      photo: !1,
      iframe: !1,
      inline: !1,
      transition: "elastic",
      speed: 300,
      fadeOut: 300,
      width: !1,
      initialWidth: "600",
      innerWidth: !1,
      maxWidth: !1,
      height: !1,
      initialHeight: "450",
      innerHeight: !1,
      maxHeight: !1,
      scalePhotos: !0,
      scrolling: !0,
      href: !1,
      title: !1,
      rel: !1,
      opacity: 0.9,
      preloading: !0,
      className: !1,
      overlayClose: !0,
      escKey: !0,
      arrowKey: !0,
      top: !1,
      bottom: !1,
      left: !1,
      right: !1,
      fixed: !1,
      data: void 0,
      closeButton: !0,
      fastIframe: !0,
      open: !1,
      reposition: !0,
      loop: !0,
      slideshow: !1,
      slideshowAuto: !0,
      slideshowSpeed: 2500,
      slideshowStart: "start slideshow",
      slideshowStop: "stop slideshow",
      photoRegex: /\.(gif|png|jp(e|g|eg)|bmp|ico|webp|jxr)((#|\?).*)?$/i,
      retinaImage: !1,
      retinaUrl: !1,
      retinaSuffix: "@2x.$1",
      current: "image {current} of {total}",
      previous: "previous",
      next: "next",
      close: "close",
      xhrError: "This content failed to load.",
      imgError: "This image failed to load.",
      returnFocus: !0,
      trapFocus: !0,
      onOpen: !1,
      onLoad: !1,
      onComplete: !1,
      onCleanup: !1,
      onClosed: !1,
    },
    Y = "colorbox",
    Z = "cbox",
    et = Z + "Element",
    tt = Z + "_open",
    it = Z + "_load",
    ot = Z + "_complete",
    nt = Z + "_cleanup",
    rt = Z + "_closed",
    ht = Z + "_purge",
    st = e("<a/>"),
    lt = "div",
    at = 0,
    dt = {},
    ct = (function () {
      function e() {
        clearTimeout(h);
      }
      function t() {
        (B.loop || k[j + 1]) &&
          (e(), (h = setTimeout(Q.next, B.slideshowSpeed)));
      }
      function i() {
        M.html(B.slideshowStop).unbind(l).one(l, o),
          st.bind(ot, t).bind(it, e),
          g.removeClass(s + "off").addClass(s + "on");
      }
      function o() {
        e(),
          st.unbind(ot, t).unbind(it, e),
          M.html(B.slideshowStart)
            .unbind(l)
            .one(l, function () {
              Q.next(), i();
            }),
          g.removeClass(s + "on").addClass(s + "off");
      }
      function n() {
        (r = !1),
          M.hide(),
          e(),
          st.unbind(ot, t).unbind(it, e),
          g.removeClass(s + "off " + s + "on");
      }
      var r,
        h,
        s = Z + "Slideshow_",
        l = "click." + Z;
      return function () {
        r
          ? B.slideshow || (st.unbind(nt, n), n())
          : B.slideshow &&
            k[1] &&
            ((r = !0), st.one(nt, n), B.slideshowAuto ? i() : o(), M.show());
      };
    })();
  e.colorbox ||
    (e(f),
    (Q = e.fn[Y] = e[Y] = function (t, i) {
      var o = this;
      if (((t = t || {}), f(), p())) {
        if (e.isFunction(o)) (o = e("<a/>")), (t.open = !0);
        else if (!o[0]) return o;
        i && (t.onComplete = i),
          o
            .each(function () {
              e.data(this, Y, e.extend({}, e.data(this, Y) || X, t));
            })
            .addClass(et),
          ((e.isFunction(t.open) && t.open.call(o)) || t.open) && u(o[0]);
      }
      return o;
    }),
    (Q.position = function (t, i) {
      function o() {
        (y[0].style.width = C[0].style.width = x[0].style.width =
          parseInt(g[0].style.width, 10) - _ + "px"),
          (x[0].style.height = b[0].style.height = T[0].style.height =
            parseInt(g[0].style.height, 10) - O + "px");
      }
      var r,
        s,
        l,
        a = 0,
        d = 0,
        c = g.offset();
      if (
        (E.unbind("resize." + Z),
        g.css({ top: -9e4, left: -9e4 }),
        (s = E.scrollTop()),
        (l = E.scrollLeft()),
        B.fixed
          ? ((c.top -= s), (c.left -= l), g.css({ position: "fixed" }))
          : ((a = s), (d = l), g.css({ position: "absolute" })),
        (d +=
          B.right !== !1
            ? Math.max(E.width() - B.w - A - _ - h(B.right, "x"), 0)
            : B.left !== !1
            ? h(B.left, "x")
            : Math.round(Math.max(E.width() - B.w - A - _, 0) / 2)),
        (a +=
          B.bottom !== !1
            ? Math.max(n() - B.h - D - O - h(B.bottom, "y"), 0)
            : B.top !== !1
            ? h(B.top, "y")
            : Math.round(Math.max(n() - B.h - D - O, 0) / 2)),
        g.css({ top: c.top, left: c.left, visibility: "visible" }),
        (v[0].style.width = v[0].style.height = "9999px"),
        (r = { width: B.w + A + _, height: B.h + D + O, top: a, left: d }),
        t)
      ) {
        var u = 0;
        e.each(r, function (e) {
          return r[e] !== dt[e] ? ((u = t), void 0) : void 0;
        }),
          (t = u);
      }
      (dt = r),
        t || g.css(r),
        g.dequeue().animate(r, {
          duration: t || 0,
          complete: function () {
            o(),
              ($ = !1),
              (v[0].style.width = B.w + A + _ + "px"),
              (v[0].style.height = B.h + D + O + "px"),
              B.reposition &&
                setTimeout(function () {
                  E.bind("resize." + Z, function () {
                    Q.position();
                  });
                }, 1),
              e.isFunction(i) && i();
          },
          step: o,
        });
    }),
    (Q.resize = function (e) {
      var t;
      U &&
        ((e = e || {}),
        e.width && (B.w = h(e.width, "x") - A - _),
        e.innerWidth && (B.w = h(e.innerWidth, "x")),
        H.css({ width: B.w }),
        e.height && (B.h = h(e.height, "y") - D - O),
        e.innerHeight && (B.h = h(e.innerHeight, "y")),
        e.innerHeight ||
          e.height ||
          ((t = H.scrollTop()), H.css({ height: "auto" }), (B.h = H.height())),
        H.css({ height: B.h }),
        t && H.scrollTop(t),
        Q.position("none" === B.transition ? 0 : B.speed));
    }),
    (Q.prep = function (i) {
      function n() {
        return (
          (B.w = B.w || H.width()), (B.w = B.mw && B.mw < B.w ? B.mw : B.w), B.w
        );
      }
      function h() {
        return (
          (B.h = B.h || H.height()),
          (B.h = B.mh && B.mh < B.h ? B.mh : B.h),
          B.h
        );
      }
      if (U) {
        var a,
          d = "none" === B.transition ? 0 : B.speed;
        H.empty().remove(),
          (H = o(lt, "LoadedContent").append(i)),
          H.hide()
            .appendTo(F.show())
            .css({ width: n(), overflow: B.scrolling ? "auto" : "hidden" })
            .css({ height: h() })
            .prependTo(x),
          F.hide(),
          e(z).css({ float: "none" }),
          (a = function () {
            function i() {
              e.support.opacity === !1 && g[0].style.removeAttribute("filter");
            }
            var n,
              h,
              a = k.length,
              u = "frameBorder",
              f = "allowTransparency";
            U &&
              ((h = function () {
                clearTimeout(G), W.hide(), c(ot, B.onComplete);
              }),
              L.html(B.title).add(H).show(),
              a > 1
                ? ("string" == typeof B.current &&
                    S.html(
                      B.current
                        .replace("{current}", j + 1)
                        .replace("{total}", a)
                    ).show(),
                  R[B.loop || a - 1 > j ? "show" : "hide"]().html(B.next),
                  I[B.loop || j ? "show" : "hide"]().html(B.previous),
                  ct(),
                  B.preloading &&
                    e.each([r(-1), r(1)], function () {
                      var i,
                        o,
                        n = k[this],
                        r = e.data(n, Y);
                      r && r.href
                        ? ((i = r.href), e.isFunction(i) && (i = i.call(n)))
                        : (i = e(n).attr("href")),
                        i &&
                          s(r, i) &&
                          ((i = l(r, i)),
                          (o = t.createElement("img")),
                          (o.src = i));
                    }))
                : P.hide(),
              B.iframe
                ? ((n = o("iframe")[0]),
                  u in n && (n[u] = 0),
                  f in n && (n[f] = "true"),
                  B.scrolling || (n.scrolling = "no"),
                  e(n)
                    .attr({
                      src: B.href,
                      name: new Date().getTime(),
                      class: Z + "Iframe",
                      allowFullScreen: !0,
                      webkitAllowFullScreen: !0,
                      mozallowfullscreen: !0,
                    })
                    .one("load", h)
                    .appendTo(H),
                  st.one(ht, function () {
                    n.src = "//about:blank";
                  }),
                  B.fastIframe && e(n).trigger("load"))
                : h(),
              "fade" === B.transition ? g.fadeTo(d, 1, i) : i());
          }),
          "fade" === B.transition
            ? g.fadeTo(d, 0, function () {
                Q.position(0, a);
              })
            : Q.position(d, a);
      }
    }),
    (Q.next = function () {
      !$ && k[1] && (B.loop || k[j + 1]) && ((j = r(1)), u(k[j]));
    }),
    (Q.prev = function () {
      !$ && k[1] && (B.loop || j) && ((j = r(-1)), u(k[j]));
    }),
    (Q.close = function () {
      U &&
        !q &&
        ((q = !0),
        (U = !1),
        c(nt, B.onCleanup),
        E.unbind("." + Z),
        w.fadeTo(B.fadeOut || 0, 0),
        g.stop().fadeTo(B.fadeOut || 0, 0, function () {
          g.add(w).css({ opacity: 1, cursor: "auto" }).hide(),
            c(ht),
            H.empty().remove(),
            setTimeout(function () {
              (q = !1), c(rt, B.onClosed);
            }, 1);
        }));
    }),
    (Q.remove = function () {
      g &&
        (g.stop(),
        e.colorbox.close(),
        g.stop().remove(),
        w.remove(),
        (q = !1),
        (g = null),
        e("." + et)
          .removeData(Y)
          .removeClass(et),
        e(t).unbind("click." + Z));
    }),
    (Q.element = function () {
      return e(N);
    }),
    (Q.settings = X));
})(jQuery, document, window);
(function ($) {
  Drupal.behaviors.initColorbox = {
    attach: function (context, settings) {
      if (
        !$.isFunction($.colorbox) ||
        typeof settings.colorbox === "undefined"
      ) {
        return;
      }

      if (settings.colorbox.mobiledetect && window.matchMedia) {
        // Disable Colorbox for small screens.
        var mq = window.matchMedia(
          "(max-device-width: " + settings.colorbox.mobiledevicewidth + ")"
        );
        if (mq.matches) {
          return;
        }
      }
      $(".colorbox", context)
        .once("init-colorbox")
        .each(function () {
          $(this).colorbox(settings.colorbox);
        });
      $(context).bind("cbox_complete", function () {
        Drupal.attachBehaviors("#cboxLoadedContent");
      });
    },
  };
})(jQuery);
(function ($) {
  Drupal.behaviors.initColorboxDefaultStyle = {
    attach: function (context, settings) {
      $(context).bind("cbox_complete", function () {
        // Only run if there is a title.
        if ($("#cboxTitle:empty", context).length == false) {
          $("#cboxLoadedContent img", context).bind("mouseover", function () {
            $("#cboxTitle", context).slideDown();
          });
          $("#cboxOverlay", context).bind("mouseover", function () {
            $("#cboxTitle", context).slideUp();
          });
        } else {
          $("#cboxTitle", context).hide();
        }
      });
    },
  };
})(jQuery);
(function ($) {
  Drupal.behaviors.initColorboxInline = {
    attach: function (context, settings) {
      if (
        !$.isFunction($.colorbox) ||
        typeof settings.colorbox === "undefined"
      ) {
        return;
      }
      $.urlParam = function (name, url) {
        if (name == "fragment") {
          var results = new RegExp("(#[^&#]*)").exec(url);
        } else {
          var results = new RegExp("[\\?&]" + name + "=([^&#]*)").exec(url);
        }
        if (!results) {
          return "";
        }
        return results[1] || "";
      };
      $(".colorbox-inline", context)
        .once("init-colorbox-inline")
        .colorbox({
          transition: settings.colorbox.transition,
          speed: settings.colorbox.speed,
          opacity: settings.colorbox.opacity,
          slideshow: settings.colorbox.slideshow,
          slideshowAuto: settings.colorbox.slideshowAuto,
          slideshowSpeed: settings.colorbox.slideshowSpeed,
          slideshowStart: settings.colorbox.slideshowStart,
          slideshowStop: settings.colorbox.slideshowStop,
          current: settings.colorbox.current,
          previous: settings.colorbox.previous,
          next: settings.colorbox.next,
          close: settings.colorbox.close,
          overlayClose: settings.colorbox.overlayClose,
          maxWidth: settings.colorbox.maxWidth,
          maxHeight: settings.colorbox.maxHeight,
          innerWidth: function () {
            return $.urlParam("width", $(this).attr("href"));
          },
          innerHeight: function () {
            return $.urlParam("height", $(this).attr("href"));
          },
          title: function () {
            return decodeURIComponent(
              $.urlParam("title", $(this).attr("href"))
            );
          },
          iframe: function () {
            return $.urlParam("iframe", $(this).attr("href"));
          },
          inline: function () {
            return $.urlParam("inline", $(this).attr("href"));
          },
          href: function () {
            return $.urlParam("fragment", $(this).attr("href"));
          },
        });
    },
  };
})(jQuery);
/**
 * Timeago is a jQuery plugin that makes it easy to support automatically
 * updating fuzzy timestamps (e.g. "4 minutes ago" or "about 1 day ago").
 *
 * @name timeago
 * @version 0.11.4
 * @requires jQuery v1.2.3+
 * @author Ryan McGeary
 * @license MIT License - http://www.opensource.org/licenses/mit-license.php
 *
 * For usage and examples, visit:
 * http://timeago.yarp.com/
 *
 * Copyright (c) 2008-2012, Ryan McGeary (ryan -[at]- mcgeary [*dot*] org)
 */
(function ($) {
  $.timeago = function (timestamp) {
    if (timestamp instanceof Date) {
      return inWords(timestamp);
    } else if (typeof timestamp === "string") {
      return inWords($.timeago.parse(timestamp));
    } else if (typeof timestamp === "number") {
      return inWords(new Date(timestamp));
    } else {
      return inWords($.timeago.datetime(timestamp));
    }
  };
  var $t = $.timeago;

  $.extend($.timeago, {
    settings: {
      refreshMillis: 60000,
      allowFuture: false,
      strings: {
        prefixAgo: null,
        prefixFromNow: null,
        suffixAgo: "ago",
        suffixFromNow: "from now",
        seconds: "less than a minute",
        minute: "about a minute",
        minutes: "%d minutes",
        hour: "about an hour",
        hours: "about %d hours",
        day: "a day",
        days: "%d days",
        month: "about a month",
        months: "%d months",
        year: "about a year",
        years: "%d years",
        wordSeparator: " ",
        numbers: [],
      },
    },
    inWords: function (distanceMillis) {
      var $l = this.settings.strings;
      var prefix = $l.prefixAgo;
      var suffix = $l.suffixAgo;
      if (this.settings.allowFuture) {
        if (distanceMillis < 0) {
          prefix = $l.prefixFromNow;
          suffix = $l.suffixFromNow;
        }
      }

      var seconds = Math.abs(distanceMillis) / 1000;
      var minutes = seconds / 60;
      var hours = minutes / 60;
      var days = hours / 24;
      var years = days / 365;

      function substitute(stringOrFunction, number) {
        var string = $.isFunction(stringOrFunction)
          ? stringOrFunction(number, distanceMillis)
          : stringOrFunction;
        var value = ($l.numbers && $l.numbers[number]) || number;
        return string.replace(/%d/i, value);
      }

      var words =
        (seconds < 45 && substitute($l.seconds, Math.round(seconds))) ||
        (seconds < 90 && substitute($l.minute, 1)) ||
        (minutes < 45 && substitute($l.minutes, Math.round(minutes))) ||
        (minutes < 90 && substitute($l.hour, 1)) ||
        (hours < 24 && substitute($l.hours, Math.round(hours))) ||
        (hours < 42 && substitute($l.day, 1)) ||
        (days < 30 && substitute($l.days, Math.round(days))) ||
        (days < 45 && substitute($l.month, 1)) ||
        (days < 365 && substitute($l.months, Math.round(days / 30))) ||
        (years < 1.5 && substitute($l.year, 1)) ||
        substitute($l.years, Math.round(years));

      var separator = $l.wordSeparator === undefined ? " " : $l.wordSeparator;
      return $.trim([prefix, words, suffix].join(separator));
    },
    parse: function (iso8601) {
      var s = $.trim(iso8601);
      s = s.replace(/\.\d+/, ""); // remove milliseconds
      s = s.replace(/-/, "/").replace(/-/, "/");
      s = s.replace(/T/, " ").replace(/Z/, " UTC");
      s = s.replace(/([\+\-]\d\d)\:?(\d\d)/, " $1$2"); // -04:00 -> -0400
      return new Date(s);
    },
    datetime: function (elem) {
      var iso8601 = $t.isTime(elem)
        ? $(elem).attr("datetime")
        : $(elem).attr("title");
      return $t.parse(iso8601);
    },
    isTime: function (elem) {
      // jQuery's `is()` doesn't play well with HTML5 in IE
      return $(elem).get(0).tagName.toLowerCase() === "time"; // $(elem).is("time");
    },
  });

  $.fn.timeago = function () {
    var self = this;
    self.each(refresh);

    var $s = $t.settings;
    if ($s.refreshMillis > 0) {
      setInterval(function () {
        self.each(refresh);
      }, $s.refreshMillis);
    }
    return self;
  };

  function refresh() {
    var data = prepareData(this);
    if (!isNaN(data.datetime)) {
      $(this).text(inWords(data.datetime));
    }
    return this;
  }

  function prepareData(element) {
    element = $(element);
    if (!element.data("timeago")) {
      element.data("timeago", { datetime: $t.datetime(element) });
      var text = $.trim(element.text());
      if (text.length > 0 && !($t.isTime(element) && element.attr("title"))) {
        element.attr("title", text);
      }
    }
    return element.data("timeago");
  }

  function inWords(date) {
    return $t.inWords(distance(date));
  }

  function distance(date) {
    return new Date().getTime() - date.getTime();
  }

  // fix for IE6 suckage
  document.createElement("abbr");
  document.createElement("time");
})(jQuery);
(function ($) {
  Drupal.behaviors.timeago = {
    attach: function (context) {
      $.extend($.timeago.settings, Drupal.settings.timeago);
      $("abbr.timeago, span.timeago, time.timeago", context).timeago();
    },
  };
})(jQuery);
// $Id: extlink.js,v 1.8 2010/05/26 01:25:56 quicksketch Exp $
(function ($) {
  Drupal.extlink = Drupal.extlink || {};

  Drupal.extlink.attach = function (context, settings) {
    // Strip the host name down, removing ports, subdomains, or www.
    var pattern = /^(([^\/:]+?\.)*)([^\.:]{4,})((\.[a-z]{1,4})*)(:[0-9]{1,5})?$/;
    var host = window.location.host.replace(pattern, "$3$4");
    var subdomain = window.location.host.replace(pattern, "$1");

    // Determine what subdomains are considered internal.
    var subdomains;
    if (settings.extlink.extSubdomains) {
      subdomains = "([^/]*\\.)?";
    } else if (subdomain == "www." || subdomain == "") {
      subdomains = "(www\\.)?";
    } else {
      subdomains = subdomain.replace(".", "\\.");
    }

    // Build regular expressions that define an internal link.
    var internal_link = new RegExp("^https?://" + subdomains + host, "i");

    // Extra internal link matching.
    var extInclude = false;
    if (settings.extlink.extInclude) {
      extInclude = new RegExp(settings.extlink.extInclude.replace(/\\/, "\\"));
    }

    // Extra external link matching.
    var extExclude = false;
    if (settings.extlink.extExclude) {
      extExclude = new RegExp(settings.extlink.extExclude.replace(/\\/, "\\"));
    }

    // Find all links which are NOT internal and begin with http (as opposed
    // to ftp://, javascript:, etc. other kinds of links.
    // In jQuery 1.1 and higher, we'd use a filter method here, but it is not
    // available in jQuery 1.0 (Drupal 5 default).
    var external_links = new Array();
    var mailto_links = new Array();
    var potential_links = $(
      "a:not(." +
        settings.extlink.extClass +
        ", ." +
        settings.extlink.mailtoClass +
        "), area:not(." +
        settings.extlink.extClass +
        ", ." +
        settings.extlink.mailtoClass +
        ")",
      context
    );
    var length = potential_links.length;
    var i, link;
    for (i = 0; i < length; i++) {
      // The link in this case is a native Link object, which means the host has
      // already been appended by the browser, even for local links.
      link = potential_links[i];
      try {
        var url = link.href.toLowerCase();
        if (
          url.indexOf("http") == 0 &&
          (!url.match(internal_link) ||
            (extInclude && url.match(extInclude))) &&
          !(extExclude && url.match(extExclude))
        ) {
          external_links.push(link);
        }
        // Do not include area tags with begin with mailto: (this prohibits
        // icons from being added to image-maps).
        else if (this.tagName != "AREA" && url.indexOf("mailto:") == 0) {
          mailto_links.push(link);
        }
      } catch (error) {
        // IE7 throws errors often when dealing with irregular links, such as:
        // <a href="node/10"></a> Empty tags.
        // <a href="http://user:pass@example.com">example</a> User:pass syntax.
        return false;
      }
    }
    if (settings.extlink.extClass) {
      Drupal.extlink.applyClassAndSpan(
        external_links,
        settings.extlink.extClass
      );
    }

    if (settings.extlink.mailtoClass) {
      Drupal.extlink.applyClassAndSpan(
        mailto_links,
        settings.extlink.mailtoClass
      );
    }

    if (settings.extlink.extTarget) {
      // Apply the target attribute to all links.
      $(external_links).attr("target", settings.extlink.extTarget);
    }

    if (settings.extlink.extAlert) {
      // Add pop-up click-through dialog.
      $(external_links).click(function (e) {
        return confirm(settings.extlink.extAlertText);
      });
    }

    // Work around for Internet Explorer box model problems.
    if (
      ($.support &&
        !($.support.boxModel === undefined) &&
        !$.support.boxModel) ||
      ($.browser.msie && parseInt($.browser.version) <= 7)
    ) {
      $("span.ext, span.mailto").css("display", "inline-block");
    }
  };

  /**
   * Apply a class and a trailing <span> to all links not containing images.
   *
   * @param links
   *   An array of DOM elements representing the links.
   * @param class_name
   *   The class to apply to the links.
   */
  Drupal.extlink.applyClassAndSpan = function (links, class_name) {
    var $links_to_process;
    if (parseFloat($().jquery) < 1.2) {
      $links_to_process = $(links).not("[img]");
    } else {
      var links_with_images = $(links).find("img").parents("a");
      $links_to_process = $(links).not(links_with_images);
    }
    $links_to_process.addClass(class_name);
    var i;
    var length = $links_to_process.length;
    for (i = 0; i < length; i++) {
      var $link = $($links_to_process[i]);
      if ($link.css("display") == "inline") {
        $link.after("<span class=" + class_name + "></span>");
      }
    }
  };

  Drupal.behaviors.extlink = Drupal.behaviors.extlink || {};
  Drupal.behaviors.extlink.attach = function (context, settings) {
    // Backwards compatibility, for the benefit of modules overriding extlink
    // functionality by defining an "extlinkAttach" global function.
    if (typeof extlinkAttach === "function") {
      extlinkAttach(context);
    } else {
      Drupal.extlink.attach(context, settings);
    }
  };
})(jQuery);
/**
 * @file views_load_more.js
 *
 * Handles the AJAX pager for the view_load_more plugin.
 */
(function ($) {
  /**
   * Provide a series of commands that the server can request the client perform.
   */
  Drupal.ajax.prototype.commands.viewsLoadMoreAppend = function (
    ajax,
    response,
    status
  ) {
    // Get information from the response. If it is not there, default to
    // our presets.
    var wrapper = response.selector ? $(response.selector) : $(ajax.wrapper);
    var method = response.method || ajax.method;
    var targetList = response.targetList || "";
    var effect = ajax.getEffect(response);
    var pager_selector = response.options.pager_selector
      ? response.options.pager_selector
      : ".pager-load-more";
    var attachment_selector = response.options.attachment_selector
      ? response.options.attachment_selector
      : "div.attachment";

    // We don't know what response.data contains: it might be a string of text
    // without HTML, so don't rely on jQuery correctly iterpreting
    // $(response.data) as new HTML rather than a CSS selector. Also, if
    // response.data contains top-level text nodes, they get lost with either
    // $(response.data) or $('<div></div>').replaceWith(response.data).
    var new_content_wrapped = $("<div></div>").html(response.data);
    var new_content = new_content_wrapped.contents();

    // For legacy reasons, the effects processing code assumes that new_content
    // consists of a single top-level element. Also, it has not been
    // sufficiently tested whether attachBehaviors() can be successfully called
    // with a context object that includes top-level text nodes. However, to
    // give developers full control of the HTML appearing in the page, and to
    // enable Ajax content to be inserted in places where DIV elements are not
    // allowed (e.g., within TABLE, TR, and SPAN parents), we check if the new
    // content satisfies the requirement of a single top-level element, and
    // only use the container DIV created above when it doesn't. For more
    // information, please see http://drupal.org/node/736066.
    if (new_content.length != 1 || new_content.get(0).nodeType != 1) {
      new_content = new_content_wrapped;
    }
    // If removing content from the wrapper, detach behaviors first.
    var settings = response.settings || ajax.settings || Drupal.settings;
    Drupal.detachBehaviors(wrapper, settings);
    if ($.waypoints != undefined) {
      $.waypoints("refresh");
    }

    // Set up our default query options. This is for advance users that might
    // change there views layout classes. This allows them to write there own
    // jquery selector to replace the content with.
    // Provide sensible defaults for unordered list, ordered list and table
    // view styles.
    var content_query =
      targetList && !response.options.content
        ? "> .view-content " + targetList
        : response.options.content || "> .view-content";

    // If we're using any effects. Hide the new content before adding it to the DOM.
    if (effect.showEffect != "show") {
      new_content.find(content_query).children().hide();
    }

    // Update the pager(s).
    // Find both for the wrapper as the newly loaded content the direct child
    // .item-list in case of nested pagers.
    var pagers = wrapper.find(pager_selector);
    var pagers_new = new_content.find(pager_selector);
    if (pagers.length > 0 && pagers_new.length > 0) {
      pagers.each(function (i) {
        $(this).replaceWith(pagers_new[i]);
      });
    }

    // Add the new content to the page.
    wrapper
      .find(content_query)
      [method](new_content.find(content_query).children());
    // Re-class new content.
    reClassContent(wrapper.find(content_query));

    // Add new content for attachments.
    var new_content_attachments = new_content
      .find(content_query)
      .parent()
      .find(attachment_selector)
      .children();
    // Iterate through each attachment.
    wrapper
      .find(content_query)
      .parent()
      .find(attachment_selector)
      .children()
      .each(function (i, settings) {
        // Append new elements only if there are any, and pager inheritance is
        // enabled.
        if ($(new_content_attachments[i]).find(content_query).length == 1) {
          var this_wrapper = this;
          if (response.attachment_inherit_pager) {
            $.each(response.attachment_inherit_pager, function (index, item) {
              if (new_content_attachments[i].classList.contains(item)) {
                $(this_wrapper)
                  .find(content_query)
                  [method](
                    $(new_content_attachments[i]).find(content_query).children()
                  );
              }
            });
          }
        }

        // Re-class new content.
        reClassContent($(this).find(content_query));
      });

    if (effect.showEffect != "show") {
      wrapper
        .find(content_query)
        .children(":not(:visible)")
        [effect.showEffect](effect.showSpeed);
    }

    // Additional processing over new content
    wrapper.trigger("views_load_more.new_content", new_content.clone());

    // Attach all JavaScript behaviors to the new content
    // Remove the Jquery once Class, TODO: There needs to be a better
    // way of doing this, look at .removeOnce() :-/
    var classes = wrapper.attr("class");
    var onceClass = classes.match(/jquery-once-[0-9]*-[a-z]*/);
    wrapper.removeClass(onceClass[0]);
    settings = response.settings || ajax.settings || Drupal.settings;
    Drupal.attachBehaviors(wrapper, settings);
  };

  /**
   * Re-class the loaded content.
   *
   * @param content
   *
   * @todo this is faulty in many ways. first of which is that user may have
   * configured view to not have these classes at all.
   */
  var reClassContent = function (content) {
    var row = 1;
    $(content)
      .children()
      .removeClass(
        "views-row-first views-row-last views-row-odd views-row-even"
      )
      .filter(":first")
      .addClass("views-row-first")
      .end()
      .filter(":last")
      .addClass("views-row-last")
      .end()
      .filter(":even")
      .addClass("views-row-odd")
      .end()
      .filter(":odd")
      .addClass("views-row-even")
      .end()
      .each(function () {
        var classes = $(this).attr("class");
        var indexClass = classes.match(/views-row-[0-9]+/);
        if (indexClass) {
          $(this)
            .removeClass(indexClass[0])
            .addClass("views-row-" + row++);
        }
      });
  };

  /**
   * Attaches the AJAX behavior to Views Load More waypoint support.
   */
  Drupal.behaviors.ViewsLoadMore = {
    attach: function (context, settings) {
      var default_opts = {
        offset: "100%",
      };

      if (
        settings &&
        settings.viewsLoadMore &&
        settings.views &&
        settings.views.ajaxViews
      ) {
        $.each(settings.viewsLoadMore, function (i, setting) {
          var view =
              ".view-id-" +
              setting.view_name +
              ".view-display-id-" +
              setting.view_display_id +
              " .pager-next a",
            opts = {};

          $.extend(opts, default_opts, settings.viewsLoadMore[i].opts);

          $(view).waypoint("destroy");
          $(view).waypoint(function (event, direction) {
            $(view).click();
          }, opts);
        });
      }
    },
    detach: function (context, settings, trigger) {
      if (
        settings &&
        settings.viewsLoadMore &&
        settings.views &&
        settings.views.ajaxViews
      ) {
        $.each(settings.viewsLoadMore, function (i, setting) {
          var view =
            ".view-id-" +
            setting.view_name +
            ".view-display-id-" +
            setting.view_display_id;
          if ($(context).is(view)) {
            $(".pager-next a", view).waypoint("destroy");
          } else {
            $(view, context).waypoint("destroy");
          }
        });
      }
    },
  };
})(jQuery);
/**
 * @file
 * Some basic behaviors and utility functions for Views.
 */
(function ($) {
  Drupal.Views = {};

  /**
   * JQuery UI tabs, Views integration component.
   */
  Drupal.behaviors.viewsTabs = {
    attach: function (context) {
      if ($.viewsUi && $.viewsUi.tabs) {
        $("#views-tabset").once("views-processed").viewsTabs({
          selectedClass: "active",
        });
      }

      $("a.views-remove-link")
        .once("views-processed")
        .click(function (event) {
          var id = $(this).attr("id").replace("views-remove-link-", "");
          $("#views-row-" + id).hide();
          $("#views-removed-" + id).attr("checked", true);
          event.preventDefault();
        });
      /**
       * Here is to handle display deletion
       * (checking in the hidden checkbox and hiding out the row).
       */
      $("a.display-remove-link")
        .addClass("display-processed")
        .click(function () {
          var id = $(this).attr("id").replace("display-remove-link-", "");
          $("#display-row-" + id).hide();
          $("#display-removed-" + id).attr("checked", true);
          return false;
        });
    },
  };

  /**
   * Helper function to parse a querystring.
   */
  Drupal.Views.parseQueryString = function (query) {
    var args = {};
    var pos = query.indexOf("?");
    if (pos != -1) {
      query = query.substring(pos + 1);
    }
    var pairs = query.split("&");
    for (var i in pairs) {
      if (typeof pairs[i] == "string") {
        var pair = pairs[i].split("=");
        // Ignore the 'q' path argument, if present.
        if (pair[0] != "q" && pair[1]) {
          args[
            decodeURIComponent(pair[0].replace(/\+/g, " "))
          ] = decodeURIComponent(pair[1].replace(/\+/g, " "));
        }
      }
    }
    return args;
  };

  /**
   * Helper function to return a view's arguments based on a path.
   */
  Drupal.Views.parseViewArgs = function (href, viewPath) {
    // Provide language prefix.
    if (Drupal.settings.pathPrefix) {
      var viewPath = Drupal.settings.pathPrefix + viewPath;
    }
    var returnObj = {};
    var path = Drupal.Views.getPath(href);
    // Ensure we have a correct path.
    if (viewPath && path.substring(0, viewPath.length + 1) == viewPath + "/") {
      var args = decodeURIComponent(
        path.substring(viewPath.length + 1, path.length)
      );
      returnObj.view_args = args;
      returnObj.view_path = path;
    }
    return returnObj;
  };

  /**
   * Strip off the protocol plus domain from an href.
   */
  Drupal.Views.pathPortion = function (href) {
    // Remove e.g. http://example.com if present.
    var protocol = window.location.protocol;
    if (href.substring(0, protocol.length) == protocol) {
      // 2 is the length of the '//' that normally follows the protocol.
      href = href.substring(href.indexOf("/", protocol.length + 2));
    }
    return href;
  };

  /**
   * Return the Drupal path portion of an href.
   */
  Drupal.Views.getPath = function (href) {
    href = Drupal.Views.pathPortion(href);
    href = href.substring(Drupal.settings.basePath.length, href.length);
    // 3 is the length of the '?q=' added to the url without clean urls.
    if (href.substring(0, 3) == "?q=") {
      href = href.substring(3, href.length);
    }
    var chars = ["#", "?", "&"];
    for (var i in chars) {
      if (href.indexOf(chars[i]) > -1) {
        href = href.substr(0, href.indexOf(chars[i]));
      }
    }
    return href;
  };
})(jQuery);
(function ($) {
  /**
   * A progressbar object. Initialized with the given id. Must be inserted into
   * the DOM afterwards through progressBar.element.
   *
   * method is the function which will perform the HTTP request to get the
   * progress bar state. Either "GET" or "POST".
   *
   * e.g. pb = new progressBar('myProgressBar');
   *      some_element.appendChild(pb.element);
   */
  Drupal.progressBar = function (id, updateCallback, method, errorCallback) {
    var pb = this;
    this.id = id;
    this.method = method || "GET";
    this.updateCallback = updateCallback;
    this.errorCallback = errorCallback;

    // The WAI-ARIA setting aria-live="polite" will announce changes after users
    // have completed their current activity and not interrupt the screen reader.
    this.element = $('<div class="progress" aria-live="polite"></div>').attr(
      "id",
      id
    );
    this.element.html(
      '<div class="bar"><div class="filled"></div></div>' +
        '<div class="percentage"></div>' +
        '<div class="message">&nbsp;</div>'
    );
  };

  /**
   * Set the percentage and status message for the progressbar.
   */
  Drupal.progressBar.prototype.setProgress = function (percentage, message) {
    if (percentage >= 0 && percentage <= 100) {
      $("div.filled", this.element).css("width", percentage + "%");
      $("div.percentage", this.element).html(percentage + "%");
    }
    $("div.message", this.element).html(message);
    if (this.updateCallback) {
      this.updateCallback(percentage, message, this);
    }
  };

  /**
   * Start monitoring progress via Ajax.
   */
  Drupal.progressBar.prototype.startMonitoring = function (uri, delay) {
    this.delay = delay;
    this.uri = uri;
    this.sendPing();
  };

  /**
   * Stop monitoring progress via Ajax.
   */
  Drupal.progressBar.prototype.stopMonitoring = function () {
    clearTimeout(this.timer);
    // This allows monitoring to be stopped from within the callback.
    this.uri = null;
  };

  /**
   * Request progress data from server.
   */
  Drupal.progressBar.prototype.sendPing = function () {
    if (this.timer) {
      clearTimeout(this.timer);
    }
    if (this.uri) {
      var pb = this;
      // When doing a post request, you need non-null data. Otherwise a
      // HTTP 411 or HTTP 406 (with Apache mod_security) error may result.
      $.ajax({
        type: this.method,
        url: this.uri,
        data: "",
        dataType: "json",
        success: function (progress) {
          // Display errors.
          if (progress.status == 0) {
            pb.displayError(progress.data);
            return;
          }
          // Update display.
          pb.setProgress(progress.percentage, progress.message);
          // Schedule next timer.
          pb.timer = setTimeout(function () {
            pb.sendPing();
          }, pb.delay);
        },
        error: function (xmlhttp) {
          pb.displayError(Drupal.ajaxError(xmlhttp, pb.uri));
        },
      });
    }
  };

  /**
   * Display errors on the page.
   */
  Drupal.progressBar.prototype.displayError = function (string) {
    var error = $('<div class="messages error"></div>').html(string);
    $(this.element).before(error).hide();

    if (this.errorCallback) {
      this.errorCallback(this);
    }
  };
})(jQuery);
/**
 * @file
 * Handles AJAX fetching of views, including filter submission and response.
 */
(function ($) {
  /**
   * Attaches the AJAX behavior to exposed filter forms and key views links.
   */
  Drupal.behaviors.ViewsAjaxView = {};
  Drupal.behaviors.ViewsAjaxView.attach = function () {
    if (
      Drupal.settings &&
      Drupal.settings.views &&
      Drupal.settings.views.ajaxViews
    ) {
      $.each(Drupal.settings.views.ajaxViews, function (i, settings) {
        Drupal.views.instances[i] = new Drupal.views.ajaxView(settings);
      });
    }
  };

  Drupal.views = {};
  Drupal.views.instances = {};

  /**
   * JavaScript object for a certain view.
   */
  Drupal.views.ajaxView = function (settings) {
    var selector = ".view-dom-id-" + settings.view_dom_id;
    this.$view = $(selector);

    // Retrieve the path to use for views' ajax.
    var ajax_path = Drupal.settings.views.ajax_path;

    // If there are multiple views this might've ended up showing up multiple
    // times.
    if (ajax_path.constructor.toString().indexOf("Array") != -1) {
      ajax_path = ajax_path[0];
    }

    // Check if there are any GET parameters to send to views.
    var queryString = window.location.search || "";
    if (queryString !== "") {
      // Remove the question mark and Drupal path component if any.
      var queryString = queryString
        .slice(1)
        .replace(/q=[^&]+&?|&?render=[^&]+/, "");
      if (queryString !== "") {
        // If there is a '?' in ajax_path, clean url are on and & should be
        // used to add parameters.
        queryString = (/\?/.test(ajax_path) ? "&" : "?") + queryString;
      }
    }

    this.element_settings = {
      url: ajax_path + queryString,
      submit: settings,
      setClick: true,
      event: "click",
      selector: selector,
      progress: {
        type: "throbber",
      },
    };

    this.settings = settings;

    // Add the ajax to exposed forms.
    this.$exposed_form = $(
      "#views-exposed-form-" +
        settings.view_name.replace(/_/g, "-") +
        "-" +
        settings.view_display_id.replace(/_/g, "-")
    );
    this.$exposed_form.once(jQuery.proxy(this.attachExposedFormAjax, this));

    // Store Drupal.ajax objects here for all pager links.
    this.links = [];

    // Add the ajax to pagers.
    this.$view.once(jQuery.proxy(this.attachPagerAjax, this));

    // Add a trigger to update this view specifically. In order to trigger a
    // refresh use the following code.
    //
    // @code
    // jQuery('.view-name').trigger('RefreshView');
    // @endcode
    // Add a trigger to update this view specifically.
    var self_settings = this.element_settings;
    self_settings.event = "RefreshView";
    var self = this;
    this.$view.once("refresh", function () {
      self.refreshViewAjax = new Drupal.ajax(
        self.selector,
        self.$view,
        self_settings
      );
    });
  };

  Drupal.views.ajaxView.prototype.attachExposedFormAjax = function () {
    var button = $(
      "input[type=submit], button[type=submit], input[type=image]",
      this.$exposed_form
    );
    button = button[0];

    // Call the autocomplete submit before doing AJAX.
    $(button).click(function () {
      if (Drupal.autocompleteSubmit) {
        Drupal.autocompleteSubmit();
      }
    });

    this.exposedFormAjax = new Drupal.ajax(
      $(button).attr("id"),
      button,
      this.element_settings
    );
  };

  /**
   * Attach the ajax behavior to each link.
   */
  Drupal.views.ajaxView.prototype.attachPagerAjax = function () {
    this.$view
      .find(
        "ul.pager > li > a, ol.pager > li > a, th.views-field a, .attachment .views-summary a"
      )
      .each(jQuery.proxy(this.attachPagerLinkAjax, this));
  };

  /**
   * Attach the ajax behavior to a single link.
   */
  Drupal.views.ajaxView.prototype.attachPagerLinkAjax = function (id, link) {
    var $link = $(link);
    var viewData = {};
    var href = $link.attr("href");
    // Don't attach to pagers inside nested views.
    if (
      $link.closest(".view")[0] !== this.$view[0] &&
      $link.closest(".view").parent().hasClass("attachment") === false
    ) {
      return;
    }

    // Provide a default page if none has been set. This must be done
    // prior to merging with settings to avoid accidentally using the
    // page landed on instead of page 1.
    if (typeof viewData.page === "undefined") {
      viewData.page = 0;
    }

    // Construct an object using the settings defaults and then overriding
    // with data specific to the link.
    $.extend(
      viewData,
      this.settings,
      Drupal.Views.parseQueryString(href),
      // Extract argument data from the URL.
      Drupal.Views.parseViewArgs(href, this.settings.view_base_path)
    );

    // For anchor tags, these will go to the target of the anchor rather
    // than the usual location.
    $.extend(
      viewData,
      Drupal.Views.parseViewArgs(href, this.settings.view_base_path)
    );

    this.element_settings.submit = viewData;
    this.pagerAjax = new Drupal.ajax(false, $link, this.element_settings);
    this.links.push(this.pagerAjax);
  };

  Drupal.ajax.prototype.commands.viewsScrollTop = function (
    ajax,
    response,
    status
  ) {
    // Scroll to the top of the view. This will allow users
    // to browse newly loaded content after e.g. clicking a pager
    // link.
    var offset = $(response.selector).offset();
    // We can't guarantee that the scrollable object should be
    // the body, as the view could be embedded in something
    // more complex such as a modal popup. Recurse up the DOM
    // and scroll the first element that has a non-zero top.
    var scrollTarget = response.selector;
    while ($(scrollTarget).scrollTop() == 0 && $(scrollTarget).parent()) {
      scrollTarget = $(scrollTarget).parent();
    }
    // Only scroll upward.
    if (offset.top - 10 < $(scrollTarget).scrollTop()) {
      $(scrollTarget).animate({ scrollTop: offset.top - 10 }, 500);
    }
  };
})(jQuery);
(function ($) {
  Drupal.behaviors.captcha = {
    attach: function (context) {
      // Turn off autocompletion for the CAPTCHA response field.
      // We do it here with JavaScript (instead of directly in the markup)
      // because this autocomplete attribute is not standard and
      // it would break (X)HTML compliance.
      $("#edit-captcha-response").attr("autocomplete", "off");
    },
  };

  Drupal.behaviors.captchaAdmin = {
    attach: function (context) {
      // Add onclick handler to checkbox for adding a CAPTCHA description
      // so that the textfields for the CAPTCHA description are hidden
      // when no description should be added.
      // @todo: div.form-item-captcha-description depends on theming, maybe
      // it's better to add our own wrapper with id (instead of a class).
      $("#edit-captcha-add-captcha-description").click(function () {
        if ($("#edit-captcha-add-captcha-description").is(":checked")) {
          // Show the CAPTCHA description textfield(s).
          $("div.form-item-captcha-description").show("slow");
        } else {
          // Hide the CAPTCHA description textfield(s).
          $("div.form-item-captcha-description").hide("slow");
        }
      });
      // Hide the CAPTCHA description textfields if option is disabled on page load.
      if (!$("#edit-captcha-add-captcha-description").is(":checked")) {
        $("div.form-item-captcha-description").hide();
      }
    },
  };
})(jQuery);
(function ($) {
  $(document).bind("cbox_complete", function () {
    if ($.isFunction($.colorbox) && $.isFunction($.colorbox.resize)) {
      $.colorbox.resize();
    }
  });
})(jQuery);
/* Based on overlay-parent.js,v 1.22 2010/01/14 04:06:54 webchick */

(function ($) {
  // Only act if overlay is found and we are supposed to show OpenID in overlays.
  if (!Drupal.overlay) {
    return;
  }

  // Drupal.overlay.getInternalUrl is being added in Drupal 7.38.
  if (typeof Drupal.overlay.getInternalUrl === "undefined") {
    /**
     * Constructs an internal URL (relative to this site) from the provided path.
     *
     * For example, if the provided path is 'admin' and the site is installed at
     * http://example.com/drupal, this function will return '/drupal/admin'.
     *
     * @param path
     *   The internal path, without any leading slash.
     *
     * @return
     *   The internal URL derived from the provided path, or null if a valid
     *   internal path cannot be constructed (for example, if an attempt to create
     *   an external link is detected).
     */
    Drupal.overlay.getInternalUrl = function (path) {
      var url = Drupal.settings.basePath + path;
      if (!this.isExternalLink(url)) {
        return url;
      }
    };
  }

  /**
   * Event handler: opens or closes the overlay based on the current URL fragment.
   *
   * @param event
   *   Event being triggered, with the following restrictions:
   *   - event.type: hashchange
   *   - event.currentTarget: document
   *
   * Overrides the same method from overlay-parent.js
   */
  Drupal.overlay.eventhandlerOperateByURLFragment = function (event) {
    // If we changed the hash to reflect an internal redirect in the overlay,
    // its location has already been changed, so don't do anything.
    if ($.data(window.location, window.location.href) === "redirect") {
      $.data(window.location, window.location.href, null);
      return;
    }

    // Get the overlay URL from the current URL fragment.
    var internalUrl = null;
    var state = $.bbq.getState("overlay");
    if (state) {
      internalUrl = this.getInternalUrl(state);
    }
    if (internalUrl) {
      // Append render variable, so the server side can choose the right
      // rendering and add child frame code to the page if needed.
      var url = $.param.querystring(internalUrl, { render: "overlay" });

      this.open(url);
      this.resetActiveClass(this.getPath(Drupal.settings.basePath + state));

      // This is the code section that extends the original overlay javascript
      // function.
      var isFactory = state.indexOf("acsf-openid-factory/") > -1;
      if (isFactory) {
        // Ok, now we can tell the parent window we're ready.
        // @todo revisit this to use the overlay API more properly.
        $(this.inactiveFrame).addClass("overlay-active");
      }
    }
    // If there is no overlay URL in the fragment and the overlay is (still)
    // open, close the overlay.
    else if (this.isOpen && !this.isClosing) {
      this.close();
      this.resetActiveClass(this.getPath(window.location));
    }
  };
})(jQuery);
(function ($) {
  Drupal.behaviors.gardensHelp = {
    attach: function (context) {
      Drupal.gardensHelp.init(context);
    },
  };

  Drupal.gardensHelp = Drupal.gardensHelp || {};

  Drupal.gardensHelp.init = function (context) {
    // Move help area to inside the toolbar, so the toolbar resizes with it.
    var helpHeader = $("#help-header").html();
    $("#help-header").remove();
    $("#toolbar").prepend(
      '<div id="help-header" style="display: none;">' + helpHeader + "</div>"
    );

    // Bind our click handler to the help item.
    $("#toolbar-user .help a", context).bind("click", Drupal.gardensHelp.open);

    // Bind search submission handler to search form.
    $("#gardens-help-search-form").bind(
      "submit",
      Drupal.gardensHelp.searchSubmit
    );

    // Bind links in the help header so that they will open a single new window
    $("#help-header a").bind("click", Drupal.gardensHelp.helpClick);
  };

  Drupal.gardensHelp.open = function () {
    $("#help-header").slideToggle("slow", Drupal.gardensHelp.positionOverlay);
    $("#toolbar-user .help").toggleClass("help-active");
    // Blur the link so that the :active suedo-class doesn't cause it to have the grey background
    $("#toolbar-user .help a").blur();
    return false;
  };

  Drupal.gardensHelp.positionOverlay = function () {
    // As the toolbar is an overlay displaced region, overlay should be
    // notified of it's height change to adapt its position.
    $("body").css("paddingTop", Drupal.toolbar.height());
    $(window).triggerHandler("resize.overlay-event");

    // Porting the fix for IE and the slideToggle from the Gardener
    var wrapper = $(this).parent();
    if (wrapper.css("zoom") != 1) {
      wrapper.css("zoom", 1);
    } else {
      wrapper.css("zoom", "");
    }
  };

  Drupal.gardensHelp.searchSubmit = function (event) {
    // This method needs to work the same way as the link click handler so that it doesn't create an additional window
    event.preventDefault();
    if (Drupal.gardensHelp.helpWindow) {
      Drupal.gardensHelp.helpWindow.close();
    }
    // The Gardener will read the URL arguments and take care of the lack of a POST submition
    Drupal.gardensHelp.helpWindow = window.open(
      Drupal.settings.gardenerHelpSearchURL +
        "/search/apachesolr_search/" +
        $("#gardens-help-search-query").val(),
      "gardens_help"
    );
  };

  Drupal.gardensHelp.helpClick = function (event) {
    // Stop normal link behavior
    event.preventDefault();

    // If there has already been a window created by the help drop down, close it.  Creating a new window will put focus on that window.
    if (Drupal.gardensHelp.helpWindow) {
      Drupal.gardensHelp.helpWindow.close();
    }
    Drupal.gardensHelp.helpWindow = window.open(
      $(event.target).attr("href"),
      "gardens_help"
    );
  };
})(jQuery);
/*jslint bitwise: true, eqeqeq: true, immed: true, newcap: true, nomen: false,
 onevar: false, plusplus: false, regexp: true, undef: true, white: true, indent: 2
 browser: true */

/*global jQuery: true Drupal: true window: true ThemeBuilder: true */

(function ($) {
  /**
   * Override for the extlink module.
   *
   * ThemeBuilder requires the <a> and <span> tags for external links to have
   * different classes, so they can be targeted separately.
   */
  Drupal.extlink = Drupal.extlink || {};

  Drupal.behaviors.extlink = Drupal.behaviors.extlink || {};

  Drupal.behaviors.extlink.attach = function (context, settings) {
    // Add "-link" to the end of the class name that's applied to both <a> and
    // <span> tags. We will remove it later before applying it to <span> tags.
    if (Drupal.settings.extlink && Drupal.settings.extlink.extClass) {
      Drupal.settings.extlink.extClass =
        Drupal.settings.extlink.extClass + "-link";
    }
    if ($.isFunction(Drupal.extlink.attach)) {
      Drupal.extlink.attach(context, settings);
    }
  };

  /**
   * Overrides method from the extlink module.
   *
   * Change the class name for the <span> that comes after external links,
   * so that it's "ext", not "ext-link".
   */
  Drupal.extlink.applyClassAndSpan = function (links, class_name) {
    var $links_to_process;
    if (parseFloat($().jquery) < 1.2) {
      $links_to_process = $(links).not("[img]");
    } else {
      var links_with_images = $(links).find("img").parents("a");
      $links_to_process = $(links).not(links_with_images);
    }
    $links_to_process.addClass(class_name);
    var i;
    var length = $links_to_process.length;
    // If we've added "-link" to the end of the class name, remove it for
    // <span> tags. We want "-link" only at the end of the link class.
    var span_class = class_name.replace(/-link$/, "");
    for (i = 0; i < length; i++) {
      var $link = $($links_to_process[i]);
      if ($link.css("display") === "inline") {
        $link.after("<span class=" + span_class + "></span>");
      }
    }
  };

  /**
   * Stop the rotation in the Rotating Banner when the ThemeBuilder is open
   */
  Drupal.behaviors.RotatingBannerInThemeBuilder = {
    attach: function (context) {
      if ($("body").hasClass("themebuilder")) {
        $(".rb-slides").each(function () {
          if ($(this).cycle) {
            $(this).cycle("stop");
          }
        });
      }
    },
  };

  /**
   * Activate Superfish Pulldown menus
   */
  Drupal.behaviors.GardensFeaturesPulldownMenus = {
    attach: function (context, settings) {
      Drupal.behaviors.GardensFeaturesPulldownMenus.settings = {
        appearance: {
          gutter: 10,
          push: 2,
          overlapOffset: 1.4545,
        },
      };

      if (settings) {
        $.extend(
          Drupal.behaviors.GardensFeaturesPulldownMenus.settings,
          settings
        );
      }

      if ($().superfish) {
        $(".content > .menu", "#page .stack-navigation")
          .once("pulldown", function () {
            var ghi = Drupal.settings.gardens_hoverintent || {
              enabled: true,
              sensitivity: 2,
              interval: 300,
              timeout: 500,
            };
            $(this).superfish({
              hoverClass: "menu-dropdown-hover",
              delay: 150,
              dropShadows: false,
              speed: 300,
              autoArrows: true,
              onBeforeShow:
                Drupal.behaviors.GardensFeaturesPulldownMenus.adjustPulldown,
              disableHI: !ghi.enabled,
              HISensitivity: ghi.sensitivity,
              HIInterval: ghi.interval,
              HITimeout: ghi.timeout,
            });
          })
          .addClass("pulldown");
      }
    },
  };

  /**
   * This function is run to adjust the placement of a pulldown.
   *
   * @param {DomElement} this
   *   The pulldown (ul) that is currently being shown.
   */
  Drupal.behaviors.GardensFeaturesPulldownMenus.adjustPulldown = function () {
    $(this).css({ display: "block", visibility: "hidden" });
    Drupal.behaviors.GardensFeaturesPulldownMenus.adjustPulldownPlacement(
      $(this)
    );
    $(this).css({ display: "none", visibility: "visible" });
  };

  /**
   * Progressively increases the width of the pulldown by 33% until
   * the height of each item is less than the line height
   *
   * @param {DomElement} pulldown
   *   The pulldown (ul) to be positioned
   * @param {DomElement} item
   *   The anchor tag of an item in the list
   * @param {int} lineHeight
   *   The line height of the item's anchor tag. This is passed in
   *   because it does not need to be calculated more than once
   * @param {int} safety
   *   A counter to prevent recursive errors. The width of the pulldown
   *   will be adjusted at most 5 times currently.
   */
  Drupal.behaviors.GardensFeaturesPulldownMenus.adjustPulldownWidth = function (
    pulldown,
    item,
    lineHeight,
    safety
  ) {
    var width = pulldown.width();
    var height = item.height();
    var wrapped = height - lineHeight > 2 ? true : false; // Provide a little give with a 2 pixel fudge factor for IE7
    if (wrapped && safety < 5) {
      pulldown.animate(
        {
          width: width * 1.2,
        },
        {
          duration: 0,
          queue: true,
          complete: function () {
            safety += 1;
            Drupal.behaviors.GardensFeaturesPulldownMenus.adjustPulldownWidth(
              pulldown,
              item,
              lineHeight,
              safety
            );
          },
        }
      );
    }
  };

  /**
   * Moves a pulldown left or right, according to its alignment, after its
   * parent's width has been adjusted
   *
   * @param {DomElement} pulldown
   *   The pulldown (ul) to be positioned
   */
  Drupal.behaviors.GardensFeaturesPulldownMenus.adjustPulldownPlacement = function (
    element
  ) {
    var pulldown = {};
    pulldown.el = element;
    var isRTL = $("html").attr("dir") === "rtl";

    // Wipe out any previous positioning
    pulldown.el.removeAttr("style");

    // Get the depth of the sub menu
    // 0 is first tier sub menu
    // 1 is second tier sub menu, etc
    var depth = pulldown.el.parentsUntil(".pulldown-processed").filter(".menu")
      .length;
    pulldown.parent = {};
    pulldown.parent.el = element.prev("a");
    pulldown.parent.css = {
      lineHeight: Drupal.behaviors.GardensFeaturesPulldownMenus._stripPX(
        pulldown.parent.el.css("line-height")
      ),
      padding: {
        top: Drupal.behaviors.GardensFeaturesPulldownMenus._stripPX(
          pulldown.parent.el.css("padding-top")
        ),
      },
      margin: {
        top: Drupal.behaviors.GardensFeaturesPulldownMenus._stripPX(
          pulldown.parent.el.css("margin-top")
        ),
      },
    };
    // Only consider pulldowns, not the main menu items
    // Basic placement without edge detection
    var root = {};
    root.el = pulldown.el.parents(".pulldown-processed li .menu");
    if (root.el && root.el.length > 0) {
      pulldown.el.css({
        left: root.el.width(),
      });
    }
    // Get the viewport and scroll information
    var viewport = {};
    viewport.width = $(window).width(); // Width of the visible viewport
    viewport.height = $(window).height(); // Height of the visible viewport
    viewport.scroll = {};
    viewport.scroll.top = $(window).scrollTop();
    pulldown.pos = pulldown.el.position();
    // pushDir corresponds to the RTL setting
    var pushDir = isRTL ? "right" : "left";
    // handDir corresponds to which edge of the screen the menus might collide with. It is the opposite
    // of pushDir.
    var hangDir = pushDir === "right" ? "left" : "right";
    // Move the pulldown back to its origin if we moved it because of edge correction previously
    var prevCorrection = Drupal.behaviors.GardensFeaturesPulldownMenus._stripPX(
      pulldown.el.css(pushDir)
    );
    if (prevCorrection < 0) {
      pulldown.el.css[pushDir] = pulldown.pos[pushDir] = 0;
    }
    // Now check for edge collision
    pulldown.offset = pulldown.el.offset();
    if (pulldown.offset) {
      pulldown.width = pulldown.el.outerWidth(false);
      pulldown.height = pulldown.el.outerHeight(false);
      pulldown.edge = {};
      pulldown.edge.left = pulldown.offset.left;
      pulldown.edge.right = pulldown.offset.left + pulldown.width;
      pulldown.edge.bottom = pulldown.offset.top + pulldown.height;
      pulldown.hang = {};
      pulldown.hang.left = pulldown.edge.left;
      pulldown.hang.right = viewport.width - pulldown.edge.right;
      pulldown.hang.bottom =
        viewport.height +
        viewport.scroll.top -
        pulldown.edge.bottom -
        Drupal.behaviors.GardensFeaturesPulldownMenus.settings.appearance
          .gutter;
      pulldown.hang.bottomModified = 1;
      pulldown.correction = {};
      pulldown.correction.left =
        pulldown.pos.left +
        pulldown.hang.right -
        Drupal.behaviors.GardensFeaturesPulldownMenus.settings.appearance
          .gutter;
      pulldown.correction.right =
        depth > 0
          ? pulldown.hang.left +
            pulldown.width -
            Drupal.behaviors.GardensFeaturesPulldownMenus.settings.appearance
              .gutter
          : pulldown.hang.left -
            Drupal.behaviors.GardensFeaturesPulldownMenus.settings.appearance
              .gutter;

      // Move the pulldown back onto the screen
      if (pulldown.hang[hangDir] <= 0) {
        var leftVal = pushDir === "left" ? pulldown.correction.left : "auto";
        var rightVal = pushDir === "right" ? pulldown.correction.right : "auto";
        pulldown.el.css({
          left: leftVal,
          right: rightVal,
        });
        // Push the pulldown down half a line height if it is a sub-sub menu so that sub menu items aren't completely occluded.
        if (depth > 0) {
          var top =
            pulldown.parent.css.lineHeight /
              Drupal.behaviors.GardensFeaturesPulldownMenus.settings.appearance
                .overlapOffset +
            pulldown.parent.css.padding.top +
            pulldown.parent.css.margin.top;
          pulldown.el.css("top", top);
          pulldown.hang.bottomModified = pulldown.hang.bottom - top;
        }
      }
      // Move the pulldown up if it hangs off the bottom
      if (pulldown.hang.bottom <= 0 || pulldown.hang.bottomModified <= 0) {
        pulldown.el.css("top", pulldown.pos.top + pulldown.hang.bottom);
      }
    }
  };

  /**
   * Utility function to remove 'px' from calculated values.  The function assumes that
   * that unit 'value' is pixels.
   *
   * @param {String} value
   *   The String containing the CSS value that includes px.
   * @return {int}
   *   Value stripped of 'px' and casted as a number or NaN if 'px' is not found in the string.
   */
  Drupal.behaviors.GardensFeaturesPulldownMenus._stripPX = function (value) {
    if (value) {
      var index = value.indexOf("px");
      if (index === -1) {
        return NaN;
      } else {
        return Number(value.substring(0, index));
      }
    } else {
      return NaN;
    }
  };

  /**
   * Add a "Show/Hide disabled views" toggle link to the Views list on
   * admin/structure/views, similar to the "Show/Hide row weights" link on
   * tabledrag tables.
   */
  Drupal.behaviors.GardensFeaturesViewsListFilter = {
    attach: function (context, settings) {
      $(
        "body.page-admin-structure-views table#ctools-export-ui-list-items"
      ).once("gardens-features-views-list-filter", function () {
        var $table = $(this);

        // Remove any prior links created (for when table gets replaced by AJAX)
        $(".gardens-features-toggle-disabled-wrapper").remove();

        // Create the toggle link, initialized to reflect that all rows are
        // currently shown.
        var $link = $(
          '<a href="#" class="gardens-features-toggle-disabled gardens-features-toggle-disabled-show"></a>'
        )
          .text(Drupal.t("Hide disabled views"))
          .click(function () {
            if ($(this).hasClass("gardens-features-toggle-disabled-show")) {
              $(this).removeClass("gardens-features-toggle-disabled-show");
              $(this).addClass("gardens-features-toggle-disabled-hide");
              $(".ctools-export-ui-disabled", $table).hide();
              if (
                $("tbody tr", $table).length ===
                $(".ctools-export-ui-disabled", $table).length
              ) {
                $("tbody", $table).prepend(
                  '<tr class="gardens-features-toggle-disabled-empty odd"><td colspan="5">' +
                    Drupal.t("No enabled views found.") +
                    "</td></tr>"
                );
              }
              $.cookie(
                "Drupal.GardensFeaturesViewsListFilter.showDisabled",
                0,
                { path: Drupal.settings.basePath, expires: 365 }
              );
              $(this).text(Drupal.t("Show disabled views"));
            } else {
              $(this).removeClass("gardens-features-toggle-disabled-hide");
              $(this).addClass("gardens-features-toggle-disabled-show");
              $(".ctools-export-ui-disabled", $table).show();
              $(".gardens-features-toggle-disabled-empty", $table).remove();
              $.cookie(
                "Drupal.GardensFeaturesViewsListFilter.showDisabled",
                1,
                { path: Drupal.settings.basePath, expires: 365 }
              );
              $(this).text(Drupal.t("Hide disabled views"));
            }
            return false;
          });

        // Add it before the table.
        $table.before(
          $link
            .wrap(
              '<div class="gardens-features-toggle-disabled-wrapper"></div>'
            )
            .parent()
        );

        // Unless there's a cookie for disabled views to be shown, "click" the
        // link in order to hide them.
        if (
          $.cookie("Drupal.GardensFeaturesViewsListFilter.showDisabled") !== "1"
        ) {
          $link.click();
        }

        // If the filter form is also active, remove the widget to filter by
        // enabled/disabled status, to not conflict with the toggle link.
        $("#ctools-export-ui-list-form .form-item-disabled").hide();
      });
    },
  };

  /**
   * Open all links to Drupal Gardens "Learn More" pages in a new window.
   */
  Drupal.behaviors.GardensFeaturesLearnMoreLinks = {
    attach: function (context, settings) {
      $('a[href^="http://www.drupalgardens.com/learnmore/"]', context).attr(
        "target",
        "_blank"
      );
    },
  };

  /**
   * Scroll to top of AJAX view on pager click.
   */
  Drupal.behaviors.viewsAjaxScroll = {
    attach: function (context, settings) {
      if (
        typeof Drupal.settings.views !== "undefined" &&
        typeof Drupal.settings.views.ajax_path !== "undefined" &&
        typeof Drupal.behaviors.ViewsLoadMore === "undefined"
      ) {
        // make sure we have AJAX, but not load_more
        $(".item-list .pager a")
          .not("a.load-more")
          .once("views-ajax-scroll")
          .click(function () {
            var outer = $(this).parents(".view");
            if ($(outer).parents(".pane").length) {
              // if there is surrounding pane, scroll to top of it
              outer = $(outer).parents(".pane");
            } else if ($(outer).parents(".block").length) {
              // if there is surrounding block, scroll top top of it
              outer = $(outer).parents(".block");
            }
            var viewtop = outer.offset().top - $("#toolbar").outerHeight();
            $("html, body").animate({ scrollTop: viewtop }, "slow", "linear");
          });
      }
    },
  };

  /**
   * Add dialog behavior to /user links for anonymous users.
   */
  Drupal.behaviors.gardensUserDialog = {};
  Drupal.behaviors.gardensUserDialog.attach = function (context, settings) {
    var useCapture = settings.janrainCapture && settings.janrainCapture.enforce;
    if (
      settings.gardensFeatures &&
      settings.gardensFeatures.userIsAnonymous &&
      settings.gardensFeatures.dialogUserEnabled &&
      !useCapture
    ) {
      // Modify all /user links so that they appear in a popup dialog.
      var links = $('a[href^="/user"]').once("user-dialog");
      var length = links.length;
      if (links.length === 0) {
        return;
      }
      var i, link, intab;
      for (i = 0; i < length; i++) {
        link = links[i];
        // Is the link in a tab (e.g. on the user login register or password pages)
        intab = $(link).parents().filter("ul.tabs");
        // Only act on the following types of links:
        // /user, /user/login, /user/register, /user/password
        // Ignore links that were already set up correctly on the server side.
        if (
          link.href.indexOf("nojs") === -1 &&
          link.href.indexOf("ajax") === -1
        ) {
          if (link.href.match(/\/user$/)) {
            if (intab.length == 0) {
              link.href = "/user/login/ajax";
            } else {
              link.href = "/user/login/nojs";
            }
            $(link).addClass("use-ajax use-dialog");
          } else if (link.href.match(/\/user\/(login|register|password)$/)) {
            if (intab.length == 0) {
              link.href = link.href.replace(
                /\/user\/(login|register|password)/,
                "/user/$1/ajax"
              );
            } else {
              link.href = link.href.replace(
                /\/user\/(login|register|password)/,
                "/user/$1/nojs"
              );
            }
            $(link).addClass("use-ajax use-dialog");
          }
        }
      }
      // The AJAX and dialog behaviors have already run; rerun them to pick up
      // newly ajaxified links.
      Drupal.behaviors.AJAX.attach(context, settings);
      Drupal.behaviors.dialog.attach(context, settings);
    }
  };

  // Disable the lazyloader: http://drupal.org/node/665128#comment-5301192
  if (typeof Drupal.ajax !== "undefined") {
    Drupal.ajax.prototype.commands.xlazyloader = function () {};
  }
})(jQuery);
(function ($) {
  /**
   * Add dialog behavior to /upload links for anonymous users.
   */
  Drupal.behaviors.gardensMediaLinks = {};
  Drupal.behaviors.gardensMediaLinks.attach = function (context, settings) {
    if (
      settings.gardensFeatures &&
      settings.gardensFeatures.userIsAnonymous &&
      settings.gardensFeatures.dialogUserEnabled
    ) {
      var useCapture =
        settings.janrainCapture && settings.janrainCapture.enforce;
      var loginPath = useCapture ? "/user/login" : "/user/login/ajax";
      // Modify all /upload links so that anonymous users are presented
      // a login dialog.
      var links = $(
        'a[href^="/upload"], a[href^="http://' + location.host + '/upload"]'
      ).once("user-dialog", function () {
        // Only act on the following types of links:
        // /upload, /upload/image, /upload/video
        // Ignore links that were already set up correctly on the server side.
        if (
          $(this).attr("href").indexOf("/nojs") === -1 &&
          $(this).attr("href").indexOf("/ajax") === -1
        ) {
          if (
            $(this)
              .attr("href")
              .match(/\/upload$/)
          ) {
            $(this).attr("href", loginPath + "?destination=/upload");
            if (!useCapture) {
              $(this).addClass("use-ajax use-dialog");
            }
          } else if (
            $(this)
              .attr("href")
              .match(/\/upload\/(video|photo)$/)
          ) {
            var newHref = $(this)
              .attr("href")
              .replace(
                /\/upload\/(video|photo)/,
                loginPath + "?destination=/upload/$1"
              );
            $(this).attr("href", newHref);
            if (!useCapture) {
              $(this).addClass("use-ajax use-dialog");
            }
          }
        }
      });
      if (links.length === 0) {
        return;
      }
      // The AJAX and dialog behaviors have already run; rerun them to pick up
      // newly ajaxified links.
      Drupal.behaviors.AJAX.attach(context, settings);
      Drupal.behaviors.dialog.attach(context, settings);
      if (useCapture) {
        Drupal.behaviors.janrainCapture.attach(context, settings);
        Drupal.behaviors.janrainCaptureUi.attach(context, settings);
      }
    }
  };
})(jQuery);
(function ($) {
  $.browserTest = function (a, z) {
    var u = "unknown",
      x = "X",
      m = function (r, h) {
        for (var i = 0; i < h.length; i = i + 1) {
          r = r.replace(h[i][0], h[i][1]);
        }
        return r;
      },
      c = function (i, a, b, c) {
        var r = { name: m((a.exec(i) || [u, u])[1], b) };
        r[r.name] = true;
        r.version = (c.exec(i) || [x, x, x, x])[3];
        if (r.name.match(/safari/) && r.version > 400) {
          r.version = "2.0";
        }
        if (r.name === "presto") {
          r.version = $.browser.version > 9.27 ? "futhark" : "linear_b";
        }
        r.versionNumber = parseFloat(r.version, 10) || 0;
        r.versionX = r.version !== x ? (r.version + "").substr(0, 1) : x;
        r.className = r.name + r.versionX;
        return r;
      };
    a = (a.match(/Opera|Navigator|Minefield|KHTML|Chrome/)
      ? m(a, [
          [/(Firefox|MSIE|KHTML,\slike\sGecko|Konqueror)/, ""],
          ["Chrome Safari", "Chrome"],
          ["KHTML", "Konqueror"],
          ["Minefield", "Firefox"],
          ["Navigator", "Netscape"],
        ])
      : a
    ).toLowerCase();
    $.browser = $.extend(
      !z ? $.browser : {},
      c(
        a,
        /(camino|chrome|firefox|netscape|konqueror|lynx|msie|opera|safari)/,
        [],
        /(camino|chrome|firefox|netscape|netscape6|opera|version|konqueror|lynx|msie|safari)(\/|\s)([a-z0-9\.\+]*?)(\;|dev|rel|\s|$)/
      )
    );
    $.layout = c(
      a,
      /(gecko|konqueror|msie|opera|webkit)/,
      [
        ["konqueror", "khtml"],
        ["msie", "trident"],
        ["opera", "presto"],
      ],
      /(applewebkit|rv|konqueror|msie)(\:|\/|\s)([a-z0-9\.]*?)(\;|\)|\s)/
    );
    $.os = {
      name: (/(win|mac|linux|sunos|solaris|iphone)/.exec(
        navigator.platform.toLowerCase()
      ) || [u])[0].replace("sunos", "solaris"),
    };
    if (!z) {
      $("html").addClass(
        [
          $.os.name,
          $.browser.name,
          $.browser.className,
          $.layout.name,
          $.layout.className,
        ].join(" ")
      );
    }
  };
  $.browserTest(navigator.userAgent);
})(jQuery);
/*
 *
 * Global, Helper and Utility functions
 * version 1
 */
/* Miscellaneous Javascript functions */
jQuery(document).ready(function () {
  // used for carousel
  var boxSelector = ".inset-4 .box";
  jQuery(boxSelector).removeClass("box");
  jQuery(boxSelector).find(".col").attr("style", "");

  // set active menu links
  set_active_parent_link();
  // set section title
  set_section_title();

  // Comments counter
  var comments_count = jQuery(".node-comment-counter").text() || 0;
  var comment_header = jQuery("body .comment-wrapper > h2");

  if (comment_header.length) {
    var $commentWrap = jQuery("<span/>")
      .addClass("comment-icon")
      .append('<span class="point"></span><em>' + comments_count + "</em>");
    comment_header.html("<span>Comments</span>").prepend($commentWrap);
    comment_header.addClass("commentcountwrap");
  } else {
    var $commentWrap = jQuery("<span/>")
      .addClass("comment-icon")
      .append(
        '<span class="point"></span><em>' + comments_count + "</em> comments"
      );
    jQuery("body .comment-wrapper")
      .prepend($commentWrap)
      .addClass("commentcountwrap");
  }

  if (jQuery("#block-views-albums-block-1").length) {
    jQuery(".comment-wrapper").before(jQuery("#block-views-albums-block-1"));
  }

  if (jQuery("#block-views-node-block-block-1").length) {
    jQuery(".node div.float-overflow").after(
      jQuery("#block-views-node-block-block-1")
    );
  }

  if (jQuery("#block-views-node-block-block").length) {
    jQuery(".node div.float-overflow").after(
      jQuery("#block-views-node-block-block")
    );
  }

  jQuery(".views-field-field-merch-photo, .views-field-nothing-1").hover(
    function (e) {
      jQuery(this)
        .parent()
        .find(".views-field-nothing-1 .product-popup")
        .fadeIn();
    },
    function (e) {
      if (
        jQuery(this)
          .parent()
          .find(".views-field-nothing-1 .product-popup")
          .css("opacity") == 1
      ) {
        jQuery(this)
          .parent()
          .find(".views-field-nothing-1 .product-popup")
          .fadeOut();
      }
    }
  );

  if (jQuery(".comment-form input#edit-name").length) {
    jQuery(".comment-form input#edit-name").addClass("grey-text");
    var authorName = jQuery(".comment-form input#edit-name").val();
    jQuery(".comment-form input#edit-name").bind("focus", function () {
      if (jQuery(this).val() == authorName) {
        jQuery(this).removeClass("grey-text");
        jQuery(this).val("");
      }
    });

    jQuery(".comment-form input#edit-name").bind("blur", function () {
      if (jQuery(this).val() == "") {
        jQuery(this).addClass("grey-text");
        jQuery(this).val(authorName);
      }
    });
  }
  /*validate comment submit, blur text , comment count*/
  commentValidate();

  // DEPRECATED - ?????

  jQuery("#block-webform-client-block-1116").css("display", "none");
  jQuery("a.link-mail-list, div.button-close").bind("click", function () {
    jQuery("#block-webform-client-block-1116").slideToggle();
    return false;
  });

  jQuery("dt.hoverme")
    .mouseenter(function () {
      jQuery(this).addClass("hover");
    })
    .mouseleave(function () {
      jQuery(this).removeClass("hover");
    });

  //add omniture tag to join link on login page
  if (
    jQuery(".not-logged-in.page-user #main .tabs ul.primary li:first-child a")
  ) {
    var joinlink_href = jQuery(
      ".not-logged-in.page-user #main .tabs ul.primary li:first-child a"
    ).attr("href");
    jQuery(
      ".not-logged-in.page-user #main .tabs ul.primary li:first-child a"
    ).attr("href", joinlink_href + "?intcmp=join_signin");
  }
  if (jQuery(".not-logged-in.page-user #main #user-login #edit-actions a")) {
    var joinlink_href = jQuery(
      ".not-logged-in.page-user #main #user-login #edit-actions a"
    ).attr("href");
    jQuery(".not-logged-in.page-user #main #user-login #edit-actions a").attr(
      "href",
      joinlink_href + "?intcmp=join_signin"
    );
  }
  //open external links: privacy policy, terms of service into a new tab
  jQuery("#block-menu-menu-footer-links li:nth-child(3) a").attr(
    "target",
    "_blank"
  );
  jQuery("#block-menu-menu-footer-links li:nth-child(4) a").attr(
    "target",
    "_blank"
  );

  // Set active class

  jQuery("a[href='/" + url_q + "']").addClass("active");

  // Set also for vide/pro on video page
  if (url_q == "video" || url_q == "photo") {
    jQuery("a[href='/" + url_q + "/pro']").addClass("active");
  }

  // launch player
  jQuery("a.launchPlayerLink").click(function () {
    window.open(
      "/music-player",
      "Window2",
      "width=322,height=265,toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=yes,resizable=no,copyhistory=no"
    );
    return false;
  });

  jQuery("#merchContainer").css("display", "block");

  if (Drupal.settings.server_variables.user_id > 0) {
    jQuery("#content a[href='/user'], #content a[href*='/user/register']").each(
      function () {
        jQuery(this).remove();
      }
    );
  }

  jQuery(".not-logged-in.page-node .fivestar-widget-static .star").bind(
    "click",
    function () {
      jQuery('a[href*="/user/login/nojs"]:first').click();
    }
  );

  googleCSEWatermark("cse-search-box");
  jQuery("#cse-search-box .cse_txtinput").val(jQuery.urlParam("query"));

  jQuery("#edit-picture-upload").attr("size", 40);

  jQuery("#copyright li:nth-child(3) a").attr("target", "_blank");
  jQuery("#copyright li:nth-child(4) a").attr("target", "_blank");

  jQuery(".ui-dialog.user-login-dialog .form-navigation-wrapper a").attr(
    "href",
    "/user/register/nojs?intcmp=join_signin"
  );
  jQuery(".page-user.not-logged-in .tabs li:first-child a").attr(
    "href",
    "/user/register/nojs?intcmp=join_signin"
  );
  jQuery(".page-user.not-logged-in .tabs li:nth-child(2) a").attr(
    "href",
    "/user/login/nojs"
  );
  jQuery(".page-user.not-logged-in .tabs li:nth-child(3) a").attr(
    "href",
    "/user/password/nojs"
  );

  jQuery(".page-user.not-logged-in .tabs li a").unbind("click");
});

// replace /node/add/photo|video with /upload for authenticated users, otherwise attach a login overlay
if (!Drupal.settings.server_variables.user_id) {
  jQuery(
    "#content a[href*='/node/add/photo'], #content a[href*='/node/add/video']"
  ).each(function () {
    jQuery(this).attr("href", "/user/login/nojs?destination=upload");
    jQuery(this).addClass("use-ajax use-dialog");
  });
  jQuery("#content a[href*='/node/add/forum']").each(function () {
    jQuery(this).attr("href", "/user/login/nojs?destination=node/add/forum");
    jQuery(this).addClass("use-ajax use-dialog");
  });
} else {
  jQuery(
    "#content a[href*='/node/add/photo'], #content a[href*='/node/add/video']"
  ).each(function () {
    jQuery(this).attr("href", "/upload");
  });
}

//add omniture tag to join link on login overlay
Drupal.behaviors.wmgGlobal = {
  attach: function () {
    var is_admin =
      Drupal.settings.server_variables.user_roles &&
      ((typeof Drupal.settings.server_variables.user_roles == "object" &&
        (Drupal.settings.server_variables.user_roles[11] ||
          Drupal.settings.server_variables.user_roles[21])) ||
        ((typeof Drupal.settings.server_variables.user_roles == "array" ||
          Drupal.settings.server_variables.user_roles[0]) &&
          (jQuery.inArray(
            "administrator",
            Drupal.settings.server_variables.user_roles
          ) != -1 ||
            jQuery.inArray(
              "professional member",
              Drupal.settings.server_variables.user_roles
            ) != -1)));

    if (is_admin) {
      jQuery("#content a[href='/node/add/blog']").each(function () {
        jQuery(this).removeClass("element-invisible");
      });
    }
  },
};

//add omniture tag to join link on login overlay
Drupal.behaviors.omnitureTagFunction = {
  attach: function () {
    if (jQuery(".ui-dialog.user-login-dialog .submit-button-wrapper a")) {
      jQuery(".ui-dialog.user-login-dialog .submit-button-wrapper a").attr(
        "href",
        "/user/register/nojs?intcmp=join_signin"
      );
    }
  },
};

Drupal.behaviors.commentProfile = {
  attach: function () {
    if (jQuery("body.page-user .view-user-profile").length > 0) {
      commentValidate();
    }
  },
};

Drupal.behaviors.pager = {
  attach: function () {
    var pagerclass = [
      ".view-id-home_one_page_photos.view-display-id-page_1 ",
      ".view-id-home_one_page_news.view-display-id-page_2",
    ];
    jQuery.each(pagerclass, function (i, value) {
      var pagervalue = value;
      if (pagervalue.length > 0) {
        jQuery(pagervalue).find("li.pager-current").prev().css({
          display: "inline",
        });
      }
    });
  },
};

function commentValidate() {
  /* Temporary Fix for profile page - to display comment count*/
  var comments_count = jQuery(".node-comment-counter").text() || 0;
  if (jQuery("body.page-user .comment-wrapper > h2").length > 0) {
    jQuery("body.page-user .comment-wrapper > h2").text(
      "Comments (" + comments_count + ")"
    );
    jQuery("body.page-user .comment-wrapper > h2").addClass("commentcountwrap");
  } else {
    jQuery("body.page-user .comment-wrapper").prepend(
      '<h2 class="commentcountwrap">Comments (' + comments_count + ")</h2>"
    );
  }

  /*  to rearrange comment textarea */
  if (jQuery(".comment-wrapper").length > 0) {
    if (!jQuery(".comment-wrapper").first().hasClass("comment-new-form")) {
      jQuery(".comment-wrapper").prepend(jQuery("#comment-new"));
    }
  }

  if (!(jQuery(".comment-wrapper #charNum").length > 0)) {
    jQuery(
      '<div id="charNum">Characters remaining: <span>' +
        comment_char_limit +
        "</span></div>"
    ).insertAfter(jQuery(".comment-wrapper .form-textarea-wrapper"));
  }
  if (!(jQuery(".view-user-profile .comment-wrapper #charNum").length > 0)) {
    jQuery(
      '<div id="charNum">Characters remaining: <span>' +
        comment_char_limit +
        "</span></div>"
    ).insertAfter(
      jQuery(".view-user-profile .comment-wrapper .form-textarea-wrapper")
    );
  }

  /* Global fix for char count */
  jQuery(
    ".comment-wrapper .form-textarea-wrapper textarea, #edit-comment-body .form-textarea-wrapper textarea"
  ).bind("keyup", function () {
    countChar(this);
  });
  jQuery(".comment-wrapper .form-textarea-wrapper textarea").bind(
    "mouseleave",
    function () {
      countChar(this);
    }
  );

  //Dont let user post empty comments
  /* Temporary Fix for profile page -  changed from '.comment-form input#edit-submit]' to make it work in profile page -29/6*/
  jQuery(".comment-form input[id^=edit-submit]").attr("disabled", "disabled");
  jQuery(".comment-form input[id^=edit-submit]").css("visibility", "visible");
  jQuery(".comment-form input[id^=edit-submit]").css("opacity", "0.5");
  jQuery(".comment-form input[id^=edit-submit]").attr(
    "title",
    comment_submit_hint_text
  );
  jQuery(".comment-form").bind("submit", function () {
    return can_post_comment;
  });

  if (jQuery("body.page-comment-edit").length === 0) {
    if (jQuery(".comment-form textarea").length) {
      if (jQuery(".comment-form textarea").val().length === 0) {
        jQuery(".comment-form textarea").addClass("grey-text");
        jQuery(".comment-form textarea").val(comment_blur_text);
      }
      jQuery(".comment-form textarea").bind("focus", function () {
        if (jQuery(this).val() == comment_blur_text) {
          jQuery(this).removeClass("grey-text");
          jQuery(this).val("");
        }
      });

      jQuery(".comment-form textarea").bind("blur", function () {
        if (jQuery(this).val() == "") {
          jQuery(this).addClass("grey-text");
          jQuery(this).val(comment_blur_text);
        }
      });

      /* changed from 'form#comment-form' to make it work in profile page -29/6*/
      jQuery("form[id^=comment-form]").bind("submit", function () {
        if (jQuery(this).find("textarea").val() == comment_blur_text) {
          jQuery(this).find("textarea").val("");
        }
        return true;
      });
    }
  }
}

$jq18(document).ready(function () {
  window.setTimeout(function () {
    if ($jq18("#arktan-stream").length > 0) {
      Arktan.SocialApps.install(ArktanSocialStreamsConfig);
    }
  }, 200);
});
/*
 *   SoundCloud Custom Player jQuery Plugin
 *   Author: Matas Petrikas, matas@soundcloud.com
 *	Edited by: Michelle Lamoureaux
 *   Copyright (c) 2009  SoundCloud Ltd.
 *   Licensed under the MIT license:
 *   http://www.opensource.org/licenses/mit-license.php
 *
 *   Usage:
 *   <a href="http://soundcloud.com/matas/hobnotropic" class="sc-player">My new dub track</a>
 *   The link will be automatically replaced by the HTML based player
 */
(function ($) {
  // Convert milliseconds into Hours (h), Minutes (m), and Seconds (s)
  var timecode = function (ms) {
    var hms = (function (ms) {
        return {
          h: Math.floor(ms / (60 * 60 * 1000)),
          m: Math.floor((ms / 60000) % 60),
          s: Math.floor((ms / 1000) % 60),
        };
      })(ms),
      tc = []; // Timecode array to be joined with '.'

    if (hms.h > 0) {
      tc.push(hms.h);
    }

    tc.push(hms.m < 10 && hms.h > 0 ? "0" + hms.m : hms.m);
    tc.push(hms.s < 10 ? "0" + hms.s : hms.s);

    return tc.join(".");
  };
  // shuffle the array
  var shuffle = function (arr) {
    arr.sort(function () {
      return 1 - Math.floor(Math.random() * 3);
    });
    return arr;
  };

  var debug = true,
    useSandBox = false,
    $doc = $(document),
    log = function (args) {
      try {
        if (debug && window.console && window.console.log) {
          window.console.log.apply(window.console, arguments);
        }
      } catch (e) {
        // no console available
      }
    },
    domain = useSandBox ? "sandbox-soundcloud.com" : "soundcloud.com",
    secureDocument = document.location.protocol === "https:",
    // convert a SoundCloud resource URL to an API URL
    scApiUrl = function (url, apiKey) {
      var resolver =
          (secureDocument || /^https/i.test(url) ? "https" : "http") +
          "://api." +
          domain +
          "/resolve?url=",
        params = "format=json&consumer_key=" + apiKey + "&callback=?";

      // force the secure url in the secure environment
      if (secureDocument) {
        url = url.replace(/^http:/, "https:");
      }

      // check if it's already a resolved api url
      if (/api\./.test(url)) {
        return url + "?" + params;
      } else {
        return resolver + url + "&" + params;
      }
    };

  // TODO Expose the audio engine, so it can be unit-tested
  var audioEngine = (function () {
    var html5AudioAvailable = (function () {
        var state = false;
        try {
          var a = new Audio();
          state =
            a.canPlayType && /maybe|probably/.test(a.canPlayType("audio/mpeg"));
          // let's enable the html5 audio on selected mobile devices first, unlikely to support Flash
          // the desktop browsers are still better with Flash, e.g. see the Safari 10.6 bug
          // comment the following line out, if you want to force the html5 mode
          //state = state && (/iPad|iphone|mobile|pre\//i).test(navigator.userAgent);
        } catch (e) {
          // there's no audio support here sadly
        }

        return state;
      })(),
      callbacks = {
        onReady: function () {
          $doc.trigger("scPlayer:onAudioReady");
        },
        onPlay: function () {
          $doc.trigger("scPlayer:onMediaPlay");
        },
        onPause: function () {
          $doc.trigger("scPlayer:onMediaPause");
        },
        onEnd: function () {
          $doc.trigger("scPlayer:onMediaEnd");
        },
        onBuffer: function (percent) {
          $doc.trigger({ type: "scPlayer:onMediaBuffering", percent: percent });
        },
      };

    var html5Driver = function () {
      var player = new Audio(),
        onTimeUpdate = function (event) {
          var obj = event.target,
            buffer =
              ((obj.buffered.length && obj.buffered.end(0)) / obj.duration) *
              100;
          // ipad has no progress events implemented yet
          callbacks.onBuffer(buffer);
          // anounce if it's finished for the clients without 'ended' events implementation
          if (obj.currentTime === obj.duration) {
            callbacks.onEnd();
          }
        },
        onProgress = function (event) {
          var obj = event.target,
            buffer =
              ((obj.buffered.length && obj.buffered.end(0)) / obj.duration) *
              100;
          callbacks.onBuffer(buffer);
        };

      $('<div class="sc-player-engine-container"></div>')
        .appendTo(document.body)
        .append(player);

      // prepare the listeners
      player.addEventListener("play", callbacks.onPlay, false);
      player.addEventListener("pause", callbacks.onPause, false);
      //player.addEventListener('ended', callbacks.onEnd, false);
      player.addEventListener("timeupdate", onTimeUpdate, false);
      player.addEventListener("progress", onProgress, false);

      return {
        load: function (track, apiKey) {
          player.pause();
          player.src =
            track.stream_url +
            (/\?/.test(track.stream_url) ? "&" : "?") +
            "consumer_key=" +
            apiKey;
          player.load();
          player.play();
        },
        play: function () {
          player.play();
        },
        pause: function () {
          player.pause();
        },
        stop: function () {
          if (player.currentTime) {
            player.currentTime = 0;
            player.pause();
          }
        },
        seek: function (relative) {
          player.currentTime = player.duration * relative;
          player.play();
        },
        getDuration: function () {
          return player.duration * 1000;
        },
        getPosition: function () {
          return player.currentTime * 1000;
        },
        setVolume: function (val) {
          player.volume = val / 100;
        },
      };
    };

    var flashDriver = function () {
      var engineId = "scPlayerEngine",
        player,
        flashHtml = function (url) {
          var swf =
            (secureDocument ? "https" : "http") +
            "://player." +
            domain +
            "/player.swf?url=" +
            url +
            "&amp;enable_api=true&amp;player_type=engine&amp;object_id=" +
            engineId;
          if ($.browser.msie) {
            return (
              '<object height="100%" width="100%" id="' +
              engineId +
              '" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" data="' +
              swf +
              '">' +
              '<param name="movie" value="' +
              swf +
              '" />' +
              '<param name="allowscriptaccess" value="always" />' +
              "</object>"
            );
          } else {
            return (
              '<object height="100%" width="100%" id="' +
              engineId +
              '">' +
              '<embed allowscriptaccess="always" height="100%" width="100%" src="' +
              swf +
              '" type="application/x-shockwave-flash" name="' +
              engineId +
              '" />' +
              "</object>"
            );
          }
        };

      // listen to audio engine events
      // when the loaded track is ready to play
      soundcloud.addEventListener("onPlayerReady", function (flashId, data) {
        player = soundcloud.getPlayer(engineId);
        callbacks.onReady();
      });

      // when the loaded track finished playing
      soundcloud.addEventListener("onMediaEnd", callbacks.onEnd);

      // when the loaded track is still buffering
      soundcloud.addEventListener("onMediaBuffering", function (flashId, data) {
        callbacks.onBuffer(data.percent);
      });

      // when the loaded track started to play
      soundcloud.addEventListener("onMediaPlay", callbacks.onPlay);

      // when the loaded track is was paused
      soundcloud.addEventListener("onMediaPause", callbacks.onPause);

      return {
        load: function (track) {
          var url = track.uri;
          if (player) {
            player.api_load(url);
            //$('.sc-player-engine-container').html(flashHtml(url));
          } else {
            // create a container for the flash engine (IE needs this to operate properly)
            $('<div class="sc-player-engine-container"></div>')
              .appendTo(document.body)
              .html(flashHtml(url));
          }
        },
        play: function () {
          var l_sTitle = $(".sc-trackslist .active a").html();

          var l_nHyphenPos = l_sTitle.indexOf(" - ");
          if (l_nHyphenPos >= 0) {
            l_sTitle = l_sTitle.substr(0, l_nHyphenPos);
          }
          $(".sc-song-title").html(l_sTitle);
          player && player.api_play();
        },
        pause: function () {
          player && player.api_pause();
        },
        stop: function () {
          player && player.api_stop();
        },
        seek: function (relative) {
          player && player.api_seekTo(player.api_getTrackDuration() * relative);
        },
        getDuration: function () {
          return (
            player &&
            player.api_getTrackDuration &&
            player.api_getTrackDuration() * 1000
          );
        },
        getPosition: function () {
          return (
            player &&
            player.api_getTrackPosition &&
            player.api_getTrackPosition() * 1000
          );
        },
        setVolume: function (val) {
          if (player && player.api_setVolume) {
            player.api_setVolume(val);
          }
        },
      };
    };

    return html5AudioAvailable ? html5Driver() : flashDriver();
  })();

  var apiKey,
    didAutoPlay = false,
    players = [],
    updates = {},
    currentUrl,
    loadTracksData = function ($player, links, key) {
      var index = 0,
        playerObj = { node: $player, tracks: [] },
        loadUrl = function (link) {
          var apiUrl = scApiUrl(link.url, apiKey);
          $.getJSON(apiUrl, function (data) {
            // log('data loaded', link.url, data);
            index += 1;
            if (data.tracks) {
              // log('data.tracks', data.tracks);
              playerObj.tracks = playerObj.tracks.concat(data.tracks);
            } else if (data.duration) {
              // a secret link fix, till the SC API returns permalink with secret on secret response
              data.permalink_url = link.url;
              // if track, add to player
              playerObj.tracks.push(data);
            } else if (data.creator) {
              // it's a group!
              links.push({ url: data.uri + "/tracks" });
            } else if (data.username) {
              // if user, get his tracks or favorites
              if (/favorites/.test(link.url)) {
                links.push({ url: data.uri + "/favorites" });
              } else {
                links.push({ url: data.uri + "/tracks" });
              }
            } else if ($.isArray(data)) {
              playerObj.tracks = playerObj.tracks.concat(data);
            }
            if (links[index]) {
              // if there are more track to load, get them from the api
              loadUrl(links[index]);
            } else {
              // if loading finishes, anounce it to the GUI
              playerObj.node.trigger({
                type: "onTrackDataLoaded",
                playerObj: playerObj,
                url: apiUrl,
              });
            }
          });
        };
      // update current API key
      apiKey = key;
      // update the players queue
      players.push(playerObj);
      // load first tracks
      loadUrl(links[index]);
    },
    artworkImage = function (track, usePlaceholder) {
      if (usePlaceholder) {
        return '<div class="sc-loading-artwork">Loading Artwork</div>';
      } else if (track.artwork_url) {
        return (
          '<img src="' +
          track.artwork_url.replace("-large", "-t300x300") +
          '"/>'
        );
      } else {
        return '<div class="sc-no-artwork">No Artwork</div>';
      }
    },
    updateTrackInfo = function ($player, track) {
      // update the current track info in the player
      // log('updateTrackInfo', track);
      $(".sc-info", $player).each(function (index) {
        $("h3", this).html(
          '<a href="' + track.permalink_url + '">' + track.title + "</a>"
        );
        $("h4", this).html(
          'by <a href="' +
            track.user.permalink_url +
            '">' +
            track.user.username +
            "</a>"
        );
        $("p", this).html(track.description || "no Description");
      });
      $(".sc-buy").attr("href", track.purchase_url);
      // update the artwork
      $(".sc-artwork-list li", $player).each(function (index) {
        var $item = $(this),
          itemTrack = $item.data("sc-track");

        if (itemTrack === track) {
          // show track artwork
          $item
            .addClass("active")
            .find(".sc-loading-artwork")
            .each(function (index) {
              // if the image isn't loaded yet, do it now

              $(this)
                .removeClass("sc-loading-artwork")
                .html(artworkImage(track, false));
            });
        } else {
          // reset other artworks
          $item.removeClass("active");
        }
      });
      // update the track duration in the progress bar
      $(".sc-duration", $player).html(timecode(track.duration));
      // put the waveform into the progress bar
      $(".sc-waveform-container", $player).html(
        '<img src="' + track.waveform_url + '" />'
      );
      $(".sc-waveform-container img").delay(500).fadeIn(300);

      var l_sTitle = $(".sc-trackslist .active a").html();
      var l_nHyphenPos = l_sTitle.indexOf(" - ");
      if (l_nHyphenPos >= 0) {
        l_sTitle = l_sTitle.substr(0, l_nHyphenPos);
      }
      $(".sc-song-title").html(l_sTitle);

      $player.trigger("onPlayerTrackSwitch.scPlayer", [track]);
    },
    play = function (track) {
      var url = track.permalink_url;
      if (currentUrl === url) {
        // log('will play');
        audioEngine.play();
      } else {
        currentUrl = url;
        // log('will load', url);
        audioEngine.load(track, apiKey);
      }
    },
    getPlayerData = function (node) {
      return players[$(node).data("sc-player").id];
    },
    updatePlayStatus = function (player, status) {
      if (status) {
        // reset all other players playing status
        $("div.sc-player.playing").removeClass("playing");
      }
      $(player)
        .toggleClass("playing", status)
        .trigger(status ? "onPlayerPlay" : "onPlayerPause");
    },
    onPlay = function (player, id) {
      var track = getPlayerData(player).tracks[id || 0];
      updateTrackInfo(player, track);
      // cache the references to most updated DOM nodes in the progress bar
      updates = {
        $buffer: $(".sc-buffer", player),
        $played: $(".sc-played", player),
        position: $(".sc-position", player)[0],
      };
      updatePlayStatus(player, true);
      play(track);
    },
    onPause = function (player) {
      updatePlayStatus(player, false);
      audioEngine.pause();
    },
    onFinish = function () {
      var $player = updates.$played.closest(".sc-player"),
        $nextItem;
      // update the scrubber width
      updates.$played.css("width", "0%");
      // show the position in the track position counter
      updates.position.innerHTML = timecode(0);
      // reset the player state
      updatePlayStatus($player, false);
      // stop the audio
      audioEngine.stop();
      $player.trigger("onPlayerTrackFinish");
    },
    onSeek = function (player, relative) {
      audioEngine.seek(relative);
      $(player).trigger("onPlayerSeek");
    },
    onSkip = function (player) {
      var $player = $(player);
      // continue playing through all players
      log("track finished get the next one");
      $nextItem = $(".sc-trackslist li.active", $player).next("li");
      // try to find the next track in other player
      if (!$nextItem.length) {
        $nextItem = $player
          .nextAll("div.sc-player:first")
          .find(".sc-trackslist li.active");
      }
      $nextItem.click();
    },
    soundVolume = (function () {
      var vol = 80,
        cooks = document.cookie.split(";"),
        volRx = new RegExp("scPlayer_volume=(\\d+)");
      for (var i in cooks) {
        if (volRx.test(cooks[i])) {
          vol = parseInt(cooks[i].match(volRx)[1], 10);
          break;
        }
      }
      return vol;
    })(),
    onVolume = function (volume) {
      var vol = Math.floor(volume);
      // save the volume in the cookie
      var date = new Date();
      date.setTime(date.getTime() + 365 * 24 * 60 * 60 * 1000);
      soundVolume = vol;
      document.cookie = [
        "scPlayer_volume=",
        vol,
        "; expires=",
        date.toUTCString(),
        '; path="/"',
      ].join("");
      // update the volume in the engine
      audioEngine.setVolume(soundVolume);
    },
    positionPoll;

  // listen to audio engine events
  $doc
    .bind("scPlayer:onAudioReady", function (event) {
      log("onPlayerReady: audio engine is ready");
      audioEngine.play();
      // set initial volume
      onVolume(soundVolume);
    })
    // when the loaded track started to play
    .bind("scPlayer:onMediaPlay", function (event) {
      clearInterval(positionPoll);
      positionPoll = setInterval(function () {
        var duration = audioEngine.getDuration(),
          position = audioEngine.getPosition(),
          relative = position / duration;

        // update the scrubber width
        updates.$played.css("width", 100 * relative + "%");
        // show the position in the track position counter
        updates.position.innerHTML = timecode(position);
        // announce the track position to the DOM
        $doc.trigger({
          type: "onMediaTimeUpdate.scPlayer",
          duration: duration,
          position: position,
          relative: relative,
        });
      }, 500);
    })
    // when the loaded track is was paused
    .bind("scPlayer:onMediaPause", function (event) {
      clearInterval(positionPoll);
      positionPoll = null;
    })
    // change the volume
    .bind("scPlayer:onVolumeChange", function (event) {
      onVolume(event.volume);
    })
    .bind("scPlayer:onMediaEnd", function (event) {
      onFinish();
    })
    .bind("scPlayer:onMediaBuffering", function (event) {
      updates.$buffer.css("width", event.percent + "%");
    });

  // Generate custom skinnable HTML/CSS/JavaScript based SoundCloud players from links to SoundCloud resources
  $.scPlayer = function (options, node) {
    var opts = $.extend({}, $.scPlayer.defaults, options),
      playerId = players.length,
      $source = node && $(node),
      sourceClasses = $source[0].className.replace("sc-player", ""),
      links =
        opts.links ||
        $.map($("a", $source).add($source.filter("a")), function (val) {
          return { url: val.href, title: val.innerHTML };
        }),
      $player = $('<div class="sc-player loading"></div>').data("sc-player", {
        id: playerId,
      }),
      $artworks = $('<ol class="sc-artwork-list"></ol>').appendTo($player),
      //$info = $('<div class="sc-info"><h3></h3><h4></h4><p></p><a href="#" class="sc-info-close">X</a></div>').appendTo($player),
      $controls = $(
        '<div class="sc-song-title"></div><div class="sc-overall-controls"><a class="sc-prev" href="#">Prev</a><div class="sc-controls"></div><a class="sc-next" href="#"></a></div>'
      ).appendTo($player),
      $list = $('<ol class="sc-trackslist"></ol>').appendTo($player);

    // add the classes of the source node to the player itself
    // the players can be indvidually styled this way
    if (sourceClasses || opts.customClass) {
      $player.addClass(sourceClasses).addClass(opts.customClass);
    }

    // adding controls to the player
    $player
      .find(".sc-controls")

      .append(
        '<a href="#play" class="sc-play">Play</a> <a href="#pause" class="sc-pause hidden">Pause</a>'
      )
      .end()
      //.append('<a href="#info" class="sc-info-toggle">Info</a>')
      .append('<div class="sc-scrubber"></div>')
      .find(".sc-scrubber")
      .append(
        '<div class="sc-time-span"><div class="sc-waveform-container"></div><div class="sc-buffer"></div><div class="sc-played"></div></div>'
      )

      .end()

      .append('<div class="sc-time-float"></div>')
      .find(".sc-time-float")
      .append(
        '<div class="sc-time-indicators"><span class="sc-position"></span><span class="sc-time-br"></span><span class="sc-duration"></span></div>'
      )
      .end()

      .append('<div class="sc-mute"></div>')
      .find(".sc-mute")
      .append('<a href="#"></a><div>')
      .end()

      .append('<div class="sc-vol-float"></div>')
      .find(".sc-vol-float")
      .append(
        '<div class="sc-volume-slider"><span class="sc-volume-status" style="width:' +
          soundVolume +
          '%"></span></div>'
      )
      .end()

      .append('<a class="sc-buy" target="_blank" href="#"></a>');

    // load and parse the track data from SoundCloud API
    loadTracksData($player, links, opts.apiKey);
    // init the player GUI, when the tracks data was laoded
    $player.bind("onTrackDataLoaded.scPlayer", function (event) {
      // log('onTrackDataLoaded.scPlayer', event.playerObj, playerId, event.target);
      var tracks = event.playerObj.tracks;
      if (opts.randomize) {
        tracks = shuffle(tracks);
      }
      // create the playlist
      $.each(tracks, function (index, track) {
        var active = index === 0;
        // create an item in the playlist
        $(
          '<li><a href="' +
            track.permalink_url +
            '">' +
            track.title +
            '</a><span class="sc-track-duration">' +
            timecode(track.duration) +
            "</span></li>"
        )
          .data("sc-track", { id: index })
          .toggleClass("active", active)
          .appendTo($list);
        // create an item in the artwork list
        $("<li></li>")
          .append(artworkImage(track, index >= opts.loadArtworks))
          .appendTo($artworks)
          .toggleClass("active", active)
          .data("sc-track", track);
      });
      // update the element before rendering it in the DOM
      $player.each(function () {
        if ($.isFunction(opts.beforeRender)) {
          opts.beforeRender.call(this, tracks);
        }
      });
      // set the first track's duration
      $(".sc-duration", $player)[0].innerHTML = timecode(tracks[0].duration);
      $(".sc-position", $player)[0].innerHTML = timecode(0);
      // set up the first track info
      updateTrackInfo($player, tracks[0]);

      // if continous play enabled always skip to the next track after one finishes
      if (opts.continuePlayback) {
        $player.bind("onPlayerTrackFinish", function (event) {
          onSkip($player);
        });
      }

      // announce the succesful initialization
      $player.removeClass("loading").trigger("onPlayerInit");

      // if auto play is enabled and it's the first player, start playing
      if (opts.autoPlay && !didAutoPlay) {
        onPlay($player);
        didAutoPlay = true;
      }
    });

    // replace the DOM source (if there's one)
    $source.each(function (index) {
      $(this).replaceWith($player);
    });

    return $player;
  };

  // stop all players, might be useful, before replacing the player dynamically
  $.scPlayer.stopAll = function () {
    $(".sc-player.playing a.sc-pause").click();
  };

  // destroy all the players and audio engine, usefull when reloading part of the page and audio has to stop
  $.scPlayer.destroy = function () {
    $(".sc-player, .sc-player-engine-container").remove();
  };

  // plugin wrapper
  $.fn.scPlayer = function (options) {
    // reset the auto play
    didAutoPlay = false;
    // create the players
    this.each(function () {
      $.scPlayer(options, this);
    });
    return this;
  };

  // default plugin options
  $.scPlayer.defaults = $.fn.scPlayer.defaults = {
    customClass: null,
    // do something with the dom object before you render it, add nodes, get more data from the services etc.
    beforeRender: function (tracksData) {
      var $player = $(this);
    },
    // initialization, when dom is ready
    onDomReady: function () {
      $("a.sc-player, div.sc-player").scPlayer();
    },
    autoPlay: false,
    continuePlayback: true,
    randomize: false,
    loadArtworks: 5,
    // the default Api key should be replaced by your own one
    // get it here http://soundcloud.com/you/apps/new
    apiKey: "d828d7acc8e1f2974ce952708d509db4",
  };

  // the GUI event bindings
  //--------------------------------------------------------

  // toggling play/pause
  $("a.sc-play, a.sc-pause").live("click", function (event) {
    var $list = $(this).closest(".sc-player").find("ol.sc-trackslist");
    // simulate the click in the tracklist
    $list.find("li.active").click();
    return false;
  });

  $(".sc-mute a").live("click", function (event) {
    event.preventDefault();
    $(this).parent().addClass("muted");
    onVolume(0);
  });

  $(".sc-mute.muted a").live("click", function (event) {
    event.preventDefault();
    $(this).parent().removeClass("muted");

    var l_sVolPercent = $(".sc-volume-status").css("width");
    var l_nVolPercent = parseInt(
      l_sVolPercent.substr(0, l_sVolPercent.length - 1)
    );
    onVolume(l_nVolPercent);
  });

  $(".sc-next").live("click", function (event) {
    event.preventDefault();
    l_nCount = $(".sc-trackslist li").length;

    var l_nIndex = 0;
    $(".sc-trackslist li").each(function () {
      if ($(this).hasClass("active") && l_nIndex == l_nCount - 1) {
        $(".sc-trackslist").find("li").eq(0).find("a").click();
        return false;
      } else if ($(this).hasClass("active")) {
        $(".sc-trackslist")
          .find("li")
          .eq(l_nIndex + 1)
          .find("a")
          .click();
        return false;
      }
      l_nIndex++;
    });
  });

  $(".sc-prev").live("click", function (event) {
    event.preventDefault();
    l_nCount = $(".sc-trackslist li").length;

    var l_nIndex = 0;
    $(".sc-trackslist li").each(function () {
      if ($(this).hasClass("active") && l_nIndex == 0) {
        $(".sc-trackslist")
          .find("li")
          .eq(l_nCount - 1)
          .find("a")
          .click();
        return false;
      } else if ($(this).hasClass("active")) {
        $(".sc-trackslist")
          .find("li")
          .eq(l_nIndex - 1)
          .find("a")
          .click();
        return false;
      }
      l_nIndex++;
    });
  });

  // displaying the info panel in the player
  $("a.sc-info-toggle, a.sc-info-close").live("click", function (event) {
    var $link = $(this);
    $link
      .closest(".sc-player")
      .find(".sc-info")
      .toggleClass("active")
      .end()
      .find("a.sc-info-toggle")
      .toggleClass("active");
    return false;
  });

  // selecting tracks in the playlist
  $(".sc-trackslist li").live("click", function (event) {
    var $track = $(this),
      $player = $track.closest(".sc-player"),
      trackId = $track.data("sc-track").id,
      play = $player.is(":not(.playing)") || $track.is(":not(.active)");
    if (play) {
      onPlay($player, trackId);
    } else {
      onPause($player);
    }
    $track.addClass("active").siblings("li").removeClass("active");
    $(".artworks li", $player).each(function (index) {
      $(this).toggleClass("active", index === trackId);
    });
    return false;
  });

  var scrub = function (node, xPos) {
    var $scrubber = $(node).closest(".sc-time-span"),
      $buffer = $scrubber.find(".sc-buffer"),
      $available = $scrubber.find(".sc-waveform-container img"),
      $player = $scrubber.closest(".sc-player"),
      relative =
        Math.min($buffer.width(), xPos - $available.offset().left) /
        $available.width();
    onSeek($player, relative);
  };

  var onTouchMove = function (ev) {
    if (ev.targetTouches.length === 1) {
      scrub(
        ev.target,
        ev.targetTouches &&
          ev.targetTouches.length &&
          ev.targetTouches[0].clientX
      );
      ev.preventDefault();
    }
  };

  // seeking in the loaded track buffer
  $(".sc-time-span")
    .live("click", function (event) {
      scrub(this, event.pageX);
      return false;
    })
    .live("touchstart", function (event) {
      this.addEventListener("touchmove", onTouchMove, false);
      event.originalEvent.preventDefault();
    })
    .live("touchend", function (event) {
      this.removeEventListener("touchmove", onTouchMove, false);
      event.originalEvent.preventDefault();
    });

  // changing volume in the player
  var startVolumeTracking = function (node, startEvent) {
    var $node = $(node),
      originX = $node.offset().left,
      originWidth = $node.width(),
      getVolume = function (x) {
        return Math.floor(((x - originX) / originWidth) * 100);
      },
      update = function (event) {
        $doc.trigger({
          type: "scPlayer:onVolumeChange",
          volume: getVolume(event.pageX),
        });
      };
    $node.bind("mousemove.sc-player", update);
    update(startEvent);
  };

  var stopVolumeTracking = function (node, event) {
    $(node).unbind("mousemove.sc-player");
  };

  $(".sc-volume-slider")
    .live("mousedown", function (event) {
      startVolumeTracking(this, event);
    })
    .live("mouseup", function (event) {
      stopVolumeTracking(this, event);
    });

  $doc.bind("scPlayer:onVolumeChange", function (event) {
    $("span.sc-volume-status").css({ width: event.volume + "%" });
  });
  // -------------------------------------------------------------------

  // the default Auto-Initialization
  $(function () {
    if ($.isFunction($.scPlayer.defaults.onDomReady)) {
      $.scPlayer.defaults.onDomReady();
    }
  });
})(jQuery);
jQuery(document).ready(function () {
  if (location.href.indexOf("?pass-reset-token") != -1) {
    jQuery(".form-type-password-confirm").addClass("pwdHighlight");
    jQuery("#edit-pass-pass1").focus();
    location.href = "#messages-region";
    jQuery("#edit-picture").hide();
    jQuery("#edit-comment-notify-settings").hide();
    jQuery("#edit-timezone").hide();
  }
});
/*! jQuery Validation Plugin - v1.10.0 - 9/7/2012
 * https://github.com/jzaefferer/jquery-validation
 * Copyright (c) 2012 Jrn Zaefferer; Licensed MIT, GPL */

(function ($) {
  $.extend($.fn, {
    // http://docs.jquery.com/Plugins/Validation/validate
    validate: function (options) {
      // if nothing is selected, return nothing; can't chain anyway
      if (!this.length) {
        if (options && options.debug && window.console) {
          console.warn("nothing selected, can't validate, returning nothing");
        }
        return;
      }

      // check if a validator for this form was already created
      var validator = $.data(this[0], "validator");
      if (validator) {
        return validator;
      }

      // Add novalidate tag if HTML5.
      this.attr("novalidate", "novalidate");

      validator = new $.validator(options, this[0]);
      $.data(this[0], "validator", validator);

      if (validator.settings.onsubmit) {
        this.validateDelegate(":submit", "click", function (ev) {
          if (validator.settings.submitHandler) {
            validator.submitButton = ev.target;
          }
          // allow suppressing validation by adding a cancel class to the submit button
          if ($(ev.target).hasClass("cancel")) {
            validator.cancelSubmit = true;
          }
        });

        // validate the form on submit
        this.submit(function (event) {
          if (validator.settings.debug) {
            // prevent form submit to be able to see console output
            event.preventDefault();
          }
          function handle() {
            var hidden;
            if (validator.settings.submitHandler) {
              if (validator.submitButton) {
                // insert a hidden input as a replacement for the missing submit button
                hidden = $("<input type='hidden'/>")
                  .attr("name", validator.submitButton.name)
                  .val(validator.submitButton.value)
                  .appendTo(validator.currentForm);
              }
              validator.settings.submitHandler.call(
                validator,
                validator.currentForm,
                event
              );
              if (validator.submitButton) {
                // and clean up afterwards; thanks to no-block-scope, hidden can be referenced
                hidden.remove();
              }
              return false;
            }
            return true;
          }

          // prevent submit for invalid forms or custom submit handlers
          if (validator.cancelSubmit) {
            validator.cancelSubmit = false;
            return handle();
          }
          if (validator.form()) {
            if (validator.pendingRequest) {
              validator.formSubmitted = true;
              return false;
            }
            return handle();
          } else {
            validator.focusInvalid();
            return false;
          }
        });
      }

      return validator;
    },
    // http://docs.jquery.com/Plugins/Validation/valid
    valid: function () {
      if ($(this[0]).is("form")) {
        return this.validate().form();
      } else {
        var valid = true;
        var validator = $(this[0].form).validate();
        this.each(function () {
          valid &= validator.element(this);
        });
        return valid;
      }
    },
    // attributes: space seperated list of attributes to retrieve and remove
    removeAttrs: function (attributes) {
      var result = {},
        $element = this;
      $.each(attributes.split(/\s/), function (index, value) {
        result[value] = $element.attr(value);
        $element.removeAttr(value);
      });
      return result;
    },
    // http://docs.jquery.com/Plugins/Validation/rules
    rules: function (command, argument) {
      var element = this[0];

      if (command) {
        var settings = $.data(element.form, "validator").settings;
        var staticRules = settings.rules;
        var existingRules = $.validator.staticRules(element);
        switch (command) {
          case "add":
            $.extend(existingRules, $.validator.normalizeRule(argument));
            staticRules[element.name] = existingRules;
            if (argument.messages) {
              settings.messages[element.name] = $.extend(
                settings.messages[element.name],
                argument.messages
              );
            }
            break;
          case "remove":
            if (!argument) {
              delete staticRules[element.name];
              return existingRules;
            }
            var filtered = {};
            $.each(argument.split(/\s/), function (index, method) {
              filtered[method] = existingRules[method];
              delete existingRules[method];
            });
            return filtered;
        }
      }

      var data = $.validator.normalizeRules(
        $.extend(
          {},
          $.validator.metadataRules(element),
          $.validator.classRules(element),
          $.validator.attributeRules(element),
          $.validator.staticRules(element)
        ),
        element
      );

      // make sure required is at front
      if (data.required) {
        var param = data.required;
        delete data.required;
        data = $.extend(
          {
            required: param,
          },
          data
        );
      }

      return data;
    },
  });

  // Custom selectors
  $.extend($.expr[":"], {
    // http://docs.jquery.com/Plugins/Validation/blank
    blank: function (a) {
      return !$.trim("" + a.value);
    },
    // http://docs.jquery.com/Plugins/Validation/filled
    filled: function (a) {
      return !!$.trim("" + a.value);
    },
    // http://docs.jquery.com/Plugins/Validation/unchecked
    unchecked: function (a) {
      return !a.checked;
    },
  });

  // constructor for validator
  $.validator = function (options, form) {
    this.settings = $.extend(true, {}, $.validator.defaults, options);
    this.currentForm = form;
    this.init();
  };

  $.validator.format = function (source, params) {
    if (arguments.length === 1) {
      return function () {
        var args = $.makeArray(arguments);
        args.unshift(source);
        return $.validator.format.apply(this, args);
      };
    }
    if (arguments.length > 2 && params.constructor !== Array) {
      params = $.makeArray(arguments).slice(1);
    }
    if (params.constructor !== Array) {
      params = [params];
    }
    $.each(params, function (i, n) {
      source = source.replace(new RegExp("\\{" + i + "\\}", "g"), n);
    });
    return source;
  };

  $.extend($.validator, {
    defaults: {
      messages: {},
      groups: {},
      rules: {},
      errorClass: "error",
      validClass: "valid",
      errorElement: "label",
      focusInvalid: true,
      errorContainer: $([]),
      errorLabelContainer: $([]),
      onsubmit: true,
      ignore: ":hidden",
      ignoreTitle: false,
      onfocusin: function (element, event) {
        this.lastActive = element;

        // hide error label and remove error class on focus if enabled
        if (this.settings.focusCleanup && !this.blockFocusCleanup) {
          if (this.settings.unhighlight) {
            this.settings.unhighlight.call(
              this,
              element,
              this.settings.errorClass,
              this.settings.validClass
            );
          }
          this.addWrapper(this.errorsFor(element)).hide();
        }
      },
      onfocusout: function (element, event) {
        if (
          !this.checkable(element) &&
          (element.name in this.submitted || !this.optional(element))
        ) {
          this.element(element);
        }
      },
      onkeyup: function (element, event) {
        if (event.which === 9 && this.elementValue(element) === "") {
          return;
        } else if (
          element.name in this.submitted ||
          element === this.lastActive
        ) {
          this.element(element);
        }
      },
      onclick: function (element, event) {
        // click on selects, radiobuttons and checkboxes
        if (element.name in this.submitted) {
          this.element(element);
        }
        // or option elements, check parent select in that case
        else if (element.parentNode.name in this.submitted) {
          this.element(element.parentNode);
        }
      },
      highlight: function (element, errorClass, validClass) {
        if (element.type === "radio") {
          this.findByName(element.name)
            .addClass(errorClass)
            .removeClass(validClass);
        } else {
          $(element).addClass(errorClass).removeClass(validClass);
        }
      },
      unhighlight: function (element, errorClass, validClass) {
        if (element.type === "radio") {
          this.findByName(element.name)
            .removeClass(errorClass)
            .addClass(validClass);
        } else {
          $(element).removeClass(errorClass).addClass(validClass);
        }
      },
    },

    // http://docs.jquery.com/Plugins/Validation/Validator/setDefaults
    setDefaults: function (settings) {
      $.extend($.validator.defaults, settings);
    },

    messages: {
      required: "This field is required.",
      remote: "Please fix this field.",
      email: "Please enter a valid email address.",
      url: "Please enter a valid URL.",
      date: "Please enter a valid date.",
      dateISO: "Please enter a valid date (ISO).",
      number: "Please enter a valid number.",
      digits: "Please enter only digits.",
      creditcard: "Please enter a valid credit card number.",
      equalTo: "Please enter the same value again.",
      maxlength: $.validator.format(
        "Please enter no more than {0} characters."
      ),
      minlength: $.validator.format("Please enter at least {0} characters."),
      rangelength: $.validator.format(
        "Please enter a value between {0} and {1} characters long."
      ),
      range: $.validator.format("Please enter a value between {0} and {1}."),
      max: $.validator.format(
        "Please enter a value less than or equal to {0}."
      ),
      min: $.validator.format(
        "Please enter a value greater than or equal to {0}."
      ),
    },

    autoCreateRanges: false,

    prototype: {
      init: function () {
        this.labelContainer = $(this.settings.errorLabelContainer);
        this.errorContext =
          (this.labelContainer.length && this.labelContainer) ||
          $(this.currentForm);
        this.containers = $(this.settings.errorContainer).add(
          this.settings.errorLabelContainer
        );
        this.submitted = {};
        this.valueCache = {};
        this.pendingRequest = 0;
        this.pending = {};
        this.invalid = {};
        this.reset();

        var groups = (this.groups = {});
        $.each(this.settings.groups, function (key, value) {
          $.each(value.split(/\s/), function (index, name) {
            groups[name] = key;
          });
        });
        var rules = this.settings.rules;
        $.each(rules, function (key, value) {
          rules[key] = $.validator.normalizeRule(value);
        });

        function delegate(event) {
          var validator = $.data(this[0].form, "validator"),
            eventType = "on" + event.type.replace(/^validate/, "");
          if (validator.settings[eventType]) {
            validator.settings[eventType].call(validator, this[0], event);
          }
        }

        $(this.currentForm)
          .validateDelegate(
            ":text, [type='password'], [type='file'], select, textarea, " +
              "[type='number'], [type='search'] ,[type='tel'], [type='url'], " +
              "[type='email'], [type='datetime'], [type='date'], [type='month'], " +
              "[type='week'], [type='time'], [type='datetime-local'], " +
              "[type='range'], [type='color'] ",
            "focusin focusout keyup",
            delegate
          )
          .validateDelegate(
            "[type='radio'], [type='checkbox'], select, option",
            "click",
            delegate
          );

        if (this.settings.invalidHandler) {
          $(this.currentForm).bind(
            "invalid-form.validate",
            this.settings.invalidHandler
          );
        }
      },

      // http://docs.jquery.com/Plugins/Validation/Validator/form
      form: function () {
        this.checkForm();
        $.extend(this.submitted, this.errorMap);
        this.invalid = $.extend({}, this.errorMap);
        if (!this.valid()) {
          $(this.currentForm).triggerHandler("invalid-form", [this]);
        }
        this.showErrors();
        return this.valid();
      },

      checkForm: function () {
        this.prepareForm();
        for (
          var i = 0, elements = (this.currentElements = this.elements());
          elements[i];
          i++
        ) {
          this.check(elements[i]);
        }
        return this.valid();
      },

      // http://docs.jquery.com/Plugins/Validation/Validator/element
      element: function (element) {
        element = this.validationTargetFor(this.clean(element));
        this.lastElement = element;
        this.prepareElement(element);
        this.currentElements = $(element);
        var result = this.check(element) !== false;
        if (result) {
          delete this.invalid[element.name];
        } else {
          this.invalid[element.name] = true;
        }
        if (!this.numberOfInvalids()) {
          // Hide error containers on last error
          this.toHide = this.toHide.add(this.containers);
        }
        this.showErrors();
        return result;
      },

      // http://docs.jquery.com/Plugins/Validation/Validator/showErrors
      showErrors: function (errors) {
        if (errors) {
          // add items to error list and map
          $.extend(this.errorMap, errors);
          this.errorList = [];
          for (var name in errors) {
            this.errorList.push({
              message: errors[name],
              element: this.findByName(name)[0],
            });
          }
          // remove items from success list
          this.successList = $.grep(this.successList, function (element) {
            return !(element.name in errors);
          });
        }
        if (this.settings.showErrors) {
          this.settings.showErrors.call(this, this.errorMap, this.errorList);
        } else {
          this.defaultShowErrors();
        }
      },

      // http://docs.jquery.com/Plugins/Validation/Validator/resetForm
      resetForm: function () {
        if ($.fn.resetForm) {
          $(this.currentForm).resetForm();
        }
        this.submitted = {};
        this.lastElement = null;
        this.prepareForm();
        this.hideErrors();
        this.elements()
          .removeClass(this.settings.errorClass)
          .removeData("previousValue");
      },

      numberOfInvalids: function () {
        return this.objectLength(this.invalid);
      },

      objectLength: function (obj) {
        var count = 0;
        for (var i in obj) {
          count++;
        }
        return count;
      },

      hideErrors: function () {
        this.addWrapper(this.toHide).hide();
      },

      valid: function () {
        return this.size() === 0;
      },

      size: function () {
        return this.errorList.length;
      },

      focusInvalid: function () {
        if (this.settings.focusInvalid) {
          try {
            $(
              this.findLastActive() ||
                (this.errorList.length && this.errorList[0].element) ||
                []
            )
              .filter(":visible")
              .focus()
              // manually trigger focusin event; without it, focusin handler isn't called, findLastActive won't have anything to find
              .trigger("focusin");
          } catch (e) {
            // ignore IE throwing errors when focusing hidden elements
          }
        }
      },

      findLastActive: function () {
        var lastActive = this.lastActive;
        return (
          lastActive &&
          $.grep(this.errorList, function (n) {
            return n.element.name === lastActive.name;
          }).length === 1 &&
          lastActive
        );
      },

      elements: function () {
        var validator = this,
          rulesCache = {};

        // select all valid inputs inside the form (no submit or reset buttons)
        return $(this.currentForm)
          .find("input, select, textarea")
          .not(":submit, :reset, :image, [disabled]")
          .not(this.settings.ignore)
          .filter(function () {
            if (!this.name && validator.settings.debug && window.console) {
              console.error("%o has no name assigned", this);
            }

            // select only the first element for each name, and only those with rules specified
            if (
              this.name in rulesCache ||
              !validator.objectLength($(this).rules())
            ) {
              return false;
            }

            rulesCache[this.name] = true;
            return true;
          });
      },

      clean: function (selector) {
        return $(selector)[0];
      },

      errors: function () {
        var errorClass = this.settings.errorClass.replace(" ", ".");
        return $(
          this.settings.errorElement + "." + errorClass,
          this.errorContext
        );
      },

      reset: function () {
        this.successList = [];
        this.errorList = [];
        this.errorMap = {};
        this.toShow = $([]);
        this.toHide = $([]);
        this.currentElements = $([]);
      },

      prepareForm: function () {
        this.reset();
        this.toHide = this.errors().add(this.containers);
      },

      prepareElement: function (element) {
        this.reset();
        this.toHide = this.errorsFor(element);
      },

      elementValue: function (element) {
        var type = $(element).attr("type"),
          val = $(element).val();

        if (type === "radio" || type === "checkbox") {
          return $(
            'input[name="' + $(element).attr("name") + '"]:checked'
          ).val();
        }

        if (typeof val === "string") {
          return val.replace(/\r/g, "");
        }
        return val;
      },

      check: function (element) {
        element = this.validationTargetFor(this.clean(element));

        var rules = $(element).rules();
        var dependencyMismatch = false;
        var val = this.elementValue(element);
        var result;

        for (var method in rules) {
          var rule = {
            method: method,
            parameters: rules[method],
          };
          try {
            result = $.validator.methods[method].call(
              this,
              val,
              element,
              rule.parameters
            );

            // if a method indicates that the field is optional and therefore valid,
            // don't mark it as valid when there are no other rules
            if (result === "dependency-mismatch") {
              dependencyMismatch = true;
              continue;
            }
            dependencyMismatch = false;

            if (result === "pending") {
              this.toHide = this.toHide.not(this.errorsFor(element));
              return;
            }

            if (!result) {
              this.formatAndAdd(element, rule);
              return false;
            }
          } catch (e) {
            if (this.settings.debug && window.console) {
              console.log(
                "exception occured when checking element " +
                  element.id +
                  ", check the '" +
                  rule.method +
                  "' method",
                e
              );
            }
            throw e;
          }
        }
        if (dependencyMismatch) {
          return;
        }
        if (this.objectLength(rules)) {
          this.successList.push(element);
        }
        return true;
      },

      // return the custom message for the given element and validation method
      // specified in the element's "messages" metadata
      customMetaMessage: function (element, method) {
        if (!$.metadata) {
          return;
        }
        var meta = this.settings.meta
          ? $(element).metadata()[this.settings.meta]
          : $(element).metadata();
        return meta && meta.messages && meta.messages[method];
      },

      // return the custom message for the given element and validation method
      // specified in the element's HTML5 data attribute
      customDataMessage: function (element, method) {
        return (
          $(element).data("msg-" + method.toLowerCase()) ||
          (element.attributes &&
            $(element).attr("data-msg-" + method.toLowerCase()))
        );
      },

      // return the custom message for the given element name and validation method
      customMessage: function (name, method) {
        var m = this.settings.messages[name];
        return m && (m.constructor === String ? m : m[method]);
      },

      // return the first defined argument, allowing empty strings
      findDefined: function () {
        for (var i = 0; i < arguments.length; i++) {
          if (arguments[i] !== undefined) {
            return arguments[i];
          }
        }
        return undefined;
      },

      defaultMessage: function (element, method) {
        return this.findDefined(
          this.customMessage(element.name, method),
          this.customDataMessage(element, method),
          this.customMetaMessage(element, method),
          // title is never undefined, so handle empty string as undefined
          (!this.settings.ignoreTitle && element.title) || undefined,
          $.validator.messages[method],
          "<strong>Warning: No message defined for " +
            element.name +
            "</strong>"
        );
      },

      formatAndAdd: function (element, rule) {
        var message = this.defaultMessage(element, rule.method),
          theregex = /\$?\{(\d+)\}/g;
        if (typeof message === "function") {
          message = message.call(this, rule.parameters, element);
        } else if (theregex.test(message)) {
          message = $.validator.format(
            message.replace(theregex, "{$1}"),
            rule.parameters
          );
        }
        this.errorList.push({
          message: message,
          element: element,
        });

        this.errorMap[element.name] = message;
        this.submitted[element.name] = message;
      },

      addWrapper: function (toToggle) {
        if (this.settings.wrapper) {
          toToggle = toToggle.add(toToggle.parent(this.settings.wrapper));
        }
        return toToggle;
      },

      defaultShowErrors: function () {
        var i, elements;
        for (i = 0; this.errorList[i]; i++) {
          var error = this.errorList[i];
          if (this.settings.highlight) {
            this.settings.highlight.call(
              this,
              error.element,
              this.settings.errorClass,
              this.settings.validClass
            );
          }
          this.showLabel(error.element, error.message);
        }
        if (this.errorList.length) {
          this.toShow = this.toShow.add(this.containers);
        }
        if (this.settings.success) {
          for (i = 0; this.successList[i]; i++) {
            this.showLabel(this.successList[i]);
          }
        }
        if (this.settings.unhighlight) {
          for (i = 0, elements = this.validElements(); elements[i]; i++) {
            this.settings.unhighlight.call(
              this,
              elements[i],
              this.settings.errorClass,
              this.settings.validClass
            );
          }
        }
        this.toHide = this.toHide.not(this.toShow);
        this.hideErrors();
        this.addWrapper(this.toShow).show();
      },

      validElements: function () {
        return this.currentElements.not(this.invalidElements());
      },

      invalidElements: function () {
        return $(this.errorList).map(function () {
          return this.element;
        });
      },

      showLabel: function (element, message) {
        var label = this.errorsFor(element);
        if (label.length) {
          // refresh error/success class
          label
            .removeClass(this.settings.validClass)
            .addClass(this.settings.errorClass);

          // check if we have a generated label, replace the message then
          if (label.attr("generated")) {
            label.html(message);
          }
        } else {
          // create label
          label = $("<" + this.settings.errorElement + "/>")
            .attr({
              for: this.idOrName(element),
              generated: true,
            })
            .addClass(this.settings.errorClass)
            .html(message || "");
          if (this.settings.wrapper) {
            // make sure the element is visible, even in IE
            // actually showing the wrapped element is handled elsewhere
            label = label
              .hide()
              .show()
              .wrap("<" + this.settings.wrapper + "/>")
              .parent();
          }
          if (!this.labelContainer.append(label).length) {
            if (this.settings.errorPlacement) {
              this.settings.errorPlacement(label, $(element));
            } else {
              label.insertAfter(element);
            }
          }
        }
        if (!message && this.settings.success) {
          label.text("");
          if (typeof this.settings.success === "string") {
            label.addClass(this.settings.success);
          } else {
            this.settings.success(label, element);
          }
        }
        this.toShow = this.toShow.add(label);
      },

      errorsFor: function (element) {
        var name = this.idOrName(element);
        return this.errors().filter(function () {
          return $(this).attr("for") === name;
        });
      },

      idOrName: function (element) {
        return (
          this.groups[element.name] ||
          (this.checkable(element) ? element.name : element.id || element.name)
        );
      },

      validationTargetFor: function (element) {
        // if radio/checkbox, validate first element in group instead
        if (this.checkable(element)) {
          element = this.findByName(element.name).not(this.settings.ignore)[0];
        }
        return element;
      },

      checkable: function (element) {
        return /radio|checkbox/i.test(element.type);
      },

      findByName: function (name) {
        return $(this.currentForm).find('[name="' + name + '"]');
      },

      getLength: function (value, element) {
        switch (element.nodeName.toLowerCase()) {
          case "select":
            return $("option:selected", element).length;
          case "input":
            if (this.checkable(element)) {
              return this.findByName(element.name).filter(":checked").length;
            }
        }
        return value.length;
      },

      depend: function (param, element) {
        return this.dependTypes[typeof param]
          ? this.dependTypes[typeof param](param, element)
          : true;
      },

      dependTypes: {
        boolean: function (param, element) {
          return param;
        },
        string: function (param, element) {
          return !!$(param, element.form).length;
        },
        function: function (param, element) {
          return param(element);
        },
      },

      optional: function (element) {
        var val = this.elementValue(element);
        return (
          !$.validator.methods.required.call(this, val, element) &&
          "dependency-mismatch"
        );
      },

      startRequest: function (element) {
        if (!this.pending[element.name]) {
          this.pendingRequest++;
          this.pending[element.name] = true;
        }
      },

      stopRequest: function (element, valid) {
        this.pendingRequest--;
        // sometimes synchronization fails, make sure pendingRequest is never < 0
        if (this.pendingRequest < 0) {
          this.pendingRequest = 0;
        }
        delete this.pending[element.name];
        if (
          valid &&
          this.pendingRequest === 0 &&
          this.formSubmitted &&
          this.form()
        ) {
          $(this.currentForm).submit();
          this.formSubmitted = false;
        } else if (!valid && this.pendingRequest === 0 && this.formSubmitted) {
          $(this.currentForm).triggerHandler("invalid-form", [this]);
          this.formSubmitted = false;
        }
      },

      previousValue: function (element) {
        return (
          $.data(element, "previousValue") ||
          $.data(element, "previousValue", {
            old: null,
            valid: true,
            message: this.defaultMessage(element, "remote"),
          })
        );
      },
    },

    classRuleSettings: {
      required: {
        required: true,
      },
      email: {
        email: true,
      },
      url: {
        url: true,
      },
      date: {
        date: true,
      },
      dateISO: {
        dateISO: true,
      },
      number: {
        number: true,
      },
      digits: {
        digits: true,
      },
      creditcard: {
        creditcard: true,
      },
    },

    addClassRules: function (className, rules) {
      if (className.constructor === String) {
        this.classRuleSettings[className] = rules;
      } else {
        $.extend(this.classRuleSettings, className);
      }
    },

    classRules: function (element) {
      var rules = {};
      var classes = $(element).attr("class");
      if (classes) {
        $.each(classes.split(" "), function () {
          if (this in $.validator.classRuleSettings) {
            $.extend(rules, $.validator.classRuleSettings[this]);
          }
        });
      }
      return rules;
    },

    attributeRules: function (element) {
      var rules = {};
      var $element = $(element);

      for (var method in $.validator.methods) {
        var value;

        // support for <input required> in both html5 and older browsers
        if (method === "required") {
          value = $element.get(0).getAttribute(method);
          // Some browsers return an empty string for the required attribute
          // and non-HTML5 browsers might have required="" markup
          if (value === "") {
            value = true;
          }
          // force non-HTML5 browsers to return bool
          value = !!value;
        } else {
          value = $element.attr(method);
        }

        if (value) {
          rules[method] = value;
        } else if ($element[0].getAttribute("type") === method) {
          rules[method] = true;
        }
      }

      // maxlength may be returned as -1, 2147483647 (IE) and 524288 (safari) for text inputs
      if (rules.maxlength && /-1|2147483647|524288/.test(rules.maxlength)) {
        delete rules.maxlength;
      }

      return rules;
    },

    metadataRules: function (element) {
      if (!$.metadata) {
        return {};
      }

      var meta = $.data(element.form, "validator").settings.meta;
      return meta ? $(element).metadata()[meta] : $(element).metadata();
    },

    staticRules: function (element) {
      var rules = {};
      var validator = $.data(element.form, "validator");
      if (validator.settings.rules) {
        rules =
          $.validator.normalizeRule(validator.settings.rules[element.name]) ||
          {};
      }
      return rules;
    },

    normalizeRules: function (rules, element) {
      // handle dependency check
      $.each(rules, function (prop, val) {
        // ignore rule when param is explicitly false, eg. required:false
        if (val === false) {
          delete rules[prop];
          return;
        }
        if (val.param || val.depends) {
          var keepRule = true;
          switch (typeof val.depends) {
            case "string":
              keepRule = !!$(val.depends, element.form).length;
              break;
            case "function":
              keepRule = val.depends.call(element, element);
              break;
          }
          if (keepRule) {
            rules[prop] = val.param !== undefined ? val.param : true;
          } else {
            delete rules[prop];
          }
        }
      });

      // evaluate parameters
      $.each(rules, function (rule, parameter) {
        rules[rule] = $.isFunction(parameter) ? parameter(element) : parameter;
      });

      // clean number parameters
      $.each(["minlength", "maxlength", "min", "max"], function () {
        if (rules[this]) {
          rules[this] = Number(rules[this]);
        }
      });
      $.each(["rangelength", "range"], function () {
        if (rules[this]) {
          rules[this] = [Number(rules[this][0]), Number(rules[this][1])];
        }
      });

      if ($.validator.autoCreateRanges) {
        // auto-create ranges
        if (rules.min && rules.max) {
          rules.range = [rules.min, rules.max];
          delete rules.min;
          delete rules.max;
        }
        if (rules.minlength && rules.maxlength) {
          rules.rangelength = [rules.minlength, rules.maxlength];
          delete rules.minlength;
          delete rules.maxlength;
        }
      }

      // To support custom messages in metadata ignore rule methods titled "messages"
      if (rules.messages) {
        delete rules.messages;
      }

      return rules;
    },

    // Converts a simple string to a {string: true} rule, e.g., "required" to {required:true}
    normalizeRule: function (data) {
      if (typeof data === "string") {
        var transformed = {};
        $.each(data.split(/\s/), function () {
          transformed[this] = true;
        });
        data = transformed;
      }
      return data;
    },

    // http://docs.jquery.com/Plugins/Validation/Validator/addMethod
    addMethod: function (name, method, message) {
      $.validator.methods[name] = method;
      $.validator.messages[name] =
        message !== undefined ? message : $.validator.messages[name];
      if (method.length < 3) {
        $.validator.addClassRules(name, $.validator.normalizeRule(name));
      }
    },

    methods: {
      // http://docs.jquery.com/Plugins/Validation/Methods/required
      required: function (value, element, param) {
        // check if dependency is met
        if (!this.depend(param, element)) {
          return "dependency-mismatch";
        }
        if (element.nodeName.toLowerCase() === "select") {
          // could be an array for select-multiple or a string, both are fine this way
          var val = $(element).val();
          return val && val.length > 0;
        }
        if (this.checkable(element)) {
          return this.getLength(value, element) > 0;
        }
        return $.trim(value).length > 0;
      },

      // http://docs.jquery.com/Plugins/Validation/Methods/remote
      remote: function (value, element, param) {
        if (this.optional(element)) {
          return "dependency-mismatch";
        }

        var previous = this.previousValue(element);
        if (!this.settings.messages[element.name]) {
          this.settings.messages[element.name] = {};
        }
        previous.originalMessage = this.settings.messages[element.name].remote;
        this.settings.messages[element.name].remote = previous.message;

        param =
          (typeof param === "string" && {
            url: param,
          }) ||
          param;

        if (this.pending[element.name]) {
          return "pending";
        }
        if (previous.old === value) {
          return previous.valid;
        }

        previous.old = value;
        var validator = this;
        this.startRequest(element);
        var data = {};
        data[element.name] = value;
        $.ajax(
          $.extend(
            true,
            {
              url: param,
              mode: "abort",
              port: "validate" + element.name,
              dataType: "json",
              data: data,
              success: function (response) {
                validator.settings.messages[element.name].remote =
                  previous.originalMessage;
                var valid = response === true || response === "true";
                if (valid) {
                  var submitted = validator.formSubmitted;
                  validator.prepareElement(element);
                  validator.formSubmitted = submitted;
                  validator.successList.push(element);
                  delete validator.invalid[element.name];
                  validator.showErrors();
                } else {
                  var errors = {};
                  var message =
                    response || validator.defaultMessage(element, "remote");
                  errors[element.name] = previous.message = $.isFunction(
                    message
                  )
                    ? message(value)
                    : message;
                  validator.invalid[element.name] = true;
                  validator.showErrors(errors);
                }
                previous.valid = valid;
                validator.stopRequest(element, valid);
              },
            },
            param
          )
        );
        return "pending";
      },

      // http://docs.jquery.com/Plugins/Validation/Methods/minlength
      minlength: function (value, element, param) {
        var length = $.isArray(value)
          ? value.length
          : this.getLength($.trim(value), element);
        return this.optional(element) || length >= param;
      },

      // http://docs.jquery.com/Plugins/Validation/Methods/maxlength
      maxlength: function (value, element, param) {
        var length = $.isArray(value)
          ? value.length
          : this.getLength($.trim(value), element);
        return this.optional(element) || length <= param;
      },

      // http://docs.jquery.com/Plugins/Validation/Methods/rangelength
      rangelength: function (value, element, param) {
        var length = $.isArray(value)
          ? value.length
          : this.getLength($.trim(value), element);
        return (
          this.optional(element) || (length >= param[0] && length <= param[1])
        );
      },

      // http://docs.jquery.com/Plugins/Validation/Methods/min
      min: function (value, element, param) {
        return this.optional(element) || value >= param;
      },

      // http://docs.jquery.com/Plugins/Validation/Methods/max
      max: function (value, element, param) {
        return this.optional(element) || value <= param;
      },

      // http://docs.jquery.com/Plugins/Validation/Methods/range
      range: function (value, element, param) {
        return (
          this.optional(element) || (value >= param[0] && value <= param[1])
        );
      },

      // http://docs.jquery.com/Plugins/Validation/Methods/email
      email: function (value, element) {
        // contributed by Scott Gonzalez: http://projects.scottsplayground.com/email_address_validation/
        return (
          this.optional(element) ||
          /^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(
            value
          )
        );
      },

      // http://docs.jquery.com/Plugins/Validation/Methods/url
      url: function (value, element) {
        // contributed by Scott Gonzalez: http://projects.scottsplayground.com/iri/
        return (
          this.optional(element) ||
          /^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(
            value
          )
        );
      },

      // http://docs.jquery.com/Plugins/Validation/Methods/date
      date: function (value, element) {
        return this.optional(element) || !/Invalid|NaN/.test(new Date(value));
      },

      // http://docs.jquery.com/Plugins/Validation/Methods/dateISO
      dateISO: function (value, element) {
        return (
          this.optional(element) ||
          /^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/.test(value)
        );
      },

      // http://docs.jquery.com/Plugins/Validation/Methods/number
      number: function (value, element) {
        return (
          this.optional(element) ||
          /^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(value)
        );
      },

      // http://docs.jquery.com/Plugins/Validation/Methods/digits
      digits: function (value, element) {
        return this.optional(element) || /^\d+$/.test(value);
      },

      // http://docs.jquery.com/Plugins/Validation/Methods/creditcard
      // based on http://en.wikipedia.org/wiki/Luhn
      creditcard: function (value, element) {
        if (this.optional(element)) {
          return "dependency-mismatch";
        }
        // accept only spaces, digits and dashes
        if (/[^0-9 \-]+/.test(value)) {
          return false;
        }
        var nCheck = 0,
          nDigit = 0,
          bEven = false;

        value = value.replace(/\D/g, "");

        for (var n = value.length - 1; n >= 0; n--) {
          var cDigit = value.charAt(n);
          nDigit = parseInt(cDigit, 10);
          if (bEven) {
            if ((nDigit *= 2) > 9) {
              nDigit -= 9;
            }
          }
          nCheck += nDigit;
          bEven = !bEven;
        }

        return nCheck % 10 === 0;
      },

      // http://docs.jquery.com/Plugins/Validation/Methods/equalTo
      equalTo: function (value, element, param) {
        // bind to the blur event of the target in order to revalidate whenever the target field is updated
        // TODO find a way to bind the event just once, avoiding the unbind-rebind overhead
        var target = $(param);
        if (this.settings.onfocusout) {
          target
            .unbind(".validate-equalTo")
            .bind("blur.validate-equalTo", function () {
              $(element).valid();
            });
        }
        return value === target.val();
      },
    },
  });

  // deprecated, use $.validator.format instead
  $.format = $.validator.format;
})($jq18);

// ajax mode: abort
// usage: $.ajax({ mode: "abort"[, port: "uniqueport"]});
// if mode:"abort" is used, the previous request on that port (port can be undefined) is aborted via XMLHttpRequest.abort()
(function ($) {
  var pendingRequests = {};
  // Use a prefilter if available (1.5+)
  if ($.ajaxPrefilter) {
    $.ajaxPrefilter(function (settings, _, xhr) {
      var port = settings.port;
      if (settings.mode === "abort") {
        if (pendingRequests[port]) {
          pendingRequests[port].abort();
        }
        pendingRequests[port] = xhr;
      }
    });
  } else {
    // Proxy ajax
    var ajax = $.ajax;
    $.ajax = function (settings) {
      var mode = ("mode" in settings ? settings : $.ajaxSettings).mode,
        port = ("port" in settings ? settings : $.ajaxSettings).port;
      if (mode === "abort") {
        if (pendingRequests[port]) {
          pendingRequests[port].abort();
        }
        return (pendingRequests[port] = ajax.apply(this, arguments));
      }
      return ajax.apply(this, arguments);
    };
  }
})($jq18);

// provides cross-browser focusin and focusout events
// IE has native support, in other browsers, use event caputuring (neither bubbles)

// provides delegate(type: String, delegate: Selector, handler: Callback) plugin for easier event delegation
// handler is only called when $(event.target).is(delegate), in the scope of the jquery-object for event.target
(function ($) {
  // only implement if not provided by jQuery core (since 1.4)
  // TODO verify if jQuery 1.4's implementation is compatible with older jQuery special-event APIs
  if (
    !jQuery.event.special.focusin &&
    !jQuery.event.special.focusout &&
    document.addEventListener
  ) {
    $.each(
      {
        focus: "focusin",
        blur: "focusout",
      },
      function (original, fix) {
        $.event.special[fix] = {
          setup: function () {
            this.addEventListener(original, handler, true);
          },
          teardown: function () {
            this.removeEventListener(original, handler, true);
          },
          handler: function (e) {
            var args = arguments;
            args[0] = $.event.fix(e);
            args[0].type = fix;
            return $.event.handle.apply(this, args);
          },
        };
        function handler(e) {
          e = $.event.fix(e);
          e.type = fix;
          return $.event.handle.call(this, e);
        }
      }
    );
  }
  $.extend($.fn, {
    validateDelegate: function (delegate, type, handler) {
      return this.bind(type, function (event) {
        var target = $(event.target);
        if (target.is(delegate)) {
          return handler.apply(target, arguments);
        }
      });
    },
  });
})($jq18);
var activeSignUpForm;
/*Default callback function /*DO NOT DISTURB*/
function signupFormCallback(data) {
  activeSignUpForm.signupFormCallback(data);
}
(function ($) {
  /* Mailing list plugin default configuration options*/
  /* overwrite while 'init' the plugin if needed */
  /* ensure the object properties are matched as below */
  var defaults = {
    containers: {
      ajaxLoaderField: "#ajaxLoader",
      serverErrorMessageField: "#serverError",
      validationErrorMessageField: "#errorMsg",
      labelcheckbox: ".secondary-list-values .global-list-checkbox",
      thankYouMessageField: "#thankyouBlock",
    },
    exactTargetSignupUrl: "https://signup.wmg.com/register",
    /*Exact target default values - All the hardcoded exact target values list here*/
    newsLetterConfigValues: [
      {
        newsletterId: "",
      },
    ],
    /*Validator plugin configurations*/
    errorLabelContainer: "#errorMsg",
    /*Callback functions*/
    callBacks: {
      onLoad: function () {
        // Extend if needed
      },
      onSubmit: function () {
        // Extend if needed
      },
      onSuccess: function () {
        // Extend if needed
      },
    },
    customPageName: "",
    validatorSettings: {},
  };
  $.fn.wmgSignUpForm = function (options) {
    var settings = {};
    var customName = "";
    if (typeof options !== "undefined") {
      if (typeof options.customPageName !== "undefined") {
        customName = options.customPageName;
      }
    }
    /*omniture parameters*/
    var omniConfig = {};
    var validator;
    var callbackCompleted = 0;
    var $currentElement;
    var joinbutton = false;
    var userEmailId = "";
    // Current webform
    var $this = $(this);
    // current instance of plugin
    var self = this;
    var $mainListFields = $this.find(".mlist-field:not(.contest-field)");
    var $contestListFields = $this.find(".mlist-field.contest-field");
    var hasTwoLayers;
    var isInSecondLayer;
    var hideLightbox = function () {
      var $frontPage = jQuery("body.front #page");
      jQuery(".splash_overall").fadeOut();
      $frontPage.css("overflow", "hidden");
      $this.parents(".mlist-outer-wrapper").removeClass("lightboxActive");
    };
    var getListParameters = function (selectorClass) {
      var listParameters = "";
      var etValues = {};
      if (
        selectorClass == ".secondary-list-values" ||
        selectorClass == ".data-source-value"
      ) {
        $currentElement = $this
          .closest(".mlist-outer-wrapper")
          .find("#thankyouBlock");
      } else {
        $currentElement = $this;
      }
      $currentElement.find(selectorClass).each(function () {
        $(this)
          .find("input")
          .each(function () {
            if (
              $(this).attr("type") == "checkbox" &&
              $(this).is(":checked") == false
            ) {
            } else {
              var exactTargetKey = $(this).attr("name");
              var exactTargetValue = $(this).val();
              if (
                exactTargetValue != "" &&
                (exactTargetKey != "_ext" || exactTargetKey != "_trigger")
              ) {
                if (exactTargetKey in etValues) {
                  etValues[exactTargetKey] += "," + exactTargetValue;
                } else {
                  etValues[exactTargetKey] = exactTargetValue;
                }
              }
              if (exactTargetKey == "email") {
                userEmailId = exactTargetValue;
              }
            }
          });
        $(this)
          .find("select")
          .each(function () {
            var exactTargetKey = $(this).attr("name");
            var exactTargetValue = $(this).val();
            etValues[exactTargetKey] = exactTargetValue;
          });
      });
      $.each(etValues, function (key, value) {
        // To check whether coppa cookie is added for this mail
        if (key === "email") {
          //var coppaCookie = CryptoJS.MD5("coppa_lite_" + value).toString();
          if (jQuery.cookie("coppa_deny_all")) {
            signUpFailure();
            return;
          }
        }
        if (key === "postalcode") {
          value = encodeURIComponent(value);
        }
        listParameters += "&" + key + "=" + value;
      });
      return listParameters;
    };
    var submitRequest = function () {
      var returnVal = onSubmit();
      if (returnVal === false) {
        return false;
      }
      activeSignUpForm = self;
      sendExactTargetRequest();
    };
    var resetThankYouScreen = function () {
      $this.parents(".mlist-wrapper").fadeOut(500, function () {
        $this[0].reset();
        $this.fadeIn();
        $this.parents(".mlist-outer-wrapper").find(".mlist-join-wrap").show();
        $this.parent().find("#thankyouBlock").hide();
        if (
          $this.parent().find("#thankyouthankyouBlock .secondary-list-values")
            .length > 0
        ) {
          $this.parent().find("input.agree-checkbox").removeAttr("checked");
          $this.parent().find("#thankyoublock-innerwrapper").fadeIn();
          $this.parent().find(".secondarylist-thankyou").css("display", "none");
        }
      });
    };
    var reloadForm = function () {
      var currentFocus = jQuery($currentElement[0]).attr("id");
      var currentBlock = jQuery($currentElement[0]);
      if ($this.parent().parent().find(".mlist-join-wrap").length > 0) {
        joinbutton = true;
      }
      if (currentFocus == "thankyouBlock") {
        if (currentBlock.find(".thankyou-message").hasClass("embed")) {
          currentBlock.find("#thankyoublock-innerwrapper").fadeOut();
        } else {
          resetThankYouScreen();
        }
      } else {
        $this.find(settings.containers.serverErrorMessageField).fadeOut();
        $this[0].reset();
        $this
          .parent()
          .find(settings.containers.thankYouMessageField)
          .fadeOut(1000, function () {
            if (joinbutton) {
              $this
                .parents()
                .find(".mlist-wrapper")
                .fadeOut(500, function () {
                  $this.fadeIn();
                  $this.parents().find(".mlist-join-wrap").toggle();
                });
            } else {
              if ($this.find(".agreepopup").length > 0) {
                $this.find(".agreepopup").fadeOut();
              }
              $this.fadeIn();
            }
          });
      }
    };
    /* Getting omniture paramaters starts*/
    var setOmniConfig = function () {
      omniConfig.artist = digitalData.content.artist;
      omniConfig.artisthost = digitalData.page.pageInfo.pageName;
    };
    var getclosestregion = function () {
      var classArray = $this.closest(".region").attr("class");
      if (typeof classArray == "undefined" || classArray == "") {
        return "content";
      } else {
        return $this.closest(".region").attr("class").split(" ")[1];
      }
    };
    var getLabelId = function () {
      var labelID = $this
        .parent()
        .find(settings.containers.thankYouMessageField)
        .find(settings.containers.labelcheckbox)
        .val();
      return labelID;
    };
    var omniVarsConfig = function (event, screenNumber) {
      setOmniConfig();
      var mainListID = getMailingListID();
      var closestreg = getclosestregion();
      var artisthost = omniConfig.artisthost;
      var omniVars = {};
      var labelid;
      var datasource = getDatasouce();
      if (
        $this.parent().find("#thankyouBlock .secondary-list-values").length > 0
      ) {
        hasTwoLayers = true;
      }
      if (hasTwoLayers === true) {
        screenNumber = screenNumber + "/2" + ":";
      } else {
        screenNumber = "";
      }
      switch (event) {
        case "signupIntent":
          omniVars.pageName = artisthost;
          break;
        case "firstFormSubmit":
          omniVars.pageName = artisthost + ":Signup Success";
          omniVars.events = "event3";
          omniVars.eVar16 = mainListID;
          if (datasource != null) {
            omniVars.eVar87 = datasource;
          }
          break;
        case "noLabelSubscription":
          omniVars.pageName = artisthost + ":Save Success";
          omniVars.events = "event3";
          omniVars.eVar16 = mainListID;
          if (datasource != null) {
            omniVars.eVar87 = datasource;
          }
          break;
        case "labelSubscription":
          labelid = getLabelId();
          omniVars.pageName = artisthost + ":Save Success";
          omniVars.events = "event3";
          omniVars.eVar16 = mainListID;
          if (datasource != null) {
            omniVars.eVar87 = datasource;
          }
          break;
        default:
          omniVars.pageName = artisthost + ":Save Success";
          break;
      }
      if ($this.parents(".mlist-outer-wrapper").hasClass("customPageName")) {
        if (event === "noLabelSubscription" || event === "labelSubscription") {
          omniVars.pageName =
            omniConfig.artist + ":" + customName + ":Save Success";
        } else {
          omniVars.pageName =
            omniConfig.artist + ":" + customName + ":Signup Success";
        }
      } else if ($this.parents(".mlist-outer-wrapper").hasClass("tkOmniture")) {
        if (event === "noLabelSubscription" || event === "labelSubscription") {
          omniVars.pageName =
            artisthost +
            ":" +
            settings.customPageName +
            ":Lightbox:Save Success";
        } else {
          omniVars.pageName =
            artisthost +
            ":" +
            settings.customPageName +
            ":Lightbox:Signup Success";
        }
      }
      s_dtm.t(omniVars);
    };
    /* Getting omniture paramaters ends*/
    var $thisOuterWrapper = jQuery(this).closest(".mlist-outer-wrapper");
    /*var requiredFieldModifier = function () {

		    if ($thisOuterWrapper.find("#country").val() === "" || $thisOuterWrapper.find("#country").val() === undefined) {

		        $thisOuterWrapper.find("#errorLabelContainer2").css("display", "block");

		        $thisOuterWrapper.find('#country').addClass("error");

		        return false;

		    } else {

		        $thisOuterWrapper.find("#errorLabelContainer2").css("display", "none");

		        $thisOuterWrapper.find('#country').removeClass("error");

		        return true;

		    }

		};*/
    if ($thisOuterWrapper.hasClass("country-detect")) {
      //$thisOuterWrapper.find("#country").blur(requiredFieldModifier);
      $thisOuterWrapper.find(".secondFormCloseWrap a").click(function () {
        $thisOuterWrapper.find("#thankyouBlock").addClass("final-screen");
        $thisOuterWrapper
          .find("#thankyoublock-innerwrapper")
          .css("display", "none");
        $thisOuterWrapper.find(".termsWrapper a").removeClass("showing");
        $thisOuterWrapper.find(".termsWrapper").css("display", "none");
        hideLightbox();
      });
      $thisOuterWrapper.find(".termsWrapper a.terms").click(function () {
        jQuery(this).toggleClass("showing");
        jQuery(this)
          .parents(".termsWrapper")
          .find(".termsContent")
          .slideToggle();
        //$thisOuterWrapper.find("#terms").slideToggle();
      });
    }
    $thisOuterWrapper
      .find("#thankyouBlock .mlist-submit-new")
      .click(function (e) {
        isInSecondLayer = true;
        if ($thisOuterWrapper.hasClass("country-detect")) {
          // if (!$thisOuterWrapper.find("label.error").is(":visible")) {
          e.preventDefault();
          var signUpRequestUrlnew = settings.exactTargetSignupUrl;
          var signlabelURL =
            signUpRequestUrlnew +
            getListParameters(".mlist-field") +
            getListParameters(".secondary-list-values");
          if (
            $thisOuterWrapper
              .find(".secondary-list-values input.global-list-checkbox")
              .is(":checked")
          ) {
            omniVarsConfig("labelSubscription", 2);
            signlabelURL =
              signlabelURL +
              getListParameters(".data-source-value") +
              "&global_optin=TRUE";
          } else {
            omniVarsConfig("noLabelSubscription", 2);
          }
          signlabelURL = signlabelURL.replace(
            signlabelURL[signlabelURL.indexOf("&")],
            "?"
          );
          sendRequest(signlabelURL);
          // }
        } else if (
          $thisOuterWrapper
            .find(".secondary-list-values input.agree-checkbox")
            .is(":checked")
        ) {
          omniVarsConfig("labelSubscription", 2);
          var signUpRequestUrlnew = settings.exactTargetSignupUrl;
          var signlabelURL =
            signUpRequestUrlnew +
            getListParameters(".mlist-field") +
            getListParameters(".secondary-list-values");
          if (
            $thisOuterWrapper
              .find(".secondary-list-values input.global-list-checkbox")
              .is(":checked")
          ) {
            signlabelURL =
              signlabelURL +
              getListParameters(".data-source-value") +
              "&global_optin=TRUE";
          }
          signlabelURL = signlabelURL.replace(
            signlabelURL[signlabelURL.indexOf("&")],
            "?"
          );
          sendRequest(signlabelURL);
        } else {
          omniVarsConfig("noLabelSubscription", 2);
        }
      });
    jQuery("#thankyouBlock .mlist-submit-new").click(function (e) {
      $currentElement = jQuery(this)
        .closest(".mlist-outer-wrapper")
        .find("#thankyouBlock");
    });
    $thisOuterWrapper.find(".mlist-popup").click(function () {
      $this.validate();
      if ($this.valid() == true) {
        $thisOuterWrapper.find(".agreepopup").show();
      }
    });
    $thisOuterWrapper.find(".mlist-disagree").click(function () {
      $thisOuterWrapper.find(".agreepopup").hide();
    });
    $thisOuterWrapper.find(".mlist-join").click(function () {
      $thisOuterWrapper.find(".mlist-join-wrap").hide();
      $thisOuterWrapper.find(".mlist-wrapper").slideToggle();
      omniVarsConfig("signupIntent", 1);
    });
    $thisOuterWrapper.find(".mlist-close").click(function () {
      $thisOuterWrapper.find(".mlist-wrapper").slideToggle();
      resetThankYouScreen();
    });
    $thisOuterWrapper
      .find(".mlist-checks label[for='global-list']")
      .click(function () {
        var $checkbox = jQuery(this).parent().find(".global-list-checkbox");
        if (!$checkbox.is(":checked")) {
          $checkbox.attr("checked", "checked");
        } else {
          $checkbox.removeAttr("checked");
        }
      });
    var updateCurrentEmailAddress = function () {
      if ($this.parents(".mlist-outer-wrapper").find(".emailAddress")) {
        $this
          .parents(".mlist-outer-wrapper")
          .find(".emailAddress")
          .text(userEmailId.split("@")[0]);
      }
    };
    var signUpSuccess = function (data) {
      var tempElement = jQuery($currentElement[0]).attr("id");
      if (tempElement == "thankyouBlock") {
        if ($currentElement.find(".secondary-list-values").length > 0) {
          $currentElement
            .find("#thankyoublock-innerwrapper")
            .fadeOut(1000, function () {
              //For flyout version
              if ($this.parents(".mlist-outer-wrapper").hasClass("lightbox")) {
                hideLightbox();
              }
              jQuery("#terms").fadeOut();
              $currentElement.find(".secondarylist-thankyou").fadeIn();
              $currentElement.addClass("final-screen");
            });
          setTimeout(reloadForm, 4000);
        }
      } else {
        $this.fadeOut(500, function () {
          //lightbox variant
          if ($this.parents(".mlist-outer-wrapper").hasClass("lightbox")) {
            $this.parents(".mlist-outer-wrapper").addClass("lightboxActive");
            var parentWrapper = $this.parents(
              ".mlist-outer-wrapper.lightboxActive"
            );
            var parentWrapperWidth = 600;
            var parentWrapperHeight = 400;
            jQuery("body").append("<div class='splash_overall'></div>");
            jQuery("body.front #page").css("overflow", "visible");
            jQuery(".splash_overall").fadeIn();
            var win_height = document.documentElement.clientHeight;
            var set_height = (win_height - parentWrapperHeight) / 2;
            var win_width = document.documentElement.clientWidth;
            var set_width = (win_width - parentWrapperWidth) / 2;
            parentWrapper.css("top", set_height + "px");
            parentWrapper.css("left", set_width + "px");
            jQuery(".splash_overall").click(function () {
              hideLightbox();
            });
          }
          //flyout variant
          if (
            jQuery("#" + tempElement)
              .parents(".mlist-outer-wrapper")
              .hasClass("flyout")
          ) {
            $this.parents(".mlist-outer-wrapper").addClass("flyoutActive");
          }
          $this.find(settings.containers.serverErrorMessageField).fadeOut();
          $this
            .parent()
            .find(settings.containers.thankYouMessageField)
            .fadeIn(500);
          $this.parent().find("#thankyoublock-innerwrapper").show();
          $this.parent().find("#secondForm").validate();
          $this.parent().find(".agree-checkbox").removeAttr("checked");
          $this.parent().find(".secondarylist-thankyou").hide();
          if ($thisOuterWrapper.hasClass("country-detect")) {
            $this.parent().find("#terms").css("display", "none");
          }
          if (data.geocountry !== undefined && data.geocountry !== "") {
            $this.parent().find("#country").val(data.geocountry);
          } else {
            $this.parent().find("#country").val("");
          }
          /*if ((data.geozip !== undefined) && (data.geozip !== "")) {

					 $this.parent().find("#postalcode").val(data.geozip)

					 } else {

					 $this.parent().find("#postalcode").val("");

					 }*/
        });
      }
    };
    var signUpFailure = function () {
      $this.find(settings.containers.serverErrorMessageField).fadeTo(1, 500);
      setTimeout(function () {
        reloadForm();
      }, 5000);
    };
    var sendRequest = function (signUpListUrl) {
      try {
        signUpListUrl += "&jsoncallback=?";
        $.getJSON(signUpListUrl, {
          jsonp: "signupFormCallback",
        });
      } catch (err) {
        signUpFailure();
      }
    };
    var getMailingListID = function () {
      var mainListID;
      var _country = $this.find("#country").val();
      var mailingListObj = WMG.MailingList.EmailListIds;
      if (_country in mailingListObj) {
        mainListID = WMG.MailingList.EmailListIds[_country];
      } else {
        mainListID = WMG.MailingList.EmailListIds["United States"];
      }
      return mainListID;
    };
    var getDatasouce = function () {
      if ($this.find("input[name~='Datasource']") != undefined) {
        return $this.find("input[name~='Datasource']").val();
      } else {
        return null;
      }
    };
    var sendExactTargetRequest = function () {
      var mainlistflag = "off";
      var mainListID;
      var signUpRequestUrl = settings.exactTargetSignupUrl;
      var mainlist_signupURL;
      var contestlist_signupURL;
      mainListID = getMailingListID();
      $this
        .find(".mainlist-hidden-options #mainListId")
        .attr("value", mainListID);
      if ($this.find(".agree-checkbox").is(":checked")) {
        mainlistflag = "on";
      }
      var adobe_ecid = s_dtm.visitor.getMarketingCloudVisitorID();
      primary_signupURL =
        signUpRequestUrl +
        "?geoip=true" +
        getListParameters(".mlist-field") +
        getListParameters(".primary-list-values");
      primary_signupURL = primary_signupURL + "&adobe_ecid=" + adobe_ecid;
      if (
        $this
          .find(".primary-list-values input.global-list-checkbox")
          .is(":checked")
      ) {
        primary_signupURL += "&global_optin=TRUE";
      }
      if ($this.find(".secondary-list-values").length > 0) {
        secondary_signupURL =
          signUpRequestUrl +
          getListParameters(".mlist-field:not('.contest-field')") +
          getListParameters(".secondary-list-values");
        secondary_signupURL.replace(
          secondary_signupURL[secondary_signupURL.indexOf("&")],
          "?"
        );
      }
      updateCurrentEmailAddress();
      if ($this.hasClass("contest-form")) {
        if ($this.is(".secondary-list-required")) {
          sendRequest(primary_signupURL);
          sendRequest(secondary_signupURL);
        } else if ($this.is(".secondary-list-optional")) {
          if (mainlistflag == "on") {
            sendRequest(secondary_signupURL);
            sendRequest(primary_signupURL);
          } else {
            sendRequest(primary_signupURL);
          }
        } else {
          sendRequest(primary_signupURL);
        }
      } else {
        sendRequest(primary_signupURL);
      }
    };
    this.signupFormCallback = function (data) {
      callbackCompleted++;
      if (callbackCompleted == 1) {
        $this.parent().find(settings.containers.ajaxLoaderField).fadeOut();
        if (data.status == "success") {
          onSuccess();
          signUpSuccess(data);
        } else {
          // status== 'error'
          signUpFailure();
        }
      }
      if (settings.newsLetterConfigValues.length == callbackCompleted) {
        callbackCompleted = 0;
      }
    };
    var init = function (options) {
      if (options) {
        settings = $.extend(defaults, options);
      } else {
        settings = defaults;
      }
      var validatorSettings;
      if (Object.keys(settings.validatorSettings).length > 0) {
        validatorSettings = settings.validatorSettings;
      } else {
        validatorSettings = {
          rules: {},
          messages: {},
        };
      }

      function getValidatorRulesandMessages($this) {
        var rulesKey = $this.attr("id");
        var rulesClass = $this.attr("class");
        if (rulesClass != undefined) {
          var rulesElement = rulesClass.split(/\s+/);
          validatorSettings.rules[rulesKey] = {};
          validatorSettings.messages[rulesKey] = {};
          $.each(rulesElement, function (index, item) {
            if (item.match("^m-")) {
              item = item.replace("m-", "");
              validatorSettings.rules[rulesKey][item] = true;
              validatorSettings.messages[rulesKey][item] = "";
            }
          });
        }
      }
      $this.find(".mlist-field input").each(function () {
        if (Object.keys(validatorSettings.rules).length == 0) {
          getValidatorRulesandMessages($(this));
        }
      });
      $this.find(".mlist-field select").each(function () {
        if (Object.keys(validatorSettings.rules).length == 0) {
          getValidatorRulesandMessages($(this));
        }
      });
      $.validator.setDefaults({
        rules: validatorSettings.rules,
        messages: validatorSettings.messages,
        submitHandler: function () {
          isInSecondLayer = false;
          /*On click of form1 sign up button */
          omniVarsConfig("firstFormSubmit", 1);
          submitRequest();
          return false;
        },
      });
      validator = $this.validate({
        onkeyup: false,
      });
    };
    var onLoad = function () {
      settings.callBacks.onLoad();
    };
    var onSubmit = function () {
      if (typeof settings.callBacks.onSubmit != "undefined") {
        return settings.callBacks.onSubmit();
      }
    };
    var onSuccess = function () {
      if (typeof settings.callBacks.onSuccess != "undefined") {
        settings.callBacks.onSuccess();
      }
    };
    init(options);
    return this.each(function () {
      _this = this;
    });
  };
})($jq18);
/*
 * Social Links - Twitter button
 *
 */
/* Pager : Replace Next/Previous text and smooth scrolling to the top of the list */
Drupal.behaviors.mettfunction = {
  attach: function () {
    jQuery("a.twitter-share-button").each(function () {
      var startersiteDefaultURL = "blinkemphaticrock.drupalgardens.com";
      var href = jQuery(this).attr("data-url");
      var result = href.replace(startersiteDefaultURL, WMG.basePath);
      result = result.replace("wmgd2c_ss1", WMG.Twitter.handle);
      jQuery(this).attr("data-url", result);
      //add the via attribute if present in configuration
      if (WMG.Twitter.via) {
        jQuery(this).attr("data-via", WMG.Twitter.via);
      }
    });
  },
};

!(function (d, s, id) {
  var js,
    fjs = d.getElementsByTagName(s)[0];
  if (!d.getElementById(id)) {
    js = d.createElement(s);
    js.id = id;
    js.src = "//platform.twitter.com/widgets.js";
    fjs.parentNode.insertBefore(js, fjs);
  }
})(document, "script", "twitter-wjs");
/*
 * Silverpop, Omniture, DGAnalytics Integration
 * version 1
 *
 */

/* The starter site has already WMG declared in the 'Site Configuration'
 * javascript block in the header, which defines static site specific
 * configuration
 */
var WMG = WMG || {};

/*
 * Omniture  classes
 */
WMG.Omniture = (function () {
  var init = function () {};
  return {
    init: init,
  };
})();

WMG.OmnitureHelper = (function () {
  var populate = function (DrupalObj, OmnitureObj) {};
  return {
    populate: populate,
  };
})();

/*
 *  Silverpop classes
 */
WMG.SilverPop = (function () {
  var config = {
    server: "https://signup.wmg.com/register",
    siteName: "",
    siteId: "",
    keywordId: "",
    newsletterId: "",
    Datasource: "",
    autoreply: "",
  };

  var spObj = {
    email: "",
    sex: "",
    js: "true",
    newsletterId: "",
    keywordId: "",
    EosUserDisplayName: "",
    EosSiteAccountId: "",
    EosMasterAccountId: "",
    siteName: "",
    SiteId: "",
    postalcode: "",
    TwitterHandle: "",
    state: "",
    phone: "",
    lastname: "",
    firstname: "",
    dobYear: "",
    dobDay: "",
    dobMonth: "",
    city: "",
    age: "",
    country: "",
    address1: "",
    address2: "",
    address3: "",
    global_optin: "",
  };

  //controller for this class. Uses datapreparation method to prepar the data.
  // Uses submitData to submit the data to the server.
  var mergeSiteLevelVars = function (userData) {
    if (typeof config.siteId !== "undefined") {
      userData.siteId = config.siteId;
    }
    if (typeof config.siteName !== "undefined") {
      userData.siteName = config.siteName;
    }
    if (typeof config.newsletterId !== "undefined") {
      userData.newsletterId = config.newsletterId;
    }
    if (typeof config.keywordId !== "undefined") {
      userData.keywordId = config.keywordId;
    }
    if (typeof config.Datasource !== "undefined") {
      userData.Datasource = config.Datasource;
    }
    if (typeof config.autoreply !== "undefined") {
      userData.autoreply = config.autoreply;
    }
    return userData;
  };
  var submit = function (userData) {
    userData = mergeSiteLevelVars(userData);
    var validate = validateObj(userData);
    if (validate.status === true) {
      ping(userData);
      return true;
    } else {
      var errors = validate.errors;
      return errors;
    }
  };

  var validateObj = function (userData) {
    /* List of thing to check before we can send the data.
		 Essentially we check only the user input data, that can be corrected.*/
    var emailFilter = /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;
    var mobileFilter = /^[.]{0}$|^\d{10,15}$/;
    var mobileFilterUS = /^[.]{0}$|^\d{10}$/;
    var mobileFilterOTHER = /^[.]{0}$|^\d{10,15}$/;
    var retObj = {
      status: true,
    };
    var errors = {};
    if (!emailFilter.test(userData.email)) {
      errors.email = "Email Format is invalid";
    }
    if (typeof userData.mobile !== "undefined") {
      if (userData.country === "United States") {
        mobileFilter = mobileFilterUS;
      }
      if (!mobileFilter.test(userData.mobile)) {
        errors.mobile = "Mobile Number is invalid";
      }
    }
    var mobile = userData.mobile;
    if (!jQuery.isEmptyObject(errors)) {
      retObj.errors = errors;
      retObj.status = false;
    }
    return retObj;
  };

  var getObj = function () {
    var silverPopObj = spObj;
    return silverPopObj;
  };
  var ping = function (userData) {
    var qStr = "";
    if (userData.global_optin === "true") {
      userData.newsletterId =
        userData.newsletterId + "," + WMG.MailingList.labelListId;
    }
    jQuery.each(userData, function (key, value) {
      if (value !== "" && typeof value !== "undefined") {
        qStr += key + "=" + value + "&";
      }
    });
    qStr = qStr.slice(0, -1);
    jQuery.ajax({
      url: config.server,
      data: qStr,
      dataType: "script",
      success: function (data) {
        /* Ignore this now */
      },
    });
  };

  var callback = function (a, b) {
    /* Errors are supressed.
     * The problem is there is no way,
     * to report back to the calling function,
     * that there are errors.
     */
  };

  var init = function (userConfig) {
    if (typeof userConfig !== "undefined") {
      jQuery.extend(config, userConfig);
    }
  };

  return {
    init: init,
    submit: submit,
    callback: callback,
    getObj: getObj,
  };
})();
if (typeof callback === "undefined") {
  /* Variable hoisted intended */
  callback = function (a, b) {
    WMG.SilverPop.callback(a, b);
  };
}
WMG.SilverPopHelper = (function () {
  var dateFormatter = function (dateString) {
    var dateString = dateString.split(" ");
    var regexDate = /^((?:19|20)\d\d)[- /.](0[1-9]|1[012])[- /.](0[1-9]|[12][0-9]|3[01])$/;
    var result = regexDate.exec(dateString[0]);
    if (jQuery.isArray(result)) {
      var output = {};
      output.year = result[1];
      output.month = result[2];
      output.day = result[3];
    } else {
      output = false;
    }
    return output;
  };
  var genderFormatter = function (gender) {
    var retGender = "";
    if (typeof gender === "string") {
      switch (jQuery.trim(gender.toLowerCase())) {
        case "male":
          retGender = 2;
          break;
        case "female":
          retGender = 1;
          break;
      }
    }
    return retGender;
  };
  var populate = function (spObj, serverVars) {
    /* Take care of newsletterID, signup Type */
    if (serverVars.user_email !== null) {
      spObj.email = serverVars.user_email;
    }
    if (serverVars.user_gender !== null) {
      spObj.sex = genderFormatter(serverVars.user_gender);
    }
    if (serverVars.user_eos_wide_id !== null) {
      spObj.EosMasterAccountId = serverVars.user_eos_wide_id;
    }
    if (serverVars.user_eos_site_id !== null) {
      spObj.EosSiteAccountId = serverVars.user_eos_site_id;
    }
    if (serverVars.site_name !== null) {
      spObj.siteName = serverVars.site_name;
    }
    if (serverVars.user_postal_code !== null) {
      spObj.postalcode = serverVars.user_postal_code;
    }
    if (serverVars.user_twitter !== null) {
      spObj.TwitterHandle = serverVars.user_twitter;
    }
    if (serverVars.user_state !== null) {
      spObj.state = serverVars.user_state;
    }
    if (serverVars.user_eos_display_name !== null) {
      spObj.EosUserDisplayName = serverVars.user_eos_display_name;
    }
    if (serverVars.user_birthdate !== null) {
      var dateObj = dateFormatter(serverVars.user_birthdate);
      if (dateObj !== false) {
        spObj.dobYear = dateObj.year;
        spObj.dobDay = dateObj.day;
        spObj.dobMonth = dateObj.month;
      }
    }
    if (serverVars.user_city !== null) {
      spObj.city = serverVars.user_city;
    }
    if (serverVars.user_country !== null) {
      spObj.country = serverVars.user_country;
    }
    if (serverVars.spUpdate === true) {
      spObj.updateprofile = "yes";
    }
    if (serverVars.actuser_field_global_optin === 1) {
      spObj.global_optin = "true";
    }
    return spObj;
  };
  return {
    populate: populate,
  };
})();

WMG.AnalyticsController = (function () {
  var config = {
    omniture: WMG.Omniture,
    silverpop: WMG.SilverPop,
    serverVars: "",
  };

  var sendToSilverPop = function () {
    var spObj = WMG.SilverPop.getObj();
    spObj = WMG.SilverPopHelper.populate(spObj, config.serverVars);
    config.silverpop.submit(spObj);
  };
  var sendToOmniture = function () {};
  var processAnalytics = function () {
    var verifiedEmail = false;
    if (config.serverVars === "") {
      return;
    }
    /* This is an update scenario. */
    if (
      config.serverVars.action === "update" &&
      config.serverVars.entity_type == "node"
    ) {
      config.serverVars.spUpdate = true;
      sendToSilverPop();
    }

    /*An user has been inserted in the database. But email need not be verified*/
    if (
      config.serverVars.action == "insert" &&
      config.serverVars.entity_type == "node"
    ) {
      digitalData.page.pageInfo.pageName =
        digitalData.content.artist + ":Registration Email Sent";
      _satellite.track("register");
    }
    /*Email Verification step reached.*/
    if (location.href.indexOf("pass-reset-token") !== -1) {
      verifiedEmail = true;
      digitalData.page.pageInfo.pageName =
        digitalData.content.artist + ":One-Time Login";
    }

    if (verifiedEmail) {
      config.serverVars.spUpdate = false;
      sendToSilverPop();
    }
  };
  var init = function (userConfig) {
    /*Check for validity of serverVariable. If it does not come back. Just ignore it.*/
    if (typeof userConfig !== "undefined") {
      jQuery.extend(config, userConfig);
      processAnalytics();
    }
  };

  return {
    init: init,
  };
})();

/* Invoking silverpop */
WMG.SilverPop.init({
  siteName: Drupal.settings.server_variables.site_name,
  siteId: WMG.siteID /*Legacy EOS IDS*/,
  keywordId: WMG.MailingList.MobileKeywordIds["United States"],
  newsletterId: WMG.MailingList.EmailListIds["United States"],
  Datasource: WMG.MailingList.Datasource,
  autoreply: WMG.MailingList.autoreply,
});
WMG.Omniture.init();
if (typeof Drupal.settings.server_variables !== "undefined") {
  /*Pass Omniture, MailingList class. So that this is configurable. We can truly configure our variables. */
  WMG.AnalyticsController.init({
    serverVars: Drupal.settings.server_variables,
    omniture: WMG.Omniture,
    silverpop: WMG.SilverPop,
  });
}
/*! matchMedia() polyfill - Test a CSS media type/query in JS. Authors & copyright (c) 2012: Scott Jehl, Paul Irish, Nicholas Zakas. Dual MIT/BSD license */
/*! NOTE: If you're already including a window.matchMedia polyfill via Modernizr or otherwise, you don't need this part */
window.matchMedia =
  window.matchMedia ||
  (function (a) {
    "use strict";
    var c,
      d = a.documentElement,
      e = d.firstElementChild || d.firstChild,
      f = a.createElement("body"),
      g = a.createElement("div");
    return (
      (g.id = "mq-test-1"),
      (g.style.cssText = "position:absolute;top:-100em"),
      (f.style.background = "none"),
      f.appendChild(g),
      function (a) {
        return (
          (g.innerHTML =
            '&shy;<style media="' +
            a +
            '"> #mq-test-1 { width: 42px; }</style>'),
          d.insertBefore(f, e),
          (c = 42 === g.offsetWidth),
          d.removeChild(f),
          { matches: c, media: a }
        );
      }
    );
  })(document);

/*! Respond.js v1.1.0: min/max-width media query polyfill. (c) Scott Jehl. MIT/GPLv2 Lic. j.mp/respondjs  */
(function (a) {
  "use strict";
  function x() {
    u(!0);
  }
  var b = {};
  if (
    ((a.respond = b),
    (b.update = function () {}),
    (b.mediaQueriesSupported =
      a.matchMedia && a.matchMedia("only all").matches),
    !b.mediaQueriesSupported)
  ) {
    var q,
      r,
      t,
      c = a.document,
      d = c.documentElement,
      e = [],
      f = [],
      g = [],
      h = {},
      i = 30,
      j = c.getElementsByTagName("head")[0] || d,
      k = c.getElementsByTagName("base")[0],
      l = j.getElementsByTagName("link"),
      m = [],
      n = function () {
        for (var b = 0; l.length > b; b++) {
          var c = l[b],
            d = c.href,
            e = c.media,
            f = c.rel && "stylesheet" === c.rel.toLowerCase();
          d &&
            f &&
            !h[d] &&
            (c.styleSheet && c.styleSheet.rawCssText
              ? (p(c.styleSheet.rawCssText, d, e), (h[d] = !0))
              : ((!/^([a-zA-Z:]*\/\/)/.test(d) && !k) ||
                  d.replace(RegExp.$1, "").split("/")[0] === a.location.host) &&
                m.push({ href: d, media: e }));
        }
        o();
      },
      o = function () {
        if (m.length) {
          var b = m.shift();
          v(b.href, function (c) {
            p(c, b.href, b.media),
              (h[b.href] = !0),
              a.setTimeout(function () {
                o();
              }, 0);
          });
        }
      },
      p = function (a, b, c) {
        var d = a.match(/@media[^\{]+\{([^\{\}]*\{[^\}\{]*\})+/gi),
          g = (d && d.length) || 0;
        b = b.substring(0, b.lastIndexOf("/"));
        var h = function (a) {
            return a.replace(
              /(url\()['"]?([^\/\)'"][^:\)'"]+)['"]?(\))/g,
              "$1" + b + "$2$3"
            );
          },
          i = !g && c;
        b.length && (b += "/"), i && (g = 1);
        for (var j = 0; g > j; j++) {
          var k, l, m, n;
          i
            ? ((k = c), f.push(h(a)))
            : ((k = d[j].match(/@media *([^\{]+)\{([\S\s]+?)$/) && RegExp.$1),
              f.push(RegExp.$2 && h(RegExp.$2))),
            (m = k.split(",")),
            (n = m.length);
          for (var o = 0; n > o; o++)
            (l = m[o]),
              e.push({
                media:
                  (l.split("(")[0].match(/(only\s+)?([a-zA-Z]+)\s?/) &&
                    RegExp.$2) ||
                  "all",
                rules: f.length - 1,
                hasquery: l.indexOf("(") > -1,
                minw:
                  l.match(/\(\s*min\-width\s*:\s*(\s*[0-9\.]+)(px|em)\s*\)/) &&
                  parseFloat(RegExp.$1) + (RegExp.$2 || ""),
                maxw:
                  l.match(/\(\s*max\-width\s*:\s*(\s*[0-9\.]+)(px|em)\s*\)/) &&
                  parseFloat(RegExp.$1) + (RegExp.$2 || ""),
              });
        }
        u();
      },
      s = function () {
        var a,
          b = c.createElement("div"),
          e = c.body,
          f = !1;
        return (
          (b.style.cssText = "position:absolute;font-size:1em;width:1em"),
          e ||
            ((e = f = c.createElement("body")), (e.style.background = "none")),
          e.appendChild(b),
          d.insertBefore(e, d.firstChild),
          (a = b.offsetWidth),
          f ? d.removeChild(e) : e.removeChild(b),
          (a = t = parseFloat(a))
        );
      },
      u = function (b) {
        var h = "clientWidth",
          k = d[h],
          m = ("CSS1Compat" === c.compatMode && k) || c.body[h] || k,
          n = {},
          o = l[l.length - 1],
          p = new Date().getTime();
        if (b && q && i > p - q)
          return a.clearTimeout(r), (r = a.setTimeout(u, i)), void 0;
        q = p;
        for (var v in e)
          if (e.hasOwnProperty(v)) {
            var w = e[v],
              x = w.minw,
              y = w.maxw,
              z = null === x,
              A = null === y,
              B = "em";
            x && (x = parseFloat(x) * (x.indexOf(B) > -1 ? t || s() : 1)),
              y && (y = parseFloat(y) * (y.indexOf(B) > -1 ? t || s() : 1)),
              (w.hasquery && ((z && A) || !(z || m >= x) || !(A || y >= m))) ||
                (n[w.media] || (n[w.media] = []), n[w.media].push(f[w.rules]));
          }
        for (var C in g)
          g.hasOwnProperty(C) &&
            g[C] &&
            g[C].parentNode === j &&
            j.removeChild(g[C]);
        for (var D in n)
          if (n.hasOwnProperty(D)) {
            var E = c.createElement("style"),
              F = n[D].join("\n");
            (E.type = "text/css"),
              (E.media = D),
              j.insertBefore(E, o.nextSibling),
              E.styleSheet
                ? (E.styleSheet.cssText = F)
                : E.appendChild(c.createTextNode(F)),
              g.push(E);
          }
      },
      v = function (a, b) {
        var c = w();
        c &&
          (c.open("GET", a, !0),
          (c.onreadystatechange = function () {
            4 !== c.readyState ||
              (200 !== c.status && 304 !== c.status) ||
              b(c.responseText);
          }),
          4 !== c.readyState && c.send(null));
      },
      w = (function () {
        var b = !1;
        try {
          b = new a.XMLHttpRequest();
        } catch (c) {
          b = new a.ActiveXObject("Microsoft.XMLHTTP");
        }
        return function () {
          return b;
        };
      })();
    n(),
      (b.update = n),
      a.addEventListener
        ? a.addEventListener("resize", x, !1)
        : a.attachEvent && a.attachEvent("onresize", x);
  }
})(this);
/*
 * Copyright (c) 2013 Mike King (@micjamking)
 *
 * jQuery Succinct plugin
 * Version 1.0.1 (July 2013)
 *
 * Licensed under the MIT License
 */

/*global jQuery*/
(function ($) {
  "use strict";

  $.fn.succinct = function (options) {
    var defaults = {
        size: 240,
        omission: "...",
        ignore: true,
      },
      options = $.extend(defaults, options);

    return this.each(function () {
      var textDefault,
        textTruncated,
        elements = $(this),
        regex = /[!-\/:-@\[-`{-~]$/;

      var truncate = function () {
        elements.each(function () {
          textDefault = $(this).text();

          if (textDefault.length > options.size) {
            textTruncated = $.trim(textDefault)
              .substring(0, options.size)
              .split(" ")
              .slice(0, -1)
              .join(" ");

            if (options.ignore) {
              textTruncated = textTruncated.replace(regex, "");
            }

            $(this).text(textTruncated + options.omission);
          }
        });
      };

      var init = function () {
        truncate();
      };

      init();
    });
  };
})(jQuery);
/*
 * xLazyLoader 1.3 - Plugin for jQuery
 *
 * Load js, css and images asynchron and get different callbacks
 *
 * Dual licensed under the MIT (http://www.opensource.org/licenses/mit-license.php)
 * and GPL (http://www.opensource.org/licenses/gpl-license.php) licenses.
 *
 * Depends:
 *   jquery.js
 *
 *  Copyright (c) 2008 Oleg Slobodskoi (ajaxsoft.de)
 */

(function ($) {
  $.xLazyLoader = function (method, options) {
    if (typeof method == "object") {
      options = method;
      method = "init";
    }
    new xLazyLoader()[method](options);
  };

  $.xLazyLoader.defaults = {
    js: [],
    css: [],
    img: [],
    name: null,
    timeout: 20000,
    //success callback for all files
    success: function () {},
    //error callback - by load errors / timeout
    error: function () {},
    //complete callbck - by success or errors
    complete: function () {},
    //success callback for each file
    each: function () {},
  };

  var head = document.getElementsByTagName("head")[0];

  function xLazyLoader() {
    var self = this,
      s,
      loaded = [],
      errors = [],
      tTimeout,
      cssTimeout,
      toLoad,
      files = [];
    this.init = function (options) {
      if (!options) return;

      s = $.extend({}, $.xLazyLoader.defaults, options);
      toLoad = { js: s.js, css: s.css, img: s.img };

      $.each(toLoad, function (type, f) {
        if (typeof f == "string") f = f.split(",");
        files = files.concat(f);
      });

      if (!files.length) {
        dispatchCallbacks("error");
        return;
      }

      if (s.timeout) {
        tTimeout = setTimeout(function () {
          var handled = loaded.concat(errors);
          /* search for unhandled files */
          $.each(files, function (i, file) {
            $.inArray(file, handled) == -1 && errors.push(file);
          });
          dispatchCallbacks("error");
        }, s.timeout);
      }

      $.each(toLoad, function (type, urls) {
        if ($.isArray(urls))
          $.each(urls, function (i, url) {
            load(type, url);
          });
        else if (typeof urls == "string") load(type, urls);
      });
    };

    this.js = function (src, callback, name) {
      var $script = $('script[src*="' + src + '"]');
      if ($script.length) {
        $script.attr("pending")
          ? $script.bind("scriptload", callback)
          : callback();
        return;
      }

      var s = document.createElement("script");
      s.setAttribute("type", "text/javascript");
      s.setAttribute("src", src);
      s.setAttribute("id", name);
      s.setAttribute("pending", 1);
      // Mozilla only
      s.onerror = addError;

      $(s).bind("scriptload", function () {
        $(this).removeAttr("pending");
        callback();
        //unbind load event
        //timeout because of pending callbacks
        setTimeout(function () {
          $(s).unbind("scriptload");
        }, 10);
      });

      // jQuery doesn't handling onload event special for script tag,
      var done = false;
      s.onload = s.onreadystatechange = function () {
        if (
          !done &&
          (!this.readyState || /loaded|complete/.test(this.readyState))
        ) {
          done = true;
          // Handle memory leak in IE
          s.onload = s.onreadystatechange = null;
          $(s).trigger("scriptload");
        }
      };
      head.appendChild(s);
    };

    this.css = function (href, callback, name) {
      if ($('link[href*="' + href + '"]').length) {
        callback();
        return;
      }

      var link = $(
        '<link rel="stylesheet" type="text/css" media="all" href="' +
          href +
          '" id="' +
          name +
          '"></link>'
      )[0];
      if ($.browser.msie) {
        link.onreadystatechange = function () {
          /loaded|complete/.test(link.readyState) && callback();
        };
      } else if ($.browser.opera) {
        link.onload = callback;
      } else {
        /*
         * Mozilla, Safari, Chrome
         * unfortunately it is inpossible to check if the stylesheet is really loaded or it is "HTTP/1.0 400 Bad Request"
         * the only way to do this is to check if some special properties  were set, so there is no error callback for stylesheets -
         * it fires alway success
         *
         * There is also no access to sheet properties by crossdomain stylesheets,
         * so we fire callback immediately
         */

        var hostname = location.hostname.replace("www.", ""),
          hrefHostname = /http:/.test(href)
            ? /^(\w+:)?\/\/([^\/?#]+)/.exec(href)[2]
            : hostname;
        hostname != hrefHostname && $.browser.mozilla
          ? callback()
          : //stylesheet is from the same domain or it is not firefox
            (function () {
              try {
                link.sheet.cssRules;
              } catch (e) {
                cssTimeout = setTimeout(arguments.callee, 20);
                return;
              }
              callback();
            })();
      }

      head.appendChild(link);
    };

    this.img = function (src, callback) {
      var img = new Image();
      img.onload = callback;
      img.onerror = addError;
      img.src = src;
    };

    /* It works only for css */
    this.disable = function (name) {
      $("#lazy-loaded-" + name, head).attr("disabled", "disabled");
    };

    /* It works only for css */
    this.enable = function (name) {
      $("#lazy-loaded-" + name, head).removeAttr("disabled");
    };

    /*
     * By removing js tag, script ist still living in browser memory,
     * css will be really destroyed
     */
    this.destroy = function (name) {
      $("#lazy-loaded-" + name, head).remove();
    };

    function load(type, url) {
      self[type](
        url,
        function (status) {
          status == "error"
            ? errors.push(url)
            : loaded.push(url) && s.each(url);
          checkProgress();
        },
        "lazy-loaded-" + (s.name ? s.name : new Date().getTime())
      );
    }

    function dispatchCallbacks(status) {
      s.complete(status, loaded, errors);
      s[status](status == "error" ? errors : loaded);
      clearTimeout(tTimeout);
      clearTimeout(cssTimeout);
    }

    function checkProgress() {
      if (loaded.length == files.length) dispatchCallbacks("success");
      else if (loaded.length + errors.length == files.length)
        dispatchCallbacks("error");
    }

    function addError() {
      errors.push(this.src);
      checkProgress();
    }
  }
})(jQuery);
/*!
 * jQuery UI 1.8.7
 *
 * Copyright 2010, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI
 */
(function (c, j) {
  function k(a) {
    return !c(a)
      .parents()
      .andSelf()
      .filter(function () {
        return (
          c.curCSS(this, "visibility") === "hidden" ||
          c.expr.filters.hidden(this)
        );
      }).length;
  }
  c.ui = c.ui || {};
  if (!c.ui.version) {
    c.extend(c.ui, {
      version: "1.8.7",
      keyCode: {
        ALT: 18,
        BACKSPACE: 8,
        CAPS_LOCK: 20,
        COMMA: 188,
        COMMAND: 91,
        COMMAND_LEFT: 91,
        COMMAND_RIGHT: 93,
        CONTROL: 17,
        DELETE: 46,
        DOWN: 40,
        END: 35,
        ENTER: 13,
        ESCAPE: 27,
        HOME: 36,
        INSERT: 45,
        LEFT: 37,
        MENU: 93,
        NUMPAD_ADD: 107,
        NUMPAD_DECIMAL: 110,
        NUMPAD_DIVIDE: 111,
        NUMPAD_ENTER: 108,
        NUMPAD_MULTIPLY: 106,
        NUMPAD_SUBTRACT: 109,
        PAGE_DOWN: 34,
        PAGE_UP: 33,
        PERIOD: 190,
        RIGHT: 39,
        SHIFT: 16,
        SPACE: 32,
        TAB: 9,
        UP: 38,
        WINDOWS: 91,
      },
    });
    c.fn.extend({
      _focus: c.fn.focus,
      focus: function (a, b) {
        return typeof a === "number"
          ? this.each(function () {
              var d = this;
              setTimeout(function () {
                c(d).focus();
                b && b.call(d);
              }, a);
            })
          : this._focus.apply(this, arguments);
      },
      scrollParent: function () {
        var a;
        a =
          (c.browser.msie && /(static|relative)/.test(this.css("position"))) ||
          /absolute/.test(this.css("position"))
            ? this.parents()
                .filter(function () {
                  return (
                    /(relative|absolute|fixed)/.test(
                      c.curCSS(this, "position", 1)
                    ) &&
                    /(auto|scroll)/.test(
                      c.curCSS(this, "overflow", 1) +
                        c.curCSS(this, "overflow-y", 1) +
                        c.curCSS(this, "overflow-x", 1)
                    )
                  );
                })
                .eq(0)
            : this.parents()
                .filter(function () {
                  return /(auto|scroll)/.test(
                    c.curCSS(this, "overflow", 1) +
                      c.curCSS(this, "overflow-y", 1) +
                      c.curCSS(this, "overflow-x", 1)
                  );
                })
                .eq(0);
        return /fixed/.test(this.css("position")) || !a.length
          ? c(document)
          : a;
      },
      zIndex: function (a) {
        if (a !== j) return this.css("zIndex", a);
        if (this.length) {
          a = c(this[0]);
          for (var b; a.length && a[0] !== document; ) {
            b = a.css("position");
            if (b === "absolute" || b === "relative" || b === "fixed") {
              b = parseInt(a.css("zIndex"), 10);
              if (!isNaN(b) && b !== 0) return b;
            }
            a = a.parent();
          }
        }
        return 0;
      },
      disableSelection: function () {
        return this.bind(
          (c.support.selectstart ? "selectstart" : "mousedown") +
            ".ui-disableSelection",
          function (a) {
            a.preventDefault();
          }
        );
      },
      enableSelection: function () {
        return this.unbind(".ui-disableSelection");
      },
    });
    c.each(["Width", "Height"], function (a, b) {
      function d(f, g, l, m) {
        c.each(e, function () {
          g -= parseFloat(c.curCSS(f, "padding" + this, true)) || 0;
          if (l)
            g -= parseFloat(c.curCSS(f, "border" + this + "Width", true)) || 0;
          if (m) g -= parseFloat(c.curCSS(f, "margin" + this, true)) || 0;
        });
        return g;
      }
      var e = b === "Width" ? ["Left", "Right"] : ["Top", "Bottom"],
        h = b.toLowerCase(),
        i = {
          innerWidth: c.fn.innerWidth,
          innerHeight: c.fn.innerHeight,
          outerWidth: c.fn.outerWidth,
          outerHeight: c.fn.outerHeight,
        };
      c.fn["inner" + b] = function (f) {
        if (f === j) return i["inner" + b].call(this);
        return this.each(function () {
          c(this).css(h, d(this, f) + "px");
        });
      };
      c.fn["outer" + b] = function (f, g) {
        if (typeof f !== "number") return i["outer" + b].call(this, f);
        return this.each(function () {
          c(this).css(h, d(this, f, true, g) + "px");
        });
      };
    });
    c.extend(c.expr[":"], {
      data: function (a, b, d) {
        return !!c.data(a, d[3]);
      },
      focusable: function (a) {
        var b = a.nodeName.toLowerCase(),
          d = c.attr(a, "tabindex");
        if ("area" === b) {
          b = a.parentNode;
          d = b.name;
          if (!a.href || !d || b.nodeName.toLowerCase() !== "map") return false;
          a = c("img[usemap=#" + d + "]")[0];
          return !!a && k(a);
        }
        return (
          (/input|select|textarea|button|object/.test(b)
            ? !a.disabled
            : "a" == b
            ? a.href || !isNaN(d)
            : !isNaN(d)) && k(a)
        );
      },
      tabbable: function (a) {
        var b = c.attr(a, "tabindex");
        return (isNaN(b) || b >= 0) && c(a).is(":focusable");
      },
    });
    c(function () {
      var a = document.body,
        b = a.appendChild((b = document.createElement("div")));
      c.extend(b.style, {
        minHeight: "100px",
        height: "auto",
        padding: 0,
        borderWidth: 0,
      });
      c.support.minHeight = b.offsetHeight === 100;
      c.support.selectstart = "onselectstart" in b;
      a.removeChild(b).style.display = "none";
    });
    c.extend(c.ui, {
      plugin: {
        add: function (a, b, d) {
          a = c.ui[a].prototype;
          for (var e in d) {
            a.plugins[e] = a.plugins[e] || [];
            a.plugins[e].push([b, d[e]]);
          }
        },
        call: function (a, b, d) {
          if ((b = a.plugins[b]) && a.element[0].parentNode)
            for (var e = 0; e < b.length; e++)
              a.options[b[e][0]] && b[e][1].apply(a.element, d);
        },
      },
      contains: function (a, b) {
        return document.compareDocumentPosition
          ? a.compareDocumentPosition(b) & 16
          : a !== b && a.contains(b);
      },
      hasScroll: function (a, b) {
        if (c(a).css("overflow") === "hidden") return false;
        b = b && b === "left" ? "scrollLeft" : "scrollTop";
        var d = false;
        if (a[b] > 0) return true;
        a[b] = 1;
        d = a[b] > 0;
        a[b] = 0;
        return d;
      },
      isOverAxis: function (a, b, d) {
        return a > b && a < b + d;
      },
      isOver: function (a, b, d, e, h, i) {
        return c.ui.isOverAxis(a, d, h) && c.ui.isOverAxis(b, e, i);
      },
    });
  }
})(jQuery);
/*!
 * jQuery UI Widget 1.8.7
 *
 * Copyright 2010, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Widget
 */
(function (b, j) {
  if (b.cleanData) {
    var k = b.cleanData;
    b.cleanData = function (a) {
      for (var c = 0, d; (d = a[c]) != null; c++) b(d).triggerHandler("remove");
      k(a);
    };
  } else {
    var l = b.fn.remove;
    b.fn.remove = function (a, c) {
      return this.each(function () {
        if (!c)
          if (!a || b.filter(a, [this]).length)
            b("*", this)
              .add([this])
              .each(function () {
                b(this).triggerHandler("remove");
              });
        return l.call(b(this), a, c);
      });
    };
  }
  b.widget = function (a, c, d) {
    var e = a.split(".")[0],
      f;
    a = a.split(".")[1];
    f = e + "-" + a;
    if (!d) {
      d = c;
      c = b.Widget;
    }
    b.expr[":"][f] = function (h) {
      return !!b.data(h, a);
    };
    b[e] = b[e] || {};
    b[e][a] = function (h, g) {
      arguments.length && this._createWidget(h, g);
    };
    c = new c();
    c.options = b.extend(true, {}, c.options);
    b[e][a].prototype = b.extend(
      true,
      c,
      {
        namespace: e,
        widgetName: a,
        widgetEventPrefix: b[e][a].prototype.widgetEventPrefix || a,
        widgetBaseClass: f,
      },
      d
    );
    b.widget.bridge(a, b[e][a]);
  };
  b.widget.bridge = function (a, c) {
    b.fn[a] = function (d) {
      var e = typeof d === "string",
        f = Array.prototype.slice.call(arguments, 1),
        h = this;
      d = !e && f.length ? b.extend.apply(null, [true, d].concat(f)) : d;
      if (e && d.charAt(0) === "_") return h;
      e
        ? this.each(function () {
            var g = b.data(this, a),
              i = g && b.isFunction(g[d]) ? g[d].apply(g, f) : g;
            if (i !== g && i !== j) {
              h = i;
              return false;
            }
          })
        : this.each(function () {
            var g = b.data(this, a);
            g ? g.option(d || {})._init() : b.data(this, a, new c(d, this));
          });
      return h;
    };
  };
  b.Widget = function (a, c) {
    arguments.length && this._createWidget(a, c);
  };
  b.Widget.prototype = {
    widgetName: "widget",
    widgetEventPrefix: "",
    options: { disabled: false },
    _createWidget: function (a, c) {
      b.data(c, this.widgetName, this);
      this.element = b(c);
      this.options = b.extend(
        true,
        {},
        this.options,
        this._getCreateOptions(),
        a
      );
      var d = this;
      this.element.bind("remove." + this.widgetName, function () {
        d.destroy();
      });
      this._create();
      this._trigger("create");
      this._init();
    },
    _getCreateOptions: function () {
      return b.metadata && b.metadata.get(this.element[0])[this.widgetName];
    },
    _create: function () {},
    _init: function () {},
    destroy: function () {
      this.element.unbind("." + this.widgetName).removeData(this.widgetName);
      this.widget()
        .unbind("." + this.widgetName)
        .removeAttr("aria-disabled")
        .removeClass(this.widgetBaseClass + "-disabled ui-state-disabled");
    },
    widget: function () {
      return this.element;
    },
    option: function (a, c) {
      var d = a;
      if (arguments.length === 0) return b.extend({}, this.options);
      if (typeof a === "string") {
        if (c === j) return this.options[a];
        d = {};
        d[a] = c;
      }
      this._setOptions(d);
      return this;
    },
    _setOptions: function (a) {
      var c = this;
      b.each(a, function (d, e) {
        c._setOption(d, e);
      });
      return this;
    },
    _setOption: function (a, c) {
      this.options[a] = c;
      if (a === "disabled")
        this.widget()
          [c ? "addClass" : "removeClass"](
            this.widgetBaseClass + "-disabled ui-state-disabled"
          )
          .attr("aria-disabled", c);
      return this;
    },
    enable: function () {
      return this._setOption("disabled", false);
    },
    disable: function () {
      return this._setOption("disabled", true);
    },
    _trigger: function (a, c, d) {
      var e = this.options[a];
      c = b.Event(c);
      c.type = (a === this.widgetEventPrefix
        ? a
        : this.widgetEventPrefix + a
      ).toLowerCase();
      d = d || {};
      if (c.originalEvent) {
        a = b.event.props.length;
        for (var f; a; ) {
          f = b.event.props[--a];
          c[f] = c.originalEvent[f];
        }
      }
      this.element.trigger(c, d);
      return !(
        (b.isFunction(e) && e.call(this.element[0], c, d) === false) ||
        c.isDefaultPrevented()
      );
    },
  };
})(jQuery);
/*
 * jQuery BBQ: Back Button & Query Library - v1.2.1 - 2/17/2010
 * http://benalman.com/projects/jquery-bbq-plugin/
 *
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */
(function ($, p) {
  var i,
    m = Array.prototype.slice,
    r = decodeURIComponent,
    a = $.param,
    c,
    l,
    v,
    b = ($.bbq = $.bbq || {}),
    q,
    u,
    j,
    e = $.event.special,
    d = "hashchange",
    A = "querystring",
    D = "fragment",
    y = "elemUrlAttr",
    g = "location",
    k = "href",
    t = "src",
    x = /^.*\?|#.*$/g,
    w = /^.*\#/,
    h,
    C = {};
  function E(F) {
    return typeof F === "string";
  }
  function B(G) {
    var F = m.call(arguments, 1);
    return function () {
      return G.apply(this, F.concat(m.call(arguments)));
    };
  }
  function n(F) {
    return F.replace(/^[^#]*#?(.*)$/, "$1");
  }
  function o(F) {
    return F.replace(/(?:^[^?#]*\?([^#]*).*$)?.*/, "$1");
  }
  function f(H, M, F, I, G) {
    var O, L, K, N, J;
    if (I !== i) {
      K = F.match(H ? /^([^#]*)\#?(.*)$/ : /^([^#?]*)\??([^#]*)(#?.*)/);
      J = K[3] || "";
      if (G === 2 && E(I)) {
        L = I.replace(H ? w : x, "");
      } else {
        N = l(K[2]);
        I = E(I) ? l[H ? D : A](I) : I;
        L = G === 2 ? I : G === 1 ? $.extend({}, I, N) : $.extend({}, N, I);
        L = a(L);
        if (H) {
          L = L.replace(h, r);
        }
      }
      O = K[1] + (H ? "#" : L || !K[1] ? "?" : "") + L + J;
    } else {
      O = M(F !== i ? F : p[g][k]);
    }
    return O;
  }
  a[A] = B(f, 0, o);
  a[D] = c = B(f, 1, n);
  c.noEscape = function (G) {
    G = G || "";
    var F = $.map(G.split(""), encodeURIComponent);
    h = new RegExp(F.join("|"), "g");
  };
  c.noEscape(",/");
  $.deparam = l = function (I, F) {
    var H = {},
      G = { true: !0, false: !1, null: null };
    $.each(I.replace(/\+/g, " ").split("&"), function (L, Q) {
      var K = Q.split("="),
        P = r(K[0]),
        J,
        O = H,
        M = 0,
        R = P.split("]["),
        N = R.length - 1;
      if (/\[/.test(R[0]) && /\]$/.test(R[N])) {
        R[N] = R[N].replace(/\]$/, "");
        R = R.shift().split("[").concat(R);
        N = R.length - 1;
      } else {
        N = 0;
      }
      if (K.length === 2) {
        J = r(K[1]);
        if (F) {
          J =
            J && !isNaN(J) ? +J : J === "undefined" ? i : G[J] !== i ? G[J] : J;
        }
        if (N) {
          for (; M <= N; M++) {
            P = R[M] === "" ? O.length : R[M];
            O = O[P] =
              M < N ? O[P] || (R[M + 1] && isNaN(R[M + 1]) ? {} : []) : J;
          }
        } else {
          if ($.isArray(H[P])) {
            H[P].push(J);
          } else {
            if (H[P] !== i) {
              H[P] = [H[P], J];
            } else {
              H[P] = J;
            }
          }
        }
      } else {
        if (P) {
          H[P] = F ? i : "";
        }
      }
    });
    return H;
  };
  function z(H, F, G) {
    if (F === i || typeof F === "boolean") {
      G = F;
      F = a[H ? D : A]();
    } else {
      F = E(F) ? F.replace(H ? w : x, "") : F;
    }
    return l(F, G);
  }
  l[A] = B(z, 0);
  l[D] = v = B(z, 1);
  $[y] ||
    ($[y] = function (F) {
      return $.extend(C, F);
    })({
      a: k,
      base: k,
      iframe: t,
      img: t,
      input: t,
      form: "action",
      link: k,
      script: t,
    });
  j = $[y];
  function s(I, G, H, F) {
    if (!E(H) && typeof H !== "object") {
      F = H;
      H = G;
      G = i;
    }
    return this.each(function () {
      var L = $(this),
        J = G || j()[(this.nodeName || "").toLowerCase()] || "",
        K = (J && L.attr(J)) || "";
      L.attr(J, a[I](K, H, F));
    });
  }
  $.fn[A] = B(s, A);
  $.fn[D] = B(s, D);
  b.pushState = q = function (I, F) {
    if (E(I) && /^#/.test(I) && F === i) {
      F = 2;
    }
    var H = I !== i,
      G = c(p[g][k], H ? I : {}, H ? F : 2);
    p[g][k] = G + (/#/.test(G) ? "" : "#");
  };
  b.getState = u = function (F, G) {
    return F === i || typeof F === "boolean" ? v(F) : v(G)[F];
  };
  b.removeState = function (F) {
    var G = {};
    if (F !== i) {
      G = u();
      $.each($.isArray(F) ? F : arguments, function (I, H) {
        delete G[H];
      });
    }
    q(G, 2);
  };
  e[d] = $.extend(e[d], {
    add: function (F) {
      var H;
      function G(J) {
        var I = (J[D] = c());
        J.getState = function (K, L) {
          return K === i || typeof K === "boolean" ? l(I, K) : l(I, L)[K];
        };
        H.apply(this, arguments);
      }
      if ($.isFunction(F)) {
        H = F;
        return G;
      } else {
        H = F.handler;
        F.handler = G;
      }
    },
  });
})(jQuery, this);
/*
 * jQuery hashchange event - v1.2 - 2/11/2010
 * http://benalman.com/projects/jquery-hashchange-plugin/
 *
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */
(function ($, i, b) {
  var j,
    k = $.event.special,
    c = "location",
    d = "hashchange",
    l = "href",
    f = $.browser,
    g = document.documentMode,
    h = f.msie && (g === b || g < 8),
    e = "on" + d in i && !h;
  function a(m) {
    m = m || i[c][l];
    return m.replace(/^[^#]*#?(.*)$/, "$1");
  }
  $[d + "Delay"] = 100;
  k[d] = $.extend(k[d], {
    setup: function () {
      if (e) {
        return false;
      }
      $(j.start);
    },
    teardown: function () {
      if (e) {
        return false;
      }
      $(j.stop);
    },
  });
  j = (function () {
    var m = {},
      r,
      n,
      o,
      q;
    function p() {
      o = q = function (s) {
        return s;
      };
      if (h) {
        n = $('<iframe src="javascript:0"/>').hide().insertAfter("body")[0]
          .contentWindow;
        q = function () {
          return a(n.document[c][l]);
        };
        o = function (u, s) {
          if (u !== s) {
            var t = n.document;
            t.open().close();
            t[c].hash = "#" + u;
          }
        };
        o(a());
      }
    }
    m.start = function () {
      if (r) {
        return;
      }
      var t = a();
      o || p();
      (function s() {
        var v = a(),
          u = q(t);
        if (v !== t) {
          o((t = v), u);
          $(i).trigger(d);
        } else {
          if (u !== t) {
            i[c][l] = i[c][l].replace(/#.*/, "") + "#" + u;
          }
        }
        r = setTimeout(s, $[d + "Delay"]);
      })();
    };
    m.stop = function () {
      if (!n) {
        r && clearTimeout(r);
        r = 0;
      }
    };
    return m;
  })();
})(jQuery, this);
/**
 * @file
 * Attaches the behaviors for the Overlay parent pages.
 */

(function ($) {
  /**
   * Open the overlay, or load content into it, when an admin link is clicked.
   */
  Drupal.behaviors.overlayParent = {
    attach: function (context, settings) {
      if (Drupal.overlay.isOpen) {
        Drupal.overlay.makeDocumentUntabbable(context);
      }

      if (this.processed) {
        return;
      }
      this.processed = true;

      $(window)
        // When the hash (URL fragment) changes, open the overlay if needed.
        .bind(
          "hashchange.drupal-overlay",
          $.proxy(Drupal.overlay, "eventhandlerOperateByURLFragment")
        )
        // Trigger the hashchange handler once, after the page is loaded, so that
        // permalinks open the overlay.
        .triggerHandler("hashchange.drupal-overlay");

      $(document)
        // Instead of binding a click event handler to every link we bind one to
        // the document and only handle events that bubble up. This allows other
        // scripts to bind their own handlers to links and also to prevent
        // overlay's handling.
        .bind(
          "click.drupal-overlay mouseup.drupal-overlay",
          $.proxy(Drupal.overlay, "eventhandlerOverrideLink")
        );
    },
  };

  /**
   * Overlay object for parent windows.
   *
   * Events
   * Overlay triggers a number of events that can be used by other scripts.
   * - drupalOverlayOpen: This event is triggered when the overlay is opened.
   * - drupalOverlayBeforeClose: This event is triggered when the overlay attempts
   *   to close. If an event handler returns false, the close will be prevented.
   * - drupalOverlayClose: This event is triggered when the overlay is closed.
   * - drupalOverlayBeforeLoad: This event is triggered right before a new URL
   *   is loaded into the overlay.
   * - drupalOverlayReady: This event is triggered when the DOM of the overlay
   *   child document is fully loaded.
   * - drupalOverlayLoad: This event is triggered when the overlay is finished
   *   loading.
   * - drupalOverlayResize: This event is triggered when the overlay is being
   *   resized to match the parent window.
   */
  Drupal.overlay = Drupal.overlay || {
    isOpen: false,
    isOpening: false,
    isClosing: false,
    isLoading: false,
  };

  Drupal.overlay.prototype = {};

  /**
   * Open the overlay.
   *
   * @param url
   *   The URL of the page to open in the overlay.
   *
   * @return
   *   TRUE if the overlay was opened, FALSE otherwise.
   */
  Drupal.overlay.open = function (url) {
    // Just one overlay is allowed.
    if (this.isOpen || this.isOpening) {
      return this.load(url);
    }
    this.isOpening = true;
    // Store the original document title.
    this.originalTitle = document.title;

    // Create the dialog and related DOM elements.
    this.create();

    this.isOpening = false;
    this.isOpen = true;
    $(document.documentElement).addClass("overlay-open");
    this.makeDocumentUntabbable();

    // Allow other scripts to respond to this event.
    $(document).trigger("drupalOverlayOpen");

    return this.load(url);
  };

  /**
   * Create the underlying markup and behaviors for the overlay.
   */
  Drupal.overlay.create = function () {
    this.$container = $(Drupal.theme("overlayContainer")).appendTo(
      document.body
    );

    // Overlay uses transparent iframes that cover the full parent window.
    // When the overlay is open the scrollbar of the parent window is hidden.
    // Because some browsers show a white iframe background for a short moment
    // while loading a page into an iframe, overlay uses two iframes. By loading
    // the page in a hidden (inactive) iframe the user doesn't see the white
    // background. When the page is loaded the active and inactive iframes
    // are switched.
    this.activeFrame = this.$iframeA = $(
      Drupal.theme("overlayElement")
    ).appendTo(this.$container);

    this.inactiveFrame = this.$iframeB = $(
      Drupal.theme("overlayElement")
    ).appendTo(this.$container);

    this.$iframeA.bind(
      "load.drupal-overlay",
      { self: this.$iframeA[0], sibling: this.$iframeB },
      $.proxy(this, "loadChild")
    );
    this.$iframeB.bind(
      "load.drupal-overlay",
      { self: this.$iframeB[0], sibling: this.$iframeA },
      $.proxy(this, "loadChild")
    );

    // Add a second class "drupal-overlay-open" to indicate these event handlers
    // should only be bound when the overlay is open.
    var eventClass = ".drupal-overlay.drupal-overlay-open";
    $(window).bind(
      "resize" + eventClass,
      $.proxy(this, "eventhandlerOuterResize")
    );
    $(document)
      .bind(
        "drupalOverlayLoad" + eventClass,
        $.proxy(this, "eventhandlerOuterResize")
      )
      .bind(
        "drupalOverlayReady" + eventClass + " drupalOverlayClose" + eventClass,
        $.proxy(this, "eventhandlerSyncURLFragment")
      )
      .bind(
        "drupalOverlayClose" + eventClass,
        $.proxy(this, "eventhandlerRefreshPage")
      )
      .bind(
        "drupalOverlayBeforeClose" +
          eventClass +
          " drupalOverlayBeforeLoad" +
          eventClass +
          " drupalOverlayResize" +
          eventClass,
        $.proxy(this, "eventhandlerDispatchEvent")
      );

    if ($(".overlay-displace-top, .overlay-displace-bottom").length) {
      $(document)
        .bind(
          "drupalOverlayResize" + eventClass,
          $.proxy(this, "eventhandlerAlterDisplacedElements")
        )
        .bind(
          "drupalOverlayClose" + eventClass,
          $.proxy(this, "eventhandlerRestoreDisplacedElements")
        );
    }
  };

  /**
   * Load the given URL into the overlay iframe.
   *
   * Use this method to change the URL being loaded in the overlay if it is
   * already open.
   *
   * @return
   *   TRUE if URL is loaded into the overlay, FALSE otherwise.
   */
  Drupal.overlay.load = function (url) {
    if (!this.isOpen) {
      return false;
    }

    // Allow other scripts to respond to this event.
    $(document).trigger("drupalOverlayBeforeLoad");

    $(document.documentElement).addClass("overlay-loading");

    // The contentDocument property is not supported in IE until IE8.
    var iframeDocument =
      this.inactiveFrame[0].contentDocument ||
      this.inactiveFrame[0].contentWindow.document;

    // location.replace doesn't create a history entry. location.href does.
    // In this case, we want location.replace, as we're creating the history
    // entry using URL fragments.
    iframeDocument.location.replace(url);

    return true;
  };

  /**
   * Close the overlay and remove markup related to it from the document.
   *
   * @return
   *   TRUE if the overlay was closed, FALSE otherwise.
   */
  Drupal.overlay.close = function () {
    // Prevent double execution when close is requested more than once.
    if (!this.isOpen || this.isClosing) {
      return false;
    }

    // Allow other scripts to respond to this event.
    var event = $.Event("drupalOverlayBeforeClose");
    $(document).trigger(event);
    // If a handler returned false, the close will be prevented.
    if (event.isDefaultPrevented()) {
      return false;
    }

    this.isClosing = true;
    this.isOpen = false;
    $(document.documentElement).removeClass("overlay-open");
    // Restore the original document title.
    document.title = this.originalTitle;
    this.makeDocumentTabbable();

    // Allow other scripts to respond to this event.
    $(document).trigger("drupalOverlayClose");

    // When the iframe is still loading don't destroy it immediately but after
    // the content is loaded (see Drupal.overlay.loadChild).
    if (!this.isLoading) {
      this.destroy();
      this.isClosing = false;
    }
    return true;
  };

  /**
   * Destroy the overlay.
   */
  Drupal.overlay.destroy = function () {
    $([document, window]).unbind(".drupal-overlay-open");
    this.$container.remove();

    this.$container = null;
    this.$iframeA = null;
    this.$iframeB = null;

    this.iframeWindow = null;
  };

  /**
   * Redirect the overlay parent window to the given URL.
   *
   * @param url
   *   Can be an absolute URL or a relative link to the domain root.
   */
  Drupal.overlay.redirect = function (url) {
    // Create a native Link object, so we can use its object methods.
    var link = $(url.link(url)).get(0);

    // If the link is already open, force the hashchange event to simulate reload.
    if (window.location.href == link.href) {
      $(window).triggerHandler("hashchange.drupal-overlay");
    }

    window.location.href = link.href;
    return true;
  };

  /**
   * Bind the child window.
   *
   * Note that this function is fired earlier than Drupal.overlay.loadChild.
   */
  Drupal.overlay.bindChild = function (iframeWindow, isClosing) {
    this.iframeWindow = iframeWindow;

    // We are done if the child window is closing.
    if (isClosing || this.isClosing || !this.isOpen) {
      return;
    }

    // Allow other scripts to respond to this event.
    $(document).trigger("drupalOverlayReady");
  };

  /**
   * Event handler: load event handler for the overlay iframe.
   *
   * @param event
   *   Event being triggered, with the following restrictions:
   *   - event.type: load
   *   - event.currentTarget: iframe
   */
  Drupal.overlay.loadChild = function (event) {
    var iframe = event.data.self;
    var iframeDocument =
      iframe.contentDocument || iframe.contentWindow.document;
    var iframeWindow =
      iframeDocument.defaultView || iframeDocument.parentWindow;
    if (iframeWindow.location == "about:blank") {
      return;
    }

    this.isLoading = false;
    $(document.documentElement).removeClass("overlay-loading");
    event.data.sibling.removeClass("overlay-active").attr({ tabindex: -1 });

    // Only continue when overlay is still open and not closing.
    if (this.isOpen && !this.isClosing) {
      // And child document is an actual overlayChild.
      if (iframeWindow.Drupal && iframeWindow.Drupal.overlayChild) {
        // Replace the document title with title of iframe.
        document.title = iframeWindow.document.title;

        this.activeFrame = $(iframe)
          .addClass("overlay-active")
          // Add a title attribute to the iframe for accessibility.
          .attr(
            "title",
            Drupal.t("@title dialog", {
              "@title": iframeWindow.jQuery("#overlay-title").text(),
            })
          )
          .removeAttr("tabindex");
        this.inactiveFrame = event.data.sibling;

        // Load an empty document into the inactive iframe.
        (
          this.inactiveFrame[0].contentDocument ||
          this.inactiveFrame[0].contentWindow.document
        ).location.replace("about:blank");

        // Move the focus to just before the "skip to main content" link inside
        // the overlay.
        this.activeFrame.focus();
        var skipLink = iframeWindow.jQuery("a:first");
        Drupal.overlay.setFocusBefore(skipLink, iframeWindow.document);

        // Allow other scripts to respond to this event.
        $(document).trigger("drupalOverlayLoad");
      } else {
        window.location = iframeWindow.location.href
          .replace(/([?&]?)render=overlay&?/g, "$1")
          .replace(/\?$/, "");
      }
    } else {
      this.destroy();
    }
  };

  /**
   * Creates a placeholder element to receive document focus.
   *
   * Setting the document focus to a link will make it visible, even if it's a
   * "skip to main content" link that should normally be visible only when the
   * user tabs to it. This function can be used to set the document focus to
   * just before such an invisible link.
   *
   * @param $element
   *   The jQuery element that should receive focus on the next tab press.
   * @param document
   *   The iframe window element to which the placeholder should be added. The
   *   placeholder element has to be created inside the same iframe as the element
   *   it precedes, to keep IE happy. (http://bugs.jquery.com/ticket/4059)
   */
  Drupal.overlay.setFocusBefore = function ($element, document) {
    // Create an anchor inside the placeholder document.
    var placeholder = document.createElement("a");
    var $placeholder = $(placeholder)
      .addClass("element-invisible")
      .attr("href", "#");
    // Put the placeholder where it belongs, and set the document focus to it.
    $placeholder.insertBefore($element);
    $placeholder.focus();
    // Make the placeholder disappear as soon as it loses focus, so that it
    // doesn't appear in the tab order again.
    $placeholder.one("blur", function () {
      $(this).remove();
    });
  };

  /**
   * Check if the given link is in the administrative section of the site.
   *
   * @param url
   *   The URL to be tested.
   *
   * @return boolean
   *   TRUE if the URL represents an administrative link, FALSE otherwise.
   */
  Drupal.overlay.isAdminLink = function (url) {
    if (!Drupal.urlIsLocal(url)) {
      return false;
    }

    var path = this.getPath(url);

    // Turn the list of administrative paths into a regular expression.
    if (!this.adminPathRegExp) {
      var prefix = "";
      if (Drupal.settings.overlay.pathPrefixes.length) {
        // Allow path prefixes used for language negatiation followed by slash,
        // and the empty string.
        prefix = "(" + Drupal.settings.overlay.pathPrefixes.join("/|") + "/|)";
      }
      var adminPaths =
        "^" +
        prefix +
        "(" +
        Drupal.settings.overlay.paths.admin.replace(/\s+/g, "|") +
        ")$";
      var nonAdminPaths =
        "^" +
        prefix +
        "(" +
        Drupal.settings.overlay.paths.non_admin.replace(/\s+/g, "|") +
        ")$";
      adminPaths = adminPaths.replace(/\*/g, ".*");
      nonAdminPaths = nonAdminPaths.replace(/\*/g, ".*");
      this.adminPathRegExp = new RegExp(adminPaths);
      this.nonAdminPathRegExp = new RegExp(nonAdminPaths);
    }

    return (
      this.adminPathRegExp.exec(path) && !this.nonAdminPathRegExp.exec(path)
    );
  };

  /**
   * Determine whether a link is external to the site.
   *
   * Deprecated. Use Drupal.urlIsLocal() instead.
   *
   * @param url
   *   The URL to be tested.
   *
   * @return boolean
   *   TRUE if the URL is external to the site, FALSE otherwise.
   */
  Drupal.overlay.isExternalLink = function (url) {
    return !Drupal.urlIsLocal(url);
  };

  /**
   * Constructs an internal URL (relative to this site) from the provided path.
   *
   * For example, if the provided path is 'admin' and the site is installed at
   * http://example.com/drupal, this function will return '/drupal/admin'.
   *
   * @param path
   *   The internal path, without any leading slash.
   *
   * @return
   *   The internal URL derived from the provided path, or null if a valid
   *   internal path cannot be constructed (for example, if an attempt to create
   *   an external link is detected).
   */
  Drupal.overlay.getInternalUrl = function (path) {
    var url = Drupal.settings.basePath + path;
    if (Drupal.urlIsLocal(url)) {
      return url;
    }
  };

  /**
   * Event handler: resizes overlay according to the size of the parent window.
   *
   * @param event
   *   Event being triggered, with the following restrictions:
   *   - event.type: any
   *   - event.currentTarget: any
   */
  Drupal.overlay.eventhandlerOuterResize = function (event) {
    // Proceed only if the overlay still exists.
    if (
      !(this.isOpen || this.isOpening) ||
      this.isClosing ||
      !this.iframeWindow
    ) {
      return;
    }

    // IE6 uses position:absolute instead of position:fixed.
    if (typeof document.body.style.maxHeight != "string") {
      this.activeFrame.height($(window).height());
    }

    // Allow other scripts to respond to this event.
    $(document).trigger("drupalOverlayResize");
  };

  /**
   * Event handler: resizes displaced elements so they won't overlap the scrollbar
   * of overlay's iframe.
   *
   * @param event
   *   Event being triggered, with the following restrictions:
   *   - event.type: any
   *   - event.currentTarget: any
   */
  Drupal.overlay.eventhandlerAlterDisplacedElements = function (event) {
    // Proceed only if the overlay still exists.
    if (
      !(this.isOpen || this.isOpening) ||
      this.isClosing ||
      !this.iframeWindow
    ) {
      return;
    }

    $(this.iframeWindow.document.body)
      .css({
        marginTop: Drupal.overlay.getDisplacement("top"),
        marginBottom: Drupal.overlay.getDisplacement("bottom"),
      })
      // IE7 isn't reflowing the document immediately.
      // @todo This might be fixed in a cleaner way.
      .addClass("overlay-trigger-reflow")
      .removeClass("overlay-trigger-reflow");

    var documentHeight = this.iframeWindow.document.body.clientHeight;
    var documentWidth = this.iframeWindow.document.body.clientWidth;
    // IE6 doesn't support maxWidth, use width instead.
    var maxWidthName =
      typeof document.body.style.maxWidth == "string" ? "maxWidth" : "width";

    if (
      Drupal.overlay.leftSidedScrollbarOffset === undefined &&
      $(document.documentElement).attr("dir") === "rtl"
    ) {
      // We can't use element.clientLeft to detect whether scrollbars are placed
      // on the left side of the element when direction is set to "rtl" as most
      // browsers dont't support it correctly.
      // http://www.gtalbot.org/BugzillaSection/DocumentAllDHTMLproperties.html
      // There seems to be absolutely no way to detect whether the scrollbar
      // is on the left side in Opera; always expect scrollbar to be on the left.
      if ($.browser.opera) {
        Drupal.overlay.leftSidedScrollbarOffset =
          document.documentElement.clientWidth -
          this.iframeWindow.document.documentElement.clientWidth +
          this.iframeWindow.document.documentElement.clientLeft;
      } else if (this.iframeWindow.document.documentElement.clientLeft) {
        Drupal.overlay.leftSidedScrollbarOffset = this.iframeWindow.document.documentElement.clientLeft;
      } else {
        var el1 = $(
          '<div style="direction: rtl; overflow: scroll;"></div>'
        ).appendTo(document.body);
        var el2 = $("<div></div>").appendTo(el1);
        Drupal.overlay.leftSidedScrollbarOffset = parseInt(
          el2[0].offsetLeft - el1[0].offsetLeft
        );
        el1.remove();
      }
    }

    // Consider any element that should be visible above the overlay (such as
    // a toolbar).
    $(".overlay-displace-top, .overlay-displace-bottom").each(function () {
      var data = $(this).data();
      var maxWidth = documentWidth;
      // In IE, Shadow filter makes element to overlap the scrollbar with 1px.
      if (
        this.filters &&
        this.filters.length &&
        this.filters.item("DXImageTransform.Microsoft.Shadow")
      ) {
        maxWidth -= 1;
      }

      if (Drupal.overlay.leftSidedScrollbarOffset) {
        $(this).css("left", Drupal.overlay.leftSidedScrollbarOffset);
      }

      // Prevent displaced elements overlapping window's scrollbar.
      var currentMaxWidth = parseInt($(this).css(maxWidthName));
      if (
        (data.drupalOverlay && data.drupalOverlay.maxWidth) ||
        isNaN(currentMaxWidth) ||
        currentMaxWidth > maxWidth ||
        currentMaxWidth <= 0
      ) {
        $(this).css(maxWidthName, maxWidth);
        (data.drupalOverlay = data.drupalOverlay || {}).maxWidth = true;
      }

      // Use a more rigorous approach if the displaced element still overlaps
      // window's scrollbar; clip the element on the right.
      var offset = $(this).offset();
      var offsetRight = offset.left + $(this).outerWidth();
      if (
        (data.drupalOverlay && data.drupalOverlay.clip) ||
        offsetRight > maxWidth
      ) {
        if (Drupal.overlay.leftSidedScrollbarOffset) {
          $(this).css(
            "clip",
            "rect(auto, auto, " +
              (documentHeight - offset.top) +
              "px, " +
              (Drupal.overlay.leftSidedScrollbarOffset + 2) +
              "px)"
          );
        } else {
          $(this).css(
            "clip",
            "rect(auto, " +
              (maxWidth - offset.left) +
              "px, " +
              (documentHeight - offset.top) +
              "px, auto)"
          );
        }
        (data.drupalOverlay = data.drupalOverlay || {}).clip = true;
      }
    });
  };

  /**
   * Event handler: restores size of displaced elements as they were before
   * overlay was opened.
   *
   * @param event
   *   Event being triggered, with the following restrictions:
   *   - event.type: any
   *   - event.currentTarget: any
   */
  Drupal.overlay.eventhandlerRestoreDisplacedElements = function (event) {
    var $displacedElements = $(
      ".overlay-displace-top, .overlay-displace-bottom"
    );
    try {
      $displacedElements.css({ maxWidth: "", clip: "" });
    } catch (err) {
      // IE bug that doesn't allow unsetting style.clip (http://dev.jquery.com/ticket/6512).
      $displacedElements.attr("style", function (index, attr) {
        return attr.replace(/clip\s*:\s*rect\([^)]+\);?/i, "");
      });
    }
  };

  /**
   * Event handler: overrides href of administrative links to be opened in
   * the overlay.
   *
   * This click event handler should be bound to any document (for example the
   * overlay iframe) of which you want links to open in the overlay.
   *
   * @param event
   *   Event being triggered, with the following restrictions:
   *   - event.type: click, mouseup
   *   - event.currentTarget: document
   *
   * @see Drupal.overlayChild.behaviors.addClickHandler
   */
  Drupal.overlay.eventhandlerOverrideLink = function (event) {
    // In some browsers the click event isn't fired for right-clicks. Use the
    // mouseup event for right-clicks and the click event for everything else.
    if (
      (event.type == "click" && event.button == 2) ||
      (event.type == "mouseup" && event.button != 2)
    ) {
      return;
    }

    var $target = $(event.target);

    // Only continue if clicked target (or one of its parents) is a link.
    if (!$target.is("a")) {
      $target = $target.closest("a");
      if (!$target.length) {
        return;
      }
    }

    // Never open links in the overlay that contain the overlay-exclude class.
    if ($target.hasClass("overlay-exclude")) {
      return;
    }

    // Close the overlay when the link contains the overlay-close class.
    if ($target.hasClass("overlay-close")) {
      // Clearing the overlay URL fragment will close the overlay.
      $.bbq.removeState("overlay");
      return;
    }

    var target = $target[0];
    var href = target.href;
    // Only handle links that have an href attribute and use the HTTP(S) protocol.
    if (href != undefined && href != "" && target.protocol.match(/^https?\:/)) {
      var anchor = href.replace(target.ownerDocument.location.href, "");
      // Skip anchor links.
      if (anchor.length == 0 || anchor.charAt(0) == "#") {
        return;
      }
      // Open admin links in the overlay.
      else if (this.isAdminLink(href)) {
        // If the link contains the overlay-restore class and the overlay-context
        // state is set, also update the parent window's location.
        var parentLocation =
          $target.hasClass("overlay-restore") &&
          typeof $.bbq.getState("overlay-context") == "string"
            ? this.getInternalUrl($.bbq.getState("overlay-context"))
            : null;
        href = this.fragmentizeLink($target.get(0), parentLocation);
        // Only override default behavior when left-clicking and user is not
        // pressing the ALT, CTRL, META (Command key on the Macintosh keyboard)
        // or SHIFT key.
        if (
          event.button == 0 &&
          !event.altKey &&
          !event.ctrlKey &&
          !event.metaKey &&
          !event.shiftKey
        ) {
          // Redirect to a fragmentized href. This will trigger a hashchange event.
          this.redirect(href);
          // Prevent default action and further propagation of the event.
          return false;
        }
        // Otherwise alter clicked link's href. This is being picked up by
        // the default action handler.
        else {
          $target
            // Restore link's href attribute on blur or next click.
            .one(
              "blur mousedown",
              { target: target, href: target.href },
              function (event) {
                $(event.data.target).attr("href", event.data.href);
              }
            )
            .attr("href", href);
        }
      }
      // Non-admin links should close the overlay and open in the main window,
      // which is the default action for a link. We only need to handle them
      // if the overlay is open and the clicked link is inside the overlay iframe.
      else if (
        this.isOpen &&
        target.ownerDocument === this.iframeWindow.document
      ) {
        // Open external links in the immediate parent of the frame, unless the
        // link already has a different target.
        if (target.hostname != window.location.hostname) {
          if (!$target.attr("target")) {
            $target.attr("target", "_parent");
          }
        } else {
          // Add the overlay-context state to the link, so "overlay-restore" links
          // can restore the context.
          if ($target[0].hash) {
            // Leave links with an existing fragment alone. Adding an extra
            // parameter to a link like "node/1#section-1" breaks the link.
          } else {
            // For links with no existing fragment, add the overlay context.
            $target.attr(
              "href",
              $.param.fragment(href, {
                "overlay-context":
                  this.getPath(window.location) + window.location.search,
              })
            );
          }

          // When the link has a destination query parameter and that destination
          // is an admin link we need to fragmentize it. This will make it reopen
          // in the overlay.
          var params = $.deparam.querystring(href);
          if (params.destination && this.isAdminLink(params.destination)) {
            var fragmentizedDestination = $.param.fragment(
              this.getPath(window.location),
              { overlay: params.destination }
            );
            $target.attr(
              "href",
              $.param.querystring(href, {
                destination: fragmentizedDestination,
              })
            );
          }

          // Make the link open in the immediate parent of the frame, unless the
          // link already has a different target.
          if (!$target.attr("target")) {
            $target.attr("target", "_parent");
          }
        }
      }
    }
  };

  /**
   * Event handler: opens or closes the overlay based on the current URL fragment.
   *
   * @param event
   *   Event being triggered, with the following restrictions:
   *   - event.type: hashchange
   *   - event.currentTarget: document
   */
  Drupal.overlay.eventhandlerOperateByURLFragment = function (event) {
    // If we changed the hash to reflect an internal redirect in the overlay,
    // its location has already been changed, so don't do anything.
    if ($.data(window.location, window.location.href) === "redirect") {
      $.data(window.location, window.location.href, null);
      return;
    }

    // Get the overlay URL from the current URL fragment.
    var internalUrl = null;
    var state = $.bbq.getState("overlay");
    if (state) {
      internalUrl = this.getInternalUrl(state);
    }
    if (internalUrl) {
      // Append render variable, so the server side can choose the right
      // rendering and add child frame code to the page if needed.
      var url = $.param.querystring(internalUrl, { render: "overlay" });

      this.open(url);
      this.resetActiveClass(this.getPath(Drupal.settings.basePath + state));
    }
    // If there is no overlay URL in the fragment and the overlay is (still)
    // open, close the overlay.
    else if (this.isOpen && !this.isClosing) {
      this.close();
      this.resetActiveClass(this.getPath(window.location));
    }
  };

  /**
   * Event handler: makes sure the internal overlay URL is reflected in the parent
   * URL fragment.
   *
   * Normally the parent URL fragment determines the overlay location. However, if
   * the overlay redirects internally, the parent doesn't get informed, and the
   * parent URL fragment will be out of date. This is a sanity check to make
   * sure we're in the right place.
   *
   * The parent URL fragment is also not updated automatically when overlay's
   * open, close or load functions are used directly (instead of through
   * eventhandlerOperateByURLFragment).
   *
   * @param event
   *   Event being triggered, with the following restrictions:
   *   - event.type: drupalOverlayReady, drupalOverlayClose
   *   - event.currentTarget: document
   */
  Drupal.overlay.eventhandlerSyncURLFragment = function (event) {
    if (this.isOpen) {
      var expected = $.bbq.getState("overlay");
      // This is just a sanity check, so we're comparing paths, not query strings.
      if (
        this.getPath(Drupal.settings.basePath + expected) !=
        this.getPath(this.iframeWindow.document.location)
      ) {
        // There may have been a redirect inside the child overlay window that the
        // parent wasn't aware of. Update the parent URL fragment appropriately.
        var newLocation = Drupal.overlay.fragmentizeLink(
          this.iframeWindow.document.location
        );
        // Set a 'redirect' flag on the new location so the hashchange event handler
        // knows not to change the overlay's content.
        $.data(window.location, newLocation, "redirect");
        // Use location.replace() so we don't create an extra history entry.
        window.location.replace(newLocation);
      }
    } else {
      $.bbq.removeState("overlay");
    }
  };

  /**
   * Event handler: if the child window suggested that the parent refresh on
   * close, force a page refresh.
   *
   * @param event
   *   Event being triggered, with the following restrictions:
   *   - event.type: drupalOverlayClose
   *   - event.currentTarget: document
   */
  Drupal.overlay.eventhandlerRefreshPage = function (event) {
    if (Drupal.overlay.refreshPage) {
      window.location.reload(true);
    }
  };

  /**
   * Event handler: dispatches events to the overlay document.
   *
   * @param event
   *   Event being triggered, with the following restrictions:
   *   - event.type: any
   *   - event.currentTarget: any
   */
  Drupal.overlay.eventhandlerDispatchEvent = function (event) {
    if (this.iframeWindow && this.iframeWindow.document) {
      this.iframeWindow.jQuery(this.iframeWindow.document).trigger(event);
    }
  };

  /**
   * Make a regular admin link into a URL that will trigger the overlay to open.
   *
   * @param link
   *   A JavaScript Link object (i.e. an <a> element).
   * @param parentLocation
   *   (optional) URL to override the parent window's location with.
   *
   * @return
   *   A URL that will trigger the overlay (in the form
   *   /node/1#overlay=admin/config).
   */
  Drupal.overlay.fragmentizeLink = function (link, parentLocation) {
    // Don't operate on links that are already overlay-ready.
    var params = $.deparam.fragment(link.href);
    if (params.overlay) {
      return link.href;
    }

    // Determine the link's original destination. Set ignorePathFromQueryString to
    // true to prevent transforming this link into a clean URL while clean URLs
    // may be disabled.
    var path = this.getPath(link, true);
    // Preserve existing query and fragment parameters in the URL, except for
    // "render=overlay" which is re-added in Drupal.overlay.eventhandlerOperateByURLFragment.
    var destination =
      path +
      link.search.replace(/&?render=overlay/, "").replace(/\?$/, "") +
      link.hash;

    // Assemble and return the overlay-ready link.
    return $.param.fragment(parentLocation || window.location.href, {
      overlay: destination,
    });
  };

  /**
   * Refresh any regions of the page that are displayed outside the overlay.
   *
   * @param data
   *   An array of objects with information on the page regions to be refreshed.
   *   For each object, the key is a CSS class identifying the region to be
   *   refreshed, and the value represents the section of the Drupal $page array
   *   corresponding to this region.
   */
  Drupal.overlay.refreshRegions = function (data) {
    $.each(data, function () {
      var region_info = this;
      $.each(region_info, function (regionClass) {
        var regionName = region_info[regionClass];
        var regionSelector = "." + regionClass;
        // Allow special behaviors to detach.
        Drupal.detachBehaviors($(regionSelector));
        $.get(
          Drupal.settings.basePath +
            Drupal.settings.overlay.ajaxCallback +
            "/" +
            regionName,
          function (newElement) {
            $(regionSelector).replaceWith($(newElement));
            Drupal.attachBehaviors($(regionSelector), Drupal.settings);
          }
        );
      });
    });
  };

  /**
   * Reset the active class on links in displaced elements according to
   * given path.
   *
   * @param activePath
   *   Path to match links against.
   */
  Drupal.overlay.resetActiveClass = function (activePath) {
    var self = this;
    var windowDomain = window.location.protocol + window.location.hostname;

    $(".overlay-displace-top, .overlay-displace-bottom")
      .find("a[href]")
      // Remove active class from all links in displaced elements.
      .removeClass("active")
      // Add active class to links that match activePath.
      .each(function () {
        var linkDomain = this.protocol + this.hostname;
        var linkPath = self.getPath(this);

        // A link matches if it is part of the active trail of activePath, except
        // for frontpage links.
        if (
          linkDomain == windowDomain &&
          (activePath + "/").indexOf(linkPath + "/") === 0 &&
          (linkPath !== "" || activePath === "")
        ) {
          $(this).addClass("active");
        }
      });
  };

  /**
   * Helper function to get the (corrected) Drupal path of a link.
   *
   * @param link
   *   Link object or string to get the Drupal path from.
   * @param ignorePathFromQueryString
   *   Boolean whether to ignore path from query string if path appears empty.
   *
   * @return
   *   The Drupal path.
   */
  Drupal.overlay.getPath = function (link, ignorePathFromQueryString) {
    if (typeof link == "string") {
      // Create a native Link object, so we can use its object methods.
      link = $(link.link(link)).get(0);
    }

    var path = link.pathname;
    // Ensure a leading slash on the path, omitted in some browsers.
    if (path.charAt(0) != "/") {
      path = "/" + path;
    }
    path = path.replace(
      new RegExp(Drupal.settings.basePath + "(?:index.php)?"),
      ""
    );
    if (path == "" && !ignorePathFromQueryString) {
      // If the path appears empty, it might mean the path is represented in the
      // query string (clean URLs are not used).
      var match = new RegExp("([?&])q=(.+)([&#]|$)").exec(link.search);
      if (match && match.length == 4) {
        path = match[2];
      }
    }

    return path;
  };

  /**
   * Get the total displacement of given region.
   *
   * @param region
   *   Region name. Either "top" or "bottom".
   *
   * @return
   *   The total displacement of given region in pixels.
   */
  Drupal.overlay.getDisplacement = function (region) {
    var displacement = 0;
    var lastDisplaced = $(".overlay-displace-" + region + ":last");
    if (lastDisplaced.length) {
      displacement = lastDisplaced.offset().top + lastDisplaced.outerHeight();

      // In modern browsers (including IE9), when box-shadow is defined, use the
      // normal height.
      var cssBoxShadowValue = lastDisplaced.css("box-shadow");
      var boxShadow =
        typeof cssBoxShadowValue !== "undefined" &&
        cssBoxShadowValue !== "none";
      // In IE8 and below, we use the shadow filter to apply box-shadow styles to
      // the toolbar. It adds some extra height that we need to remove.
      if (
        !boxShadow &&
        /DXImageTransform\.Microsoft\.Shadow/.test(lastDisplaced.css("filter"))
      ) {
        displacement -= lastDisplaced[0].filters.item(
          "DXImageTransform.Microsoft.Shadow"
        ).strength;
        displacement = Math.max(0, displacement);
      }
    }
    return displacement;
  };

  /**
   * Makes elements outside the overlay unreachable via the tab key.
   *
   * @param context
   *   The part of the DOM that should have its tabindexes changed. Defaults to
   *   the entire page.
   */
  Drupal.overlay.makeDocumentUntabbable = function (context) {
    // Manipulating tabindexes for the entire document is unacceptably slow in IE6
    // and IE7, so in those browsers, the underlying page will still be reachable
    // via the tab key. However, we still make the links within the Disable
    // message unreachable, because the same message also exists within the
    // child document. The duplicate copy in the underlying document is only for
    // assisting screen-reader users navigating the document with reading commands
    // that follow markup order rather than tab order.
    if (jQuery.browser.msie && parseInt(jQuery.browser.version, 10) < 8) {
      $("#overlay-disable-message a", context).attr("tabindex", -1);
      return;
    }

    context = context || document.body;
    var $overlay, $tabbable, $hasTabindex;

    // Determine which elements on the page already have a tabindex.
    $hasTabindex = $("[tabindex] :not(.overlay-element)", context);
    // Record the tabindex for each element, so we can restore it later.
    $hasTabindex.each(Drupal.overlay._recordTabindex);
    // Add the tabbable elements from the current context to any that we might
    // have previously recorded.
    Drupal.overlay._hasTabindex = $hasTabindex.add(Drupal.overlay._hasTabindex);

    // Set tabindex to -1 on everything outside the overlay and toolbars, so that
    // the underlying page is unreachable.

    // By default, browsers make a, area, button, input, object, select, textarea,
    // and iframe elements reachable via the tab key.
    $tabbable = $("a, area, button, input, object, select, textarea, iframe");
    // If another element (like a div) has a tabindex, it's also tabbable.
    $tabbable = $tabbable.add($hasTabindex);
    // Leave links inside the overlay and toolbars alone.
    $overlay = $(
      ".overlay-element, #overlay-container, .overlay-displace-top, .overlay-displace-bottom"
    ).find("*");
    $tabbable = $tabbable.not($overlay);
    // We now have a list of everything in the underlying document that could
    // possibly be reachable via the tab key. Make it all unreachable.
    $tabbable.attr("tabindex", -1);
  };

  /**
   * Restores the original tabindex value of a group of elements.
   *
   * @param context
   *   The part of the DOM that should have its tabindexes restored. Defaults to
   *   the entire page.
   */
  Drupal.overlay.makeDocumentTabbable = function (context) {
    // Manipulating tabindexes is unacceptably slow in IE6 and IE7. In those
    // browsers, the underlying page was never made unreachable via tab, so
    // there is no work to be done here.
    if (jQuery.browser.msie && parseInt(jQuery.browser.version, 10) < 8) {
      return;
    }

    var $needsTabindex;
    context = context || document.body;

    // Make the underlying document tabbable again by removing all existing
    // tabindex attributes.
    var $tabindex = $("[tabindex]", context);
    if (jQuery.browser.msie && parseInt(jQuery.browser.version, 10) < 8) {
      // removeAttr('tabindex') is broken in IE6-7, but the DOM function
      // removeAttribute works.
      var i;
      var length = $tabindex.length;
      for (i = 0; i < length; i++) {
        $tabindex[i].removeAttribute("tabIndex");
      }
    } else {
      $tabindex.removeAttr("tabindex");
    }

    // Restore the tabindex attributes that existed before the overlay was opened.
    $needsTabindex = $(Drupal.overlay._hasTabindex, context);
    $needsTabindex.each(Drupal.overlay._restoreTabindex);
    Drupal.overlay._hasTabindex = Drupal.overlay._hasTabindex.not(
      $needsTabindex
    );
  };

  /**
   * Record the tabindex for an element, using $.data.
   *
   * Meant to be used as a jQuery.fn.each callback.
   */
  Drupal.overlay._recordTabindex = function () {
    var $element = $(this);
    var tabindex = $(this).attr("tabindex");
    $element.data("drupalOverlayOriginalTabIndex", tabindex);
  };

  /**
   * Restore an element's original tabindex.
   *
   * Meant to be used as a jQuery.fn.each callback.
   */
  Drupal.overlay._restoreTabindex = function () {
    var $element = $(this);
    var tabindex = $element.data("drupalOverlayOriginalTabIndex");
    $element.attr("tabindex", tabindex);
  };

  /**
   * Theme function to create the overlay iframe element.
   */
  Drupal.theme.prototype.overlayContainer = function () {
    return '<div id="overlay-container"><div class="overlay-modal-background"></div></div>';
  };

  /**
   * Theme function to create an overlay iframe element.
   */
  Drupal.theme.prototype.overlayElement = function (url) {
    return '<iframe class="overlay-element" frameborder="0" scrolling="auto" allowtransparency="true"></iframe>';
  };
})(jQuery);
/**
 * Cookie plugin 1.0
 *
 * Copyright (c) 2006 Klaus Hartl (stilbuero.de)
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 *
 */
jQuery.cookie = function (b, j, m) {
  if (typeof j != "undefined") {
    m = m || {};
    if (j === null) {
      j = "";
      m.expires = -1;
    }
    var e = "";
    if (m.expires && (typeof m.expires == "number" || m.expires.toUTCString)) {
      var f;
      if (typeof m.expires == "number") {
        f = new Date();
        f.setTime(f.getTime() + m.expires * 24 * 60 * 60 * 1000);
      } else {
        f = m.expires;
      }
      e = "; expires=" + f.toUTCString();
    }
    var l = m.path ? "; path=" + m.path : "";
    var g = m.domain ? "; domain=" + m.domain : "";
    var a = m.secure ? "; secure" : "";
    document.cookie = [b, "=", encodeURIComponent(j), e, l, g, a].join("");
  } else {
    var d = null;
    if (document.cookie && document.cookie != "") {
      var k = document.cookie.split(";");
      for (var h = 0; h < k.length; h++) {
        var c = jQuery.trim(k[h]);
        if (c.substring(0, b.length + 1) == b + "=") {
          d = decodeURIComponent(c.substring(b.length + 1));
          break;
        }
      }
    }
    return d;
  }
};
/*!
 * jQuery UI Mouse 1.8.7
 *
 * Copyright 2010, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Mouse
 *
 * Depends:
 *	jquery.ui.widget.js
 */
(function (c) {
  c.widget("ui.mouse", {
    options: { cancel: ":input,option", distance: 1, delay: 0 },
    _mouseInit: function () {
      var a = this;
      this.element
        .bind("mousedown." + this.widgetName, function (b) {
          return a._mouseDown(b);
        })
        .bind("click." + this.widgetName, function (b) {
          if (true === c.data(b.target, a.widgetName + ".preventClickEvent")) {
            c.removeData(b.target, a.widgetName + ".preventClickEvent");
            b.stopImmediatePropagation();
            return false;
          }
        });
      this.started = false;
    },
    _mouseDestroy: function () {
      this.element.unbind("." + this.widgetName);
    },
    _mouseDown: function (a) {
      a.originalEvent = a.originalEvent || {};
      if (!a.originalEvent.mouseHandled) {
        this._mouseStarted && this._mouseUp(a);
        this._mouseDownEvent = a;
        var b = this,
          e = a.which == 1,
          f =
            typeof this.options.cancel == "string"
              ? c(a.target).parents().add(a.target).filter(this.options.cancel)
                  .length
              : false;
        if (!e || f || !this._mouseCapture(a)) return true;
        this.mouseDelayMet = !this.options.delay;
        if (!this.mouseDelayMet)
          this._mouseDelayTimer = setTimeout(function () {
            b.mouseDelayMet = true;
          }, this.options.delay);
        if (this._mouseDistanceMet(a) && this._mouseDelayMet(a)) {
          this._mouseStarted = this._mouseStart(a) !== false;
          if (!this._mouseStarted) {
            a.preventDefault();
            return true;
          }
        }
        this._mouseMoveDelegate = function (d) {
          return b._mouseMove(d);
        };
        this._mouseUpDelegate = function (d) {
          return b._mouseUp(d);
        };
        c(document)
          .bind("mousemove." + this.widgetName, this._mouseMoveDelegate)
          .bind("mouseup." + this.widgetName, this._mouseUpDelegate);
        a.preventDefault();
        return (a.originalEvent.mouseHandled = true);
      }
    },
    _mouseMove: function (a) {
      if (c.browser.msie && !(document.documentMode >= 9) && !a.button)
        return this._mouseUp(a);
      if (this._mouseStarted) {
        this._mouseDrag(a);
        return a.preventDefault();
      }
      if (this._mouseDistanceMet(a) && this._mouseDelayMet(a))
        (this._mouseStarted =
          this._mouseStart(this._mouseDownEvent, a) !== false)
          ? this._mouseDrag(a)
          : this._mouseUp(a);
      return !this._mouseStarted;
    },
    _mouseUp: function (a) {
      c(document)
        .unbind("mousemove." + this.widgetName, this._mouseMoveDelegate)
        .unbind("mouseup." + this.widgetName, this._mouseUpDelegate);
      if (this._mouseStarted) {
        this._mouseStarted = false;
        a.target == this._mouseDownEvent.target &&
          c.data(a.target, this.widgetName + ".preventClickEvent", true);
        this._mouseStop(a);
      }
      return false;
    },
    _mouseDistanceMet: function (a) {
      return (
        Math.max(
          Math.abs(this._mouseDownEvent.pageX - a.pageX),
          Math.abs(this._mouseDownEvent.pageY - a.pageY)
        ) >= this.options.distance
      );
    },
    _mouseDelayMet: function () {
      return this.mouseDelayMet;
    },
    _mouseStart: function () {},
    _mouseDrag: function () {},
    _mouseStop: function () {},
    _mouseCapture: function () {
      return true;
    },
  });
})(jQuery);
/*
 * jQuery UI Resizable 1.8.7
 *
 * Copyright 2010, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Resizables
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.mouse.js
 *	jquery.ui.widget.js
 */
(function (e) {
  e.widget("ui.resizable", e.ui.mouse, {
    widgetEventPrefix: "resize",
    options: {
      alsoResize: false,
      animate: false,
      animateDuration: "slow",
      animateEasing: "swing",
      aspectRatio: false,
      autoHide: false,
      containment: false,
      ghost: false,
      grid: false,
      handles: "e,s,se",
      helper: false,
      maxHeight: null,
      maxWidth: null,
      minHeight: 10,
      minWidth: 10,
      zIndex: 1e3,
    },
    _create: function () {
      var b = this,
        a = this.options;
      this.element.addClass("ui-resizable");
      e.extend(this, {
        _aspectRatio: !!a.aspectRatio,
        aspectRatio: a.aspectRatio,
        originalElement: this.element,
        _proportionallyResizeElements: [],
        _helper:
          a.helper || a.ghost || a.animate
            ? a.helper || "ui-resizable-helper"
            : null,
      });
      if (
        this.element[0].nodeName.match(
          /canvas|textarea|input|select|button|img/i
        )
      ) {
        /relative/.test(this.element.css("position")) &&
          e.browser.opera &&
          this.element.css({ position: "relative", top: "auto", left: "auto" });
        this.element.wrap(
          e('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({
            position: this.element.css("position"),
            width: this.element.outerWidth(),
            height: this.element.outerHeight(),
            top: this.element.css("top"),
            left: this.element.css("left"),
          })
        );
        this.element = this.element
          .parent()
          .data("resizable", this.element.data("resizable"));
        this.elementIsWrapper = true;
        this.element.css({
          marginLeft: this.originalElement.css("marginLeft"),
          marginTop: this.originalElement.css("marginTop"),
          marginRight: this.originalElement.css("marginRight"),
          marginBottom: this.originalElement.css("marginBottom"),
        });
        this.originalElement.css({
          marginLeft: 0,
          marginTop: 0,
          marginRight: 0,
          marginBottom: 0,
        });
        this.originalResizeStyle = this.originalElement.css("resize");
        this.originalElement.css("resize", "none");
        this._proportionallyResizeElements.push(
          this.originalElement.css({
            position: "static",
            zoom: 1,
            display: "block",
          })
        );
        this.originalElement.css({
          margin: this.originalElement.css("margin"),
        });
        this._proportionallyResize();
      }
      this.handles =
        a.handles ||
        (!e(".ui-resizable-handle", this.element).length
          ? "e,s,se"
          : {
              n: ".ui-resizable-n",
              e: ".ui-resizable-e",
              s: ".ui-resizable-s",
              w: ".ui-resizable-w",
              se: ".ui-resizable-se",
              sw: ".ui-resizable-sw",
              ne: ".ui-resizable-ne",
              nw: ".ui-resizable-nw",
            });
      if (this.handles.constructor == String) {
        if (this.handles == "all") this.handles = "n,e,s,w,se,sw,ne,nw";
        var c = this.handles.split(",");
        this.handles = {};
        for (var d = 0; d < c.length; d++) {
          var f = e.trim(c[d]),
            g = e(
              '<div class="ui-resizable-handle ' +
                ("ui-resizable-" + f) +
                '"></div>'
            );
          /sw|se|ne|nw/.test(f) && g.css({ zIndex: ++a.zIndex });
          "se" == f && g.addClass("ui-icon ui-icon-gripsmall-diagonal-se");
          this.handles[f] = ".ui-resizable-" + f;
          this.element.append(g);
        }
      }
      this._renderAxis = function (h) {
        h = h || this.element;
        for (var i in this.handles) {
          if (this.handles[i].constructor == String)
            this.handles[i] = e(this.handles[i], this.element).show();
          if (
            this.elementIsWrapper &&
            this.originalElement[0].nodeName.match(
              /textarea|input|select|button/i
            )
          ) {
            var j = e(this.handles[i], this.element),
              k = 0;
            k = /sw|ne|nw|se|n|s/.test(i) ? j.outerHeight() : j.outerWidth();
            j = [
              "padding",
              /ne|nw|n/.test(i)
                ? "Top"
                : /se|sw|s/.test(i)
                ? "Bottom"
                : /^e$/.test(i)
                ? "Right"
                : "Left",
            ].join("");
            h.css(j, k);
            this._proportionallyResize();
          }
          e(this.handles[i]);
        }
      };
      this._renderAxis(this.element);
      this._handles = e(
        ".ui-resizable-handle",
        this.element
      ).disableSelection();
      this._handles.mouseover(function () {
        if (!b.resizing) {
          if (this.className)
            var h = this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);
          b.axis = h && h[1] ? h[1] : "se";
        }
      });
      if (a.autoHide) {
        this._handles.hide();
        e(this.element)
          .addClass("ui-resizable-autohide")
          .hover(
            function () {
              e(this).removeClass("ui-resizable-autohide");
              b._handles.show();
            },
            function () {
              if (!b.resizing) {
                e(this).addClass("ui-resizable-autohide");
                b._handles.hide();
              }
            }
          );
      }
      this._mouseInit();
    },
    destroy: function () {
      this._mouseDestroy();
      var b = function (c) {
        e(c)
          .removeClass(
            "ui-resizable ui-resizable-disabled ui-resizable-resizing"
          )
          .removeData("resizable")
          .unbind(".resizable")
          .find(".ui-resizable-handle")
          .remove();
      };
      if (this.elementIsWrapper) {
        b(this.element);
        var a = this.element;
        a.after(
          this.originalElement.css({
            position: a.css("position"),
            width: a.outerWidth(),
            height: a.outerHeight(),
            top: a.css("top"),
            left: a.css("left"),
          })
        ).remove();
      }
      this.originalElement.css("resize", this.originalResizeStyle);
      b(this.originalElement);
      return this;
    },
    _mouseCapture: function (b) {
      var a = false;
      for (var c in this.handles)
        if (e(this.handles[c])[0] == b.target) a = true;
      return !this.options.disabled && a;
    },
    _mouseStart: function (b) {
      var a = this.options,
        c = this.element.position(),
        d = this.element;
      this.resizing = true;
      this.documentScroll = {
        top: e(document).scrollTop(),
        left: e(document).scrollLeft(),
      };
      if (d.is(".ui-draggable") || /absolute/.test(d.css("position")))
        d.css({ position: "absolute", top: c.top, left: c.left });
      e.browser.opera &&
        /relative/.test(d.css("position")) &&
        d.css({ position: "relative", top: "auto", left: "auto" });
      this._renderProxy();
      c = m(this.helper.css("left"));
      var f = m(this.helper.css("top"));
      if (a.containment) {
        c += e(a.containment).scrollLeft() || 0;
        f += e(a.containment).scrollTop() || 0;
      }
      this.offset = this.helper.offset();
      this.position = { left: c, top: f };
      this.size = this._helper
        ? { width: d.outerWidth(), height: d.outerHeight() }
        : { width: d.width(), height: d.height() };
      this.originalSize = this._helper
        ? { width: d.outerWidth(), height: d.outerHeight() }
        : { width: d.width(), height: d.height() };
      this.originalPosition = { left: c, top: f };
      this.sizeDiff = {
        width: d.outerWidth() - d.width(),
        height: d.outerHeight() - d.height(),
      };
      this.originalMousePosition = { left: b.pageX, top: b.pageY };
      this.aspectRatio =
        typeof a.aspectRatio == "number"
          ? a.aspectRatio
          : this.originalSize.width / this.originalSize.height || 1;
      a = e(".ui-resizable-" + this.axis).css("cursor");
      e("body").css("cursor", a == "auto" ? this.axis + "-resize" : a);
      d.addClass("ui-resizable-resizing");
      this._propagate("start", b);
      return true;
    },
    _mouseDrag: function (b) {
      var a = this.helper,
        c = this.originalMousePosition,
        d = this._change[this.axis];
      if (!d) return false;
      c = d.apply(this, [b, b.pageX - c.left || 0, b.pageY - c.top || 0]);
      if (this._aspectRatio || b.shiftKey) c = this._updateRatio(c, b);
      c = this._respectSize(c, b);
      this._propagate("resize", b);
      a.css({
        top: this.position.top + "px",
        left: this.position.left + "px",
        width: this.size.width + "px",
        height: this.size.height + "px",
      });
      !this._helper &&
        this._proportionallyResizeElements.length &&
        this._proportionallyResize();
      this._updateCache(c);
      this._trigger("resize", b, this.ui());
      return false;
    },
    _mouseStop: function (b) {
      this.resizing = false;
      var a = this.options,
        c = this;
      if (this._helper) {
        var d = this._proportionallyResizeElements,
          f = d.length && /textarea/i.test(d[0].nodeName);
        d = f && e.ui.hasScroll(d[0], "left") ? 0 : c.sizeDiff.height;
        f = {
          width: c.size.width - (f ? 0 : c.sizeDiff.width),
          height: c.size.height - d,
        };
        d =
          parseInt(c.element.css("left"), 10) +
            (c.position.left - c.originalPosition.left) || null;
        var g =
          parseInt(c.element.css("top"), 10) +
            (c.position.top - c.originalPosition.top) || null;
        a.animate || this.element.css(e.extend(f, { top: g, left: d }));
        c.helper.height(c.size.height);
        c.helper.width(c.size.width);
        this._helper && !a.animate && this._proportionallyResize();
      }
      e("body").css("cursor", "auto");
      this.element.removeClass("ui-resizable-resizing");
      this._propagate("stop", b);
      this._helper && this.helper.remove();
      return false;
    },
    _updateCache: function (b) {
      this.offset = this.helper.offset();
      if (l(b.left)) this.position.left = b.left;
      if (l(b.top)) this.position.top = b.top;
      if (l(b.height)) this.size.height = b.height;
      if (l(b.width)) this.size.width = b.width;
    },
    _updateRatio: function (b) {
      var a = this.position,
        c = this.size,
        d = this.axis;
      if (b.height) b.width = c.height * this.aspectRatio;
      else if (b.width) b.height = c.width / this.aspectRatio;
      if (d == "sw") {
        b.left = a.left + (c.width - b.width);
        b.top = null;
      }
      if (d == "nw") {
        b.top = a.top + (c.height - b.height);
        b.left = a.left + (c.width - b.width);
      }
      return b;
    },
    _respectSize: function (b) {
      var a = this.options,
        c = this.axis,
        d = l(b.width) && a.maxWidth && a.maxWidth < b.width,
        f = l(b.height) && a.maxHeight && a.maxHeight < b.height,
        g = l(b.width) && a.minWidth && a.minWidth > b.width,
        h = l(b.height) && a.minHeight && a.minHeight > b.height;
      if (g) b.width = a.minWidth;
      if (h) b.height = a.minHeight;
      if (d) b.width = a.maxWidth;
      if (f) b.height = a.maxHeight;
      var i = this.originalPosition.left + this.originalSize.width,
        j = this.position.top + this.size.height,
        k = /sw|nw|w/.test(c);
      c = /nw|ne|n/.test(c);
      if (g && k) b.left = i - a.minWidth;
      if (d && k) b.left = i - a.maxWidth;
      if (h && c) b.top = j - a.minHeight;
      if (f && c) b.top = j - a.maxHeight;
      if ((a = !b.width && !b.height) && !b.left && b.top) b.top = null;
      else if (a && !b.top && b.left) b.left = null;
      return b;
    },
    _proportionallyResize: function () {
      if (this._proportionallyResizeElements.length)
        for (
          var b = this.helper || this.element, a = 0;
          a < this._proportionallyResizeElements.length;
          a++
        ) {
          var c = this._proportionallyResizeElements[a];
          if (!this.borderDif) {
            var d = [
                c.css("borderTopWidth"),
                c.css("borderRightWidth"),
                c.css("borderBottomWidth"),
                c.css("borderLeftWidth"),
              ],
              f = [
                c.css("paddingTop"),
                c.css("paddingRight"),
                c.css("paddingBottom"),
                c.css("paddingLeft"),
              ];
            this.borderDif = e.map(d, function (g, h) {
              g = parseInt(g, 10) || 0;
              h = parseInt(f[h], 10) || 0;
              return g + h;
            });
          }
          (e.browser.msie &&
            (e(b).is(":hidden") || e(b).parents(":hidden").length)) ||
            c.css({
              height: b.height() - this.borderDif[0] - this.borderDif[2] || 0,
              width: b.width() - this.borderDif[1] - this.borderDif[3] || 0,
            });
        }
    },
    _renderProxy: function () {
      var b = this.options;
      this.elementOffset = this.element.offset();
      if (this._helper) {
        this.helper = this.helper || e('<div style="overflow:hidden;"></div>');
        var a = e.browser.msie && e.browser.version < 7,
          c = a ? 1 : 0;
        a = a ? 2 : -1;
        this.helper
          .addClass(this._helper)
          .css({
            width: this.element.outerWidth() + a,
            height: this.element.outerHeight() + a,
            position: "absolute",
            left: this.elementOffset.left - c + "px",
            top: this.elementOffset.top - c + "px",
            zIndex: ++b.zIndex,
          });
        this.helper.appendTo("body").disableSelection();
      } else this.helper = this.element;
    },
    _change: {
      e: function (b, a) {
        return { width: this.originalSize.width + a };
      },
      w: function (b, a) {
        return {
          left: this.originalPosition.left + a,
          width: this.originalSize.width - a,
        };
      },
      n: function (b, a, c) {
        return {
          top: this.originalPosition.top + c,
          height: this.originalSize.height - c,
        };
      },
      s: function (b, a, c) {
        return { height: this.originalSize.height + c };
      },
      se: function (b, a, c) {
        return e.extend(
          this._change.s.apply(this, arguments),
          this._change.e.apply(this, [b, a, c])
        );
      },
      sw: function (b, a, c) {
        return e.extend(
          this._change.s.apply(this, arguments),
          this._change.w.apply(this, [b, a, c])
        );
      },
      ne: function (b, a, c) {
        return e.extend(
          this._change.n.apply(this, arguments),
          this._change.e.apply(this, [b, a, c])
        );
      },
      nw: function (b, a, c) {
        return e.extend(
          this._change.n.apply(this, arguments),
          this._change.w.apply(this, [b, a, c])
        );
      },
    },
    _propagate: function (b, a) {
      e.ui.plugin.call(this, b, [a, this.ui()]);
      b != "resize" && this._trigger(b, a, this.ui());
    },
    plugins: {},
    ui: function () {
      return {
        originalElement: this.originalElement,
        element: this.element,
        helper: this.helper,
        position: this.position,
        size: this.size,
        originalSize: this.originalSize,
        originalPosition: this.originalPosition,
      };
    },
  });
  e.extend(e.ui.resizable, { version: "1.8.7" });
  e.ui.plugin.add("resizable", "alsoResize", {
    start: function () {
      var b = e(this).data("resizable").options,
        a = function (c) {
          e(c).each(function () {
            var d = e(this);
            d.data("resizable-alsoresize", {
              width: parseInt(d.width(), 10),
              height: parseInt(d.height(), 10),
              left: parseInt(d.css("left"), 10),
              top: parseInt(d.css("top"), 10),
              position: d.css("position"),
            });
          });
        };
      if (typeof b.alsoResize == "object" && !b.alsoResize.parentNode)
        if (b.alsoResize.length) {
          b.alsoResize = b.alsoResize[0];
          a(b.alsoResize);
        } else
          e.each(b.alsoResize, function (c) {
            a(c);
          });
      else a(b.alsoResize);
    },
    resize: function (b, a) {
      var c = e(this).data("resizable");
      b = c.options;
      var d = c.originalSize,
        f = c.originalPosition,
        g = {
          height: c.size.height - d.height || 0,
          width: c.size.width - d.width || 0,
          top: c.position.top - f.top || 0,
          left: c.position.left - f.left || 0,
        },
        h = function (i, j) {
          e(i).each(function () {
            var k = e(this),
              q = e(this).data("resizable-alsoresize"),
              p = {},
              r =
                j && j.length
                  ? j
                  : k.parents(a.originalElement[0]).length
                  ? ["width", "height"]
                  : ["width", "height", "top", "left"];
            e.each(r, function (n, o) {
              if ((n = (q[o] || 0) + (g[o] || 0)) && n >= 0) p[o] = n || null;
            });
            if (e.browser.opera && /relative/.test(k.css("position"))) {
              c._revertToRelativePosition = true;
              k.css({ position: "absolute", top: "auto", left: "auto" });
            }
            k.css(p);
          });
        };
      typeof b.alsoResize == "object" && !b.alsoResize.nodeType
        ? e.each(b.alsoResize, function (i, j) {
            h(i, j);
          })
        : h(b.alsoResize);
    },
    stop: function () {
      var b = e(this).data("resizable"),
        a = b.options,
        c = function (d) {
          e(d).each(function () {
            var f = e(this);
            f.css({ position: f.data("resizable-alsoresize").position });
          });
        };
      if (b._revertToRelativePosition) {
        b._revertToRelativePosition = false;
        typeof a.alsoResize == "object" && !a.alsoResize.nodeType
          ? e.each(a.alsoResize, function (d) {
              c(d);
            })
          : c(a.alsoResize);
      }
      e(this).removeData("resizable-alsoresize");
    },
  });
  e.ui.plugin.add("resizable", "animate", {
    stop: function (b) {
      var a = e(this).data("resizable"),
        c = a.options,
        d = a._proportionallyResizeElements,
        f = d.length && /textarea/i.test(d[0].nodeName),
        g = f && e.ui.hasScroll(d[0], "left") ? 0 : a.sizeDiff.height;
      f = {
        width: a.size.width - (f ? 0 : a.sizeDiff.width),
        height: a.size.height - g,
      };
      g =
        parseInt(a.element.css("left"), 10) +
          (a.position.left - a.originalPosition.left) || null;
      var h =
        parseInt(a.element.css("top"), 10) +
          (a.position.top - a.originalPosition.top) || null;
      a.element.animate(e.extend(f, h && g ? { top: h, left: g } : {}), {
        duration: c.animateDuration,
        easing: c.animateEasing,
        step: function () {
          var i = {
            width: parseInt(a.element.css("width"), 10),
            height: parseInt(a.element.css("height"), 10),
            top: parseInt(a.element.css("top"), 10),
            left: parseInt(a.element.css("left"), 10),
          };
          d && d.length && e(d[0]).css({ width: i.width, height: i.height });
          a._updateCache(i);
          a._propagate("resize", b);
        },
      });
    },
  });
  e.ui.plugin.add("resizable", "containment", {
    start: function () {
      var b = e(this).data("resizable"),
        a = b.element,
        c = b.options.containment;
      if (
        (a =
          c instanceof e ? c.get(0) : /parent/.test(c) ? a.parent().get(0) : c)
      ) {
        b.containerElement = e(a);
        if (/document/.test(c) || c == document) {
          b.containerOffset = { left: 0, top: 0 };
          b.containerPosition = { left: 0, top: 0 };
          b.parentData = {
            element: e(document),
            left: 0,
            top: 0,
            width: e(document).width(),
            height:
              e(document).height() || document.body.parentNode.scrollHeight,
          };
        } else {
          var d = e(a),
            f = [];
          e(["Top", "Right", "Left", "Bottom"]).each(function (i, j) {
            f[i] = m(d.css("padding" + j));
          });
          b.containerOffset = d.offset();
          b.containerPosition = d.position();
          b.containerSize = {
            height: d.innerHeight() - f[3],
            width: d.innerWidth() - f[1],
          };
          c = b.containerOffset;
          var g = b.containerSize.height,
            h = b.containerSize.width;
          h = e.ui.hasScroll(a, "left") ? a.scrollWidth : h;
          g = e.ui.hasScroll(a) ? a.scrollHeight : g;
          b.parentData = {
            element: a,
            left: c.left,
            top: c.top,
            width: h,
            height: g,
          };
        }
      }
    },
    resize: function (b) {
      var a = e(this).data("resizable"),
        c = a.options,
        d = a.containerOffset,
        f = a.position;
      b = a._aspectRatio || b.shiftKey;
      var g = { top: 0, left: 0 },
        h = a.containerElement;
      if (h[0] != document && /static/.test(h.css("position"))) g = d;
      if (f.left < (a._helper ? d.left : 0)) {
        a.size.width += a._helper
          ? a.position.left - d.left
          : a.position.left - g.left;
        if (b) a.size.height = a.size.width / c.aspectRatio;
        a.position.left = c.helper ? d.left : 0;
      }
      if (f.top < (a._helper ? d.top : 0)) {
        a.size.height += a._helper ? a.position.top - d.top : a.position.top;
        if (b) a.size.width = a.size.height * c.aspectRatio;
        a.position.top = a._helper ? d.top : 0;
      }
      a.offset.left = a.parentData.left + a.position.left;
      a.offset.top = a.parentData.top + a.position.top;
      c = Math.abs(
        (a._helper ? a.offset.left - g.left : a.offset.left - g.left) +
          a.sizeDiff.width
      );
      d = Math.abs(
        (a._helper ? a.offset.top - g.top : a.offset.top - d.top) +
          a.sizeDiff.height
      );
      f = a.containerElement.get(0) == a.element.parent().get(0);
      g = /relative|absolute/.test(a.containerElement.css("position"));
      if (f && g) c -= a.parentData.left;
      if (c + a.size.width >= a.parentData.width) {
        a.size.width = a.parentData.width - c;
        if (b) a.size.height = a.size.width / a.aspectRatio;
      }
      if (d + a.size.height >= a.parentData.height) {
        a.size.height = a.parentData.height - d;
        if (b) a.size.width = a.size.height * a.aspectRatio;
      }
    },
    stop: function () {
      var b = e(this).data("resizable"),
        a = b.options,
        c = b.containerOffset,
        d = b.containerPosition,
        f = b.containerElement,
        g = e(b.helper),
        h = g.offset(),
        i = g.outerWidth() - b.sizeDiff.width;
      g = g.outerHeight() - b.sizeDiff.height;
      b._helper &&
        !a.animate &&
        /relative/.test(f.css("position")) &&
        e(this).css({ left: h.left - d.left - c.left, width: i, height: g });
      b._helper &&
        !a.animate &&
        /static/.test(f.css("position")) &&
        e(this).css({ left: h.left - d.left - c.left, width: i, height: g });
    },
  });
  e.ui.plugin.add("resizable", "ghost", {
    start: function () {
      var b = e(this).data("resizable"),
        a = b.options,
        c = b.size;
      b.ghost = b.originalElement.clone();
      b.ghost
        .css({
          opacity: 0.25,
          display: "block",
          position: "relative",
          height: c.height,
          width: c.width,
          margin: 0,
          left: 0,
          top: 0,
        })
        .addClass("ui-resizable-ghost")
        .addClass(typeof a.ghost == "string" ? a.ghost : "");
      b.ghost.appendTo(b.helper);
    },
    resize: function () {
      var b = e(this).data("resizable");
      b.ghost &&
        b.ghost.css({
          position: "relative",
          height: b.size.height,
          width: b.size.width,
        });
    },
    stop: function () {
      var b = e(this).data("resizable");
      b.ghost && b.helper && b.helper.get(0).removeChild(b.ghost.get(0));
    },
  });
  e.ui.plugin.add("resizable", "grid", {
    resize: function () {
      var b = e(this).data("resizable"),
        a = b.options,
        c = b.size,
        d = b.originalSize,
        f = b.originalPosition,
        g = b.axis;
      a.grid = typeof a.grid == "number" ? [a.grid, a.grid] : a.grid;
      var h =
        Math.round((c.width - d.width) / (a.grid[0] || 1)) * (a.grid[0] || 1);
      a =
        Math.round((c.height - d.height) / (a.grid[1] || 1)) * (a.grid[1] || 1);
      if (/^(se|s|e)$/.test(g)) {
        b.size.width = d.width + h;
        b.size.height = d.height + a;
      } else if (/^(ne)$/.test(g)) {
        b.size.width = d.width + h;
        b.size.height = d.height + a;
        b.position.top = f.top - a;
      } else {
        if (/^(sw)$/.test(g)) {
          b.size.width = d.width + h;
          b.size.height = d.height + a;
        } else {
          b.size.width = d.width + h;
          b.size.height = d.height + a;
          b.position.top = f.top - a;
        }
        b.position.left = f.left - h;
      }
    },
  });
  var m = function (b) {
      return parseInt(b, 10) || 0;
    },
    l = function (b) {
      return !isNaN(parseInt(b, 10));
    };
})(jQuery);
/*
 * jQuery UI Draggable 1.8.7
 *
 * Copyright 2010, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Draggables
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.mouse.js
 *	jquery.ui.widget.js
 */
(function (d) {
  d.widget("ui.draggable", d.ui.mouse, {
    widgetEventPrefix: "drag",
    options: {
      addClasses: true,
      appendTo: "parent",
      axis: false,
      connectToSortable: false,
      containment: false,
      cursor: "auto",
      cursorAt: false,
      grid: false,
      handle: false,
      helper: "original",
      iframeFix: false,
      opacity: false,
      refreshPositions: false,
      revert: false,
      revertDuration: 500,
      scope: "default",
      scroll: true,
      scrollSensitivity: 20,
      scrollSpeed: 20,
      snap: false,
      snapMode: "both",
      snapTolerance: 20,
      stack: false,
      zIndex: false,
    },
    _create: function () {
      if (
        this.options.helper == "original" &&
        !/^(?:r|a|f)/.test(this.element.css("position"))
      )
        this.element[0].style.position = "relative";
      this.options.addClasses && this.element.addClass("ui-draggable");
      this.options.disabled && this.element.addClass("ui-draggable-disabled");
      this._mouseInit();
    },
    destroy: function () {
      if (this.element.data("draggable")) {
        this.element
          .removeData("draggable")
          .unbind(".draggable")
          .removeClass(
            "ui-draggable ui-draggable-dragging ui-draggable-disabled"
          );
        this._mouseDestroy();
        return this;
      }
    },
    _mouseCapture: function (a) {
      var b = this.options;
      if (this.helper || b.disabled || d(a.target).is(".ui-resizable-handle"))
        return false;
      this.handle = this._getHandle(a);
      if (!this.handle) return false;
      return true;
    },
    _mouseStart: function (a) {
      var b = this.options;
      this.helper = this._createHelper(a);
      this._cacheHelperProportions();
      if (d.ui.ddmanager) d.ui.ddmanager.current = this;
      this._cacheMargins();
      this.cssPosition = this.helper.css("position");
      this.scrollParent = this.helper.scrollParent();
      this.offset = this.positionAbs = this.element.offset();
      this.offset = {
        top: this.offset.top - this.margins.top,
        left: this.offset.left - this.margins.left,
      };
      d.extend(this.offset, {
        click: {
          left: a.pageX - this.offset.left,
          top: a.pageY - this.offset.top,
        },
        parent: this._getParentOffset(),
        relative: this._getRelativeOffset(),
      });
      this.originalPosition = this.position = this._generatePosition(a);
      this.originalPageX = a.pageX;
      this.originalPageY = a.pageY;
      b.cursorAt && this._adjustOffsetFromHelper(b.cursorAt);
      b.containment && this._setContainment();
      if (this._trigger("start", a) === false) {
        this._clear();
        return false;
      }
      this._cacheHelperProportions();
      d.ui.ddmanager &&
        !b.dropBehaviour &&
        d.ui.ddmanager.prepareOffsets(this, a);
      this.helper.addClass("ui-draggable-dragging");
      this._mouseDrag(a, true);
      return true;
    },
    _mouseDrag: function (a, b) {
      this.position = this._generatePosition(a);
      this.positionAbs = this._convertPositionTo("absolute");
      if (!b) {
        b = this._uiHash();
        if (this._trigger("drag", a, b) === false) {
          this._mouseUp({});
          return false;
        }
        this.position = b.position;
      }
      if (!this.options.axis || this.options.axis != "y")
        this.helper[0].style.left = this.position.left + "px";
      if (!this.options.axis || this.options.axis != "x")
        this.helper[0].style.top = this.position.top + "px";
      d.ui.ddmanager && d.ui.ddmanager.drag(this, a);
      return false;
    },
    _mouseStop: function (a) {
      var b = false;
      if (d.ui.ddmanager && !this.options.dropBehaviour)
        b = d.ui.ddmanager.drop(this, a);
      if (this.dropped) {
        b = this.dropped;
        this.dropped = false;
      }
      if (!this.element[0] || !this.element[0].parentNode) return false;
      if (
        (this.options.revert == "invalid" && !b) ||
        (this.options.revert == "valid" && b) ||
        this.options.revert === true ||
        (d.isFunction(this.options.revert) &&
          this.options.revert.call(this.element, b))
      ) {
        var c = this;
        d(this.helper).animate(
          this.originalPosition,
          parseInt(this.options.revertDuration, 10),
          function () {
            c._trigger("stop", a) !== false && c._clear();
          }
        );
      } else this._trigger("stop", a) !== false && this._clear();
      return false;
    },
    cancel: function () {
      this.helper.is(".ui-draggable-dragging")
        ? this._mouseUp({})
        : this._clear();
      return this;
    },
    _getHandle: function (a) {
      var b =
        !this.options.handle || !d(this.options.handle, this.element).length
          ? true
          : false;
      d(this.options.handle, this.element)
        .find("*")
        .andSelf()
        .each(function () {
          if (this == a.target) b = true;
        });
      return b;
    },
    _createHelper: function (a) {
      var b = this.options;
      a = d.isFunction(b.helper)
        ? d(b.helper.apply(this.element[0], [a]))
        : b.helper == "clone"
        ? this.element.clone()
        : this.element;
      a.parents("body").length ||
        a.appendTo(
          b.appendTo == "parent" ? this.element[0].parentNode : b.appendTo
        );
      a[0] != this.element[0] &&
        !/(fixed|absolute)/.test(a.css("position")) &&
        a.css("position", "absolute");
      return a;
    },
    _adjustOffsetFromHelper: function (a) {
      if (typeof a == "string") a = a.split(" ");
      if (d.isArray(a)) a = { left: +a[0], top: +a[1] || 0 };
      if ("left" in a) this.offset.click.left = a.left + this.margins.left;
      if ("right" in a)
        this.offset.click.left =
          this.helperProportions.width - a.right + this.margins.left;
      if ("top" in a) this.offset.click.top = a.top + this.margins.top;
      if ("bottom" in a)
        this.offset.click.top =
          this.helperProportions.height - a.bottom + this.margins.top;
    },
    _getParentOffset: function () {
      this.offsetParent = this.helper.offsetParent();
      var a = this.offsetParent.offset();
      if (
        this.cssPosition == "absolute" &&
        this.scrollParent[0] != document &&
        d.ui.contains(this.scrollParent[0], this.offsetParent[0])
      ) {
        a.left += this.scrollParent.scrollLeft();
        a.top += this.scrollParent.scrollTop();
      }
      if (
        this.offsetParent[0] == document.body ||
        (this.offsetParent[0].tagName &&
          this.offsetParent[0].tagName.toLowerCase() == "html" &&
          d.browser.msie)
      )
        a = { top: 0, left: 0 };
      return {
        top:
          a.top + (parseInt(this.offsetParent.css("borderTopWidth"), 10) || 0),
        left:
          a.left +
          (parseInt(this.offsetParent.css("borderLeftWidth"), 10) || 0),
      };
    },
    _getRelativeOffset: function () {
      if (this.cssPosition == "relative") {
        var a = this.element.position();
        return {
          top:
            a.top -
            (parseInt(this.helper.css("top"), 10) || 0) +
            this.scrollParent.scrollTop(),
          left:
            a.left -
            (parseInt(this.helper.css("left"), 10) || 0) +
            this.scrollParent.scrollLeft(),
        };
      } else return { top: 0, left: 0 };
    },
    _cacheMargins: function () {
      this.margins = {
        left: parseInt(this.element.css("marginLeft"), 10) || 0,
        top: parseInt(this.element.css("marginTop"), 10) || 0,
      };
    },
    _cacheHelperProportions: function () {
      this.helperProportions = {
        width: this.helper.outerWidth(),
        height: this.helper.outerHeight(),
      };
    },
    _setContainment: function () {
      var a = this.options;
      if (a.containment == "parent") a.containment = this.helper[0].parentNode;
      if (a.containment == "document" || a.containment == "window")
        this.containment = [
          (a.containment == "document" ? 0 : d(window).scrollLeft()) -
            this.offset.relative.left -
            this.offset.parent.left,
          (a.containment == "document" ? 0 : d(window).scrollTop()) -
            this.offset.relative.top -
            this.offset.parent.top,
          (a.containment == "document" ? 0 : d(window).scrollLeft()) +
            d(a.containment == "document" ? document : window).width() -
            this.helperProportions.width -
            this.margins.left,
          (a.containment == "document" ? 0 : d(window).scrollTop()) +
            (d(a.containment == "document" ? document : window).height() ||
              document.body.parentNode.scrollHeight) -
            this.helperProportions.height -
            this.margins.top,
        ];
      if (
        !/^(document|window|parent)$/.test(a.containment) &&
        a.containment.constructor != Array
      ) {
        var b = d(a.containment)[0];
        if (b) {
          a = d(a.containment).offset();
          var c = d(b).css("overflow") != "hidden";
          this.containment = [
            a.left +
              (parseInt(d(b).css("borderLeftWidth"), 10) || 0) +
              (parseInt(d(b).css("paddingLeft"), 10) || 0) -
              this.margins.left,
            a.top +
              (parseInt(d(b).css("borderTopWidth"), 10) || 0) +
              (parseInt(d(b).css("paddingTop"), 10) || 0) -
              this.margins.top,
            a.left +
              (c ? Math.max(b.scrollWidth, b.offsetWidth) : b.offsetWidth) -
              (parseInt(d(b).css("borderLeftWidth"), 10) || 0) -
              (parseInt(d(b).css("paddingRight"), 10) || 0) -
              this.helperProportions.width -
              this.margins.left,
            a.top +
              (c ? Math.max(b.scrollHeight, b.offsetHeight) : b.offsetHeight) -
              (parseInt(d(b).css("borderTopWidth"), 10) || 0) -
              (parseInt(d(b).css("paddingBottom"), 10) || 0) -
              this.helperProportions.height -
              this.margins.top,
          ];
        }
      } else if (a.containment.constructor == Array)
        this.containment = a.containment;
    },
    _convertPositionTo: function (a, b) {
      if (!b) b = this.position;
      a = a == "absolute" ? 1 : -1;
      var c =
          this.cssPosition == "absolute" &&
          !(
            this.scrollParent[0] != document &&
            d.ui.contains(this.scrollParent[0], this.offsetParent[0])
          )
            ? this.offsetParent
            : this.scrollParent,
        f = /(html|body)/i.test(c[0].tagName);
      return {
        top:
          b.top +
          this.offset.relative.top * a +
          this.offset.parent.top * a -
          (d.browser.safari &&
          d.browser.version < 526 &&
          this.cssPosition == "fixed"
            ? 0
            : (this.cssPosition == "fixed"
                ? -this.scrollParent.scrollTop()
                : f
                ? 0
                : c.scrollTop()) * a),
        left:
          b.left +
          this.offset.relative.left * a +
          this.offset.parent.left * a -
          (d.browser.safari &&
          d.browser.version < 526 &&
          this.cssPosition == "fixed"
            ? 0
            : (this.cssPosition == "fixed"
                ? -this.scrollParent.scrollLeft()
                : f
                ? 0
                : c.scrollLeft()) * a),
      };
    },
    _generatePosition: function (a) {
      var b = this.options,
        c =
          this.cssPosition == "absolute" &&
          !(
            this.scrollParent[0] != document &&
            d.ui.contains(this.scrollParent[0], this.offsetParent[0])
          )
            ? this.offsetParent
            : this.scrollParent,
        f = /(html|body)/i.test(c[0].tagName),
        e = a.pageX,
        g = a.pageY;
      if (this.originalPosition) {
        if (this.containment) {
          if (a.pageX - this.offset.click.left < this.containment[0])
            e = this.containment[0] + this.offset.click.left;
          if (a.pageY - this.offset.click.top < this.containment[1])
            g = this.containment[1] + this.offset.click.top;
          if (a.pageX - this.offset.click.left > this.containment[2])
            e = this.containment[2] + this.offset.click.left;
          if (a.pageY - this.offset.click.top > this.containment[3])
            g = this.containment[3] + this.offset.click.top;
        }
        if (b.grid) {
          g =
            this.originalPageY +
            Math.round((g - this.originalPageY) / b.grid[1]) * b.grid[1];
          g = this.containment
            ? !(
                g - this.offset.click.top < this.containment[1] ||
                g - this.offset.click.top > this.containment[3]
              )
              ? g
              : !(g - this.offset.click.top < this.containment[1])
              ? g - b.grid[1]
              : g + b.grid[1]
            : g;
          e =
            this.originalPageX +
            Math.round((e - this.originalPageX) / b.grid[0]) * b.grid[0];
          e = this.containment
            ? !(
                e - this.offset.click.left < this.containment[0] ||
                e - this.offset.click.left > this.containment[2]
              )
              ? e
              : !(e - this.offset.click.left < this.containment[0])
              ? e - b.grid[0]
              : e + b.grid[0]
            : e;
        }
      }
      return {
        top:
          g -
          this.offset.click.top -
          this.offset.relative.top -
          this.offset.parent.top +
          (d.browser.safari &&
          d.browser.version < 526 &&
          this.cssPosition == "fixed"
            ? 0
            : this.cssPosition == "fixed"
            ? -this.scrollParent.scrollTop()
            : f
            ? 0
            : c.scrollTop()),
        left:
          e -
          this.offset.click.left -
          this.offset.relative.left -
          this.offset.parent.left +
          (d.browser.safari &&
          d.browser.version < 526 &&
          this.cssPosition == "fixed"
            ? 0
            : this.cssPosition == "fixed"
            ? -this.scrollParent.scrollLeft()
            : f
            ? 0
            : c.scrollLeft()),
      };
    },
    _clear: function () {
      this.helper.removeClass("ui-draggable-dragging");
      this.helper[0] != this.element[0] &&
        !this.cancelHelperRemoval &&
        this.helper.remove();
      this.helper = null;
      this.cancelHelperRemoval = false;
    },
    _trigger: function (a, b, c) {
      c = c || this._uiHash();
      d.ui.plugin.call(this, a, [b, c]);
      if (a == "drag") this.positionAbs = this._convertPositionTo("absolute");
      return d.Widget.prototype._trigger.call(this, a, b, c);
    },
    plugins: {},
    _uiHash: function () {
      return {
        helper: this.helper,
        position: this.position,
        originalPosition: this.originalPosition,
        offset: this.positionAbs,
      };
    },
  });
  d.extend(d.ui.draggable, { version: "1.8.7" });
  d.ui.plugin.add("draggable", "connectToSortable", {
    start: function (a, b) {
      var c = d(this).data("draggable"),
        f = c.options,
        e = d.extend({}, b, { item: c.element });
      c.sortables = [];
      d(f.connectToSortable).each(function () {
        var g = d.data(this, "sortable");
        if (g && !g.options.disabled) {
          c.sortables.push({ instance: g, shouldRevert: g.options.revert });
          g._refreshItems();
          g._trigger("activate", a, e);
        }
      });
    },
    stop: function (a, b) {
      var c = d(this).data("draggable"),
        f = d.extend({}, b, { item: c.element });
      d.each(c.sortables, function () {
        if (this.instance.isOver) {
          this.instance.isOver = 0;
          c.cancelHelperRemoval = true;
          this.instance.cancelHelperRemoval = false;
          if (this.shouldRevert) this.instance.options.revert = true;
          this.instance._mouseStop(a);
          this.instance.options.helper = this.instance.options._helper;
          c.options.helper == "original" &&
            this.instance.currentItem.css({ top: "auto", left: "auto" });
        } else {
          this.instance.cancelHelperRemoval = false;
          this.instance._trigger("deactivate", a, f);
        }
      });
    },
    drag: function (a, b) {
      var c = d(this).data("draggable"),
        f = this;
      d.each(c.sortables, function () {
        this.instance.positionAbs = c.positionAbs;
        this.instance.helperProportions = c.helperProportions;
        this.instance.offset.click = c.offset.click;
        if (this.instance._intersectsWith(this.instance.containerCache)) {
          if (!this.instance.isOver) {
            this.instance.isOver = 1;
            this.instance.currentItem = d(f)
              .clone()
              .appendTo(this.instance.element)
              .data("sortable-item", true);
            this.instance.options._helper = this.instance.options.helper;
            this.instance.options.helper = function () {
              return b.helper[0];
            };
            a.target = this.instance.currentItem[0];
            this.instance._mouseCapture(a, true);
            this.instance._mouseStart(a, true, true);
            this.instance.offset.click.top = c.offset.click.top;
            this.instance.offset.click.left = c.offset.click.left;
            this.instance.offset.parent.left -=
              c.offset.parent.left - this.instance.offset.parent.left;
            this.instance.offset.parent.top -=
              c.offset.parent.top - this.instance.offset.parent.top;
            c._trigger("toSortable", a);
            c.dropped = this.instance.element;
            c.currentItem = c.element;
            this.instance.fromOutside = c;
          }
          this.instance.currentItem && this.instance._mouseDrag(a);
        } else if (this.instance.isOver) {
          this.instance.isOver = 0;
          this.instance.cancelHelperRemoval = true;
          this.instance.options.revert = false;
          this.instance._trigger(
            "out",
            a,
            this.instance._uiHash(this.instance)
          );
          this.instance._mouseStop(a, true);
          this.instance.options.helper = this.instance.options._helper;
          this.instance.currentItem.remove();
          this.instance.placeholder && this.instance.placeholder.remove();
          c._trigger("fromSortable", a);
          c.dropped = false;
        }
      });
    },
  });
  d.ui.plugin.add("draggable", "cursor", {
    start: function () {
      var a = d("body"),
        b = d(this).data("draggable").options;
      if (a.css("cursor")) b._cursor = a.css("cursor");
      a.css("cursor", b.cursor);
    },
    stop: function () {
      var a = d(this).data("draggable").options;
      a._cursor && d("body").css("cursor", a._cursor);
    },
  });
  d.ui.plugin.add("draggable", "iframeFix", {
    start: function () {
      var a = d(this).data("draggable").options;
      d(a.iframeFix === true ? "iframe" : a.iframeFix).each(function () {
        d(
          '<div class="ui-draggable-iframeFix" style="background: #fff;"></div>'
        )
          .css({
            width: this.offsetWidth + "px",
            height: this.offsetHeight + "px",
            position: "absolute",
            opacity: "0.001",
            zIndex: 1e3,
          })
          .css(d(this).offset())
          .appendTo("body");
      });
    },
    stop: function () {
      d("div.ui-draggable-iframeFix").each(function () {
        this.parentNode.removeChild(this);
      });
    },
  });
  d.ui.plugin.add("draggable", "opacity", {
    start: function (a, b) {
      a = d(b.helper);
      b = d(this).data("draggable").options;
      if (a.css("opacity")) b._opacity = a.css("opacity");
      a.css("opacity", b.opacity);
    },
    stop: function (a, b) {
      a = d(this).data("draggable").options;
      a._opacity && d(b.helper).css("opacity", a._opacity);
    },
  });
  d.ui.plugin.add("draggable", "scroll", {
    start: function () {
      var a = d(this).data("draggable");
      if (a.scrollParent[0] != document && a.scrollParent[0].tagName != "HTML")
        a.overflowOffset = a.scrollParent.offset();
    },
    drag: function (a) {
      var b = d(this).data("draggable"),
        c = b.options,
        f = false;
      if (
        b.scrollParent[0] != document &&
        b.scrollParent[0].tagName != "HTML"
      ) {
        if (!c.axis || c.axis != "x")
          if (
            b.overflowOffset.top + b.scrollParent[0].offsetHeight - a.pageY <
            c.scrollSensitivity
          )
            b.scrollParent[0].scrollTop = f =
              b.scrollParent[0].scrollTop + c.scrollSpeed;
          else if (a.pageY - b.overflowOffset.top < c.scrollSensitivity)
            b.scrollParent[0].scrollTop = f =
              b.scrollParent[0].scrollTop - c.scrollSpeed;
        if (!c.axis || c.axis != "y")
          if (
            b.overflowOffset.left + b.scrollParent[0].offsetWidth - a.pageX <
            c.scrollSensitivity
          )
            b.scrollParent[0].scrollLeft = f =
              b.scrollParent[0].scrollLeft + c.scrollSpeed;
          else if (a.pageX - b.overflowOffset.left < c.scrollSensitivity)
            b.scrollParent[0].scrollLeft = f =
              b.scrollParent[0].scrollLeft - c.scrollSpeed;
      } else {
        if (!c.axis || c.axis != "x")
          if (a.pageY - d(document).scrollTop() < c.scrollSensitivity)
            f = d(document).scrollTop(d(document).scrollTop() - c.scrollSpeed);
          else if (
            d(window).height() - (a.pageY - d(document).scrollTop()) <
            c.scrollSensitivity
          )
            f = d(document).scrollTop(d(document).scrollTop() + c.scrollSpeed);
        if (!c.axis || c.axis != "y")
          if (a.pageX - d(document).scrollLeft() < c.scrollSensitivity)
            f = d(document).scrollLeft(
              d(document).scrollLeft() - c.scrollSpeed
            );
          else if (
            d(window).width() - (a.pageX - d(document).scrollLeft()) <
            c.scrollSensitivity
          )
            f = d(document).scrollLeft(
              d(document).scrollLeft() + c.scrollSpeed
            );
      }
      f !== false &&
        d.ui.ddmanager &&
        !c.dropBehaviour &&
        d.ui.ddmanager.prepareOffsets(b, a);
    },
  });
  d.ui.plugin.add("draggable", "snap", {
    start: function () {
      var a = d(this).data("draggable"),
        b = a.options;
      a.snapElements = [];
      d(
        b.snap.constructor != String
          ? b.snap.items || ":data(draggable)"
          : b.snap
      ).each(function () {
        var c = d(this),
          f = c.offset();
        this != a.element[0] &&
          a.snapElements.push({
            item: this,
            width: c.outerWidth(),
            height: c.outerHeight(),
            top: f.top,
            left: f.left,
          });
      });
    },
    drag: function (a, b) {
      for (
        var c = d(this).data("draggable"),
          f = c.options,
          e = f.snapTolerance,
          g = b.offset.left,
          n = g + c.helperProportions.width,
          m = b.offset.top,
          o = m + c.helperProportions.height,
          h = c.snapElements.length - 1;
        h >= 0;
        h--
      ) {
        var i = c.snapElements[h].left,
          k = i + c.snapElements[h].width,
          j = c.snapElements[h].top,
          l = j + c.snapElements[h].height;
        if (
          (i - e < g && g < k + e && j - e < m && m < l + e) ||
          (i - e < g && g < k + e && j - e < o && o < l + e) ||
          (i - e < n && n < k + e && j - e < m && m < l + e) ||
          (i - e < n && n < k + e && j - e < o && o < l + e)
        ) {
          if (f.snapMode != "inner") {
            var p = Math.abs(j - o) <= e,
              q = Math.abs(l - m) <= e,
              r = Math.abs(i - n) <= e,
              s = Math.abs(k - g) <= e;
            if (p)
              b.position.top =
                c._convertPositionTo("relative", {
                  top: j - c.helperProportions.height,
                  left: 0,
                }).top - c.margins.top;
            if (q)
              b.position.top =
                c._convertPositionTo("relative", { top: l, left: 0 }).top -
                c.margins.top;
            if (r)
              b.position.left =
                c._convertPositionTo("relative", {
                  top: 0,
                  left: i - c.helperProportions.width,
                }).left - c.margins.left;
            if (s)
              b.position.left =
                c._convertPositionTo("relative", { top: 0, left: k }).left -
                c.margins.left;
          }
          var t = p || q || r || s;
          if (f.snapMode != "outer") {
            p = Math.abs(j - m) <= e;
            q = Math.abs(l - o) <= e;
            r = Math.abs(i - g) <= e;
            s = Math.abs(k - n) <= e;
            if (p)
              b.position.top =
                c._convertPositionTo("relative", { top: j, left: 0 }).top -
                c.margins.top;
            if (q)
              b.position.top =
                c._convertPositionTo("relative", {
                  top: l - c.helperProportions.height,
                  left: 0,
                }).top - c.margins.top;
            if (r)
              b.position.left =
                c._convertPositionTo("relative", { top: 0, left: i }).left -
                c.margins.left;
            if (s)
              b.position.left =
                c._convertPositionTo("relative", {
                  top: 0,
                  left: k - c.helperProportions.width,
                }).left - c.margins.left;
          }
          if (!c.snapElements[h].snapping && (p || q || r || s || t))
            c.options.snap.snap &&
              c.options.snap.snap.call(
                c.element,
                a,
                d.extend(c._uiHash(), { snapItem: c.snapElements[h].item })
              );
          c.snapElements[h].snapping = p || q || r || s || t;
        } else {
          c.snapElements[h].snapping &&
            c.options.snap.release &&
            c.options.snap.release.call(
              c.element,
              a,
              d.extend(c._uiHash(), { snapItem: c.snapElements[h].item })
            );
          c.snapElements[h].snapping = false;
        }
      }
    },
  });
  d.ui.plugin.add("draggable", "stack", {
    start: function () {
      var a = d(this).data("draggable").options;
      a = d.makeArray(d(a.stack)).sort(function (c, f) {
        return (
          (parseInt(d(c).css("zIndex"), 10) || 0) -
          (parseInt(d(f).css("zIndex"), 10) || 0)
        );
      });
      if (a.length) {
        var b = parseInt(a[0].style.zIndex) || 0;
        d(a).each(function (c) {
          this.style.zIndex = b + c;
        });
        this[0].style.zIndex = b + a.length;
      }
    },
  });
  d.ui.plugin.add("draggable", "zIndex", {
    start: function (a, b) {
      a = d(b.helper);
      b = d(this).data("draggable").options;
      if (a.css("zIndex")) b._zIndex = a.css("zIndex");
      a.css("zIndex", b.zIndex);
    },
    stop: function (a, b) {
      a = d(this).data("draggable").options;
      a._zIndex && d(b.helper).css("zIndex", a._zIndex);
    },
  });
})(jQuery);
/*
 * jQuery UI Button 1.8.7
 *
 * Copyright 2010, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Button
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.widget.js
 */
(function (a) {
  var g,
    i = function (b) {
      a(":ui-button", b.target.form).each(function () {
        var c = a(this).data("button");
        setTimeout(function () {
          c.refresh();
        }, 1);
      });
    },
    h = function (b) {
      var c = b.name,
        d = b.form,
        e = a([]);
      if (c)
        e = d
          ? a(d).find("[name='" + c + "']")
          : a("[name='" + c + "']", b.ownerDocument).filter(function () {
              return !this.form;
            });
      return e;
    };
  a.widget("ui.button", {
    options: {
      disabled: null,
      text: true,
      label: null,
      icons: { primary: null, secondary: null },
    },
    _create: function () {
      this.element
        .closest("form")
        .unbind("reset.button")
        .bind("reset.button", i);
      if (typeof this.options.disabled !== "boolean")
        this.options.disabled = this.element.attr("disabled");
      this._determineButtonType();
      this.hasTitle = !!this.buttonElement.attr("title");
      var b = this,
        c = this.options,
        d = this.type === "checkbox" || this.type === "radio",
        e = "ui-state-hover" + (!d ? " ui-state-active" : "");
      if (c.label === null) c.label = this.buttonElement.html();
      if (this.element.is(":disabled")) c.disabled = true;
      this.buttonElement
        .addClass("ui-button ui-widget ui-state-default ui-corner-all")
        .attr("role", "button")
        .bind("mouseenter.button", function () {
          if (!c.disabled) {
            a(this).addClass("ui-state-hover");
            this === g && a(this).addClass("ui-state-active");
          }
        })
        .bind("mouseleave.button", function () {
          c.disabled || a(this).removeClass(e);
        })
        .bind("focus.button", function () {
          a(this).addClass("ui-state-focus");
        })
        .bind("blur.button", function () {
          a(this).removeClass("ui-state-focus");
        });
      d &&
        this.element.bind("change.button", function () {
          b.refresh();
        });
      if (this.type === "checkbox")
        this.buttonElement.bind("click.button", function () {
          if (c.disabled) return false;
          a(this).toggleClass("ui-state-active");
          b.buttonElement.attr("aria-pressed", b.element[0].checked);
        });
      else if (this.type === "radio")
        this.buttonElement.bind("click.button", function () {
          if (c.disabled) return false;
          a(this).addClass("ui-state-active");
          b.buttonElement.attr("aria-pressed", true);
          var f = b.element[0];
          h(f)
            .not(f)
            .map(function () {
              return a(this).button("widget")[0];
            })
            .removeClass("ui-state-active")
            .attr("aria-pressed", false);
        });
      else {
        this.buttonElement
          .bind("mousedown.button", function () {
            if (c.disabled) return false;
            a(this).addClass("ui-state-active");
            g = this;
            a(document).one("mouseup", function () {
              g = null;
            });
          })
          .bind("mouseup.button", function () {
            if (c.disabled) return false;
            a(this).removeClass("ui-state-active");
          })
          .bind("keydown.button", function (f) {
            if (c.disabled) return false;
            if (
              f.keyCode == a.ui.keyCode.SPACE ||
              f.keyCode == a.ui.keyCode.ENTER
            )
              a(this).addClass("ui-state-active");
          })
          .bind("keyup.button", function () {
            a(this).removeClass("ui-state-active");
          });
        this.buttonElement.is("a") &&
          this.buttonElement.keyup(function (f) {
            f.keyCode === a.ui.keyCode.SPACE && a(this).click();
          });
      }
      this._setOption("disabled", c.disabled);
    },
    _determineButtonType: function () {
      this.type = this.element.is(":checkbox")
        ? "checkbox"
        : this.element.is(":radio")
        ? "radio"
        : this.element.is("input")
        ? "input"
        : "button";
      if (this.type === "checkbox" || this.type === "radio") {
        this.buttonElement = this.element
          .parents()
          .last()
          .find("label[for=" + this.element.attr("id") + "]");
        this.element.addClass("ui-helper-hidden-accessible");
        var b = this.element.is(":checked");
        b && this.buttonElement.addClass("ui-state-active");
        this.buttonElement.attr("aria-pressed", b);
      } else this.buttonElement = this.element;
    },
    widget: function () {
      return this.buttonElement;
    },
    destroy: function () {
      this.element.removeClass("ui-helper-hidden-accessible");
      this.buttonElement
        .removeClass(
          "ui-button ui-widget ui-state-default ui-corner-all ui-state-hover ui-state-active  ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only"
        )
        .removeAttr("role")
        .removeAttr("aria-pressed")
        .html(this.buttonElement.find(".ui-button-text").html());
      this.hasTitle || this.buttonElement.removeAttr("title");
      a.Widget.prototype.destroy.call(this);
    },
    _setOption: function (b, c) {
      a.Widget.prototype._setOption.apply(this, arguments);
      if (b === "disabled")
        c
          ? this.element.attr("disabled", true)
          : this.element.removeAttr("disabled");
      this._resetButton();
    },
    refresh: function () {
      var b = this.element.is(":disabled");
      b !== this.options.disabled && this._setOption("disabled", b);
      if (this.type === "radio")
        h(this.element[0]).each(function () {
          a(this).is(":checked")
            ? a(this)
                .button("widget")
                .addClass("ui-state-active")
                .attr("aria-pressed", true)
            : a(this)
                .button("widget")
                .removeClass("ui-state-active")
                .attr("aria-pressed", false);
        });
      else if (this.type === "checkbox")
        this.element.is(":checked")
          ? this.buttonElement
              .addClass("ui-state-active")
              .attr("aria-pressed", true)
          : this.buttonElement
              .removeClass("ui-state-active")
              .attr("aria-pressed", false);
    },
    _resetButton: function () {
      if (this.type === "input")
        this.options.label && this.element.val(this.options.label);
      else {
        var b = this.buttonElement.removeClass(
            "ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only"
          ),
          c = a("<span></span>")
            .addClass("ui-button-text")
            .html(this.options.label)
            .appendTo(b.empty())
            .text(),
          d = this.options.icons,
          e = d.primary && d.secondary;
        if (d.primary || d.secondary) {
          b.addClass(
            "ui-button-text-icon" +
              (e ? "s" : d.primary ? "-primary" : "-secondary")
          );
          d.primary &&
            b.prepend(
              "<span class='ui-button-icon-primary ui-icon " +
                d.primary +
                "'></span>"
            );
          d.secondary &&
            b.append(
              "<span class='ui-button-icon-secondary ui-icon " +
                d.secondary +
                "'></span>"
            );
          if (!this.options.text) {
            b.addClass(
              e ? "ui-button-icons-only" : "ui-button-icon-only"
            ).removeClass(
              "ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary"
            );
            this.hasTitle || b.attr("title", c);
          }
        } else b.addClass("ui-button-text-only");
      }
    },
  });
  a.widget("ui.buttonset", {
    options: {
      items: ":button, :submit, :reset, :checkbox, :radio, a, :data(button)",
    },
    _create: function () {
      this.element.addClass("ui-buttonset");
    },
    _init: function () {
      this.refresh();
    },
    _setOption: function (b, c) {
      b === "disabled" && this.buttons.button("option", b, c);
      a.Widget.prototype._setOption.apply(this, arguments);
    },
    refresh: function () {
      this.buttons = this.element
        .find(this.options.items)
        .filter(":ui-button")
        .button("refresh")
        .end()
        .not(":ui-button")
        .button()
        .end()
        .map(function () {
          return a(this).button("widget")[0];
        })
        .removeClass("ui-corner-all ui-corner-left ui-corner-right")
        .filter(":first")
        .addClass("ui-corner-left")
        .end()
        .filter(":last")
        .addClass("ui-corner-right")
        .end()
        .end();
    },
    destroy: function () {
      this.element.removeClass("ui-buttonset");
      this.buttons
        .map(function () {
          return a(this).button("widget")[0];
        })
        .removeClass("ui-corner-left ui-corner-right")
        .end()
        .button("destroy");
      a.Widget.prototype.destroy.call(this);
    },
  });
})(jQuery);
/*
 * jQuery UI Position 1.8.7
 *
 * Copyright 2010, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Position
 */
(function (c) {
  c.ui = c.ui || {};
  var n = /left|center|right/,
    o = /top|center|bottom/,
    t = c.fn.position,
    u = c.fn.offset;
  c.fn.position = function (b) {
    if (!b || !b.of) return t.apply(this, arguments);
    b = c.extend({}, b);
    var a = c(b.of),
      d = a[0],
      g = (b.collision || "flip").split(" "),
      e = b.offset ? b.offset.split(" ") : [0, 0],
      h,
      k,
      j;
    if (d.nodeType === 9) {
      h = a.width();
      k = a.height();
      j = { top: 0, left: 0 };
    } else if (d.setTimeout) {
      h = a.width();
      k = a.height();
      j = { top: a.scrollTop(), left: a.scrollLeft() };
    } else if (d.preventDefault) {
      b.at = "left top";
      h = k = 0;
      j = { top: b.of.pageY, left: b.of.pageX };
    } else {
      h = a.outerWidth();
      k = a.outerHeight();
      j = a.offset();
    }
    c.each(["my", "at"], function () {
      var f = (b[this] || "").split(" ");
      if (f.length === 1)
        f = n.test(f[0])
          ? f.concat(["center"])
          : o.test(f[0])
          ? ["center"].concat(f)
          : ["center", "center"];
      f[0] = n.test(f[0]) ? f[0] : "center";
      f[1] = o.test(f[1]) ? f[1] : "center";
      b[this] = f;
    });
    if (g.length === 1) g[1] = g[0];
    e[0] = parseInt(e[0], 10) || 0;
    if (e.length === 1) e[1] = e[0];
    e[1] = parseInt(e[1], 10) || 0;
    if (b.at[0] === "right") j.left += h;
    else if (b.at[0] === "center") j.left += h / 2;
    if (b.at[1] === "bottom") j.top += k;
    else if (b.at[1] === "center") j.top += k / 2;
    j.left += e[0];
    j.top += e[1];
    return this.each(function () {
      var f = c(this),
        l = f.outerWidth(),
        m = f.outerHeight(),
        p = parseInt(c.curCSS(this, "marginLeft", true)) || 0,
        q = parseInt(c.curCSS(this, "marginTop", true)) || 0,
        v = l + p + parseInt(c.curCSS(this, "marginRight", true)) || 0,
        w = m + q + parseInt(c.curCSS(this, "marginBottom", true)) || 0,
        i = c.extend({}, j),
        r;
      if (b.my[0] === "right") i.left -= l;
      else if (b.my[0] === "center") i.left -= l / 2;
      if (b.my[1] === "bottom") i.top -= m;
      else if (b.my[1] === "center") i.top -= m / 2;
      i.left = Math.round(i.left);
      i.top = Math.round(i.top);
      r = { left: i.left - p, top: i.top - q };
      c.each(["left", "top"], function (s, x) {
        c.ui.position[g[s]] &&
          c.ui.position[g[s]][x](i, {
            targetWidth: h,
            targetHeight: k,
            elemWidth: l,
            elemHeight: m,
            collisionPosition: r,
            collisionWidth: v,
            collisionHeight: w,
            offset: e,
            my: b.my,
            at: b.at,
          });
      });
      c.fn.bgiframe && f.bgiframe();
      f.offset(c.extend(i, { using: b.using }));
    });
  };
  c.ui.position = {
    fit: {
      left: function (b, a) {
        var d = c(window);
        d =
          a.collisionPosition.left +
          a.collisionWidth -
          d.width() -
          d.scrollLeft();
        b.left =
          d > 0
            ? b.left - d
            : Math.max(b.left - a.collisionPosition.left, b.left);
      },
      top: function (b, a) {
        var d = c(window);
        d =
          a.collisionPosition.top +
          a.collisionHeight -
          d.height() -
          d.scrollTop();
        b.top =
          d > 0 ? b.top - d : Math.max(b.top - a.collisionPosition.top, b.top);
      },
    },
    flip: {
      left: function (b, a) {
        if (a.at[0] !== "center") {
          var d = c(window);
          d =
            a.collisionPosition.left +
            a.collisionWidth -
            d.width() -
            d.scrollLeft();
          var g =
              a.my[0] === "left"
                ? -a.elemWidth
                : a.my[0] === "right"
                ? a.elemWidth
                : 0,
            e = a.at[0] === "left" ? a.targetWidth : -a.targetWidth,
            h = -2 * a.offset[0];
          b.left +=
            a.collisionPosition.left < 0 ? g + e + h : d > 0 ? g + e + h : 0;
        }
      },
      top: function (b, a) {
        if (a.at[1] !== "center") {
          var d = c(window);
          d =
            a.collisionPosition.top +
            a.collisionHeight -
            d.height() -
            d.scrollTop();
          var g =
              a.my[1] === "top"
                ? -a.elemHeight
                : a.my[1] === "bottom"
                ? a.elemHeight
                : 0,
            e = a.at[1] === "top" ? a.targetHeight : -a.targetHeight,
            h = -2 * a.offset[1];
          b.top +=
            a.collisionPosition.top < 0 ? g + e + h : d > 0 ? g + e + h : 0;
        }
      },
    },
  };
  if (!c.offset.setOffset) {
    c.offset.setOffset = function (b, a) {
      if (/static/.test(c.curCSS(b, "position"))) b.style.position = "relative";
      var d = c(b),
        g = d.offset(),
        e = parseInt(c.curCSS(b, "top", true), 10) || 0,
        h = parseInt(c.curCSS(b, "left", true), 10) || 0;
      g = { top: a.top - g.top + e, left: a.left - g.left + h };
      "using" in a ? a.using.call(b, g) : d.css(g);
    };
    c.fn.offset = function (b) {
      var a = this[0];
      if (!a || !a.ownerDocument) return null;
      if (b)
        return this.each(function () {
          c.offset.setOffset(this, b);
        });
      return u.call(this);
    };
  }
})(jQuery);
/*
 * jQuery UI Dialog 1.8.7
 *
 * Copyright 2010, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Dialog
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.widget.js
 *  jquery.ui.button.js
 *	jquery.ui.draggable.js
 *	jquery.ui.mouse.js
 *	jquery.ui.position.js
 *	jquery.ui.resizable.js
 */
(function (c, j) {
  var k = {
      buttons: true,
      height: true,
      maxHeight: true,
      maxWidth: true,
      minHeight: true,
      minWidth: true,
      width: true,
    },
    l = { maxHeight: true, maxWidth: true, minHeight: true, minWidth: true };
  c.widget("ui.dialog", {
    options: {
      autoOpen: true,
      buttons: {},
      closeOnEscape: true,
      closeText: "close",
      dialogClass: "",
      draggable: true,
      hide: null,
      height: "auto",
      maxHeight: false,
      maxWidth: false,
      minHeight: 150,
      minWidth: 150,
      modal: false,
      position: {
        my: "center",
        at: "center",
        collision: "fit",
        using: function (a) {
          var b = c(this).css(a).offset().top;
          b < 0 && c(this).css("top", a.top - b);
        },
      },
      resizable: true,
      show: null,
      stack: true,
      title: "",
      width: 300,
      zIndex: 1e3,
    },
    _create: function () {
      this.originalTitle = this.element.attr("title");
      if (typeof this.originalTitle !== "string") this.originalTitle = "";
      this.options.title = this.options.title || this.originalTitle;
      var a = this,
        b = a.options,
        d = b.title || "&#160;",
        e = c.ui.dialog.getTitleId(a.element),
        g = (a.uiDialog = c("<div></div>"))
          .appendTo(document.body)
          .hide()
          .addClass(
            "ui-dialog ui-widget ui-widget-content ui-corner-all " +
              b.dialogClass
          )
          .css({ zIndex: b.zIndex })
          .attr("tabIndex", -1)
          .css("outline", 0)
          .keydown(function (i) {
            if (
              b.closeOnEscape &&
              i.keyCode &&
              i.keyCode === c.ui.keyCode.ESCAPE
            ) {
              a.close(i);
              i.preventDefault();
            }
          })
          .attr({ role: "dialog", "aria-labelledby": e })
          .mousedown(function (i) {
            a.moveToTop(false, i);
          });
      a.element
        .show()
        .removeAttr("title")
        .addClass("ui-dialog-content ui-widget-content")
        .appendTo(g);
      var f = (a.uiDialogTitlebar = c("<div></div>"))
          .addClass(
            "ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix"
          )
          .prependTo(g),
        h = c('<a href="#"></a>')
          .addClass("ui-dialog-titlebar-close ui-corner-all")
          .attr("role", "button")
          .hover(
            function () {
              h.addClass("ui-state-hover");
            },
            function () {
              h.removeClass("ui-state-hover");
            }
          )
          .focus(function () {
            h.addClass("ui-state-focus");
          })
          .blur(function () {
            h.removeClass("ui-state-focus");
          })
          .click(function (i) {
            a.close(i);
            return false;
          })
          .appendTo(f);
      (a.uiDialogTitlebarCloseText = c("<span></span>"))
        .addClass("ui-icon ui-icon-closethick")
        .text(b.closeText)
        .appendTo(h);
      c("<span></span>")
        .addClass("ui-dialog-title")
        .attr("id", e)
        .html(d)
        .prependTo(f);
      if (c.isFunction(b.beforeclose) && !c.isFunction(b.beforeClose))
        b.beforeClose = b.beforeclose;
      f.find("*").add(f).disableSelection();
      b.draggable && c.fn.draggable && a._makeDraggable();
      b.resizable && c.fn.resizable && a._makeResizable();
      a._createButtons(b.buttons);
      a._isOpen = false;
      c.fn.bgiframe && g.bgiframe();
    },
    _init: function () {
      this.options.autoOpen && this.open();
    },
    destroy: function () {
      var a = this;
      a.overlay && a.overlay.destroy();
      a.uiDialog.hide();
      a.element
        .unbind(".dialog")
        .removeData("dialog")
        .removeClass("ui-dialog-content ui-widget-content")
        .hide()
        .appendTo("body");
      a.uiDialog.remove();
      a.originalTitle && a.element.attr("title", a.originalTitle);
      return a;
    },
    widget: function () {
      return this.uiDialog;
    },
    close: function (a) {
      var b = this,
        d,
        e;
      if (false !== b._trigger("beforeClose", a)) {
        b.overlay && b.overlay.destroy();
        b.uiDialog.unbind("keypress.ui-dialog");
        b._isOpen = false;
        if (b.options.hide)
          b.uiDialog.hide(b.options.hide, function () {
            b._trigger("close", a);
          });
        else {
          b.uiDialog.hide();
          b._trigger("close", a);
        }
        c.ui.dialog.overlay.resize();
        if (b.options.modal) {
          d = 0;
          c(".ui-dialog").each(function () {
            if (this !== b.uiDialog[0]) {
              e = c(this).css("z-index");
              isNaN(e) || (d = Math.max(d, e));
            }
          });
          c.ui.dialog.maxZ = d;
        }
        return b;
      }
    },
    isOpen: function () {
      return this._isOpen;
    },
    moveToTop: function (a, b) {
      var d = this,
        e = d.options;
      if ((e.modal && !a) || (!e.stack && !e.modal))
        return d._trigger("focus", b);
      if (e.zIndex > c.ui.dialog.maxZ) c.ui.dialog.maxZ = e.zIndex;
      if (d.overlay) {
        c.ui.dialog.maxZ += 1;
        d.overlay.$el.css(
          "z-index",
          (c.ui.dialog.overlay.maxZ = c.ui.dialog.maxZ)
        );
      }
      a = {
        scrollTop: d.element.attr("scrollTop"),
        scrollLeft: d.element.attr("scrollLeft"),
      };
      c.ui.dialog.maxZ += 1;
      d.uiDialog.css("z-index", c.ui.dialog.maxZ);
      d.element.attr(a);
      d._trigger("focus", b);
      return d;
    },
    open: function () {
      if (!this._isOpen) {
        var a = this,
          b = a.options,
          d = a.uiDialog;
        a.overlay = b.modal ? new c.ui.dialog.overlay(a) : null;
        a._size();
        a._position(b.position);
        d.show(b.show);
        a.moveToTop(true);
        b.modal &&
          d.bind("keypress.ui-dialog", function (e) {
            if (e.keyCode === c.ui.keyCode.TAB) {
              var g = c(":tabbable", this),
                f = g.filter(":first");
              g = g.filter(":last");
              if (e.target === g[0] && !e.shiftKey) {
                f.focus(1);
                return false;
              } else if (e.target === f[0] && e.shiftKey) {
                g.focus(1);
                return false;
              }
            }
          });
        c(
          a.element
            .find(":tabbable")
            .get()
            .concat(
              d.find(".ui-dialog-buttonpane :tabbable").get().concat(d.get())
            )
        )
          .eq(0)
          .focus();
        a._isOpen = true;
        a._trigger("open");
        return a;
      }
    },
    _createButtons: function (a) {
      var b = this,
        d = false,
        e = c("<div></div>").addClass(
          "ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"
        ),
        g = c("<div></div>").addClass("ui-dialog-buttonset").appendTo(e);
      b.uiDialog.find(".ui-dialog-buttonpane").remove();
      typeof a === "object" &&
        a !== null &&
        c.each(a, function () {
          return !(d = true);
        });
      if (d) {
        c.each(a, function (f, h) {
          h = c.isFunction(h) ? { click: h, text: f } : h;
          f = c('<button type="button"></button>')
            .attr(h, true)
            .unbind("click")
            .click(function () {
              h.click.apply(b.element[0], arguments);
            })
            .appendTo(g);
          c.fn.button && f.button();
        });
        e.appendTo(b.uiDialog);
      }
    },
    _makeDraggable: function () {
      function a(f) {
        return { position: f.position, offset: f.offset };
      }
      var b = this,
        d = b.options,
        e = c(document),
        g;
      b.uiDialog.draggable({
        cancel: ".ui-dialog-content, .ui-dialog-titlebar-close",
        handle: ".ui-dialog-titlebar",
        containment: "document",
        start: function (f, h) {
          g = d.height === "auto" ? "auto" : c(this).height();
          c(this).height(c(this).height()).addClass("ui-dialog-dragging");
          b._trigger("dragStart", f, a(h));
        },
        drag: function (f, h) {
          b._trigger("drag", f, a(h));
        },
        stop: function (f, h) {
          d.position = [
            h.position.left - e.scrollLeft(),
            h.position.top - e.scrollTop(),
          ];
          c(this).removeClass("ui-dialog-dragging").height(g);
          b._trigger("dragStop", f, a(h));
          c.ui.dialog.overlay.resize();
        },
      });
    },
    _makeResizable: function (a) {
      function b(f) {
        return {
          originalPosition: f.originalPosition,
          originalSize: f.originalSize,
          position: f.position,
          size: f.size,
        };
      }
      a = a === j ? this.options.resizable : a;
      var d = this,
        e = d.options,
        g = d.uiDialog.css("position");
      a = typeof a === "string" ? a : "n,e,s,w,se,sw,ne,nw";
      d.uiDialog
        .resizable({
          cancel: ".ui-dialog-content",
          containment: "document",
          alsoResize: d.element,
          maxWidth: e.maxWidth,
          maxHeight: e.maxHeight,
          minWidth: e.minWidth,
          minHeight: d._minHeight(),
          handles: a,
          start: function (f, h) {
            c(this).addClass("ui-dialog-resizing");
            d._trigger("resizeStart", f, b(h));
          },
          resize: function (f, h) {
            d._trigger("resize", f, b(h));
          },
          stop: function (f, h) {
            c(this).removeClass("ui-dialog-resizing");
            e.height = c(this).height();
            e.width = c(this).width();
            d._trigger("resizeStop", f, b(h));
            c.ui.dialog.overlay.resize();
          },
        })
        .css("position", g)
        .find(".ui-resizable-se")
        .addClass("ui-icon ui-icon-grip-diagonal-se");
    },
    _minHeight: function () {
      var a = this.options;
      return a.height === "auto"
        ? a.minHeight
        : Math.min(a.minHeight, a.height);
    },
    _position: function (a) {
      var b = [],
        d = [0, 0],
        e;
      if (a) {
        if (typeof a === "string" || (typeof a === "object" && "0" in a)) {
          b = a.split ? a.split(" ") : [a[0], a[1]];
          if (b.length === 1) b[1] = b[0];
          c.each(["left", "top"], function (g, f) {
            if (+b[g] === b[g]) {
              d[g] = b[g];
              b[g] = f;
            }
          });
          a = { my: b.join(" "), at: b.join(" "), offset: d.join(" ") };
        }
        a = c.extend({}, c.ui.dialog.prototype.options.position, a);
      } else a = c.ui.dialog.prototype.options.position;
      (e = this.uiDialog.is(":visible")) || this.uiDialog.show();
      this.uiDialog
        .css({ top: 0, left: 0 })
        .position(c.extend({ of: window }, a));
      e || this.uiDialog.hide();
    },
    _setOptions: function (a) {
      var b = this,
        d = {},
        e = false;
      c.each(a, function (g, f) {
        b._setOption(g, f);
        if (g in k) e = true;
        if (g in l) d[g] = f;
      });
      e && this._size();
      this.uiDialog.is(":data(resizable)") &&
        this.uiDialog.resizable("option", d);
    },
    _setOption: function (a, b) {
      var d = this,
        e = d.uiDialog;
      switch (a) {
        case "beforeclose":
          a = "beforeClose";
          break;
        case "buttons":
          d._createButtons(b);
          break;
        case "closeText":
          d.uiDialogTitlebarCloseText.text("" + b);
          break;
        case "dialogClass":
          e.removeClass(d.options.dialogClass).addClass(
            "ui-dialog ui-widget ui-widget-content ui-corner-all " + b
          );
          break;
        case "disabled":
          b
            ? e.addClass("ui-dialog-disabled")
            : e.removeClass("ui-dialog-disabled");
          break;
        case "draggable":
          var g = e.is(":data(draggable)");
          g && !b && e.draggable("destroy");
          !g && b && d._makeDraggable();
          break;
        case "position":
          d._position(b);
          break;
        case "resizable":
          (g = e.is(":data(resizable)")) && !b && e.resizable("destroy");
          g && typeof b === "string" && e.resizable("option", "handles", b);
          !g && b !== false && d._makeResizable(b);
          break;
        case "title":
          c(".ui-dialog-title", d.uiDialogTitlebar).html("" + (b || "&#160;"));
          break;
      }
      c.Widget.prototype._setOption.apply(d, arguments);
    },
    _size: function () {
      var a = this.options,
        b,
        d,
        e = this.uiDialog.is(":visible");
      this.element.show().css({ width: "auto", minHeight: 0, height: 0 });
      if (a.minWidth > a.width) a.width = a.minWidth;
      b = this.uiDialog.css({ height: "auto", width: a.width }).height();
      d = Math.max(0, a.minHeight - b);
      if (a.height === "auto")
        if (c.support.minHeight)
          this.element.css({ minHeight: d, height: "auto" });
        else {
          this.uiDialog.show();
          a = this.element.css("height", "auto").height();
          e || this.uiDialog.hide();
          this.element.height(Math.max(a, d));
        }
      else this.element.height(Math.max(a.height - b, 0));
      this.uiDialog.is(":data(resizable)") &&
        this.uiDialog.resizable("option", "minHeight", this._minHeight());
    },
  });
  c.extend(c.ui.dialog, {
    version: "1.8.7",
    uuid: 0,
    maxZ: 0,
    getTitleId: function (a) {
      a = a.attr("id");
      if (!a) {
        this.uuid += 1;
        a = this.uuid;
      }
      return "ui-dialog-title-" + a;
    },
    overlay: function (a) {
      this.$el = c.ui.dialog.overlay.create(a);
    },
  });
  c.extend(c.ui.dialog.overlay, {
    instances: [],
    oldInstances: [],
    maxZ: 0,
    events: c
      .map(
        "focus,mousedown,mouseup,keydown,keypress,click".split(","),
        function (a) {
          return a + ".dialog-overlay";
        }
      )
      .join(" "),
    create: function (a) {
      if (this.instances.length === 0) {
        setTimeout(function () {
          c.ui.dialog.overlay.instances.length &&
            c(document).bind(c.ui.dialog.overlay.events, function (d) {
              if (c(d.target).zIndex() < c.ui.dialog.overlay.maxZ) return false;
            });
        }, 1);
        c(document).bind("keydown.dialog-overlay", function (d) {
          if (
            a.options.closeOnEscape &&
            d.keyCode &&
            d.keyCode === c.ui.keyCode.ESCAPE
          ) {
            a.close(d);
            d.preventDefault();
          }
        });
        c(window).bind("resize.dialog-overlay", c.ui.dialog.overlay.resize);
      }
      var b = (
        this.oldInstances.pop() ||
        c("<div></div>").addClass("ui-widget-overlay")
      )
        .appendTo(document.body)
        .css({ width: this.width(), height: this.height() });
      c.fn.bgiframe && b.bgiframe();
      this.instances.push(b);
      return b;
    },
    destroy: function (a) {
      var b = c.inArray(a, this.instances);
      b != -1 && this.oldInstances.push(this.instances.splice(b, 1)[0]);
      this.instances.length === 0 &&
        c([document, window]).unbind(".dialog-overlay");
      a.remove();
      var d = 0;
      c.each(this.instances, function () {
        d = Math.max(d, this.css("z-index"));
      });
      this.maxZ = d;
    },
    height: function () {
      var a, b;
      if (c.browser.msie && c.browser.version < 7) {
        a = Math.max(
          document.documentElement.scrollHeight,
          document.body.scrollHeight
        );
        b = Math.max(
          document.documentElement.offsetHeight,
          document.body.offsetHeight
        );
        return a < b ? c(window).height() + "px" : a + "px";
      } else return c(document).height() + "px";
    },
    width: function () {
      var a, b;
      if (c.browser.msie && c.browser.version < 7) {
        a = Math.max(
          document.documentElement.scrollWidth,
          document.body.scrollWidth
        );
        b = Math.max(
          document.documentElement.offsetWidth,
          document.body.offsetWidth
        );
        return a < b ? c(window).width() + "px" : a + "px";
      } else return c(document).width() + "px";
    },
    resize: function () {
      var a = c([]);
      c.each(c.ui.dialog.overlay.instances, function () {
        a = a.add(this);
      });
      a.css({ width: 0, height: 0 }).css({
        width: c.ui.dialog.overlay.width(),
        height: c.ui.dialog.overlay.height(),
      });
    },
  });
  c.extend(c.ui.dialog.overlay.prototype, {
    destroy: function () {
      c.ui.dialog.overlay.destroy(this.$el);
    },
  });
})(jQuery);
/**
 * @file
 * This is part of a patch to address a jQueryUI bug.  The bug is responsible
 * for the inability to scroll a page when a modal dialog is active. If the content
 * of the dialog extends beyond the bottom of the viewport, the user is only able
 * to scroll with a mousewheel or up/down keyboard keys.
 *
 * @see http://bugs.jqueryui.com/ticket/4671
 * @see https://bugs.webkit.org/show_bug.cgi?id=19033
 * @see views_ui.module
 * @see js/jquery.ui.dialog.min.js
 *
 * This JavaScript patch overwrites the $.ui.dialog.overlay.events object to remove
 * the mousedown, mouseup and click events from the list of events that are bound
 * in $.ui.dialog.overlay.create
 *
 * The original code for this object:
 * $.ui.dialog.overlay.events: $.map('focus,mousedown,mouseup,keydown,keypress,click'.split(','),
 *  function(event) {
 *    return event + '.dialog-overlay';
 *  }).join(' '),
 */

(function ($, undefined) {
  if ($.ui && $.ui.dialog && $.ui.dialog.overlay) {
    $.ui.dialog.overlay.events = $.map(
      "focus,keydown,keypress".split(","),
      function (event) {
        return event + ".dialog-overlay";
      }
    ).join(" ");
  }
})(jQuery);
/*!
 * jQuery Form Plugin
 * version: 2.52 (07-DEC-2010)
 * @requires jQuery v1.3.2 or later
 *
 * Patched for Drupal Gardens (version 2.52-patched):
 * - Add a hasOwnProperty check to prevent overridden array methods from being
 *   processed as array elements during AJAX form submits. This fixes a bug
 *   that affects the Janrain widget on IE8.
 * - @todo: The patch is no longer needed when we update to the latest version
 *   of the plugin, since the bug is fixed there also.
 *
 * Examples and documentation at: http://malsup.com/jquery/form/
 * Dual licensed under the MIT and GPL licenses:
 *   http://www.opensource.org/licenses/mit-license.php
 *   http://www.gnu.org/licenses/gpl.html
 */
(function (b) {
  function q() {
    if (b.fn.ajaxSubmit.debug) {
      var a = "[jquery.form] " + Array.prototype.join.call(arguments, "");
      if (window.console && window.console.log) window.console.log(a);
      else window.opera && window.opera.postError && window.opera.postError(a);
    }
  }
  b.fn.ajaxSubmit = function (a) {
    function f() {
      function t() {
        var o = i.attr("target"),
          m = i.attr("action");
        l.setAttribute("target", u);
        l.getAttribute("method") != "POST" && l.setAttribute("method", "POST");
        l.getAttribute("action") != e.url && l.setAttribute("action", e.url);
        e.skipEncodingOverride ||
          i.attr({
            encoding: "multipart/form-data",
            enctype: "multipart/form-data",
          });
        e.timeout &&
          setTimeout(function () {
            F = true;
            s();
          }, e.timeout);
        var v = [];
        try {
          if (e.extraData)
            for (var w in e.extraData)
              v.push(
                b(
                  '<input type="hidden" name="' +
                    w +
                    '" value="' +
                    e.extraData[w] +
                    '" />'
                ).appendTo(l)[0]
              );
          r.appendTo("body");
          r.data("form-plugin-onload", s);
          l.submit();
        } finally {
          l.setAttribute("action", m);
          o ? l.setAttribute("target", o) : i.removeAttr("target");
          b(v).remove();
        }
      }
      function s() {
        if (!G) {
          r.removeData("form-plugin-onload");
          var o = true;
          try {
            if (F) throw "timeout";
            p = x.contentWindow
              ? x.contentWindow.document
              : x.contentDocument
              ? x.contentDocument
              : x.document;
            var m = e.dataType == "xml" || p.XMLDocument || b.isXMLDoc(p);
            q("isXml=" + m);
            if (
              !m &&
              window.opera &&
              (p.body == null || p.body.innerHTML == "")
            )
              if (--K) {
                q("requeing onLoad callback, DOM not available");
                setTimeout(s, 250);
                return;
              }
            G = true;
            j.responseText = p.documentElement
              ? p.documentElement.innerHTML
              : null;
            j.responseXML = p.XMLDocument ? p.XMLDocument : p;
            j.getResponseHeader = function (L) {
              return { "content-type": e.dataType }[L];
            };
            var v = /(json|script)/.test(e.dataType);
            if (v || e.textarea) {
              var w = p.getElementsByTagName("textarea")[0];
              if (w) j.responseText = w.value;
              else if (v) {
                var H = p.getElementsByTagName("pre")[0],
                  I = p.getElementsByTagName("body")[0];
                if (H) j.responseText = H.textContent;
                else if (I) j.responseText = I.innerHTML;
              }
            } else if (
              e.dataType == "xml" &&
              !j.responseXML &&
              j.responseText != null
            )
              j.responseXML = C(j.responseText);
            J = b.httpData(j, e.dataType);
          } catch (D) {
            q("error caught:", D);
            o = false;
            j.error = D;
            b.handleError(e, j, "error", D);
          }
          if (j.aborted) {
            q("upload aborted");
            o = false;
          }
          if (o) {
            e.success.call(e.context, J, "success", j);
            y && b.event.trigger("ajaxSuccess", [j, e]);
          }
          y && b.event.trigger("ajaxComplete", [j, e]);
          y && !--b.active && b.event.trigger("ajaxStop");
          if (e.complete)
            e.complete.call(e.context, j, o ? "success" : "error");
          setTimeout(function () {
            r.removeData("form-plugin-onload");
            r.remove();
            j.responseXML = null;
          }, 100);
        }
      }
      function C(o, m) {
        if (window.ActiveXObject) {
          m = new ActiveXObject("Microsoft.XMLDOM");
          m.async = "false";
          m.loadXML(o);
        } else m = new DOMParser().parseFromString(o, "text/xml");
        return m &&
          m.documentElement &&
          m.documentElement.tagName != "parsererror"
          ? m
          : null;
      }
      var l = i[0];
      if (b(":input[name=submit],:input[id=submit]", l).length)
        alert('Error: Form elements must not have name or id of "submit".');
      else {
        var e = b.extend(true, {}, b.ajaxSettings, a);
        e.context = e.context || e;
        var u = "jqFormIO" + new Date().getTime(),
          E = "_" + u;
        window[E] = function () {
          var o = r.data("form-plugin-onload");
          if (o) {
            o();
            window[E] = undefined;
            try {
              delete window[E];
            } catch (m) {}
          }
        };
        var r = b(
            '<iframe id="' +
              u +
              '" name="' +
              u +
              '" src="' +
              e.iframeSrc +
              '" onload="window[\'_\'+this.id]()" />'
          ),
          x = r[0];
        r.css({ position: "absolute", top: "-1000px", left: "-1000px" });
        var j = {
            aborted: 0,
            responseText: null,
            responseXML: null,
            status: 0,
            statusText: "n/a",
            getAllResponseHeaders: function () {},
            getResponseHeader: function () {},
            setRequestHeader: function () {},
            abort: function () {
              this.aborted = 1;
              r.attr("src", e.iframeSrc);
            },
          },
          y = e.global;
        y && !b.active++ && b.event.trigger("ajaxStart");
        y && b.event.trigger("ajaxSend", [j, e]);
        if (e.beforeSend && e.beforeSend.call(e.context, j, e) === false)
          e.global && b.active--;
        else if (!j.aborted) {
          var G = false,
            F = 0,
            z = l.clk;
          if (z) {
            var A = z.name;
            if (A && !z.disabled) {
              e.extraData = e.extraData || {};
              e.extraData[A] = z.value;
              if (z.type == "image") {
                e.extraData[A + ".x"] = l.clk_x;
                e.extraData[A + ".y"] = l.clk_y;
              }
            }
          }
          e.forceSync ? t() : setTimeout(t, 10);
          var J,
            p,
            K = 50;
        }
      }
    }
    if (!this.length) {
      q("ajaxSubmit: skipping submit process - no element selected");
      return this;
    }
    if (typeof a == "function") a = { success: a };
    var d = this.attr("action");
    if ((d = typeof d === "string" ? b.trim(d) : ""))
      d = (d.match(/^([^#]+)/) || [])[1];
    d = d || window.location.href || "";
    a = b.extend(
      true,
      {
        url: d,
        type: this.attr("method") || "GET",
        iframeSrc: /^https/i.test(window.location.href || "")
          ? "javascript:false"
          : "about:blank",
      },
      a
    );
    d = {};
    this.trigger("form-pre-serialize", [this, a, d]);
    if (d.veto) {
      q("ajaxSubmit: submit vetoed via form-pre-serialize trigger");
      return this;
    }
    if (a.beforeSerialize && a.beforeSerialize(this, a) === false) {
      q("ajaxSubmit: submit aborted via beforeSerialize callback");
      return this;
    }
    var c,
      h,
      g = this.formToArray(a.semantic);

    // This section contains the Gardens patch, and is reformatted for readability.
    if (a.data) {
      a.extraData = a.data;
      for (c in a.data) {
        if (a.data[c] instanceof Array) {
          for (var k in a.data[c]) {
            // The if() statement (enclosing the preexisting line below) is the new
            // code added by our patch.
            if (a.data[c].hasOwnProperty(k)) {
              g.push({ name: c, value: a.data[c][k] });
            }
          }
        } else {
          h = a.data[c];
          h = b.isFunction(h) ? h() : h;
          g.push({ name: c, value: h });
        }
      }
    }

    if (a.beforeSubmit && a.beforeSubmit(g, this, a) === false) {
      q("ajaxSubmit: submit aborted via beforeSubmit callback");
      return this;
    }
    this.trigger("form-submit-validate", [g, this, a, d]);
    if (d.veto) {
      q("ajaxSubmit: submit vetoed via form-submit-validate trigger");
      return this;
    }
    c = b.param(g);
    if (a.type.toUpperCase() == "GET") {
      a.url += (a.url.indexOf("?") >= 0 ? "&" : "?") + c;
      a.data = null;
    } else a.data = c;
    var i = this,
      n = [];
    a.resetForm &&
      n.push(function () {
        i.resetForm();
      });
    a.clearForm &&
      n.push(function () {
        i.clearForm();
      });
    if (!a.dataType && a.target) {
      var B = a.success || function () {};
      n.push(function (t) {
        var s = a.replaceTarget ? "replaceWith" : "html";
        b(a.target)[s](t).each(B, arguments);
      });
    } else a.success && n.push(a.success);
    a.success = function (t, s, C) {
      for (var l = a.context || a, e = 0, u = n.length; e < u; e++)
        n[e].apply(l, [t, s, C || i, i]);
    };
    c = b("input:file", this).length > 0;
    k =
      i.attr("enctype") == "multipart/form-data" ||
      i.attr("encoding") == "multipart/form-data";
    if (a.iframe !== false && (c || a.iframe || k))
      a.closeKeepAlive ? b.get(a.closeKeepAlive, f) : f();
    else b.ajax(a);
    this.trigger("form-submit-notify", [this, a]);
    return this;
  };
  b.fn.ajaxForm = function (a) {
    if (this.length === 0) {
      var f = { s: this.selector, c: this.context };
      if (!b.isReady && f.s) {
        q("DOM not ready, queuing ajaxForm");
        b(function () {
          b(f.s, f.c).ajaxForm(a);
        });
        return this;
      }
      q(
        "terminating; zero elements found by selector" +
          (b.isReady ? "" : " (DOM not ready)")
      );
      return this;
    }
    return this.ajaxFormUnbind()
      .bind("submit.form-plugin", function (d) {
        if (!d.isDefaultPrevented()) {
          d.preventDefault();
          b(this).ajaxSubmit(a);
        }
      })
      .bind("click.form-plugin", function (d) {
        var c = d.target,
          h = b(c);
        if (!h.is(":submit,input:image")) {
          c = h.closest(":submit");
          if (c.length == 0) return;
          c = c[0];
        }
        var g = this;
        g.clk = c;
        if (c.type == "image")
          if (d.offsetX != undefined) {
            g.clk_x = d.offsetX;
            g.clk_y = d.offsetY;
          } else if (typeof b.fn.offset == "function") {
            h = h.offset();
            g.clk_x = d.pageX - h.left;
            g.clk_y = d.pageY - h.top;
          } else {
            g.clk_x = d.pageX - c.offsetLeft;
            g.clk_y = d.pageY - c.offsetTop;
          }
        setTimeout(function () {
          g.clk = g.clk_x = g.clk_y = null;
        }, 100);
      });
  };
  b.fn.ajaxFormUnbind = function () {
    return this.unbind("submit.form-plugin click.form-plugin");
  };
  b.fn.formToArray = function (a) {
    var f = [];
    if (this.length === 0) return f;
    var d = this[0],
      c = a ? d.getElementsByTagName("*") : d.elements;
    if (!c) return f;
    var h, g, k, i, n, B;
    h = 0;
    for (n = c.length; h < n; h++) {
      g = c[h];
      if ((k = g.name))
        if (a && d.clk && g.type == "image") {
          if (!g.disabled && d.clk == g) {
            f.push({ name: k, value: b(g).val() });
            f.push(
              { name: k + ".x", value: d.clk_x },
              { name: k + ".y", value: d.clk_y }
            );
          }
        } else if ((i = b.fieldValue(g, true)) && i.constructor == Array) {
          g = 0;
          for (B = i.length; g < B; g++) f.push({ name: k, value: i[g] });
        } else
          i !== null &&
            typeof i != "undefined" &&
            f.push({ name: k, value: i });
    }
    if (!a && d.clk) {
      a = b(d.clk);
      c = a[0];
      if ((k = c.name) && !c.disabled && c.type == "image") {
        f.push({ name: k, value: a.val() });
        f.push(
          { name: k + ".x", value: d.clk_x },
          { name: k + ".y", value: d.clk_y }
        );
      }
    }
    return f;
  };
  b.fn.formSerialize = function (a) {
    return b.param(this.formToArray(a));
  };
  b.fn.fieldSerialize = function (a) {
    var f = [];
    this.each(function () {
      var d = this.name;
      if (d) {
        var c = b.fieldValue(this, a);
        if (c && c.constructor == Array)
          for (var h = 0, g = c.length; h < g; h++)
            f.push({ name: d, value: c[h] });
        else
          c !== null &&
            typeof c != "undefined" &&
            f.push({ name: this.name, value: c });
      }
    });
    return b.param(f);
  };
  b.fn.fieldValue = function (a) {
    for (var f = [], d = 0, c = this.length; d < c; d++) {
      var h = b.fieldValue(this[d], a);
      h === null ||
        typeof h == "undefined" ||
        (h.constructor == Array && !h.length) ||
        (h.constructor == Array ? b.merge(f, h) : f.push(h));
    }
    return f;
  };
  b.fieldValue = function (a, f) {
    var d = a.name,
      c = a.type,
      h = a.tagName.toLowerCase();
    if (f === undefined) f = true;
    if (
      f &&
      (!d ||
        a.disabled ||
        c == "reset" ||
        c == "button" ||
        ((c == "checkbox" || c == "radio") && !a.checked) ||
        ((c == "submit" || c == "image") && a.form && a.form.clk != a) ||
        (h == "select" && a.selectedIndex == -1))
    )
      return null;
    if (h == "select") {
      var g = a.selectedIndex;
      if (g < 0) return null;
      d = [];
      h = a.options;
      var k = (c = c == "select-one") ? g + 1 : h.length;
      for (g = c ? g : 0; g < k; g++) {
        var i = h[g];
        if (i.selected) {
          var n = i.value;
          n ||
            (n =
              i.attributes &&
              i.attributes.value &&
              !i.attributes.value.specified
                ? i.text
                : i.value);
          if (c) return n;
          d.push(n);
        }
      }
      return d;
    }
    return b(a).val();
  };
  b.fn.clearForm = function () {
    return this.each(function () {
      b("input,select,textarea", this).clearFields();
    });
  };
  b.fn.clearFields = b.fn.clearInputs = function () {
    return this.each(function () {
      var a = this.type,
        f = this.tagName.toLowerCase();
      if (a == "text" || a == "password" || f == "textarea") this.value = "";
      else if (a == "checkbox" || a == "radio") this.checked = false;
      else if (f == "select") this.selectedIndex = -1;
    });
  };
  b.fn.resetForm = function () {
    return this.each(function () {
      if (
        typeof this.reset == "function" ||
        (typeof this.reset == "object" && !this.reset.nodeType)
      )
        this.reset();
    });
  };
  b.fn.enable = function (a) {
    if (a === undefined) a = true;
    return this.each(function () {
      this.disabled = !a;
    });
  };
  b.fn.selected = function (a) {
    if (a === undefined) a = true;
    return this.each(function () {
      var f = this.type;
      if (f == "checkbox" || f == "radio") this.checked = a;
      else if (this.tagName.toLowerCase() == "option") {
        f = b(this).parent("select");
        a &&
          f[0] &&
          f[0].type == "select-one" &&
          f.find("option").selected(false);
        this.selected = a;
      }
    });
  };
})(jQuery);
/* Modernizr 2.5.3 (Custom Build) | MIT & BSD
 * Build: http://www.modernizr.com/download/#-borderradius-boxshadow-multiplebgs-cssclasses-addtest-testprop-testallprops-domprefixes-css_boxsizing
 */
(window.Modernizr = (function (a, b, c) {
  function x(a) {
    j.cssText = a;
  }
  function y(a, b) {
    return x(prefixes.join(a + ";") + (b || ""));
  }
  function z(a, b) {
    return typeof a === b;
  }
  function A(a, b) {
    return !!~("" + a).indexOf(b);
  }
  function B(a, b) {
    for (var d in a) if (j[a[d]] !== c) return b == "pfx" ? a[d] : !0;
    return !1;
  }
  function C(a, b, d) {
    for (var e in a) {
      var f = b[a[e]];
      if (f !== c)
        return d === !1 ? a[e] : z(f, "function") ? f.bind(d || b) : f;
    }
    return !1;
  }
  function D(a, b, c) {
    var d = a.charAt(0).toUpperCase() + a.substr(1),
      e = (a + " " + n.join(d + " ") + d).split(" ");
    return z(b, "string") || z(b, "undefined")
      ? B(e, b)
      : ((e = (a + " " + o.join(d + " ") + d).split(" ")), C(e, b, c));
  }
  var d = "2.5.3",
    e = {},
    f = !0,
    g = b.documentElement,
    h = "modernizr",
    i = b.createElement(h),
    j = i.style,
    k,
    l = {}.toString,
    m = "Webkit Moz O ms",
    n = m.split(" "),
    o = m.toLowerCase().split(" "),
    p = {},
    q = {},
    r = {},
    s = [],
    t = s.slice,
    u,
    v = {}.hasOwnProperty,
    w;
  !z(v, "undefined") && !z(v.call, "undefined")
    ? (w = function (a, b) {
        return v.call(a, b);
      })
    : (w = function (a, b) {
        return b in a && z(a.constructor.prototype[b], "undefined");
      }),
    Function.prototype.bind ||
      (Function.prototype.bind = function (b) {
        var c = this;
        if (typeof c != "function") throw new TypeError();
        var d = t.call(arguments, 1),
          e = function () {
            if (this instanceof e) {
              var a = function () {};
              a.prototype = c.prototype;
              var f = new a(),
                g = c.apply(f, d.concat(t.call(arguments)));
              return Object(g) === g ? g : f;
            }
            return c.apply(b, d.concat(t.call(arguments)));
          };
        return e;
      }),
    (p.multiplebgs = function () {
      return (
        x("background:url(https://),url(https://),red url(https://)"),
        /(url\s*\(.*?){3}/.test(j.background)
      );
    }),
    (p.borderradius = function () {
      return D("borderRadius");
    }),
    (p.boxshadow = function () {
      return D("boxShadow");
    });
  for (var E in p)
    w(p, E) &&
      ((u = E.toLowerCase()), (e[u] = p[E]()), s.push((e[u] ? "" : "no-") + u));
  return (
    (e.addTest = function (a, b) {
      if (typeof a == "object") for (var d in a) w(a, d) && e.addTest(d, a[d]);
      else {
        a = a.toLowerCase();
        if (e[a] !== c) return e;
        (b = typeof b == "function" ? b() : b),
          (g.className += " " + (b ? "" : "no-") + a),
          (e[a] = b);
      }
      return e;
    }),
    x(""),
    (i = k = null),
    (e._version = d),
    (e._domPrefixes = o),
    (e._cssomPrefixes = n),
    (e.testProp = function (a) {
      return B([a]);
    }),
    (e.testAllProps = D),
    (g.className =
      g.className.replace(/(^|\s)no-js(\s|$)/, "$1$2") +
      (f ? " js " + s.join(" ") : "")),
    e
  );
})(this, this.document)),
  Modernizr.addTest("boxsizing", function () {
    return (
      Modernizr.testAllProps("boxSizing") &&
      (document.documentMode === undefined || document.documentMode > 7)
    );
  });
(function (a) {
  if (typeof define == "function" && define.amd) define(["jquery"], a);
  else {
    if (window.jQuery === undefined)
      return (
        typeof window.console == "object" &&
          typeof window.console.log == "function" &&
          console.log(
            'The plugin "BreakUp" failed to run because jQuery is not present.'
          ),
        null
      );
    a();
  }
})(function () {
  var a = "BreakUp",
    b = jQuery,
    c = { breakpoints: { 0: b.noop }, options: { namespace: a } };
  b[a] = (function () {
    function h() {
      (this.currentBreak = undefined),
        (this.breakPoints = {}),
        (this.updated = !1),
        (this.namespace = a),
        (this.$elements = b()),
        this.initialize.apply(this, arguments);
    }
    var d = Array.prototype.shift,
      e = Array.prototype.unshift,
      f = Array.prototype.slice,
      g = Array.prototype.splice;
    return (
      (h.prototype.initialize = function (f, h, i) {
        var j, k, l;
        if (typeof f == "string" || (typeof f == "object" && "jquery" in f)) {
          this.log(
            "[" + a + "] No breakpoints were provided for BreakUp to act on.",
            "info"
          );
          return;
        }
        (j = b.extend({}, c.breakpoints, f)),
          d.call(arguments),
          e.call(arguments, j),
          ((typeof h == "object" && "jquery" in h) || typeof h == "string") &&
            g.call(arguments, 1, 0, undefined),
          h &&
            ((k = b.extend({}, c.options, h)), (this.namespace = k.namespace)),
          typeof i == "string" || i === window || i === document
            ? ((this.$elements = b(i)), g.call(arguments, 2, 1, this.$elements))
            : typeof i == "object" && "jquery" in i && (this.$elements = i);
        if (this.$elements.length === 0) {
          this.log(
            "[" +
              a +
              "] Neither a jQuery object nor a valid selector were provided for BreakUp to act on.",
            "info"
          );
          return;
        }
        g.call(arguments, 1, 1),
          this.registerBreakPoints.apply(this, arguments),
          (l = this.buildProxy(this.breakCheck, this)),
          b(window).bind("resize." + this.namespace, l),
          b(window).bind("load." + this.namespace, l);
      }),
      (h.prototype.registerBreakPoints = function (b) {
        var c = b,
          g,
          h;
        if (typeof c == "object") {
          d.call(arguments);
          for (g in c)
            if (c.hasOwnProperty(g)) {
              if (isNaN(g) && g !== "default") {
                this.log(
                  "[" +
                    a +
                    '] The breakpoint property name "' +
                    g +
                    '" is not valid. The property must convert to a number or be the word "default".',
                  "info"
                );
                continue;
              }
              if (typeof c[g] == "function") {
                (h = g === "default" ? "0" : g), e.call(arguments, c[g]);
                var i = f.call(arguments);
                (this.breakPoints[h] = this.buildProxy.apply(this, arguments)),
                  d.call(arguments);
              } else
                this.log(
                  "[" +
                    a +
                    "] " +
                    c[g] +
                    ", for the breakpoint " +
                    g +
                    " is not a function.",
                  "info"
                );
            }
        }
      }),
      (h.prototype.getBreakPoint = function () {
        var a,
          b,
          c = this.getScreenWidth();
        for (a in this.breakPoints)
          this.breakPoints.hasOwnProperty(a) &&
            Number(a) <= c &&
            (Number(a) > Number(b) || Number(a) === 0) &&
            (b = a);
        return b;
      }),
      (h.prototype.listBreakPoints = function () {
        return this.breakPoints;
      }),
      (h.prototype.breakChangeHandler = function (b) {
        if (!this.updated) {
          var c = this.getBreakPointHandler();
          if (typeof c == "function") {
            c(b), (this.updated = !0);
            return;
          }
          this.log(
            "[" +
              a +
              "] The handler for the current breakpoint is not a function.",
            "info"
          );
        }
      }),
      (h.prototype.getBreakPointHandler = function () {
        return this.breakPoints[this.getBreakPoint()];
      }),
      (h.prototype.breakCheck = function (a) {
        var b = this.getBreakPoint();
        this.currentBreak !== b &&
          ((this.currentBreak = b),
          (this.updated = !1),
          this.breakChangeHandler(a));
      }),
      (h.prototype.buildProxy = function (a, b) {
        var c = a,
          d = b;
        for (var e = 0; e < 2; e++) Array.prototype.shift.call(arguments);
        var f = Array.prototype.slice.call(arguments);
        return function () {
          for (var a = 0; a < arguments.length; a++) f.unshift(arguments[a]);
          c.apply(d, f);
        };
      }),
      (h.prototype.getScreenWidth = function () {
        return (
          window.innerWidth ||
          document.documentElement.offsetWidth ||
          document.documentElement.clientWidth
        );
      }),
      (h.prototype.setNameSpace = function (a) {
        this.namespace = a;
      }),
      (h.prototype.getNameSpace = function () {
        return this.namespace;
      }),
      (h.prototype.log = function (a, b) {
        if ("console" in window) {
          var c = b || "log";
          console[c](a);
        }
      }),
      h
    );
  })();
});
(function ($) {
  /**
   * Provides Ajax page updating via jQuery $.ajax (Asynchronous JavaScript and XML).
   *
   * Ajax is a method of making a request via JavaScript while viewing an HTML
   * page. The request returns an array of commands encoded in JSON, which is
   * then executed to make any changes that are necessary to the page.
   *
   * Drupal uses this file to enhance form elements with #ajax['path'] and
   * #ajax['wrapper'] properties. If set, this file will automatically be included
   * to provide Ajax capabilities.
   */

  Drupal.ajax = Drupal.ajax || {};

  Drupal.settings.urlIsAjaxTrusted = Drupal.settings.urlIsAjaxTrusted || {};

  /**
   * Attaches the Ajax behavior to each Ajax form element.
   */
  Drupal.behaviors.AJAX = {
    attach: function (context, settings) {
      // Load all Ajax behaviors specified in the settings.
      for (var base in settings.ajax) {
        if (!$("#" + base + ".ajax-processed").length) {
          var element_settings = settings.ajax[base];

          if (typeof element_settings.selector == "undefined") {
            element_settings.selector = "#" + base;
          }
          $(element_settings.selector).each(function () {
            element_settings.element = this;
            Drupal.ajax[base] = new Drupal.ajax(base, this, element_settings);
          });

          $("#" + base).addClass("ajax-processed");
        }
      }

      // Bind Ajax behaviors to all items showing the class.
      $(".use-ajax:not(.ajax-processed)")
        .addClass("ajax-processed")
        .each(function () {
          var element_settings = {};
          // Clicked links look better with the throbber than the progress bar.
          element_settings.progress = { type: "throbber" };

          // For anchor tags, these will go to the target of the anchor rather
          // than the usual location.
          if ($(this).attr("href")) {
            element_settings.url = $(this).attr("href");
            element_settings.event = "click";
          }
          var base = $(this).attr("id");
          Drupal.ajax[base] = new Drupal.ajax(base, this, element_settings);
        });

      // This class means to submit the form to the action using Ajax.
      $(".use-ajax-submit:not(.ajax-processed)")
        .addClass("ajax-processed")
        .each(function () {
          var element_settings = {};

          // Ajax submits specified in this manner automatically submit to the
          // normal form action.
          element_settings.url = $(this.form).attr("action");
          // Form submit button clicks need to tell the form what was clicked so
          // it gets passed in the POST request.
          element_settings.setClick = true;
          // Form buttons use the 'click' event rather than mousedown.
          element_settings.event = "click";
          // Clicked form buttons look better with the throbber than the progress bar.
          element_settings.progress = { type: "throbber" };

          var base = $(this).attr("id");
          Drupal.ajax[base] = new Drupal.ajax(base, this, element_settings);
        });
    },
  };

  /**
   * Ajax object.
   *
   * All Ajax objects on a page are accessible through the global Drupal.ajax
   * object and are keyed by the submit button's ID. You can access them from
   * your module's JavaScript file to override properties or functions.
   *
   * For example, if your Ajax enabled button has the ID 'edit-submit', you can
   * redefine the function that is called to insert the new content like this
   * (inside a Drupal.behaviors attach block):
   * @code
   *    Drupal.behaviors.myCustomAJAXStuff = {
   *      attach: function (context, settings) {
   *        Drupal.ajax['edit-submit'].commands.insert = function (ajax, response, status) {
   *          new_content = $(response.data);
   *          $('#my-wrapper').append(new_content);
   *          alert('New content was appended to #my-wrapper');
   *        }
   *      }
   *    };
   * @endcode
   */
  Drupal.ajax = function (base, element, element_settings) {
    var defaults = {
      url: "system/ajax",
      event: "mousedown",
      keypress: true,
      selector: "#" + base,
      effect: "none",
      speed: "none",
      method: "replaceWith",
      progress: {
        type: "throbber",
        message: Drupal.t("Please wait..."),
      },
      submit: {
        js: true,
      },
    };

    $.extend(this, defaults, element_settings);

    this.element = element;
    this.element_settings = element_settings;

    // Replacing 'nojs' with 'ajax' in the URL allows for an easy method to let
    // the server detect when it needs to degrade gracefully.
    // There are five scenarios to check for:
    // 1. /nojs/
    // 2. /nojs$ - The end of a URL string.
    // 3. /nojs? - Followed by a query (with clean URLs enabled).
    //      E.g.: path/nojs?destination=foobar
    // 4. /nojs& - Followed by a query (without clean URLs enabled).
    //      E.g.: ?q=path/nojs&destination=foobar
    // 5. /nojs# - Followed by a fragment.
    //      E.g.: path/nojs#myfragment
    this.url = element_settings.url.replace(/\/nojs(\/|$|\?|&|#)/g, "/ajax$1");
    // If the 'nojs' version of the URL is trusted, also trust the 'ajax' version.
    if (Drupal.settings.urlIsAjaxTrusted[element_settings.url]) {
      Drupal.settings.urlIsAjaxTrusted[this.url] = true;
    }

    this.wrapper = "#" + element_settings.wrapper;

    // If there isn't a form, jQuery.ajax() will be used instead, allowing us to
    // bind Ajax to links as well.
    if (this.element.form) {
      this.form = $(this.element.form);
    }

    // Set the options for the ajaxSubmit function.
    // The 'this' variable will not persist inside of the options object.
    var ajax = this;
    ajax.options = {
      url: ajax.url,
      data: ajax.submit,
      beforeSerialize: function (element_settings, options) {
        return ajax.beforeSerialize(element_settings, options);
      },
      beforeSubmit: function (form_values, element_settings, options) {
        ajax.ajaxing = true;
        return ajax.beforeSubmit(form_values, element_settings, options);
      },
      beforeSend: function (xmlhttprequest, options) {
        ajax.ajaxing = true;
        return ajax.beforeSend(xmlhttprequest, options);
      },
      success: function (response, status, xmlhttprequest) {
        // Sanity check for browser support (object expected).
        // When using iFrame uploads, responses must be returned as a string.
        if (typeof response == "string") {
          response = $.parseJSON(response);
        }

        // Prior to invoking the response's commands, verify that they can be
        // trusted by checking for a response header. See
        // ajax_set_verification_header() for details.
        // - Empty responses are harmless so can bypass verification. This avoids
        //   an alert message for server-generated no-op responses that skip Ajax
        //   rendering.
        // - Ajax objects with trusted URLs (e.g., ones defined server-side via
        //   #ajax) can bypass header verification. This is especially useful for
        //   Ajax with multipart forms. Because IFRAME transport is used, the
        //   response headers cannot be accessed for verification.
        if (response !== null && !Drupal.settings.urlIsAjaxTrusted[ajax.url]) {
          if (xmlhttprequest.getResponseHeader("X-Drupal-Ajax-Token") !== "1") {
            var customMessage = Drupal.t(
              "The response failed verification so will not be processed."
            );
            return ajax.error(xmlhttprequest, ajax.url, customMessage);
          }
        }

        return ajax.success(response, status);
      },
      complete: function (xmlhttprequest, status) {
        ajax.ajaxing = false;
        if (status == "error" || status == "parsererror") {
          return ajax.error(xmlhttprequest, ajax.url);
        }
      },
      dataType: "json",
      type: "POST",
    };

    // Bind the ajaxSubmit function to the element event.
    $(ajax.element).bind(element_settings.event, function (event) {
      if (
        !Drupal.settings.urlIsAjaxTrusted[ajax.url] &&
        !Drupal.urlIsLocal(ajax.url)
      ) {
        throw new Error(
          Drupal.t("The callback URL is not local and not trusted: !url", {
            "!url": ajax.url,
          })
        );
      }
      return ajax.eventResponse(this, event);
    });

    // If necessary, enable keyboard submission so that Ajax behaviors
    // can be triggered through keyboard input as well as e.g. a mousedown
    // action.
    if (element_settings.keypress) {
      $(ajax.element).keypress(function (event) {
        return ajax.keypressResponse(this, event);
      });
    }

    // If necessary, prevent the browser default action of an additional event.
    // For example, prevent the browser default action of a click, even if the
    // AJAX behavior binds to mousedown.
    if (element_settings.prevent) {
      $(ajax.element).bind(element_settings.prevent, false);
    }
  };

  /**
   * Handle a key press.
   *
   * The Ajax object will, if instructed, bind to a key press response. This
   * will test to see if the key press is valid to trigger this event and
   * if it is, trigger it for us and prevent other keypresses from triggering.
   * In this case we're handling RETURN and SPACEBAR keypresses (event codes 13
   * and 32. RETURN is often used to submit a form when in a textfield, and
   * SPACE is often used to activate an element without submitting.
   */
  Drupal.ajax.prototype.keypressResponse = function (element, event) {
    // Create a synonym for this to reduce code confusion.
    var ajax = this;

    // Detect enter key and space bar and allow the standard response for them,
    // except for form elements of type 'text' and 'textarea', where the
    // spacebar activation causes inappropriate activation if #ajax['keypress'] is
    // TRUE. On a text-type widget a space should always be a space.
    if (
      event.which == 13 ||
      (event.which == 32 &&
        element.type != "text" &&
        element.type != "textarea")
    ) {
      $(ajax.element_settings.element).trigger(ajax.element_settings.event);
      return false;
    }
  };

  /**
   * Handle an event that triggers an Ajax response.
   *
   * When an event that triggers an Ajax response happens, this method will
   * perform the actual Ajax call. It is bound to the event using
   * bind() in the constructor, and it uses the options specified on the
   * ajax object.
   */
  Drupal.ajax.prototype.eventResponse = function (element, event) {
    // Create a synonym for this to reduce code confusion.
    var ajax = this;

    // Do not perform another ajax command if one is already in progress.
    if (ajax.ajaxing) {
      return false;
    }

    try {
      if (ajax.form) {
        // If setClick is set, we must set this to ensure that the button's
        // value is passed.
        if (ajax.setClick) {
          // Mark the clicked button. 'form.clk' is a special variable for
          // ajaxSubmit that tells the system which element got clicked to
          // trigger the submit. Without it there would be no 'op' or
          // equivalent.
          element.form.clk = element;
        }

        ajax.form.ajaxSubmit(ajax.options);
      } else {
        ajax.beforeSerialize(ajax.element, ajax.options);
        $.ajax(ajax.options);
      }
    } catch (e) {
      // Unset the ajax.ajaxing flag here because it won't be unset during
      // the complete response.
      ajax.ajaxing = false;
      alert(
        "An error occurred while attempting to process " +
          ajax.options.url +
          ": " +
          e.message
      );
    }

    // For radio/checkbox, allow the default event. On IE, this means letting
    // it actually check the box.
    if (
      typeof element.type != "undefined" &&
      (element.type == "checkbox" || element.type == "radio")
    ) {
      return true;
    } else {
      return false;
    }
  };

  /**
   * Handler for the form serialization.
   *
   * Runs before the beforeSend() handler (see below), and unlike that one, runs
   * before field data is collected.
   */
  Drupal.ajax.prototype.beforeSerialize = function (element, options) {
    // Allow detaching behaviors to update field values before collecting them.
    // This is only needed when field values are added to the POST data, so only
    // when there is a form such that this.form.ajaxSubmit() is used instead of
    // $.ajax(). When there is no form and $.ajax() is used, beforeSerialize()
    // isn't called, but don't rely on that: explicitly check this.form.
    if (this.form) {
      var settings = this.settings || Drupal.settings;
      Drupal.detachBehaviors(this.form, settings, "serialize");
    }

    // Prevent duplicate HTML ids in the returned markup.
    // @see drupal_html_id()
    options.data["ajax_html_ids[]"] = [];
    $("[id]").each(function () {
      options.data["ajax_html_ids[]"].push(this.id);
    });

    // Allow Drupal to return new JavaScript and CSS files to load without
    // returning the ones already loaded.
    // @see ajax_base_page_theme()
    // @see drupal_get_css()
    // @see drupal_get_js()
    options.data["ajax_page_state[theme]"] =
      Drupal.settings.ajaxPageState.theme;
    options.data["ajax_page_state[theme_token]"] =
      Drupal.settings.ajaxPageState.theme_token;
    for (var key in Drupal.settings.ajaxPageState.css) {
      options.data["ajax_page_state[css][" + key + "]"] = 1;
    }
    for (var key in Drupal.settings.ajaxPageState.js) {
      options.data["ajax_page_state[js][" + key + "]"] = 1;
    }
  };

  /**
   * Modify form values prior to form submission.
   */
  Drupal.ajax.prototype.beforeSubmit = function (
    form_values,
    element,
    options
  ) {
    // This function is left empty to make it simple to override for modules
    // that wish to add functionality here.
  };

  /**
   * Prepare the Ajax request before it is sent.
   */
  Drupal.ajax.prototype.beforeSend = function (xmlhttprequest, options) {
    // For forms without file inputs, the jQuery Form plugin serializes the form
    // values, and then calls jQuery's $.ajax() function, which invokes this
    // handler. In this circumstance, options.extraData is never used. For forms
    // with file inputs, the jQuery Form plugin uses the browser's normal form
    // submission mechanism, but captures the response in a hidden IFRAME. In this
    // circumstance, it calls this handler first, and then appends hidden fields
    // to the form to submit the values in options.extraData. There is no simple
    // way to know which submission mechanism will be used, so we add to extraData
    // regardless, and allow it to be ignored in the former case.
    if (this.form) {
      options.extraData = options.extraData || {};

      // Let the server know when the IFRAME submission mechanism is used. The
      // server can use this information to wrap the JSON response in a TEXTAREA,
      // as per http://jquery.malsup.com/form/#file-upload.
      options.extraData.ajax_iframe_upload = "1";

      // The triggering element is about to be disabled (see below), but if it
      // contains a value (e.g., a checkbox, textfield, select, etc.), ensure that
      // value is included in the submission. As per above, submissions that use
      // $.ajax() are already serialized prior to the element being disabled, so
      // this is only needed for IFRAME submissions.
      var v = $.fieldValue(this.element);
      if (v !== null) {
        options.extraData[this.element.name] = Drupal.checkPlain(v);
      }
    }

    // Disable the element that received the change to prevent user interface
    // interaction while the Ajax request is in progress. ajax.ajaxing prevents
    // the element from triggering a new request, but does not prevent the user
    // from changing its value.
    $(this.element).addClass("progress-disabled").attr("disabled", true);

    // Insert progressbar or throbber.
    if (this.progress.type == "bar") {
      var progressBar = new Drupal.progressBar(
        "ajax-progress-" + this.element.id,
        eval(this.progress.update_callback),
        this.progress.method,
        eval(this.progress.error_callback)
      );
      if (this.progress.message) {
        progressBar.setProgress(-1, this.progress.message);
      }
      if (this.progress.url) {
        progressBar.startMonitoring(
          this.progress.url,
          this.progress.interval || 1500
        );
      }
      this.progress.element = $(progressBar.element).addClass(
        "ajax-progress ajax-progress-bar"
      );
      this.progress.object = progressBar;
      $(this.element).after(this.progress.element);
    } else if (this.progress.type == "throbber") {
      this.progress.element = $(
        '<div class="ajax-progress ajax-progress-throbber"><div class="throbber">&nbsp;</div></div>'
      );
      if (this.progress.message) {
        $(".throbber", this.progress.element).after(
          '<div class="message">' + this.progress.message + "</div>"
        );
      }
      $(this.element).after(this.progress.element);
    }
  };

  /**
   * Handler for the form redirection completion.
   */
  Drupal.ajax.prototype.success = function (response, status) {
    // Remove the progress element.
    if (this.progress.element) {
      $(this.progress.element).remove();
    }
    if (this.progress.object) {
      this.progress.object.stopMonitoring();
    }
    $(this.element).removeClass("progress-disabled").removeAttr("disabled");

    Drupal.freezeHeight();

    for (var i in response) {
      if (
        response.hasOwnProperty(i) &&
        response[i]["command"] &&
        this.commands[response[i]["command"]]
      ) {
        this.commands[response[i]["command"]](this, response[i], status);
      }
    }

    // Reattach behaviors, if they were detached in beforeSerialize(). The
    // attachBehaviors() called on the new content from processing the response
    // commands is not sufficient, because behaviors from the entire form need
    // to be reattached.
    if (this.form) {
      var settings = this.settings || Drupal.settings;
      Drupal.attachBehaviors(this.form, settings);
    }

    Drupal.unfreezeHeight();

    // Remove any response-specific settings so they don't get used on the next
    // call by mistake.
    this.settings = null;
  };

  /**
   * Build an effect object which tells us how to apply the effect when adding new HTML.
   */
  Drupal.ajax.prototype.getEffect = function (response) {
    var type = response.effect || this.effect;
    var speed = response.speed || this.speed;

    var effect = {};
    if (type == "none") {
      effect.showEffect = "show";
      effect.hideEffect = "hide";
      effect.showSpeed = "";
    } else if (type == "fade") {
      effect.showEffect = "fadeIn";
      effect.hideEffect = "fadeOut";
      effect.showSpeed = speed;
    } else {
      effect.showEffect = type + "Toggle";
      effect.hideEffect = type + "Toggle";
      effect.showSpeed = speed;
    }

    return effect;
  };

  /**
   * Handler for the form redirection error.
   */
  Drupal.ajax.prototype.error = function (xmlhttprequest, uri, customMessage) {
    Drupal.displayAjaxError(
      Drupal.ajaxError(xmlhttprequest, uri, customMessage)
    );
    // Remove the progress element.
    if (this.progress.element) {
      $(this.progress.element).remove();
    }
    if (this.progress.object) {
      this.progress.object.stopMonitoring();
    }
    // Undo hide.
    $(this.wrapper).show();
    // Re-enable the element.
    $(this.element).removeClass("progress-disabled").removeAttr("disabled");
    // Reattach behaviors, if they were detached in beforeSerialize().
    if (this.form) {
      var settings = this.settings || Drupal.settings;
      Drupal.attachBehaviors(this.form, settings);
    }
  };

  /**
   * Provide a series of commands that the server can request the client perform.
   */
  Drupal.ajax.prototype.commands = {
    /**
     * Command to insert new content into the DOM.
     */
    insert: function (ajax, response, status) {
      // Get information from the response. If it is not there, default to
      // our presets.
      var wrapper = response.selector ? $(response.selector) : $(ajax.wrapper);
      var method = response.method || ajax.method;
      var effect = ajax.getEffect(response);

      // We don't know what response.data contains: it might be a string of text
      // without HTML, so don't rely on jQuery correctly iterpreting
      // $(response.data) as new HTML rather than a CSS selector. Also, if
      // response.data contains top-level text nodes, they get lost with either
      // $(response.data) or $('<div></div>').replaceWith(response.data).
      var new_content_wrapped = $("<div></div>").html(response.data);
      var new_content = new_content_wrapped.contents();

      // For legacy reasons, the effects processing code assumes that new_content
      // consists of a single top-level element. Also, it has not been
      // sufficiently tested whether attachBehaviors() can be successfully called
      // with a context object that includes top-level text nodes. However, to
      // give developers full control of the HTML appearing in the page, and to
      // enable Ajax content to be inserted in places where DIV elements are not
      // allowed (e.g., within TABLE, TR, and SPAN parents), we check if the new
      // content satisfies the requirement of a single top-level element, and
      // only use the container DIV created above when it doesn't. For more
      // information, please see http://drupal.org/node/736066.
      if (new_content.length != 1 || new_content.get(0).nodeType != 1) {
        new_content = new_content_wrapped;
      }

      // If removing content from the wrapper, detach behaviors first.
      switch (method) {
        case "html":
        case "replaceWith":
        case "replaceAll":
        case "empty":
        case "remove":
          var settings = response.settings || ajax.settings || Drupal.settings;
          Drupal.detachBehaviors(wrapper, settings);
      }

      // Add the new content to the page.
      wrapper[method](new_content);

      // Immediately hide the new content if we're using any effects.
      if (effect.showEffect != "show") {
        new_content.hide();
      }

      // Determine which effect to use and what content will receive the
      // effect, then show the new content.
      if ($(".ajax-new-content", new_content).length > 0) {
        $(".ajax-new-content", new_content).hide();
        new_content.show();
        $(".ajax-new-content", new_content)[effect.showEffect](
          effect.showSpeed
        );
      } else if (effect.showEffect != "show") {
        new_content[effect.showEffect](effect.showSpeed);
      }

      // Attach all JavaScript behaviors to the new content, if it was successfully
      // added to the page, this if statement allows #ajax['wrapper'] to be
      // optional.
      if (new_content.parents("html").length > 0) {
        // Apply any settings from the returned JSON if available.
        var settings = response.settings || ajax.settings || Drupal.settings;
        Drupal.attachBehaviors(new_content, settings);
      }
    },

    /**
     * Command to remove a chunk from the page.
     */
    remove: function (ajax, response, status) {
      var settings = response.settings || ajax.settings || Drupal.settings;
      Drupal.detachBehaviors($(response.selector), settings);
      $(response.selector).remove();
    },

    /**
     * Command to mark a chunk changed.
     */
    changed: function (ajax, response, status) {
      if (!$(response.selector).hasClass("ajax-changed")) {
        $(response.selector).addClass("ajax-changed");
        if (response.asterisk) {
          $(response.selector)
            .find(response.asterisk)
            .append(' <span class="ajax-changed">*</span> ');
        }
      }
    },

    /**
     * Command to provide an alert.
     */
    alert: function (ajax, response, status) {
      alert(response.text, response.title);
    },

    /**
     * Command to provide the jQuery css() function.
     */
    css: function (ajax, response, status) {
      $(response.selector).css(response.argument);
    },

    /**
     * Command to set the settings that will be used for other commands in this response.
     */
    settings: function (ajax, response, status) {
      if (response.merge) {
        $.extend(true, Drupal.settings, response.settings);
      } else {
        ajax.settings = response.settings;
      }
    },

    /**
     * Command to attach data using jQuery's data API.
     */
    data: function (ajax, response, status) {
      $(response.selector).data(response.name, response.value);
    },

    /**
     * Command to apply a jQuery method.
     */
    invoke: function (ajax, response, status) {
      var $element = $(response.selector);
      $element[response.method].apply($element, response.arguments);
    },

    /**
     * Command to restripe a table.
     */
    restripe: function (ajax, response, status) {
      // :even and :odd are reversed because jQuery counts from 0 and
      // we count from 1, so we're out of sync.
      // Match immediate children of the parent element to allow nesting.
      $("> tbody > tr:visible, > tr:visible", $(response.selector))
        .removeClass("odd even")
        .filter(":even")
        .addClass("odd")
        .end()
        .filter(":odd")
        .addClass("even");
    },

    /**
     * Command to add css.
     *
     * Uses the proprietary addImport method if available as browsers which
     * support that method ignore @import statements in dynamically added
     * stylesheets.
     */
    add_css: function (ajax, response, status) {
      // Add the styles in the normal way.
      $("head").prepend(response.data);
      // Add imports in the styles using the addImport method if available.
      var match,
        importMatch = /^@import url\("(.*)"\);$/gim;
      if (
        document.styleSheets[0].addImport &&
        importMatch.test(response.data)
      ) {
        importMatch.lastIndex = 0;
        while ((match = importMatch.exec(response.data))) {
          document.styleSheets[0].addImport(match[1]);
        }
      }
    },

    /**
     * Command to update a form's build ID.
     */
    updateBuildId: function (ajax, response, status) {
      $('input[name="form_build_id"][value="' + response["old"] + '"]').val(
        response["new"]
      );
    },
  };
})(jQuery);
(function ($) {
  /**
   * Provides AJAX dialog updating via jQuery $.ajax (Asynchronous JavaScript and XML).
   */

  Drupal.dialog = Drupal.dialog || {};

  Drupal.behaviors.dialog = {
    attach: function (context, settings) {
      // Create the jQuery UI dialog box to handle all dialog events.
      $("body").once("dialog", function () {
        Drupal.dialog = $('<div id="dialog"></div>').dialog({
          autoOpen: false,
          modal: true,
        });
      });

      // Display a loading modal for potential dialogs.
      $("a.use-dialog")
        .once("use-dialog")
        .click(function () {
          Drupal.ajax.prototype.commands.dialog_loading();
          return false;
        });
    },
  };

  /**
   * Provide the HTML to create the throbber.
   */
  Drupal.theme.prototype.DialogThrobber = function () {
    var html = "";
    html += '  <div class="ajax-progress">';
    html += '    <div class="throbber"></div>';
    html += "  </div>";
    return html;
  };

  /**
   * Command to open a loading dialog.
   */
  Drupal.ajax.prototype.commands.dialog_loading = function (
    ajax,
    response,
    status
  ) {
    // @see http://drupal.org/node/1358624
    // For some reason, the ajax parameter is undefined. In the subsequent call to
    // dialog_display, ajax.settings is checked, so pass an empty object to
    // prevent an error.
    // @todo Refactor this to use the Drupal AJAX API's standard throbber instead
    // of injecting a custom one.
    Drupal.ajax.prototype.commands.dialog_display(
      {},
      {
        content: Drupal.theme("DialogThrobber"),
        title: Drupal.t("Loading..."),
      }
    );
  };

  /**
   * Command to display the dialog.
   */
  Drupal.ajax.prototype.commands.dialog_display = function (
    ajax,
    response,
    status
  ) {
    var element = Drupal.dialog;
    var new_content = $("<div></div>").html(response.content);
    element
      .dialog("close")
      .html(new_content)
      // Restore the dialog's default values.
      .dialog("option", "buttons", {})
      .dialog("option", "width", "600px")
      .dialog("option", "height", "auto")
      .dialog("option", "title", response.title);

    // Update the options available with the dialog.
    if (response.options) {
      jQuery.each(response.options, function (option, value) {
        element.dialog("option", option, value);
      });
    }

    // Apply any settings from the returned JSON if available.
    var settings = response.settings || ajax.settings || Drupal.settings;
    // Process any other behaviors on the content, and display the dialog box.
    Drupal.attachBehaviors(new_content, settings);
    element.dialog("open");
  };

  /**
   * Command to close the dialog.
   */
  Drupal.ajax.prototype.commands.dialog_dismiss = function (
    ajax,
    response,
    status
  ) {
    var element = Drupal.dialog;

    // Process any other behaviors on the content, and close the dialog box.
    Drupal.detachBehaviors(element);
    element.dialog("close");
  };

  /**
   * Command to redirect the browser.
   */
  Drupal.ajax.prototype.commands.dialog_redirect = function (
    ajax,
    response,
    status
  ) {
    window.location = response.url;
  };

  /**
   * Command to reload the browser.
   */
  Drupal.ajax.prototype.commands.dialog_reload = function (
    ajax,
    response,
    status
  ) {
    window.location.reload();
  };

  /**
   * Command to use the xLazyLoader to load additional JavaScript, CSS and images.
   *
   * http://code.google.com/p/ajaxsoft/wiki/xLazyLoader
   */
  Drupal.ajax.prototype.commands.xlazyloader = function (
    ajax,
    response,
    status
  ) {
    var settings = {
      name: "lazy",
      success: function () {
        // When it's complete loading the new JavaScript and CSS, make sure to run
        // the behaviors on the object.
        Drupal.attachBehaviors(Drupal.dialog);
      },
    };
    // Merge in the settings, allowing the loading of CSS and JavaScript.
    jQuery.extend(settings, response.options);
    // Load the scripts.
    $.xLazyLoader(settings);
  };
})(jQuery);
/**
 * Prevent Drupal Gardens pages from being served from an iframe outside of our
 * servers.
 *
 * This script compares the location.host value of the window with the
 * location.host value of the window's parent. When a page is loaded in the DOM
 * window, window === window.parent. When a page is loaded in an iframe, then
 * window !== window.parent. We cannot trust this simple comparison, however,
 * since Drupal loads pages in iframes for the overlay and media dialogs, to
 * name two instances. So window.location.host is compared to
 * window.parent.location.host to determine if the page in the iframe originated
 * in the same domain as the parent window. If now, we set the location of the
 * parent window to the location of our hijacked page in the iframe, essentially
 * making it really difficult to steal our content.
 */

// Determine if this script is loaded inside an iframe.
if (window.location.host !== window.parent.location.host) {
  // Pop out of the iframe if this site is hijacked inside an iframe.
  window.top.location = window.self.location;
}
/*!
 * jQuery JavaScript Library v1.4.4
 * http://jquery.com/
 *
 * Copyright 2010, John Resig
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 * Copyright 2010, The Dojo Foundation
 * Released under the MIT, BSD, and GPL Licenses.
 *
 * Date: Thu Nov 11 19:04:53 2010 -0500
 */
(function (E, B) {
  function ka(a, b, d) {
    if (d === B && a.nodeType === 1) {
      d = a.getAttribute("data-" + b);
      if (typeof d === "string") {
        try {
          d =
            d === "true"
              ? true
              : d === "false"
              ? false
              : d === "null"
              ? null
              : !c.isNaN(d)
              ? parseFloat(d)
              : Ja.test(d)
              ? c.parseJSON(d)
              : d;
        } catch (e) {}
        c.data(a, b, d);
      } else d = B;
    }
    return d;
  }
  function U() {
    return false;
  }
  function ca() {
    return true;
  }
  function la(a, b, d) {
    d[0].type = a;
    return c.event.handle.apply(b, d);
  }
  function Ka(a) {
    var b,
      d,
      e,
      f,
      h,
      l,
      k,
      o,
      x,
      r,
      A,
      C = [];
    f = [];
    h = c.data(this, this.nodeType ? "events" : "__events__");
    if (typeof h === "function") h = h.events;
    if (
      !(
        a.liveFired === this ||
        !h ||
        !h.live ||
        (a.button && a.type === "click")
      )
    ) {
      if (a.namespace)
        A = RegExp(
          "(^|\\.)" + a.namespace.split(".").join("\\.(?:.*\\.)?") + "(\\.|$)"
        );
      a.liveFired = this;
      var J = h.live.slice(0);
      for (k = 0; k < J.length; k++) {
        h = J[k];
        h.origType.replace(X, "") === a.type
          ? f.push(h.selector)
          : J.splice(k--, 1);
      }
      f = c(a.target).closest(f, a.currentTarget);
      o = 0;
      for (x = f.length; o < x; o++) {
        r = f[o];
        for (k = 0; k < J.length; k++) {
          h = J[k];
          if (r.selector === h.selector && (!A || A.test(h.namespace))) {
            l = r.elem;
            e = null;
            if (h.preType === "mouseenter" || h.preType === "mouseleave") {
              a.type = h.preType;
              e = c(a.relatedTarget).closest(h.selector)[0];
            }
            if (!e || e !== l)
              C.push({ elem: l, handleObj: h, level: r.level });
          }
        }
      }
      o = 0;
      for (x = C.length; o < x; o++) {
        f = C[o];
        if (d && f.level > d) break;
        a.currentTarget = f.elem;
        a.data = f.handleObj.data;
        a.handleObj = f.handleObj;
        A = f.handleObj.origHandler.apply(f.elem, arguments);
        if (A === false || a.isPropagationStopped()) {
          d = f.level;
          if (A === false) b = false;
          if (a.isImmediatePropagationStopped()) break;
        }
      }
      return b;
    }
  }
  function Y(a, b) {
    return (
      (a && a !== "*" ? a + "." : "") + b.replace(La, "`").replace(Ma, "&")
    );
  }
  function ma(a, b, d) {
    if (c.isFunction(b))
      return c.grep(a, function (f, h) {
        return !!b.call(f, h, f) === d;
      });
    else if (b.nodeType)
      return c.grep(a, function (f) {
        return (f === b) === d;
      });
    else if (typeof b === "string") {
      var e = c.grep(a, function (f) {
        return f.nodeType === 1;
      });
      if (Na.test(b)) return c.filter(b, e, !d);
      else b = c.filter(b, e);
    }
    return c.grep(a, function (f) {
      return c.inArray(f, b) >= 0 === d;
    });
  }
  function na(a, b) {
    var d = 0;
    b.each(function () {
      if (this.nodeName === (a[d] && a[d].nodeName)) {
        var e = c.data(a[d++]),
          f = c.data(this, e);
        if ((e = e && e.events)) {
          delete f.handle;
          f.events = {};
          for (var h in e)
            for (var l in e[h]) c.event.add(this, h, e[h][l], e[h][l].data);
        }
      }
    });
  }
  function Oa(a, b) {
    b.src
      ? c.ajax({ url: b.src, async: false, dataType: "script" })
      : c.globalEval(b.text || b.textContent || b.innerHTML || "");
    b.parentNode && b.parentNode.removeChild(b);
  }
  function oa(a, b, d) {
    var e = b === "width" ? a.offsetWidth : a.offsetHeight;
    if (d === "border") return e;
    c.each(b === "width" ? Pa : Qa, function () {
      d || (e -= parseFloat(c.css(a, "padding" + this)) || 0);
      if (d === "margin") e += parseFloat(c.css(a, "margin" + this)) || 0;
      else e -= parseFloat(c.css(a, "border" + this + "Width")) || 0;
    });
    return e;
  }
  function da(a, b, d, e) {
    if (c.isArray(b) && b.length)
      c.each(b, function (f, h) {
        d || Ra.test(a)
          ? e(a, h)
          : da(
              a + "[" + (typeof h === "object" || c.isArray(h) ? f : "") + "]",
              h,
              d,
              e
            );
      });
    else if (!d && b != null && typeof b === "object")
      c.isEmptyObject(b)
        ? e(a, "")
        : c.each(b, function (f, h) {
            da(a + "[" + f + "]", h, d, e);
          });
    else e(a, b);
  }
  function S(a, b) {
    var d = {};
    c.each(pa.concat.apply([], pa.slice(0, b)), function () {
      d[this] = a;
    });
    return d;
  }
  function qa(a) {
    if (!ea[a]) {
      var b = c("<" + a + ">").appendTo("body"),
        d = b.css("display");
      b.remove();
      if (d === "none" || d === "") d = "block";
      ea[a] = d;
    }
    return ea[a];
  }
  function fa(a) {
    return c.isWindow(a)
      ? a
      : a.nodeType === 9
      ? a.defaultView || a.parentWindow
      : false;
  }
  var t = E.document,
    c = (function () {
      function a() {
        if (!b.isReady) {
          try {
            t.documentElement.doScroll("left");
          } catch (j) {
            setTimeout(a, 1);
            return;
          }
          b.ready();
        }
      }
      var b = function (j, s) {
          return new b.fn.init(j, s);
        },
        d = E.jQuery,
        e = E.$,
        f,
        h = /^(?:[^<]*(<[\w\W]+>)[^>]*$|#([\w\-]+)$)/,
        l = /\S/,
        k = /^\s+/,
        o = /\s+$/,
        x = /\W/,
        r = /\d/,
        A = /^<(\w+)\s*\/?>(?:<\/\1>)?$/,
        C = /^[\],:{}\s]*$/,
        J = /\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,
        w = /"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
        I = /(?:^|:|,)(?:\s*\[)+/g,
        L = /(webkit)[ \/]([\w.]+)/,
        g = /(opera)(?:.*version)?[ \/]([\w.]+)/,
        i = /(msie) ([\w.]+)/,
        n = /(mozilla)(?:.*? rv:([\w.]+))?/,
        m = navigator.userAgent,
        p = false,
        q = [],
        u,
        y = Object.prototype.toString,
        F = Object.prototype.hasOwnProperty,
        M = Array.prototype.push,
        N = Array.prototype.slice,
        O = String.prototype.trim,
        D = Array.prototype.indexOf,
        R = {};
      b.fn = b.prototype = {
        init: function (j, s) {
          var v, z, H;
          if (!j) return this;
          if (j.nodeType) {
            this.context = this[0] = j;
            this.length = 1;
            return this;
          }
          if (j === "body" && !s && t.body) {
            this.context = t;
            this[0] = t.body;
            this.selector = "body";
            this.length = 1;
            return this;
          }
          if (typeof j === "string")
            if ((v = h.exec(j)) && (v[1] || !s))
              if (v[1]) {
                H = s ? s.ownerDocument || s : t;
                if ((z = A.exec(j)))
                  if (b.isPlainObject(s)) {
                    j = [t.createElement(z[1])];
                    b.fn.attr.call(j, s, true);
                  } else j = [H.createElement(z[1])];
                else {
                  z = b.buildFragment([v[1]], [H]);
                  j = (z.cacheable ? z.fragment.cloneNode(true) : z.fragment)
                    .childNodes;
                }
                return b.merge(this, j);
              } else {
                if ((z = t.getElementById(v[2])) && z.parentNode) {
                  if (z.id !== v[2]) return f.find(j);
                  this.length = 1;
                  this[0] = z;
                }
                this.context = t;
                this.selector = j;
                return this;
              }
            else if (!s && !x.test(j)) {
              this.selector = j;
              this.context = t;
              j = t.getElementsByTagName(j);
              return b.merge(this, j);
            } else return !s || s.jquery ? (s || f).find(j) : b(s).find(j);
          else if (b.isFunction(j)) return f.ready(j);
          if (j.selector !== B) {
            this.selector = j.selector;
            this.context = j.context;
          }
          return b.makeArray(j, this);
        },
        selector: "",
        jquery: "1.4.4",
        length: 0,
        size: function () {
          return this.length;
        },
        toArray: function () {
          return N.call(this, 0);
        },
        get: function (j) {
          return j == null
            ? this.toArray()
            : j < 0
            ? this.slice(j)[0]
            : this[j];
        },
        pushStack: function (j, s, v) {
          var z = b();
          b.isArray(j) ? M.apply(z, j) : b.merge(z, j);
          z.prevObject = this;
          z.context = this.context;
          if (s === "find")
            z.selector = this.selector + (this.selector ? " " : "") + v;
          else if (s) z.selector = this.selector + "." + s + "(" + v + ")";
          return z;
        },
        each: function (j, s) {
          return b.each(this, j, s);
        },
        ready: function (j) {
          b.bindReady();
          if (b.isReady) j.call(t, b);
          else q && q.push(j);
          return this;
        },
        eq: function (j) {
          return j === -1 ? this.slice(j) : this.slice(j, +j + 1);
        },
        first: function () {
          return this.eq(0);
        },
        last: function () {
          return this.eq(-1);
        },
        slice: function () {
          return this.pushStack(
            N.apply(this, arguments),
            "slice",
            N.call(arguments).join(",")
          );
        },
        map: function (j) {
          return this.pushStack(
            b.map(this, function (s, v) {
              return j.call(s, v, s);
            })
          );
        },
        end: function () {
          return this.prevObject || b(null);
        },
        push: M,
        sort: [].sort,
        splice: [].splice,
      };
      b.fn.init.prototype = b.fn;
      b.extend = b.fn.extend = function () {
        var j,
          s,
          v,
          z,
          H,
          G = arguments[0] || {},
          K = 1,
          Q = arguments.length,
          ga = false;
        if (typeof G === "boolean") {
          ga = G;
          G = arguments[1] || {};
          K = 2;
        }
        if (typeof G !== "object" && !b.isFunction(G)) G = {};
        if (Q === K) {
          G = this;
          --K;
        }
        for (; K < Q; K++)
          if ((j = arguments[K]) != null)
            for (s in j) {
              v = G[s];
              z = j[s];
              if (G !== z)
                if (ga && z && (b.isPlainObject(z) || (H = b.isArray(z)))) {
                  if (H) {
                    H = false;
                    v = v && b.isArray(v) ? v : [];
                  } else v = v && b.isPlainObject(v) ? v : {};
                  G[s] = b.extend(ga, v, z);
                } else if (z !== B) G[s] = z;
            }
        return G;
      };
      b.extend({
        noConflict: function (j) {
          E.$ = e;
          if (j) E.jQuery = d;
          return b;
        },
        isReady: false,
        readyWait: 1,
        ready: function (j) {
          j === true && b.readyWait--;
          if (!b.readyWait || (j !== true && !b.isReady)) {
            if (!t.body) return setTimeout(b.ready, 1);
            b.isReady = true;
            if (!(j !== true && --b.readyWait > 0))
              if (q) {
                var s = 0,
                  v = q;
                for (q = null; (j = v[s++]); ) j.call(t, b);
                b.fn.trigger && b(t).trigger("ready").unbind("ready");
              }
          }
        },
        bindReady: function () {
          if (!p) {
            p = true;
            if (t.readyState === "complete") return setTimeout(b.ready, 1);
            if (t.addEventListener) {
              t.addEventListener("DOMContentLoaded", u, false);
              E.addEventListener("load", b.ready, false);
            } else if (t.attachEvent) {
              t.attachEvent("onreadystatechange", u);
              E.attachEvent("onload", b.ready);
              var j = false;
              try {
                j = E.frameElement == null;
              } catch (s) {}
              t.documentElement.doScroll && j && a();
            }
          }
        },
        isFunction: function (j) {
          return b.type(j) === "function";
        },
        isArray:
          Array.isArray ||
          function (j) {
            return b.type(j) === "array";
          },
        isWindow: function (j) {
          return j && typeof j === "object" && "setInterval" in j;
        },
        isNaN: function (j) {
          return j == null || !r.test(j) || isNaN(j);
        },
        type: function (j) {
          return j == null ? String(j) : R[y.call(j)] || "object";
        },
        isPlainObject: function (j) {
          if (!j || b.type(j) !== "object" || j.nodeType || b.isWindow(j))
            return false;
          if (
            j.constructor &&
            !F.call(j, "constructor") &&
            !F.call(j.constructor.prototype, "isPrototypeOf")
          )
            return false;
          for (var s in j);
          return s === B || F.call(j, s);
        },
        isEmptyObject: function (j) {
          for (var s in j) return false;
          return true;
        },
        error: function (j) {
          throw j;
        },
        parseJSON: function (j) {
          if (typeof j !== "string" || !j) return null;
          j = b.trim(j);
          if (C.test(j.replace(J, "@").replace(w, "]").replace(I, "")))
            return E.JSON && E.JSON.parse
              ? E.JSON.parse(j)
              : new Function("return " + j)();
          else b.error("Invalid JSON: " + j);
        },
        noop: function () {},
        globalEval: function (j) {
          if (j && l.test(j)) {
            var s = t.getElementsByTagName("head")[0] || t.documentElement,
              v = t.createElement("script");
            v.type = "text/javascript";
            if (b.support.scriptEval) v.appendChild(t.createTextNode(j));
            else v.text = j;
            s.insertBefore(v, s.firstChild);
            s.removeChild(v);
          }
        },
        nodeName: function (j, s) {
          return j.nodeName && j.nodeName.toUpperCase() === s.toUpperCase();
        },
        each: function (j, s, v) {
          var z,
            H = 0,
            G = j.length,
            K = G === B || b.isFunction(j);
          if (v)
            if (K)
              for (z in j) {
                if (s.apply(j[z], v) === false) break;
              }
            else
              for (; H < G; ) {
                if (s.apply(j[H++], v) === false) break;
              }
          else if (K)
            for (z in j) {
              if (s.call(j[z], z, j[z]) === false) break;
            }
          else for (v = j[0]; H < G && s.call(v, H, v) !== false; v = j[++H]);
          return j;
        },
        trim: O
          ? function (j) {
              return j == null ? "" : O.call(j);
            }
          : function (j) {
              return j == null
                ? ""
                : j.toString().replace(k, "").replace(o, "");
            },
        makeArray: function (j, s) {
          var v = s || [];
          if (j != null) {
            var z = b.type(j);
            j.length == null ||
            z === "string" ||
            z === "function" ||
            z === "regexp" ||
            b.isWindow(j)
              ? M.call(v, j)
              : b.merge(v, j);
          }
          return v;
        },
        inArray: function (j, s) {
          if (s.indexOf) return s.indexOf(j);
          for (var v = 0, z = s.length; v < z; v++) if (s[v] === j) return v;
          return -1;
        },
        merge: function (j, s) {
          var v = j.length,
            z = 0;
          if (typeof s.length === "number")
            for (var H = s.length; z < H; z++) j[v++] = s[z];
          else for (; s[z] !== B; ) j[v++] = s[z++];
          j.length = v;
          return j;
        },
        grep: function (j, s, v) {
          var z = [],
            H;
          v = !!v;
          for (var G = 0, K = j.length; G < K; G++) {
            H = !!s(j[G], G);
            v !== H && z.push(j[G]);
          }
          return z;
        },
        map: function (j, s, v) {
          for (var z = [], H, G = 0, K = j.length; G < K; G++) {
            H = s(j[G], G, v);
            if (H != null) z[z.length] = H;
          }
          return z.concat.apply([], z);
        },
        guid: 1,
        proxy: function (j, s, v) {
          if (arguments.length === 2)
            if (typeof s === "string") {
              v = j;
              j = v[s];
              s = B;
            } else if (s && !b.isFunction(s)) {
              v = s;
              s = B;
            }
          if (!s && j)
            s = function () {
              return j.apply(v || this, arguments);
            };
          if (j) s.guid = j.guid = j.guid || s.guid || b.guid++;
          return s;
        },
        access: function (j, s, v, z, H, G) {
          var K = j.length;
          if (typeof s === "object") {
            for (var Q in s) b.access(j, Q, s[Q], z, H, v);
            return j;
          }
          if (v !== B) {
            z = !G && z && b.isFunction(v);
            for (Q = 0; Q < K; Q++)
              H(j[Q], s, z ? v.call(j[Q], Q, H(j[Q], s)) : v, G);
            return j;
          }
          return K ? H(j[0], s) : B;
        },
        now: function () {
          return new Date().getTime();
        },
        uaMatch: function (j) {
          j = j.toLowerCase();
          j =
            L.exec(j) ||
            g.exec(j) ||
            i.exec(j) ||
            (j.indexOf("compatible") < 0 && n.exec(j)) ||
            [];
          return { browser: j[1] || "", version: j[2] || "0" };
        },
        browser: {},
      });
      b.each(
        "Boolean Number String Function Array Date RegExp Object".split(" "),
        function (j, s) {
          R["[object " + s + "]"] = s.toLowerCase();
        }
      );
      m = b.uaMatch(m);
      if (m.browser) {
        b.browser[m.browser] = true;
        b.browser.version = m.version;
      }
      if (b.browser.webkit) b.browser.safari = true;
      if (D)
        b.inArray = function (j, s) {
          return D.call(s, j);
        };
      if (!/\s/.test("\u00a0")) {
        k = /^[\s\xA0]+/;
        o = /[\s\xA0]+$/;
      }
      f = b(t);
      if (t.addEventListener)
        u = function () {
          t.removeEventListener("DOMContentLoaded", u, false);
          b.ready();
        };
      else if (t.attachEvent)
        u = function () {
          if (t.readyState === "complete") {
            t.detachEvent("onreadystatechange", u);
            b.ready();
          }
        };
      return (E.jQuery = E.$ = b);
    })();
  (function () {
    c.support = {};
    var a = t.documentElement,
      b = t.createElement("script"),
      d = t.createElement("div"),
      e = "script" + c.now();
    d.style.display = "none";
    d.innerHTML =
      "   <link/><table></table><a href='/a' style='color:red;float:left;opacity:.55;'>a</a><input type='checkbox'/>";
    var f = d.getElementsByTagName("*"),
      h = d.getElementsByTagName("a")[0],
      l = t.createElement("select"),
      k = l.appendChild(t.createElement("option"));
    if (!(!f || !f.length || !h)) {
      c.support = {
        leadingWhitespace: d.firstChild.nodeType === 3,
        tbody: !d.getElementsByTagName("tbody").length,
        htmlSerialize: !!d.getElementsByTagName("link").length,
        style: /red/.test(h.getAttribute("style")),
        hrefNormalized: h.getAttribute("href") === "/a",
        opacity: /^0.55$/.test(h.style.opacity),
        cssFloat: !!h.style.cssFloat,
        checkOn: d.getElementsByTagName("input")[0].value === "on",
        optSelected: k.selected,
        deleteExpando: true,
        optDisabled: false,
        checkClone: false,
        scriptEval: false,
        noCloneEvent: true,
        boxModel: null,
        inlineBlockNeedsLayout: false,
        shrinkWrapBlocks: false,
        reliableHiddenOffsets: true,
      };
      l.disabled = true;
      c.support.optDisabled = !k.disabled;
      b.type = "text/javascript";
      try {
        b.appendChild(t.createTextNode("window." + e + "=1;"));
      } catch (o) {}
      a.insertBefore(b, a.firstChild);
      if (E[e]) {
        c.support.scriptEval = true;
        delete E[e];
      }
      try {
        delete b.test;
      } catch (x) {
        c.support.deleteExpando = false;
      }
      a.removeChild(b);
      if (d.attachEvent && d.fireEvent) {
        d.attachEvent("onclick", function r() {
          c.support.noCloneEvent = false;
          d.detachEvent("onclick", r);
        });
        d.cloneNode(true).fireEvent("onclick");
      }
      d = t.createElement("div");
      d.innerHTML = "<input type='radio' name='radiotest' checked='checked'/>";
      a = t.createDocumentFragment();
      a.appendChild(d.firstChild);
      c.support.checkClone = a
        .cloneNode(true)
        .cloneNode(true).lastChild.checked;
      c(function () {
        var r = t.createElement("div");
        r.style.width = r.style.paddingLeft = "1px";
        t.body.appendChild(r);
        c.boxModel = c.support.boxModel = r.offsetWidth === 2;
        if ("zoom" in r.style) {
          r.style.display = "inline";
          r.style.zoom = 1;
          c.support.inlineBlockNeedsLayout = r.offsetWidth === 2;
          r.style.display = "";
          r.innerHTML = "<div style='width:4px;'></div>";
          c.support.shrinkWrapBlocks = r.offsetWidth !== 2;
        }
        r.innerHTML =
          "<table><tr><td style='padding:0;display:none'></td><td>t</td></tr></table>";
        var A = r.getElementsByTagName("td");
        c.support.reliableHiddenOffsets = A[0].offsetHeight === 0;
        A[0].style.display = "";
        A[1].style.display = "none";
        c.support.reliableHiddenOffsets =
          c.support.reliableHiddenOffsets && A[0].offsetHeight === 0;
        r.innerHTML = "";
        t.body.removeChild(r).style.display = "none";
      });
      a = function (r) {
        var A = t.createElement("div");
        r = "on" + r;
        var C = r in A;
        if (!C) {
          A.setAttribute(r, "return;");
          C = typeof A[r] === "function";
        }
        return C;
      };
      c.support.submitBubbles = a("submit");
      c.support.changeBubbles = a("change");
      a = b = d = f = h = null;
    }
  })();
  var ra = {},
    Ja = /^(?:\{.*\}|\[.*\])$/;
  c.extend({
    cache: {},
    uuid: 0,
    expando: "jQuery" + c.now(),
    noData: {
      embed: true,
      object: "clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",
      applet: true,
    },
    data: function (a, b, d) {
      if (c.acceptData(a)) {
        a = a == E ? ra : a;
        var e = a.nodeType,
          f = e ? a[c.expando] : null,
          h = c.cache;
        if (!(e && !f && typeof b === "string" && d === B)) {
          if (e) f || (a[c.expando] = f = ++c.uuid);
          else h = a;
          if (typeof b === "object")
            if (e) h[f] = c.extend(h[f], b);
            else c.extend(h, b);
          else if (e && !h[f]) h[f] = {};
          a = e ? h[f] : h;
          if (d !== B) a[b] = d;
          return typeof b === "string" ? a[b] : a;
        }
      }
    },
    removeData: function (a, b) {
      if (c.acceptData(a)) {
        a = a == E ? ra : a;
        var d = a.nodeType,
          e = d ? a[c.expando] : a,
          f = c.cache,
          h = d ? f[e] : e;
        if (b) {
          if (h) {
            delete h[b];
            d && c.isEmptyObject(h) && c.removeData(a);
          }
        } else if (d && c.support.deleteExpando) delete a[c.expando];
        else if (a.removeAttribute) a.removeAttribute(c.expando);
        else if (d) delete f[e];
        else for (var l in a) delete a[l];
      }
    },
    acceptData: function (a) {
      if (a.nodeName) {
        var b = c.noData[a.nodeName.toLowerCase()];
        if (b) return !(b === true || a.getAttribute("classid") !== b);
      }
      return true;
    },
  });
  c.fn.extend({
    data: function (a, b) {
      var d = null;
      if (typeof a === "undefined") {
        if (this.length) {
          var e = this[0].attributes,
            f;
          d = c.data(this[0]);
          for (var h = 0, l = e.length; h < l; h++) {
            f = e[h].name;
            if (f.indexOf("data-") === 0) {
              f = f.substr(5);
              ka(this[0], f, d[f]);
            }
          }
        }
        return d;
      } else if (typeof a === "object")
        return this.each(function () {
          c.data(this, a);
        });
      var k = a.split(".");
      k[1] = k[1] ? "." + k[1] : "";
      if (b === B) {
        d = this.triggerHandler("getData" + k[1] + "!", [k[0]]);
        if (d === B && this.length) {
          d = c.data(this[0], a);
          d = ka(this[0], a, d);
        }
        return d === B && k[1] ? this.data(k[0]) : d;
      } else
        return this.each(function () {
          var o = c(this),
            x = [k[0], b];
          o.triggerHandler("setData" + k[1] + "!", x);
          c.data(this, a, b);
          o.triggerHandler("changeData" + k[1] + "!", x);
        });
    },
    removeData: function (a) {
      return this.each(function () {
        c.removeData(this, a);
      });
    },
  });
  c.extend({
    queue: function (a, b, d) {
      if (a) {
        b = (b || "fx") + "queue";
        var e = c.data(a, b);
        if (!d) return e || [];
        if (!e || c.isArray(d)) e = c.data(a, b, c.makeArray(d));
        else e.push(d);
        return e;
      }
    },
    dequeue: function (a, b) {
      b = b || "fx";
      var d = c.queue(a, b),
        e = d.shift();
      if (e === "inprogress") e = d.shift();
      if (e) {
        b === "fx" && d.unshift("inprogress");
        e.call(a, function () {
          c.dequeue(a, b);
        });
      }
    },
  });
  c.fn.extend({
    queue: function (a, b) {
      if (typeof a !== "string") {
        b = a;
        a = "fx";
      }
      if (b === B) return c.queue(this[0], a);
      return this.each(function () {
        var d = c.queue(this, a, b);
        a === "fx" && d[0] !== "inprogress" && c.dequeue(this, a);
      });
    },
    dequeue: function (a) {
      return this.each(function () {
        c.dequeue(this, a);
      });
    },
    delay: function (a, b) {
      a = c.fx ? c.fx.speeds[a] || a : a;
      b = b || "fx";
      return this.queue(b, function () {
        var d = this;
        setTimeout(function () {
          c.dequeue(d, b);
        }, a);
      });
    },
    clearQueue: function (a) {
      return this.queue(a || "fx", []);
    },
  });
  var sa = /[\n\t]/g,
    ha = /\s+/,
    Sa = /\r/g,
    Ta = /^(?:href|src|style)$/,
    Ua = /^(?:button|input)$/i,
    Va = /^(?:button|input|object|select|textarea)$/i,
    Wa = /^a(?:rea)?$/i,
    ta = /^(?:radio|checkbox)$/i;
  c.props = {
    for: "htmlFor",
    class: "className",
    readonly: "readOnly",
    maxlength: "maxLength",
    cellspacing: "cellSpacing",
    rowspan: "rowSpan",
    colspan: "colSpan",
    tabindex: "tabIndex",
    usemap: "useMap",
    frameborder: "frameBorder",
  };
  c.fn.extend({
    attr: function (a, b) {
      return c.access(this, a, b, true, c.attr);
    },
    removeAttr: function (a) {
      return this.each(function () {
        c.attr(this, a, "");
        this.nodeType === 1 && this.removeAttribute(a);
      });
    },
    addClass: function (a) {
      if (c.isFunction(a))
        return this.each(function (x) {
          var r = c(this);
          r.addClass(a.call(this, x, r.attr("class")));
        });
      if (a && typeof a === "string")
        for (var b = (a || "").split(ha), d = 0, e = this.length; d < e; d++) {
          var f = this[d];
          if (f.nodeType === 1)
            if (f.className) {
              for (
                var h = " " + f.className + " ",
                  l = f.className,
                  k = 0,
                  o = b.length;
                k < o;
                k++
              )
                if (h.indexOf(" " + b[k] + " ") < 0) l += " " + b[k];
              f.className = c.trim(l);
            } else f.className = a;
        }
      return this;
    },
    removeClass: function (a) {
      if (c.isFunction(a))
        return this.each(function (o) {
          var x = c(this);
          x.removeClass(a.call(this, o, x.attr("class")));
        });
      if ((a && typeof a === "string") || a === B)
        for (var b = (a || "").split(ha), d = 0, e = this.length; d < e; d++) {
          var f = this[d];
          if (f.nodeType === 1 && f.className)
            if (a) {
              for (
                var h = (" " + f.className + " ").replace(sa, " "),
                  l = 0,
                  k = b.length;
                l < k;
                l++
              )
                h = h.replace(" " + b[l] + " ", " ");
              f.className = c.trim(h);
            } else f.className = "";
        }
      return this;
    },
    toggleClass: function (a, b) {
      var d = typeof a,
        e = typeof b === "boolean";
      if (c.isFunction(a))
        return this.each(function (f) {
          var h = c(this);
          h.toggleClass(a.call(this, f, h.attr("class"), b), b);
        });
      return this.each(function () {
        if (d === "string")
          for (
            var f, h = 0, l = c(this), k = b, o = a.split(ha);
            (f = o[h++]);

          ) {
            k = e ? k : !l.hasClass(f);
            l[k ? "addClass" : "removeClass"](f);
          }
        else if (d === "undefined" || d === "boolean") {
          this.className && c.data(this, "__className__", this.className);
          this.className =
            this.className || a === false
              ? ""
              : c.data(this, "__className__") || "";
        }
      });
    },
    hasClass: function (a) {
      a = " " + a + " ";
      for (var b = 0, d = this.length; b < d; b++)
        if ((" " + this[b].className + " ").replace(sa, " ").indexOf(a) > -1)
          return true;
      return false;
    },
    val: function (a) {
      if (!arguments.length) {
        var b = this[0];
        if (b) {
          if (c.nodeName(b, "option")) {
            var d = b.attributes.value;
            return !d || d.specified ? b.value : b.text;
          }
          if (c.nodeName(b, "select")) {
            var e = b.selectedIndex;
            d = [];
            var f = b.options;
            b = b.type === "select-one";
            if (e < 0) return null;
            var h = b ? e : 0;
            for (e = b ? e + 1 : f.length; h < e; h++) {
              var l = f[h];
              if (
                l.selected &&
                (c.support.optDisabled
                  ? !l.disabled
                  : l.getAttribute("disabled") === null) &&
                (!l.parentNode.disabled ||
                  !c.nodeName(l.parentNode, "optgroup"))
              ) {
                a = c(l).val();
                if (b) return a;
                d.push(a);
              }
            }
            return d;
          }
          if (ta.test(b.type) && !c.support.checkOn)
            return b.getAttribute("value") === null ? "on" : b.value;
          return (b.value || "").replace(Sa, "");
        }
        return B;
      }
      var k = c.isFunction(a);
      return this.each(function (o) {
        var x = c(this),
          r = a;
        if (this.nodeType === 1) {
          if (k) r = a.call(this, o, x.val());
          if (r == null) r = "";
          else if (typeof r === "number") r += "";
          else if (c.isArray(r))
            r = c.map(r, function (C) {
              return C == null ? "" : C + "";
            });
          if (c.isArray(r) && ta.test(this.type))
            this.checked = c.inArray(x.val(), r) >= 0;
          else if (c.nodeName(this, "select")) {
            var A = c.makeArray(r);
            c("option", this).each(function () {
              this.selected = c.inArray(c(this).val(), A) >= 0;
            });
            if (!A.length) this.selectedIndex = -1;
          } else this.value = r;
        }
      });
    },
  });
  c.extend({
    attrFn: {
      val: true,
      css: true,
      html: true,
      text: true,
      data: true,
      width: true,
      height: true,
      offset: true,
    },
    attr: function (a, b, d, e) {
      if (!a || a.nodeType === 3 || a.nodeType === 8) return B;
      if (e && b in c.attrFn) return c(a)[b](d);
      e = a.nodeType !== 1 || !c.isXMLDoc(a);
      var f = d !== B;
      b = (e && c.props[b]) || b;
      var h = Ta.test(b);
      if ((b in a || a[b] !== B) && e && !h) {
        if (f) {
          b === "type" &&
            Ua.test(a.nodeName) &&
            a.parentNode &&
            c.error("type property can't be changed");
          if (d === null) a.nodeType === 1 && a.removeAttribute(b);
          else a[b] = d;
        }
        if (c.nodeName(a, "form") && a.getAttributeNode(b))
          return a.getAttributeNode(b).nodeValue;
        if (b === "tabIndex")
          return (b = a.getAttributeNode("tabIndex")) && b.specified
            ? b.value
            : Va.test(a.nodeName) || (Wa.test(a.nodeName) && a.href)
            ? 0
            : B;
        return a[b];
      }
      if (!c.support.style && e && b === "style") {
        if (f) a.style.cssText = "" + d;
        return a.style.cssText;
      }
      f && a.setAttribute(b, "" + d);
      if (!a.attributes[b] && a.hasAttribute && !a.hasAttribute(b)) return B;
      a =
        !c.support.hrefNormalized && e && h
          ? a.getAttribute(b, 2)
          : a.getAttribute(b);
      return a === null ? B : a;
    },
  });
  var X = /\.(.*)$/,
    ia = /^(?:textarea|input|select)$/i,
    La = /\./g,
    Ma = / /g,
    Xa = /[^\w\s.|`]/g,
    Ya = function (a) {
      return a.replace(Xa, "\\$&");
    },
    ua = { focusin: 0, focusout: 0 };
  c.event = {
    add: function (a, b, d, e) {
      if (!(a.nodeType === 3 || a.nodeType === 8)) {
        if (c.isWindow(a) && a !== E && !a.frameElement) a = E;
        if (d === false) d = U;
        else if (!d) return;
        var f, h;
        if (d.handler) {
          f = d;
          d = f.handler;
        }
        if (!d.guid) d.guid = c.guid++;
        if ((h = c.data(a))) {
          var l = a.nodeType ? "events" : "__events__",
            k = h[l],
            o = h.handle;
          if (typeof k === "function") {
            o = k.handle;
            k = k.events;
          } else if (!k) {
            a.nodeType || (h[l] = h = function () {});
            h.events = k = {};
          }
          if (!o)
            h.handle = o = function () {
              return typeof c !== "undefined" && !c.event.triggered
                ? c.event.handle.apply(o.elem, arguments)
                : B;
            };
          o.elem = a;
          b = b.split(" ");
          for (var x = 0, r; (l = b[x++]); ) {
            h = f ? c.extend({}, f) : { handler: d, data: e };
            if (l.indexOf(".") > -1) {
              r = l.split(".");
              l = r.shift();
              h.namespace = r.slice(0).sort().join(".");
            } else {
              r = [];
              h.namespace = "";
            }
            h.type = l;
            if (!h.guid) h.guid = d.guid;
            var A = k[l],
              C = c.event.special[l] || {};
            if (!A) {
              A = k[l] = [];
              if (!C.setup || C.setup.call(a, e, r, o) === false)
                if (a.addEventListener) a.addEventListener(l, o, false);
                else a.attachEvent && a.attachEvent("on" + l, o);
            }
            if (C.add) {
              C.add.call(a, h);
              if (!h.handler.guid) h.handler.guid = d.guid;
            }
            A.push(h);
            c.event.global[l] = true;
          }
          a = null;
        }
      }
    },
    global: {},
    remove: function (a, b, d, e) {
      if (!(a.nodeType === 3 || a.nodeType === 8)) {
        if (d === false) d = U;
        var f,
          h,
          l = 0,
          k,
          o,
          x,
          r,
          A,
          C,
          J = a.nodeType ? "events" : "__events__",
          w = c.data(a),
          I = w && w[J];
        if (w && I) {
          if (typeof I === "function") {
            w = I;
            I = I.events;
          }
          if (b && b.type) {
            d = b.handler;
            b = b.type;
          }
          if (!b || (typeof b === "string" && b.charAt(0) === ".")) {
            b = b || "";
            for (f in I) c.event.remove(a, f + b);
          } else {
            for (b = b.split(" "); (f = b[l++]); ) {
              r = f;
              k = f.indexOf(".") < 0;
              o = [];
              if (!k) {
                o = f.split(".");
                f = o.shift();
                x = RegExp(
                  "(^|\\.)" +
                    c.map(o.slice(0).sort(), Ya).join("\\.(?:.*\\.)?") +
                    "(\\.|$)"
                );
              }
              if ((A = I[f]))
                if (d) {
                  r = c.event.special[f] || {};
                  for (h = e || 0; h < A.length; h++) {
                    C = A[h];
                    if (d.guid === C.guid) {
                      if (k || x.test(C.namespace)) {
                        e == null && A.splice(h--, 1);
                        r.remove && r.remove.call(a, C);
                      }
                      if (e != null) break;
                    }
                  }
                  if (A.length === 0 || (e != null && A.length === 1)) {
                    if (!r.teardown || r.teardown.call(a, o) === false)
                      c.removeEvent(a, f, w.handle);
                    delete I[f];
                  }
                } else
                  for (h = 0; h < A.length; h++) {
                    C = A[h];
                    if (k || x.test(C.namespace)) {
                      c.event.remove(a, r, C.handler, h);
                      A.splice(h--, 1);
                    }
                  }
            }
            if (c.isEmptyObject(I)) {
              if ((b = w.handle)) b.elem = null;
              delete w.events;
              delete w.handle;
              if (typeof w === "function") c.removeData(a, J);
              else c.isEmptyObject(w) && c.removeData(a);
            }
          }
        }
      }
    },
    trigger: function (a, b, d, e) {
      var f = a.type || a;
      if (!e) {
        a =
          typeof a === "object"
            ? a[c.expando]
              ? a
              : c.extend(c.Event(f), a)
            : c.Event(f);
        if (f.indexOf("!") >= 0) {
          a.type = f = f.slice(0, -1);
          a.exclusive = true;
        }
        if (!d) {
          a.stopPropagation();
          c.event.global[f] &&
            c.each(c.cache, function () {
              this.events &&
                this.events[f] &&
                c.event.trigger(a, b, this.handle.elem);
            });
        }
        if (!d || d.nodeType === 3 || d.nodeType === 8) return B;
        a.result = B;
        a.target = d;
        b = c.makeArray(b);
        b.unshift(a);
      }
      a.currentTarget = d;
      (e = d.nodeType
        ? c.data(d, "handle")
        : (c.data(d, "__events__") || {}).handle) && e.apply(d, b);
      e = d.parentNode || d.ownerDocument;
      try {
        if (!(d && d.nodeName && c.noData[d.nodeName.toLowerCase()]))
          if (d["on" + f] && d["on" + f].apply(d, b) === false) {
            a.result = false;
            a.preventDefault();
          }
      } catch (h) {}
      if (!a.isPropagationStopped() && e) c.event.trigger(a, b, e, true);
      else if (!a.isDefaultPrevented()) {
        var l;
        e = a.target;
        var k = f.replace(X, ""),
          o = c.nodeName(e, "a") && k === "click",
          x = c.event.special[k] || {};
        if (
          (!x._default || x._default.call(d, a) === false) &&
          !o &&
          !(e && e.nodeName && c.noData[e.nodeName.toLowerCase()])
        ) {
          try {
            if (e[k]) {
              if ((l = e["on" + k])) e["on" + k] = null;
              c.event.triggered = true;
              e[k]();
            }
          } catch (r) {}
          if (l) e["on" + k] = l;
          c.event.triggered = false;
        }
      }
    },
    handle: function (a) {
      var b, d, e, f;
      d = [];
      var h = c.makeArray(arguments);
      a = h[0] = c.event.fix(a || E.event);
      a.currentTarget = this;
      b = a.type.indexOf(".") < 0 && !a.exclusive;
      if (!b) {
        e = a.type.split(".");
        a.type = e.shift();
        d = e.slice(0).sort();
        e = RegExp("(^|\\.)" + d.join("\\.(?:.*\\.)?") + "(\\.|$)");
      }
      a.namespace = a.namespace || d.join(".");
      f = c.data(this, this.nodeType ? "events" : "__events__");
      if (typeof f === "function") f = f.events;
      d = (f || {})[a.type];
      if (f && d) {
        d = d.slice(0);
        f = 0;
        for (var l = d.length; f < l; f++) {
          var k = d[f];
          if (b || e.test(k.namespace)) {
            a.handler = k.handler;
            a.data = k.data;
            a.handleObj = k;
            k = k.handler.apply(this, h);
            if (k !== B) {
              a.result = k;
              if (k === false) {
                a.preventDefault();
                a.stopPropagation();
              }
            }
            if (a.isImmediatePropagationStopped()) break;
          }
        }
      }
      return a.result;
    },
    props: "altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(
      " "
    ),
    fix: function (a) {
      if (a[c.expando]) return a;
      var b = a;
      a = c.Event(b);
      for (var d = this.props.length, e; d; ) {
        e = this.props[--d];
        a[e] = b[e];
      }
      if (!a.target) a.target = a.srcElement || t;
      if (a.target.nodeType === 3) a.target = a.target.parentNode;
      if (!a.relatedTarget && a.fromElement)
        a.relatedTarget =
          a.fromElement === a.target ? a.toElement : a.fromElement;
      if (a.pageX == null && a.clientX != null) {
        b = t.documentElement;
        d = t.body;
        a.pageX =
          a.clientX +
          ((b && b.scrollLeft) || (d && d.scrollLeft) || 0) -
          ((b && b.clientLeft) || (d && d.clientLeft) || 0);
        a.pageY =
          a.clientY +
          ((b && b.scrollTop) || (d && d.scrollTop) || 0) -
          ((b && b.clientTop) || (d && d.clientTop) || 0);
      }
      if (a.which == null && (a.charCode != null || a.keyCode != null))
        a.which = a.charCode != null ? a.charCode : a.keyCode;
      if (!a.metaKey && a.ctrlKey) a.metaKey = a.ctrlKey;
      if (!a.which && a.button !== B)
        a.which = a.button & 1 ? 1 : a.button & 2 ? 3 : a.button & 4 ? 2 : 0;
      return a;
    },
    guid: 1e8,
    proxy: c.proxy,
    special: {
      ready: { setup: c.bindReady, teardown: c.noop },
      live: {
        add: function (a) {
          c.event.add(
            this,
            Y(a.origType, a.selector),
            c.extend({}, a, { handler: Ka, guid: a.handler.guid })
          );
        },
        remove: function (a) {
          c.event.remove(this, Y(a.origType, a.selector), a);
        },
      },
      beforeunload: {
        setup: function (a, b, d) {
          if (c.isWindow(this)) this.onbeforeunload = d;
        },
        teardown: function (a, b) {
          if (this.onbeforeunload === b) this.onbeforeunload = null;
        },
      },
    },
  };
  c.removeEvent = t.removeEventListener
    ? function (a, b, d) {
        a.removeEventListener && a.removeEventListener(b, d, false);
      }
    : function (a, b, d) {
        a.detachEvent && a.detachEvent("on" + b, d);
      };
  c.Event = function (a) {
    if (!this.preventDefault) return new c.Event(a);
    if (a && a.type) {
      this.originalEvent = a;
      this.type = a.type;
    } else this.type = a;
    this.timeStamp = c.now();
    this[c.expando] = true;
  };
  c.Event.prototype = {
    preventDefault: function () {
      this.isDefaultPrevented = ca;
      var a = this.originalEvent;
      if (a)
        if (a.preventDefault) a.preventDefault();
        else a.returnValue = false;
    },
    stopPropagation: function () {
      this.isPropagationStopped = ca;
      var a = this.originalEvent;
      if (a) {
        a.stopPropagation && a.stopPropagation();
        a.cancelBubble = true;
      }
    },
    stopImmediatePropagation: function () {
      this.isImmediatePropagationStopped = ca;
      this.stopPropagation();
    },
    isDefaultPrevented: U,
    isPropagationStopped: U,
    isImmediatePropagationStopped: U,
  };
  var va = function (a) {
      var b = a.relatedTarget;
      try {
        for (; b && b !== this; ) b = b.parentNode;
        if (b !== this) {
          a.type = a.data;
          c.event.handle.apply(this, arguments);
        }
      } catch (d) {}
    },
    wa = function (a) {
      a.type = a.data;
      c.event.handle.apply(this, arguments);
    };
  c.each({ mouseenter: "mouseover", mouseleave: "mouseout" }, function (a, b) {
    c.event.special[a] = {
      setup: function (d) {
        c.event.add(this, b, d && d.selector ? wa : va, a);
      },
      teardown: function (d) {
        c.event.remove(this, b, d && d.selector ? wa : va);
      },
    };
  });
  if (!c.support.submitBubbles)
    c.event.special.submit = {
      setup: function () {
        if (this.nodeName.toLowerCase() !== "form") {
          c.event.add(this, "click.specialSubmit", function (a) {
            var b = a.target,
              d = b.type;
            if (
              (d === "submit" || d === "image") &&
              c(b).closest("form").length
            ) {
              a.liveFired = B;
              return la("submit", this, arguments);
            }
          });
          c.event.add(this, "keypress.specialSubmit", function (a) {
            var b = a.target,
              d = b.type;
            if (
              (d === "text" || d === "password") &&
              c(b).closest("form").length &&
              a.keyCode === 13
            ) {
              a.liveFired = B;
              return la("submit", this, arguments);
            }
          });
        } else return false;
      },
      teardown: function () {
        c.event.remove(this, ".specialSubmit");
      },
    };
  if (!c.support.changeBubbles) {
    var V,
      xa = function (a) {
        var b = a.type,
          d = a.value;
        if (b === "radio" || b === "checkbox") d = a.checked;
        else if (b === "select-multiple")
          d =
            a.selectedIndex > -1
              ? c
                  .map(a.options, function (e) {
                    return e.selected;
                  })
                  .join("-")
              : "";
        else if (a.nodeName.toLowerCase() === "select") d = a.selectedIndex;
        return d;
      },
      Z = function (a, b) {
        var d = a.target,
          e,
          f;
        if (!(!ia.test(d.nodeName) || d.readOnly)) {
          e = c.data(d, "_change_data");
          f = xa(d);
          if (a.type !== "focusout" || d.type !== "radio")
            c.data(d, "_change_data", f);
          if (!(e === B || f === e))
            if (e != null || f) {
              a.type = "change";
              a.liveFired = B;
              return c.event.trigger(a, b, d);
            }
        }
      };
    c.event.special.change = {
      filters: {
        focusout: Z,
        beforedeactivate: Z,
        click: function (a) {
          var b = a.target,
            d = b.type;
          if (
            d === "radio" ||
            d === "checkbox" ||
            b.nodeName.toLowerCase() === "select"
          )
            return Z.call(this, a);
        },
        keydown: function (a) {
          var b = a.target,
            d = b.type;
          if (
            (a.keyCode === 13 && b.nodeName.toLowerCase() !== "textarea") ||
            (a.keyCode === 32 && (d === "checkbox" || d === "radio")) ||
            d === "select-multiple"
          )
            return Z.call(this, a);
        },
        beforeactivate: function (a) {
          a = a.target;
          c.data(a, "_change_data", xa(a));
        },
      },
      setup: function () {
        if (this.type === "file") return false;
        for (var a in V) c.event.add(this, a + ".specialChange", V[a]);
        return ia.test(this.nodeName);
      },
      teardown: function () {
        c.event.remove(this, ".specialChange");
        return ia.test(this.nodeName);
      },
    };
    V = c.event.special.change.filters;
    V.focus = V.beforeactivate;
  }
  t.addEventListener &&
    c.each({ focus: "focusin", blur: "focusout" }, function (a, b) {
      function d(e) {
        e = c.event.fix(e);
        e.type = b;
        return c.event.trigger(e, null, e.target);
      }
      c.event.special[b] = {
        setup: function () {
          ua[b]++ === 0 && t.addEventListener(a, d, true);
        },
        teardown: function () {
          --ua[b] === 0 && t.removeEventListener(a, d, true);
        },
      };
    });
  c.each(["bind", "one"], function (a, b) {
    c.fn[b] = function (d, e, f) {
      if (typeof d === "object") {
        for (var h in d) this[b](h, e, d[h], f);
        return this;
      }
      if (c.isFunction(e) || e === false) {
        f = e;
        e = B;
      }
      var l =
        b === "one"
          ? c.proxy(f, function (o) {
              c(this).unbind(o, l);
              return f.apply(this, arguments);
            })
          : f;
      if (d === "unload" && b !== "one") this.one(d, e, f);
      else {
        h = 0;
        for (var k = this.length; h < k; h++) c.event.add(this[h], d, l, e);
      }
      return this;
    };
  });
  c.fn.extend({
    unbind: function (a, b) {
      if (typeof a === "object" && !a.preventDefault)
        for (var d in a) this.unbind(d, a[d]);
      else {
        d = 0;
        for (var e = this.length; d < e; d++) c.event.remove(this[d], a, b);
      }
      return this;
    },
    delegate: function (a, b, d, e) {
      return this.live(b, d, e, a);
    },
    undelegate: function (a, b, d) {
      return arguments.length === 0
        ? this.unbind("live")
        : this.die(b, null, d, a);
    },
    trigger: function (a, b) {
      return this.each(function () {
        c.event.trigger(a, b, this);
      });
    },
    triggerHandler: function (a, b) {
      if (this[0]) {
        var d = c.Event(a);
        d.preventDefault();
        d.stopPropagation();
        c.event.trigger(d, b, this[0]);
        return d.result;
      }
    },
    toggle: function (a) {
      for (var b = arguments, d = 1; d < b.length; ) c.proxy(a, b[d++]);
      return this.click(
        c.proxy(a, function (e) {
          var f = (c.data(this, "lastToggle" + a.guid) || 0) % d;
          c.data(this, "lastToggle" + a.guid, f + 1);
          e.preventDefault();
          return b[f].apply(this, arguments) || false;
        })
      );
    },
    hover: function (a, b) {
      return this.mouseenter(a).mouseleave(b || a);
    },
  });
  var ya = {
    focus: "focusin",
    blur: "focusout",
    mouseenter: "mouseover",
    mouseleave: "mouseout",
  };
  c.each(["live", "die"], function (a, b) {
    c.fn[b] = function (d, e, f, h) {
      var l,
        k = 0,
        o,
        x,
        r = h || this.selector;
      h = h ? this : c(this.context);
      if (typeof d === "object" && !d.preventDefault) {
        for (l in d) h[b](l, e, d[l], r);
        return this;
      }
      if (c.isFunction(e)) {
        f = e;
        e = B;
      }
      for (d = (d || "").split(" "); (l = d[k++]) != null; ) {
        o = X.exec(l);
        x = "";
        if (o) {
          x = o[0];
          l = l.replace(X, "");
        }
        if (l === "hover") d.push("mouseenter" + x, "mouseleave" + x);
        else {
          o = l;
          if (l === "focus" || l === "blur") {
            d.push(ya[l] + x);
            l += x;
          } else l = (ya[l] || l) + x;
          if (b === "live") {
            x = 0;
            for (var A = h.length; x < A; x++)
              c.event.add(h[x], "live." + Y(l, r), {
                data: e,
                selector: r,
                handler: f,
                origType: l,
                origHandler: f,
                preType: o,
              });
          } else h.unbind("live." + Y(l, r), f);
        }
      }
      return this;
    };
  });
  c.each(
    "blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error".split(
      " "
    ),
    function (a, b) {
      c.fn[b] = function (d, e) {
        if (e == null) {
          e = d;
          d = null;
        }
        return arguments.length > 0 ? this.bind(b, d, e) : this.trigger(b);
      };
      if (c.attrFn) c.attrFn[b] = true;
    }
  );
  E.attachEvent &&
    !E.addEventListener &&
    c(E).bind("unload", function () {
      for (var a in c.cache)
        if (c.cache[a].handle)
          try {
            c.event.remove(c.cache[a].handle.elem);
          } catch (b) {}
    });
  (function () {
    function a(g, i, n, m, p, q) {
      p = 0;
      for (var u = m.length; p < u; p++) {
        var y = m[p];
        if (y) {
          var F = false;
          for (y = y[g]; y; ) {
            if (y.sizcache === n) {
              F = m[y.sizset];
              break;
            }
            if (y.nodeType === 1 && !q) {
              y.sizcache = n;
              y.sizset = p;
            }
            if (y.nodeName.toLowerCase() === i) {
              F = y;
              break;
            }
            y = y[g];
          }
          m[p] = F;
        }
      }
    }
    function b(g, i, n, m, p, q) {
      p = 0;
      for (var u = m.length; p < u; p++) {
        var y = m[p];
        if (y) {
          var F = false;
          for (y = y[g]; y; ) {
            if (y.sizcache === n) {
              F = m[y.sizset];
              break;
            }
            if (y.nodeType === 1) {
              if (!q) {
                y.sizcache = n;
                y.sizset = p;
              }
              if (typeof i !== "string") {
                if (y === i) {
                  F = true;
                  break;
                }
              } else if (k.filter(i, [y]).length > 0) {
                F = y;
                break;
              }
            }
            y = y[g];
          }
          m[p] = F;
        }
      }
    }
    var d = /((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,
      e = 0,
      f = Object.prototype.toString,
      h = false,
      l = true;
    [0, 0].sort(function () {
      l = false;
      return 0;
    });
    var k = function (g, i, n, m) {
      n = n || [];
      var p = (i = i || t);
      if (i.nodeType !== 1 && i.nodeType !== 9) return [];
      if (!g || typeof g !== "string") return n;
      var q,
        u,
        y,
        F,
        M,
        N = true,
        O = k.isXML(i),
        D = [],
        R = g;
      do {
        d.exec("");
        if ((q = d.exec(R))) {
          R = q[3];
          D.push(q[1]);
          if (q[2]) {
            F = q[3];
            break;
          }
        }
      } while (q);
      if (D.length > 1 && x.exec(g))
        if (D.length === 2 && o.relative[D[0]]) u = L(D[0] + D[1], i);
        else
          for (u = o.relative[D[0]] ? [i] : k(D.shift(), i); D.length; ) {
            g = D.shift();
            if (o.relative[g]) g += D.shift();
            u = L(g, u);
          }
      else {
        if (
          !m &&
          D.length > 1 &&
          i.nodeType === 9 &&
          !O &&
          o.match.ID.test(D[0]) &&
          !o.match.ID.test(D[D.length - 1])
        ) {
          q = k.find(D.shift(), i, O);
          i = q.expr ? k.filter(q.expr, q.set)[0] : q.set[0];
        }
        if (i) {
          q = m
            ? { expr: D.pop(), set: C(m) }
            : k.find(
                D.pop(),
                D.length === 1 && (D[0] === "~" || D[0] === "+") && i.parentNode
                  ? i.parentNode
                  : i,
                O
              );
          u = q.expr ? k.filter(q.expr, q.set) : q.set;
          if (D.length > 0) y = C(u);
          else N = false;
          for (; D.length; ) {
            q = M = D.pop();
            if (o.relative[M]) q = D.pop();
            else M = "";
            if (q == null) q = i;
            o.relative[M](y, q, O);
          }
        } else y = [];
      }
      y || (y = u);
      y || k.error(M || g);
      if (f.call(y) === "[object Array]")
        if (N)
          if (i && i.nodeType === 1)
            for (g = 0; y[g] != null; g++) {
              if (
                y[g] &&
                (y[g] === true || (y[g].nodeType === 1 && k.contains(i, y[g])))
              )
                n.push(u[g]);
            }
          else
            for (g = 0; y[g] != null; g++)
              y[g] && y[g].nodeType === 1 && n.push(u[g]);
        else n.push.apply(n, y);
      else C(y, n);
      if (F) {
        k(F, p, n, m);
        k.uniqueSort(n);
      }
      return n;
    };
    k.uniqueSort = function (g) {
      if (w) {
        h = l;
        g.sort(w);
        if (h)
          for (var i = 1; i < g.length; i++)
            g[i] === g[i - 1] && g.splice(i--, 1);
      }
      return g;
    };
    k.matches = function (g, i) {
      return k(g, null, null, i);
    };
    k.matchesSelector = function (g, i) {
      return k(i, null, null, [g]).length > 0;
    };
    k.find = function (g, i, n) {
      var m;
      if (!g) return [];
      for (var p = 0, q = o.order.length; p < q; p++) {
        var u,
          y = o.order[p];
        if ((u = o.leftMatch[y].exec(g))) {
          var F = u[1];
          u.splice(1, 1);
          if (F.substr(F.length - 1) !== "\\") {
            u[1] = (u[1] || "").replace(/\\/g, "");
            m = o.find[y](u, i, n);
            if (m != null) {
              g = g.replace(o.match[y], "");
              break;
            }
          }
        }
      }
      m || (m = i.getElementsByTagName("*"));
      return { set: m, expr: g };
    };
    k.filter = function (g, i, n, m) {
      for (
        var p, q, u = g, y = [], F = i, M = i && i[0] && k.isXML(i[0]);
        g && i.length;

      ) {
        for (var N in o.filter)
          if ((p = o.leftMatch[N].exec(g)) != null && p[2]) {
            var O,
              D,
              R = o.filter[N];
            D = p[1];
            q = false;
            p.splice(1, 1);
            if (D.substr(D.length - 1) !== "\\") {
              if (F === y) y = [];
              if (o.preFilter[N])
                if ((p = o.preFilter[N](p, F, n, y, m, M))) {
                  if (p === true) continue;
                } else q = O = true;
              if (p)
                for (var j = 0; (D = F[j]) != null; j++)
                  if (D) {
                    O = R(D, p, j, F);
                    var s = m ^ !!O;
                    if (n && O != null)
                      if (s) q = true;
                      else F[j] = false;
                    else if (s) {
                      y.push(D);
                      q = true;
                    }
                  }
              if (O !== B) {
                n || (F = y);
                g = g.replace(o.match[N], "");
                if (!q) return [];
                break;
              }
            }
          }
        if (g === u)
          if (q == null) k.error(g);
          else break;
        u = g;
      }
      return F;
    };
    k.error = function (g) {
      throw "Syntax error, unrecognized expression: " + g;
    };
    var o = (k.selectors = {
        order: ["ID", "NAME", "TAG"],
        match: {
          ID: /#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,
          CLASS: /\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,
          NAME: /\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,
          ATTR: /\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,
          TAG: /^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,
          CHILD: /:(only|nth|last|first)-child(?:\((even|odd|[\dn+\-]*)\))?/,
          POS: /:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,
          PSEUDO: /:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/,
        },
        leftMatch: {},
        attrMap: { class: "className", for: "htmlFor" },
        attrHandle: {
          href: function (g) {
            return g.getAttribute("href");
          },
        },
        relative: {
          "+": function (g, i) {
            var n = typeof i === "string",
              m = n && !/\W/.test(i);
            n = n && !m;
            if (m) i = i.toLowerCase();
            m = 0;
            for (var p = g.length, q; m < p; m++)
              if ((q = g[m])) {
                for (; (q = q.previousSibling) && q.nodeType !== 1; );
                g[m] =
                  n || (q && q.nodeName.toLowerCase() === i)
                    ? q || false
                    : q === i;
              }
            n && k.filter(i, g, true);
          },
          ">": function (g, i) {
            var n,
              m = typeof i === "string",
              p = 0,
              q = g.length;
            if (m && !/\W/.test(i))
              for (i = i.toLowerCase(); p < q; p++) {
                if ((n = g[p])) {
                  n = n.parentNode;
                  g[p] = n.nodeName.toLowerCase() === i ? n : false;
                }
              }
            else {
              for (; p < q; p++)
                if ((n = g[p])) g[p] = m ? n.parentNode : n.parentNode === i;
              m && k.filter(i, g, true);
            }
          },
          "": function (g, i, n) {
            var m,
              p = e++,
              q = b;
            if (typeof i === "string" && !/\W/.test(i)) {
              m = i = i.toLowerCase();
              q = a;
            }
            q("parentNode", i, p, g, m, n);
          },
          "~": function (g, i, n) {
            var m,
              p = e++,
              q = b;
            if (typeof i === "string" && !/\W/.test(i)) {
              m = i = i.toLowerCase();
              q = a;
            }
            q("previousSibling", i, p, g, m, n);
          },
        },
        find: {
          ID: function (g, i, n) {
            if (typeof i.getElementById !== "undefined" && !n)
              return (g = i.getElementById(g[1])) && g.parentNode ? [g] : [];
          },
          NAME: function (g, i) {
            if (typeof i.getElementsByName !== "undefined") {
              for (
                var n = [], m = i.getElementsByName(g[1]), p = 0, q = m.length;
                p < q;
                p++
              )
                m[p].getAttribute("name") === g[1] && n.push(m[p]);
              return n.length === 0 ? null : n;
            }
          },
          TAG: function (g, i) {
            return i.getElementsByTagName(g[1]);
          },
        },
        preFilter: {
          CLASS: function (g, i, n, m, p, q) {
            g = " " + g[1].replace(/\\/g, "") + " ";
            if (q) return g;
            q = 0;
            for (var u; (u = i[q]) != null; q++)
              if (u)
                if (
                  p ^
                  (u.className &&
                    (" " + u.className + " ")
                      .replace(/[\t\n]/g, " ")
                      .indexOf(g) >= 0)
                )
                  n || m.push(u);
                else if (n) i[q] = false;
            return false;
          },
          ID: function (g) {
            return g[1].replace(/\\/g, "");
          },
          TAG: function (g) {
            return g[1].toLowerCase();
          },
          CHILD: function (g) {
            if (g[1] === "nth") {
              var i = /(-?)(\d*)n((?:\+|-)?\d*)/.exec(
                (g[2] === "even" && "2n") ||
                  (g[2] === "odd" && "2n+1") ||
                  (!/\D/.test(g[2]) && "0n+" + g[2]) ||
                  g[2]
              );
              g[2] = i[1] + (i[2] || 1) - 0;
              g[3] = i[3] - 0;
            }
            g[0] = e++;
            return g;
          },
          ATTR: function (g, i, n, m, p, q) {
            i = g[1].replace(/\\/g, "");
            if (!q && o.attrMap[i]) g[1] = o.attrMap[i];
            if (g[2] === "~=") g[4] = " " + g[4] + " ";
            return g;
          },
          PSEUDO: function (g, i, n, m, p) {
            if (g[1] === "not")
              if ((d.exec(g[3]) || "").length > 1 || /^\w/.test(g[3]))
                g[3] = k(g[3], null, null, i);
              else {
                g = k.filter(g[3], i, n, true ^ p);
                n || m.push.apply(m, g);
                return false;
              }
            else if (o.match.POS.test(g[0]) || o.match.CHILD.test(g[0]))
              return true;
            return g;
          },
          POS: function (g) {
            g.unshift(true);
            return g;
          },
        },
        filters: {
          enabled: function (g) {
            return g.disabled === false && g.type !== "hidden";
          },
          disabled: function (g) {
            return g.disabled === true;
          },
          checked: function (g) {
            return g.checked === true;
          },
          selected: function (g) {
            return g.selected === true;
          },
          parent: function (g) {
            return !!g.firstChild;
          },
          empty: function (g) {
            return !g.firstChild;
          },
          has: function (g, i, n) {
            return !!k(n[3], g).length;
          },
          header: function (g) {
            return /h\d/i.test(g.nodeName);
          },
          text: function (g) {
            return "text" === g.type;
          },
          radio: function (g) {
            return "radio" === g.type;
          },
          checkbox: function (g) {
            return "checkbox" === g.type;
          },
          file: function (g) {
            return "file" === g.type;
          },
          password: function (g) {
            return "password" === g.type;
          },
          submit: function (g) {
            return "submit" === g.type;
          },
          image: function (g) {
            return "image" === g.type;
          },
          reset: function (g) {
            return "reset" === g.type;
          },
          button: function (g) {
            return "button" === g.type || g.nodeName.toLowerCase() === "button";
          },
          input: function (g) {
            return /input|select|textarea|button/i.test(g.nodeName);
          },
        },
        setFilters: {
          first: function (g, i) {
            return i === 0;
          },
          last: function (g, i, n, m) {
            return i === m.length - 1;
          },
          even: function (g, i) {
            return i % 2 === 0;
          },
          odd: function (g, i) {
            return i % 2 === 1;
          },
          lt: function (g, i, n) {
            return i < n[3] - 0;
          },
          gt: function (g, i, n) {
            return i > n[3] - 0;
          },
          nth: function (g, i, n) {
            return n[3] - 0 === i;
          },
          eq: function (g, i, n) {
            return n[3] - 0 === i;
          },
        },
        filter: {
          PSEUDO: function (g, i, n, m) {
            var p = i[1],
              q = o.filters[p];
            if (q) return q(g, n, i, m);
            else if (p === "contains")
              return (
                (g.textContent || g.innerText || k.getText([g]) || "").indexOf(
                  i[3]
                ) >= 0
              );
            else if (p === "not") {
              i = i[3];
              n = 0;
              for (m = i.length; n < m; n++) if (i[n] === g) return false;
              return true;
            } else k.error("Syntax error, unrecognized expression: " + p);
          },
          CHILD: function (g, i) {
            var n = i[1],
              m = g;
            switch (n) {
              case "only":
              case "first":
                for (; (m = m.previousSibling); )
                  if (m.nodeType === 1) return false;
                if (n === "first") return true;
                m = g;
              case "last":
                for (; (m = m.nextSibling); )
                  if (m.nodeType === 1) return false;
                return true;
              case "nth":
                n = i[2];
                var p = i[3];
                if (n === 1 && p === 0) return true;
                var q = i[0],
                  u = g.parentNode;
                if (u && (u.sizcache !== q || !g.nodeIndex)) {
                  var y = 0;
                  for (m = u.firstChild; m; m = m.nextSibling)
                    if (m.nodeType === 1) m.nodeIndex = ++y;
                  u.sizcache = q;
                }
                m = g.nodeIndex - p;
                return n === 0 ? m === 0 : m % n === 0 && m / n >= 0;
            }
          },
          ID: function (g, i) {
            return g.nodeType === 1 && g.getAttribute("id") === i;
          },
          TAG: function (g, i) {
            return (
              (i === "*" && g.nodeType === 1) || g.nodeName.toLowerCase() === i
            );
          },
          CLASS: function (g, i) {
            return (
              (" " + (g.className || g.getAttribute("class")) + " ").indexOf(
                i
              ) > -1
            );
          },
          ATTR: function (g, i) {
            var n = i[1];
            n = o.attrHandle[n]
              ? o.attrHandle[n](g)
              : g[n] != null
              ? g[n]
              : g.getAttribute(n);
            var m = n + "",
              p = i[2],
              q = i[4];
            return n == null
              ? p === "!="
              : p === "="
              ? m === q
              : p === "*="
              ? m.indexOf(q) >= 0
              : p === "~="
              ? (" " + m + " ").indexOf(q) >= 0
              : !q
              ? m && n !== false
              : p === "!="
              ? m !== q
              : p === "^="
              ? m.indexOf(q) === 0
              : p === "$="
              ? m.substr(m.length - q.length) === q
              : p === "|="
              ? m === q || m.substr(0, q.length + 1) === q + "-"
              : false;
          },
          POS: function (g, i, n, m) {
            var p = o.setFilters[i[2]];
            if (p) return p(g, n, i, m);
          },
        },
      }),
      x = o.match.POS,
      r = function (g, i) {
        return "\\" + (i - 0 + 1);
      },
      A;
    for (A in o.match) {
      o.match[A] = RegExp(
        o.match[A].source + /(?![^\[]*\])(?![^\(]*\))/.source
      );
      o.leftMatch[A] = RegExp(
        /(^(?:.|\r|\n)*?)/.source + o.match[A].source.replace(/\\(\d+)/g, r)
      );
    }
    var C = function (g, i) {
      g = Array.prototype.slice.call(g, 0);
      if (i) {
        i.push.apply(i, g);
        return i;
      }
      return g;
    };
    try {
      Array.prototype.slice.call(t.documentElement.childNodes, 0);
    } catch (J) {
      C = function (g, i) {
        var n = 0,
          m = i || [];
        if (f.call(g) === "[object Array]") Array.prototype.push.apply(m, g);
        else if (typeof g.length === "number")
          for (var p = g.length; n < p; n++) m.push(g[n]);
        else for (; g[n]; n++) m.push(g[n]);
        return m;
      };
    }
    var w, I;
    if (t.documentElement.compareDocumentPosition)
      w = function (g, i) {
        if (g === i) {
          h = true;
          return 0;
        }
        if (!g.compareDocumentPosition || !i.compareDocumentPosition)
          return g.compareDocumentPosition ? -1 : 1;
        return g.compareDocumentPosition(i) & 4 ? -1 : 1;
      };
    else {
      w = function (g, i) {
        var n,
          m,
          p = [],
          q = [];
        n = g.parentNode;
        m = i.parentNode;
        var u = n;
        if (g === i) {
          h = true;
          return 0;
        } else if (n === m) return I(g, i);
        else if (n) {
          if (!m) return 1;
        } else return -1;
        for (; u; ) {
          p.unshift(u);
          u = u.parentNode;
        }
        for (u = m; u; ) {
          q.unshift(u);
          u = u.parentNode;
        }
        n = p.length;
        m = q.length;
        for (u = 0; u < n && u < m; u++)
          if (p[u] !== q[u]) return I(p[u], q[u]);
        return u === n ? I(g, q[u], -1) : I(p[u], i, 1);
      };
      I = function (g, i, n) {
        if (g === i) return n;
        for (g = g.nextSibling; g; ) {
          if (g === i) return -1;
          g = g.nextSibling;
        }
        return 1;
      };
    }
    k.getText = function (g) {
      for (var i = "", n, m = 0; g[m]; m++) {
        n = g[m];
        if (n.nodeType === 3 || n.nodeType === 4) i += n.nodeValue;
        else if (n.nodeType !== 8) i += k.getText(n.childNodes);
      }
      return i;
    };
    (function () {
      var g = t.createElement("div"),
        i = "script" + new Date().getTime(),
        n = t.documentElement;
      g.innerHTML = "<a name='" + i + "'/>";
      n.insertBefore(g, n.firstChild);
      if (t.getElementById(i)) {
        o.find.ID = function (m, p, q) {
          if (typeof p.getElementById !== "undefined" && !q)
            return (p = p.getElementById(m[1]))
              ? p.id === m[1] ||
                (typeof p.getAttributeNode !== "undefined" &&
                  p.getAttributeNode("id").nodeValue === m[1])
                ? [p]
                : B
              : [];
        };
        o.filter.ID = function (m, p) {
          var q =
            typeof m.getAttributeNode !== "undefined" &&
            m.getAttributeNode("id");
          return m.nodeType === 1 && q && q.nodeValue === p;
        };
      }
      n.removeChild(g);
      n = g = null;
    })();
    (function () {
      var g = t.createElement("div");
      g.appendChild(t.createComment(""));
      if (g.getElementsByTagName("*").length > 0)
        o.find.TAG = function (i, n) {
          var m = n.getElementsByTagName(i[1]);
          if (i[1] === "*") {
            for (var p = [], q = 0; m[q]; q++)
              m[q].nodeType === 1 && p.push(m[q]);
            m = p;
          }
          return m;
        };
      g.innerHTML = "<a href='#'></a>";
      if (
        g.firstChild &&
        typeof g.firstChild.getAttribute !== "undefined" &&
        g.firstChild.getAttribute("href") !== "#"
      )
        o.attrHandle.href = function (i) {
          return i.getAttribute("href", 2);
        };
      g = null;
    })();
    t.querySelectorAll &&
      (function () {
        var g = k,
          i = t.createElement("div");
        i.innerHTML = "<p class='TEST'></p>";
        if (!(i.querySelectorAll && i.querySelectorAll(".TEST").length === 0)) {
          k = function (m, p, q, u) {
            p = p || t;
            m = m.replace(/\=\s*([^'"\]]*)\s*\]/g, "='$1']");
            if (!u && !k.isXML(p))
              if (p.nodeType === 9)
                try {
                  return C(p.querySelectorAll(m), q);
                } catch (y) {}
              else if (
                p.nodeType === 1 &&
                p.nodeName.toLowerCase() !== "object"
              ) {
                var F = p.getAttribute("id"),
                  M = F || "__sizzle__";
                F || p.setAttribute("id", M);
                try {
                  return C(p.querySelectorAll("#" + M + " " + m), q);
                } catch (N) {
                } finally {
                  F || p.removeAttribute("id");
                }
              }
            return g(m, p, q, u);
          };
          for (var n in g) k[n] = g[n];
          i = null;
        }
      })();
    (function () {
      var g = t.documentElement,
        i =
          g.matchesSelector ||
          g.mozMatchesSelector ||
          g.webkitMatchesSelector ||
          g.msMatchesSelector,
        n = false;
      try {
        i.call(t.documentElement, "[test!='']:sizzle");
      } catch (m) {
        n = true;
      }
      if (i)
        k.matchesSelector = function (p, q) {
          q = q.replace(/\=\s*([^'"\]]*)\s*\]/g, "='$1']");
          if (!k.isXML(p))
            try {
              if (n || (!o.match.PSEUDO.test(q) && !/!=/.test(q)))
                return i.call(p, q);
            } catch (u) {}
          return k(q, null, null, [p]).length > 0;
        };
    })();
    (function () {
      var g = t.createElement("div");
      g.innerHTML = "<div class='test e'></div><div class='test'></div>";
      if (
        !(
          !g.getElementsByClassName ||
          g.getElementsByClassName("e").length === 0
        )
      ) {
        g.lastChild.className = "e";
        if (g.getElementsByClassName("e").length !== 1) {
          o.order.splice(1, 0, "CLASS");
          o.find.CLASS = function (i, n, m) {
            if (typeof n.getElementsByClassName !== "undefined" && !m)
              return n.getElementsByClassName(i[1]);
          };
          g = null;
        }
      }
    })();
    k.contains = t.documentElement.contains
      ? function (g, i) {
          return g !== i && (g.contains ? g.contains(i) : true);
        }
      : t.documentElement.compareDocumentPosition
      ? function (g, i) {
          return !!(g.compareDocumentPosition(i) & 16);
        }
      : function () {
          return false;
        };
    k.isXML = function (g) {
      return (g = (g ? g.ownerDocument || g : 0).documentElement)
        ? g.nodeName !== "HTML"
        : false;
    };
    var L = function (g, i) {
      for (
        var n, m = [], p = "", q = i.nodeType ? [i] : i;
        (n = o.match.PSEUDO.exec(g));

      ) {
        p += n[0];
        g = g.replace(o.match.PSEUDO, "");
      }
      g = o.relative[g] ? g + "*" : g;
      n = 0;
      for (var u = q.length; n < u; n++) k(g, q[n], m);
      return k.filter(p, m);
    };
    c.find = k;
    c.expr = k.selectors;
    c.expr[":"] = c.expr.filters;
    c.unique = k.uniqueSort;
    c.text = k.getText;
    c.isXMLDoc = k.isXML;
    c.contains = k.contains;
  })();
  var Za = /Until$/,
    $a = /^(?:parents|prevUntil|prevAll)/,
    ab = /,/,
    Na = /^.[^:#\[\.,]*$/,
    bb = Array.prototype.slice,
    cb = c.expr.match.POS;
  c.fn.extend({
    find: function (a) {
      for (
        var b = this.pushStack("", "find", a), d = 0, e = 0, f = this.length;
        e < f;
        e++
      ) {
        d = b.length;
        c.find(a, this[e], b);
        if (e > 0)
          for (var h = d; h < b.length; h++)
            for (var l = 0; l < d; l++)
              if (b[l] === b[h]) {
                b.splice(h--, 1);
                break;
              }
      }
      return b;
    },
    has: function (a) {
      var b = c(a);
      return this.filter(function () {
        for (var d = 0, e = b.length; d < e; d++)
          if (c.contains(this, b[d])) return true;
      });
    },
    not: function (a) {
      return this.pushStack(ma(this, a, false), "not", a);
    },
    filter: function (a) {
      return this.pushStack(ma(this, a, true), "filter", a);
    },
    is: function (a) {
      return !!a && c.filter(a, this).length > 0;
    },
    closest: function (a, b) {
      var d = [],
        e,
        f,
        h = this[0];
      if (c.isArray(a)) {
        var l,
          k = {},
          o = 1;
        if (h && a.length) {
          e = 0;
          for (f = a.length; e < f; e++) {
            l = a[e];
            k[l] ||
              (k[l] = c.expr.match.POS.test(l) ? c(l, b || this.context) : l);
          }
          for (; h && h.ownerDocument && h !== b; ) {
            for (l in k) {
              e = k[l];
              if (e.jquery ? e.index(h) > -1 : c(h).is(e))
                d.push({ selector: l, elem: h, level: o });
            }
            h = h.parentNode;
            o++;
          }
        }
        return d;
      }
      l = cb.test(a) ? c(a, b || this.context) : null;
      e = 0;
      for (f = this.length; e < f; e++)
        for (h = this[e]; h; )
          if (l ? l.index(h) > -1 : c.find.matchesSelector(h, a)) {
            d.push(h);
            break;
          } else {
            h = h.parentNode;
            if (!h || !h.ownerDocument || h === b) break;
          }
      d = d.length > 1 ? c.unique(d) : d;
      return this.pushStack(d, "closest", a);
    },
    index: function (a) {
      if (!a || typeof a === "string")
        return c.inArray(this[0], a ? c(a) : this.parent().children());
      return c.inArray(a.jquery ? a[0] : a, this);
    },
    add: function (a, b) {
      var d = typeof a === "string" ? c(a, b || this.context) : c.makeArray(a),
        e = c.merge(this.get(), d);
      return this.pushStack(
        !d[0] ||
          !d[0].parentNode ||
          d[0].parentNode.nodeType === 11 ||
          !e[0] ||
          !e[0].parentNode ||
          e[0].parentNode.nodeType === 11
          ? e
          : c.unique(e)
      );
    },
    andSelf: function () {
      return this.add(this.prevObject);
    },
  });
  c.each(
    {
      parent: function (a) {
        return (a = a.parentNode) && a.nodeType !== 11 ? a : null;
      },
      parents: function (a) {
        return c.dir(a, "parentNode");
      },
      parentsUntil: function (a, b, d) {
        return c.dir(a, "parentNode", d);
      },
      next: function (a) {
        return c.nth(a, 2, "nextSibling");
      },
      prev: function (a) {
        return c.nth(a, 2, "previousSibling");
      },
      nextAll: function (a) {
        return c.dir(a, "nextSibling");
      },
      prevAll: function (a) {
        return c.dir(a, "previousSibling");
      },
      nextUntil: function (a, b, d) {
        return c.dir(a, "nextSibling", d);
      },
      prevUntil: function (a, b, d) {
        return c.dir(a, "previousSibling", d);
      },
      siblings: function (a) {
        return c.sibling(a.parentNode.firstChild, a);
      },
      children: function (a) {
        return c.sibling(a.firstChild);
      },
      contents: function (a) {
        return c.nodeName(a, "iframe")
          ? a.contentDocument || a.contentWindow.document
          : c.makeArray(a.childNodes);
      },
    },
    function (a, b) {
      c.fn[a] = function (d, e) {
        var f = c.map(this, b, d);
        Za.test(a) || (e = d);
        if (e && typeof e === "string") f = c.filter(e, f);
        f = this.length > 1 ? c.unique(f) : f;
        if ((this.length > 1 || ab.test(e)) && $a.test(a)) f = f.reverse();
        return this.pushStack(f, a, bb.call(arguments).join(","));
      };
    }
  );
  c.extend({
    filter: function (a, b, d) {
      if (d) a = ":not(" + a + ")";
      return b.length === 1
        ? c.find.matchesSelector(b[0], a)
          ? [b[0]]
          : []
        : c.find.matches(a, b);
    },
    dir: function (a, b, d) {
      var e = [];
      for (
        a = a[b];
        a && a.nodeType !== 9 && (d === B || a.nodeType !== 1 || !c(a).is(d));

      ) {
        a.nodeType === 1 && e.push(a);
        a = a[b];
      }
      return e;
    },
    nth: function (a, b, d) {
      b = b || 1;
      for (var e = 0; a; a = a[d]) if (a.nodeType === 1 && ++e === b) break;
      return a;
    },
    sibling: function (a, b) {
      for (var d = []; a; a = a.nextSibling)
        a.nodeType === 1 && a !== b && d.push(a);
      return d;
    },
  });
  var za = / jQuery\d+="(?:\d+|null)"/g,
    $ = /^\s+/,
    Aa = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,
    Ba = /<([\w:]+)/,
    db = /<tbody/i,
    eb = /<|&#?\w+;/,
    Ca = /<(?:script|object|embed|option|style)/i,
    Da = /checked\s*(?:[^=]|=\s*.checked.)/i,
    fb = /\=([^="'>\s]+\/)>/g,
    P = {
      option: [1, "<select multiple='multiple'>", "</select>"],
      legend: [1, "<fieldset>", "</fieldset>"],
      thead: [1, "<table>", "</table>"],
      tr: [2, "<table><tbody>", "</tbody></table>"],
      td: [3, "<table><tbody><tr>", "</tr></tbody></table>"],
      col: [2, "<table><tbody></tbody><colgroup>", "</colgroup></table>"],
      area: [1, "<map>", "</map>"],
      _default: [0, "", ""],
    };
  P.optgroup = P.option;
  P.tbody = P.tfoot = P.colgroup = P.caption = P.thead;
  P.th = P.td;
  if (!c.support.htmlSerialize) P._default = [1, "div<div>", "</div>"];
  c.fn.extend({
    text: function (a) {
      if (c.isFunction(a))
        return this.each(function (b) {
          var d = c(this);
          d.text(a.call(this, b, d.text()));
        });
      if (typeof a !== "object" && a !== B)
        return this.empty().append(
          ((this[0] && this[0].ownerDocument) || t).createTextNode(a)
        );
      return c.text(this);
    },
    wrapAll: function (a) {
      if (c.isFunction(a))
        return this.each(function (d) {
          c(this).wrapAll(a.call(this, d));
        });
      if (this[0]) {
        var b = c(a, this[0].ownerDocument).eq(0).clone(true);
        this[0].parentNode && b.insertBefore(this[0]);
        b.map(function () {
          for (var d = this; d.firstChild && d.firstChild.nodeType === 1; )
            d = d.firstChild;
          return d;
        }).append(this);
      }
      return this;
    },
    wrapInner: function (a) {
      if (c.isFunction(a))
        return this.each(function (b) {
          c(this).wrapInner(a.call(this, b));
        });
      return this.each(function () {
        var b = c(this),
          d = b.contents();
        d.length ? d.wrapAll(a) : b.append(a);
      });
    },
    wrap: function (a) {
      return this.each(function () {
        c(this).wrapAll(a);
      });
    },
    unwrap: function () {
      return this.parent()
        .each(function () {
          c.nodeName(this, "body") || c(this).replaceWith(this.childNodes);
        })
        .end();
    },
    append: function () {
      return this.domManip(arguments, true, function (a) {
        this.nodeType === 1 && this.appendChild(a);
      });
    },
    prepend: function () {
      return this.domManip(arguments, true, function (a) {
        this.nodeType === 1 && this.insertBefore(a, this.firstChild);
      });
    },
    before: function () {
      if (this[0] && this[0].parentNode)
        return this.domManip(arguments, false, function (b) {
          this.parentNode.insertBefore(b, this);
        });
      else if (arguments.length) {
        var a = c(arguments[0]);
        a.push.apply(a, this.toArray());
        return this.pushStack(a, "before", arguments);
      }
    },
    after: function () {
      if (this[0] && this[0].parentNode)
        return this.domManip(arguments, false, function (b) {
          this.parentNode.insertBefore(b, this.nextSibling);
        });
      else if (arguments.length) {
        var a = this.pushStack(this, "after", arguments);
        a.push.apply(a, c(arguments[0]).toArray());
        return a;
      }
    },
    remove: function (a, b) {
      for (var d = 0, e; (e = this[d]) != null; d++)
        if (!a || c.filter(a, [e]).length) {
          if (!b && e.nodeType === 1) {
            c.cleanData(e.getElementsByTagName("*"));
            c.cleanData([e]);
          }
          e.parentNode && e.parentNode.removeChild(e);
        }
      return this;
    },
    empty: function () {
      for (var a = 0, b; (b = this[a]) != null; a++)
        for (
          b.nodeType === 1 && c.cleanData(b.getElementsByTagName("*"));
          b.firstChild;

        )
          b.removeChild(b.firstChild);
      return this;
    },
    clone: function (a) {
      var b = this.map(function () {
        if (!c.support.noCloneEvent && !c.isXMLDoc(this)) {
          var d = this.outerHTML,
            e = this.ownerDocument;
          if (!d) {
            d = e.createElement("div");
            d.appendChild(this.cloneNode(true));
            d = d.innerHTML;
          }
          return c.clean(
            [d.replace(za, "").replace(fb, '="$1">').replace($, "")],
            e
          )[0];
        } else return this.cloneNode(true);
      });
      if (a === true) {
        na(this, b);
        na(this.find("*"), b.find("*"));
      }
      return b;
    },
    html: function (a) {
      if (a === B)
        return this[0] && this[0].nodeType === 1
          ? this[0].innerHTML.replace(za, "")
          : null;
      else if (
        typeof a === "string" &&
        !Ca.test(a) &&
        (c.support.leadingWhitespace || !$.test(a)) &&
        !P[(Ba.exec(a) || ["", ""])[1].toLowerCase()]
      ) {
        a = a.replace(Aa, "<$1></$2>");
        try {
          for (var b = 0, d = this.length; b < d; b++)
            if (this[b].nodeType === 1) {
              c.cleanData(this[b].getElementsByTagName("*"));
              this[b].innerHTML = a;
            }
        } catch (e) {
          this.empty().append(a);
        }
      } else
        c.isFunction(a)
          ? this.each(function (f) {
              var h = c(this);
              h.html(a.call(this, f, h.html()));
            })
          : this.empty().append(a);
      return this;
    },
    replaceWith: function (a) {
      if (this[0] && this[0].parentNode) {
        if (c.isFunction(a))
          return this.each(function (b) {
            var d = c(this),
              e = d.html();
            d.replaceWith(a.call(this, b, e));
          });
        if (typeof a !== "string") a = c(a).detach();
        return this.each(function () {
          var b = this.nextSibling,
            d = this.parentNode;
          c(this).remove();
          b ? c(b).before(a) : c(d).append(a);
        });
      } else
        return this.pushStack(c(c.isFunction(a) ? a() : a), "replaceWith", a);
    },
    detach: function (a) {
      return this.remove(a, true);
    },
    domManip: function (a, b, d) {
      var e,
        f,
        h,
        l = a[0],
        k = [];
      if (
        !c.support.checkClone &&
        arguments.length === 3 &&
        typeof l === "string" &&
        Da.test(l)
      )
        return this.each(function () {
          c(this).domManip(a, b, d, true);
        });
      if (c.isFunction(l))
        return this.each(function (x) {
          var r = c(this);
          a[0] = l.call(this, x, b ? r.html() : B);
          r.domManip(a, b, d);
        });
      if (this[0]) {
        e = l && l.parentNode;
        e =
          c.support.parentNode &&
          e &&
          e.nodeType === 11 &&
          e.childNodes.length === this.length
            ? { fragment: e }
            : c.buildFragment(a, this, k);
        h = e.fragment;
        if (
          (f = h.childNodes.length === 1 ? (h = h.firstChild) : h.firstChild)
        ) {
          b = b && c.nodeName(f, "tr");
          f = 0;
          for (var o = this.length; f < o; f++)
            d.call(
              b
                ? c.nodeName(this[f], "table")
                  ? this[f].getElementsByTagName("tbody")[0] ||
                    this[f].appendChild(
                      this[f].ownerDocument.createElement("tbody")
                    )
                  : this[f]
                : this[f],
              f > 0 || e.cacheable || this.length > 1 ? h.cloneNode(true) : h
            );
        }
        k.length && c.each(k, Oa);
      }
      return this;
    },
  });
  c.buildFragment = function (a, b, d) {
    var e, f, h;
    b = b && b[0] ? b[0].ownerDocument || b[0] : t;
    if (
      a.length === 1 &&
      typeof a[0] === "string" &&
      a[0].length < 512 &&
      b === t &&
      !Ca.test(a[0]) &&
      (c.support.checkClone || !Da.test(a[0]))
    ) {
      f = true;
      if ((h = c.fragments[a[0]])) if (h !== 1) e = h;
    }
    if (!e) {
      e = b.createDocumentFragment();
      c.clean(a, b, e, d);
    }
    if (f) c.fragments[a[0]] = h ? e : 1;
    return { fragment: e, cacheable: f };
  };
  c.fragments = {};
  c.each(
    {
      appendTo: "append",
      prependTo: "prepend",
      insertBefore: "before",
      insertAfter: "after",
      replaceAll: "replaceWith",
    },
    function (a, b) {
      c.fn[a] = function (d) {
        var e = [];
        d = c(d);
        var f = this.length === 1 && this[0].parentNode;
        if (
          f &&
          f.nodeType === 11 &&
          f.childNodes.length === 1 &&
          d.length === 1
        ) {
          d[b](this[0]);
          return this;
        } else {
          f = 0;
          for (var h = d.length; f < h; f++) {
            var l = (f > 0 ? this.clone(true) : this).get();
            c(d[f])[b](l);
            e = e.concat(l);
          }
          return this.pushStack(e, a, d.selector);
        }
      };
    }
  );
  c.extend({
    clean: function (a, b, d, e) {
      b = b || t;
      if (typeof b.createElement === "undefined")
        b = b.ownerDocument || (b[0] && b[0].ownerDocument) || t;
      for (var f = [], h = 0, l; (l = a[h]) != null; h++) {
        if (typeof l === "number") l += "";
        if (l) {
          if (typeof l === "string" && !eb.test(l)) l = b.createTextNode(l);
          else if (typeof l === "string") {
            l = l.replace(Aa, "<$1></$2>");
            var k = (Ba.exec(l) || ["", ""])[1].toLowerCase(),
              o = P[k] || P._default,
              x = o[0],
              r = b.createElement("div");
            for (r.innerHTML = o[1] + l + o[2]; x--; ) r = r.lastChild;
            if (!c.support.tbody) {
              x = db.test(l);
              k =
                k === "table" && !x
                  ? r.firstChild && r.firstChild.childNodes
                  : o[1] === "<table>" && !x
                  ? r.childNodes
                  : [];
              for (o = k.length - 1; o >= 0; --o)
                c.nodeName(k[o], "tbody") &&
                  !k[o].childNodes.length &&
                  k[o].parentNode.removeChild(k[o]);
            }
            !c.support.leadingWhitespace &&
              $.test(l) &&
              r.insertBefore(b.createTextNode($.exec(l)[0]), r.firstChild);
            l = r.childNodes;
          }
          if (l.nodeType) f.push(l);
          else f = c.merge(f, l);
        }
      }
      if (d)
        for (h = 0; f[h]; h++)
          if (
            e &&
            c.nodeName(f[h], "script") &&
            (!f[h].type || f[h].type.toLowerCase() === "text/javascript")
          )
            e.push(f[h].parentNode ? f[h].parentNode.removeChild(f[h]) : f[h]);
          else {
            f[h].nodeType === 1 &&
              f.splice.apply(
                f,
                [h + 1, 0].concat(
                  c.makeArray(f[h].getElementsByTagName("script"))
                )
              );
            d.appendChild(f[h]);
          }
      return f;
    },
    cleanData: function (a) {
      for (
        var b,
          d,
          e = c.cache,
          f = c.event.special,
          h = c.support.deleteExpando,
          l = 0,
          k;
        (k = a[l]) != null;
        l++
      )
        if (!(k.nodeName && c.noData[k.nodeName.toLowerCase()]))
          if ((d = k[c.expando])) {
            if ((b = e[d]) && b.events)
              for (var o in b.events)
                f[o] ? c.event.remove(k, o) : c.removeEvent(k, o, b.handle);
            if (h) delete k[c.expando];
            else k.removeAttribute && k.removeAttribute(c.expando);
            delete e[d];
          }
    },
  });
  var Ea = /alpha\([^)]*\)/i,
    gb = /opacity=([^)]*)/,
    hb = /-([a-z])/gi,
    ib = /([A-Z])/g,
    Fa = /^-?\d+(?:px)?$/i,
    jb = /^-?\d/,
    kb = { position: "absolute", visibility: "hidden", display: "block" },
    Pa = ["Left", "Right"],
    Qa = ["Top", "Bottom"],
    W,
    Ga,
    aa,
    lb = function (a, b) {
      return b.toUpperCase();
    };
  c.fn.css = function (a, b) {
    if (arguments.length === 2 && b === B) return this;
    return c.access(this, a, b, true, function (d, e, f) {
      return f !== B ? c.style(d, e, f) : c.css(d, e);
    });
  };
  c.extend({
    cssHooks: {
      opacity: {
        get: function (a, b) {
          if (b) {
            var d = W(a, "opacity", "opacity");
            return d === "" ? "1" : d;
          } else return a.style.opacity;
        },
      },
    },
    cssNumber: {
      zIndex: true,
      fontWeight: true,
      opacity: true,
      zoom: true,
      lineHeight: true,
    },
    cssProps: { float: c.support.cssFloat ? "cssFloat" : "styleFloat" },
    style: function (a, b, d, e) {
      if (!(!a || a.nodeType === 3 || a.nodeType === 8 || !a.style)) {
        var f,
          h = c.camelCase(b),
          l = a.style,
          k = c.cssHooks[h];
        b = c.cssProps[h] || h;
        if (d !== B) {
          if (!((typeof d === "number" && isNaN(d)) || d == null)) {
            if (typeof d === "number" && !c.cssNumber[h]) d += "px";
            if (!k || !("set" in k) || (d = k.set(a, d)) !== B)
              try {
                l[b] = d;
              } catch (o) {}
          }
        } else {
          if (k && "get" in k && (f = k.get(a, false, e)) !== B) return f;
          return l[b];
        }
      }
    },
    css: function (a, b, d) {
      var e,
        f = c.camelCase(b),
        h = c.cssHooks[f];
      b = c.cssProps[f] || f;
      if (h && "get" in h && (e = h.get(a, true, d)) !== B) return e;
      else if (W) return W(a, b, f);
    },
    swap: function (a, b, d) {
      var e = {},
        f;
      for (f in b) {
        e[f] = a.style[f];
        a.style[f] = b[f];
      }
      d.call(a);
      for (f in b) a.style[f] = e[f];
    },
    camelCase: function (a) {
      return a.replace(hb, lb);
    },
  });
  c.curCSS = c.css;
  c.each(["height", "width"], function (a, b) {
    c.cssHooks[b] = {
      get: function (d, e, f) {
        var h;
        if (e) {
          if (d.offsetWidth !== 0) h = oa(d, b, f);
          else
            c.swap(d, kb, function () {
              h = oa(d, b, f);
            });
          if (h <= 0) {
            h = W(d, b, b);
            if (h === "0px" && aa) h = aa(d, b, b);
            if (h != null) return h === "" || h === "auto" ? "0px" : h;
          }
          if (h < 0 || h == null) {
            h = d.style[b];
            return h === "" || h === "auto" ? "0px" : h;
          }
          return typeof h === "string" ? h : h + "px";
        }
      },
      set: function (d, e) {
        if (Fa.test(e)) {
          e = parseFloat(e);
          if (e >= 0) return e + "px";
        } else return e;
      },
    };
  });
  if (!c.support.opacity)
    c.cssHooks.opacity = {
      get: function (a, b) {
        return gb.test(
          (b && a.currentStyle ? a.currentStyle.filter : a.style.filter) || ""
        )
          ? parseFloat(RegExp.$1) / 100 + ""
          : b
          ? "1"
          : "";
      },
      set: function (a, b) {
        var d = a.style;
        d.zoom = 1;
        var e = c.isNaN(b) ? "" : "alpha(opacity=" + b * 100 + ")",
          f = d.filter || "";
        d.filter = Ea.test(f) ? f.replace(Ea, e) : d.filter + " " + e;
      },
    };
  if (t.defaultView && t.defaultView.getComputedStyle)
    Ga = function (a, b, d) {
      var e;
      d = d.replace(ib, "-$1").toLowerCase();
      if (!(b = a.ownerDocument.defaultView)) return B;
      if ((b = b.getComputedStyle(a, null))) {
        e = b.getPropertyValue(d);
        if (e === "" && !c.contains(a.ownerDocument.documentElement, a))
          e = c.style(a, d);
      }
      return e;
    };
  if (t.documentElement.currentStyle)
    aa = function (a, b) {
      var d,
        e,
        f = a.currentStyle && a.currentStyle[b],
        h = a.style;
      if (!Fa.test(f) && jb.test(f)) {
        d = h.left;
        e = a.runtimeStyle.left;
        a.runtimeStyle.left = a.currentStyle.left;
        h.left = b === "fontSize" ? "1em" : f || 0;
        f = h.pixelLeft + "px";
        h.left = d;
        a.runtimeStyle.left = e;
      }
      return f === "" ? "auto" : f;
    };
  W = Ga || aa;
  if (c.expr && c.expr.filters) {
    c.expr.filters.hidden = function (a) {
      var b = a.offsetHeight;
      return (
        (a.offsetWidth === 0 && b === 0) ||
        (!c.support.reliableHiddenOffsets &&
          (a.style.display || c.css(a, "display")) === "none")
      );
    };
    c.expr.filters.visible = function (a) {
      return !c.expr.filters.hidden(a);
    };
  }
  var mb = c.now(),
    nb = /<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,
    ob = /^(?:select|textarea)/i,
    pb = /^(?:color|date|datetime|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,
    qb = /^(?:GET|HEAD)$/,
    Ra = /\[\]$/,
    T = /\=\?(&|$)/,
    ja = /\?/,
    rb = /([?&])_=[^&]*/,
    sb = /^(\w+:)?\/\/([^\/?#]+)/,
    tb = /%20/g,
    ub = /#.*$/,
    Ha = c.fn.load;
  c.fn.extend({
    load: function (a, b, d) {
      if (typeof a !== "string" && Ha) return Ha.apply(this, arguments);
      else if (!this.length) return this;
      var e = a.indexOf(" ");
      if (e >= 0) {
        var f = a.slice(e, a.length);
        a = a.slice(0, e);
      }
      e = "GET";
      if (b)
        if (c.isFunction(b)) {
          d = b;
          b = null;
        } else if (typeof b === "object") {
          b = c.param(b, c.ajaxSettings.traditional);
          e = "POST";
        }
      var h = this;
      c.ajax({
        url: a,
        type: e,
        dataType: "html",
        data: b,
        complete: function (l, k) {
          if (k === "success" || k === "notmodified")
            h.html(
              f
                ? c("<div>").append(l.responseText.replace(nb, "")).find(f)
                : l.responseText
            );
          d && h.each(d, [l.responseText, k, l]);
        },
      });
      return this;
    },
    serialize: function () {
      return c.param(this.serializeArray());
    },
    serializeArray: function () {
      return this.map(function () {
        return this.elements ? c.makeArray(this.elements) : this;
      })
        .filter(function () {
          return (
            this.name &&
            !this.disabled &&
            (this.checked || ob.test(this.nodeName) || pb.test(this.type))
          );
        })
        .map(function (a, b) {
          var d = c(this).val();
          return d == null
            ? null
            : c.isArray(d)
            ? c.map(d, function (e) {
                return { name: b.name, value: e };
              })
            : { name: b.name, value: d };
        })
        .get();
    },
  });
  c.each(
    "ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),
    function (a, b) {
      c.fn[b] = function (d) {
        return this.bind(b, d);
      };
    }
  );
  c.extend({
    get: function (a, b, d, e) {
      if (c.isFunction(b)) {
        e = e || d;
        d = b;
        b = null;
      }
      return c.ajax({ type: "GET", url: a, data: b, success: d, dataType: e });
    },
    getScript: function (a, b) {
      return c.get(a, null, b, "script");
    },
    getJSON: function (a, b, d) {
      return c.get(a, b, d, "json");
    },
    post: function (a, b, d, e) {
      if (c.isFunction(b)) {
        e = e || d;
        d = b;
        b = {};
      }
      return c.ajax({ type: "POST", url: a, data: b, success: d, dataType: e });
    },
    ajaxSetup: function (a) {
      c.extend(c.ajaxSettings, a);
    },
    ajaxSettings: {
      url: location.href,
      global: true,
      type: "GET",
      contentType: "application/x-www-form-urlencoded",
      processData: true,
      async: true,
      xhr: function () {
        return new E.XMLHttpRequest();
      },
      accepts: {
        xml: "application/xml, text/xml",
        html: "text/html",
        script: "text/javascript, application/javascript",
        json: "application/json, text/javascript",
        text: "text/plain",
        _default: "*/*",
      },
    },
    ajax: function (a) {
      var b = c.extend(true, {}, c.ajaxSettings, a),
        d,
        e,
        f,
        h = b.type.toUpperCase(),
        l = qb.test(h);
      b.url = b.url.replace(ub, "");
      b.context = a && a.context != null ? a.context : b;
      if (b.data && b.processData && typeof b.data !== "string")
        b.data = c.param(b.data, b.traditional);
      if (b.dataType === "jsonp") {
        if (h === "GET")
          T.test(b.url) ||
            (b.url +=
              (ja.test(b.url) ? "&" : "?") + (b.jsonp || "callback") + "=?");
        else if (!b.data || !T.test(b.data))
          b.data =
            (b.data ? b.data + "&" : "") + (b.jsonp || "callback") + "=?";
        b.dataType = "json";
      }
      if (
        b.dataType === "json" &&
        ((b.data && T.test(b.data)) || T.test(b.url))
      ) {
        d = b.jsonpCallback || "jsonp" + mb++;
        if (b.data) b.data = (b.data + "").replace(T, "=" + d + "$1");
        b.url = b.url.replace(T, "=" + d + "$1");
        b.dataType = "script";
        var k = E[d];
        E[d] = function (m) {
          if (c.isFunction(k)) k(m);
          else {
            E[d] = B;
            try {
              delete E[d];
            } catch (p) {}
          }
          f = m;
          c.handleSuccess(b, w, e, f);
          c.handleComplete(b, w, e, f);
          r && r.removeChild(A);
        };
      }
      if (b.dataType === "script" && b.cache === null) b.cache = false;
      if (b.cache === false && l) {
        var o = c.now(),
          x = b.url.replace(rb, "$1_=" + o);
        b.url =
          x + (x === b.url ? (ja.test(b.url) ? "&" : "?") + "_=" + o : "");
      }
      if (b.data && l) b.url += (ja.test(b.url) ? "&" : "?") + b.data;
      b.global && c.active++ === 0 && c.event.trigger("ajaxStart");
      o =
        (o = sb.exec(b.url)) &&
        ((o[1] && o[1].toLowerCase() !== location.protocol) ||
          o[2].toLowerCase() !== location.host);
      if (b.dataType === "script" && h === "GET" && o) {
        var r = t.getElementsByTagName("head")[0] || t.documentElement,
          A = t.createElement("script");
        if (b.scriptCharset) A.charset = b.scriptCharset;
        A.src = b.url;
        if (!d) {
          var C = false;
          A.onload = A.onreadystatechange = function () {
            if (
              !C &&
              (!this.readyState ||
                this.readyState === "loaded" ||
                this.readyState === "complete")
            ) {
              C = true;
              c.handleSuccess(b, w, e, f);
              c.handleComplete(b, w, e, f);
              A.onload = A.onreadystatechange = null;
              r && A.parentNode && r.removeChild(A);
            }
          };
        }
        r.insertBefore(A, r.firstChild);
        return B;
      }
      var J = false,
        w = b.xhr();
      if (w) {
        b.username
          ? w.open(h, b.url, b.async, b.username, b.password)
          : w.open(h, b.url, b.async);
        try {
          if ((b.data != null && !l) || (a && a.contentType))
            w.setRequestHeader("Content-Type", b.contentType);
          if (b.ifModified) {
            c.lastModified[b.url] &&
              w.setRequestHeader("If-Modified-Since", c.lastModified[b.url]);
            c.etag[b.url] && w.setRequestHeader("If-None-Match", c.etag[b.url]);
          }
          o || w.setRequestHeader("X-Requested-With", "XMLHttpRequest");
          w.setRequestHeader(
            "Accept",
            b.dataType && b.accepts[b.dataType]
              ? b.accepts[b.dataType] + ", */*; q=0.01"
              : b.accepts._default
          );
        } catch (I) {}
        if (b.beforeSend && b.beforeSend.call(b.context, w, b) === false) {
          b.global && c.active-- === 1 && c.event.trigger("ajaxStop");
          w.abort();
          return false;
        }
        b.global && c.triggerGlobal(b, "ajaxSend", [w, b]);
        var L = (w.onreadystatechange = function (m) {
          if (!w || w.readyState === 0 || m === "abort") {
            J || c.handleComplete(b, w, e, f);
            J = true;
            if (w) w.onreadystatechange = c.noop;
          } else if (!J && w && (w.readyState === 4 || m === "timeout")) {
            J = true;
            w.onreadystatechange = c.noop;
            e =
              m === "timeout"
                ? "timeout"
                : !c.httpSuccess(w)
                ? "error"
                : b.ifModified && c.httpNotModified(w, b.url)
                ? "notmodified"
                : "success";
            var p;
            if (e === "success")
              try {
                f = c.httpData(w, b.dataType, b);
              } catch (q) {
                e = "parsererror";
                p = q;
              }
            if (e === "success" || e === "notmodified")
              d || c.handleSuccess(b, w, e, f);
            else c.handleError(b, w, e, p);
            d || c.handleComplete(b, w, e, f);
            m === "timeout" && w.abort();
            if (b.async) w = null;
          }
        });
        try {
          var g = w.abort;
          w.abort = function () {
            w && Function.prototype.call.call(g, w);
            L("abort");
          };
        } catch (i) {}
        b.async &&
          b.timeout > 0 &&
          setTimeout(function () {
            w && !J && L("timeout");
          }, b.timeout);
        try {
          w.send(l || b.data == null ? null : b.data);
        } catch (n) {
          c.handleError(b, w, null, n);
          c.handleComplete(b, w, e, f);
        }
        b.async || L();
        return w;
      }
    },
    param: function (a, b) {
      var d = [],
        e = function (h, l) {
          l = c.isFunction(l) ? l() : l;
          d[d.length] = encodeURIComponent(h) + "=" + encodeURIComponent(l);
        };
      if (b === B) b = c.ajaxSettings.traditional;
      if (c.isArray(a) || a.jquery)
        c.each(a, function () {
          e(this.name, this.value);
        });
      else for (var f in a) da(f, a[f], b, e);
      return d.join("&").replace(tb, "+");
    },
  });
  c.extend({
    active: 0,
    lastModified: {},
    etag: {},
    handleError: function (a, b, d, e) {
      a.error && a.error.call(a.context, b, d, e);
      a.global && c.triggerGlobal(a, "ajaxError", [b, a, e]);
    },
    handleSuccess: function (a, b, d, e) {
      a.success && a.success.call(a.context, e, d, b);
      a.global && c.triggerGlobal(a, "ajaxSuccess", [b, a]);
    },
    handleComplete: function (a, b, d) {
      a.complete && a.complete.call(a.context, b, d);
      a.global && c.triggerGlobal(a, "ajaxComplete", [b, a]);
      a.global && c.active-- === 1 && c.event.trigger("ajaxStop");
    },
    triggerGlobal: function (a, b, d) {
      (a.context && a.context.url == null ? c(a.context) : c.event).trigger(
        b,
        d
      );
    },
    httpSuccess: function (a) {
      try {
        return (
          (!a.status && location.protocol === "file:") ||
          (a.status >= 200 && a.status < 300) ||
          a.status === 304 ||
          a.status === 1223
        );
      } catch (b) {}
      return false;
    },
    httpNotModified: function (a, b) {
      var d = a.getResponseHeader("Last-Modified"),
        e = a.getResponseHeader("Etag");
      if (d) c.lastModified[b] = d;
      if (e) c.etag[b] = e;
      return a.status === 304;
    },
    httpData: function (a, b, d) {
      var e = a.getResponseHeader("content-type") || "",
        f = b === "xml" || (!b && e.indexOf("xml") >= 0);
      a = f ? a.responseXML : a.responseText;
      f &&
        a.documentElement.nodeName === "parsererror" &&
        c.error("parsererror");
      if (d && d.dataFilter) a = d.dataFilter(a, b);
      if (typeof a === "string")
        if (b === "json" || (!b && e.indexOf("json") >= 0)) a = c.parseJSON(a);
        else if (b === "script" || (!b && e.indexOf("javascript") >= 0))
          c.globalEval(a);
      return a;
    },
  });
  if (E.ActiveXObject)
    c.ajaxSettings.xhr = function () {
      if (E.location.protocol !== "file:")
        try {
          return new E.XMLHttpRequest();
        } catch (a) {}
      try {
        return new E.ActiveXObject("Microsoft.XMLHTTP");
      } catch (b) {}
    };
  c.support.ajax = !!c.ajaxSettings.xhr();
  var ea = {},
    vb = /^(?:toggle|show|hide)$/,
    wb = /^([+\-]=)?([\d+.\-]+)(.*)$/,
    ba,
    pa = [
      ["height", "marginTop", "marginBottom", "paddingTop", "paddingBottom"],
      ["width", "marginLeft", "marginRight", "paddingLeft", "paddingRight"],
      ["opacity"],
    ];
  c.fn.extend({
    show: function (a, b, d) {
      if (a || a === 0) return this.animate(S("show", 3), a, b, d);
      else {
        d = 0;
        for (var e = this.length; d < e; d++) {
          a = this[d];
          b = a.style.display;
          if (!c.data(a, "olddisplay") && b === "none")
            b = a.style.display = "";
          b === "" &&
            c.css(a, "display") === "none" &&
            c.data(a, "olddisplay", qa(a.nodeName));
        }
        for (d = 0; d < e; d++) {
          a = this[d];
          b = a.style.display;
          if (b === "" || b === "none")
            a.style.display = c.data(a, "olddisplay") || "";
        }
        return this;
      }
    },
    hide: function (a, b, d) {
      if (a || a === 0) return this.animate(S("hide", 3), a, b, d);
      else {
        a = 0;
        for (b = this.length; a < b; a++) {
          d = c.css(this[a], "display");
          d !== "none" && c.data(this[a], "olddisplay", d);
        }
        for (a = 0; a < b; a++) this[a].style.display = "none";
        return this;
      }
    },
    _toggle: c.fn.toggle,
    toggle: function (a, b, d) {
      var e = typeof a === "boolean";
      if (c.isFunction(a) && c.isFunction(b))
        this._toggle.apply(this, arguments);
      else
        a == null || e
          ? this.each(function () {
              var f = e ? a : c(this).is(":hidden");
              c(this)[f ? "show" : "hide"]();
            })
          : this.animate(S("toggle", 3), a, b, d);
      return this;
    },
    fadeTo: function (a, b, d, e) {
      return this.filter(":hidden")
        .css("opacity", 0)
        .show()
        .end()
        .animate({ opacity: b }, a, d, e);
    },
    animate: function (a, b, d, e) {
      var f = c.speed(b, d, e);
      if (c.isEmptyObject(a)) return this.each(f.complete);
      return this[f.queue === false ? "each" : "queue"](function () {
        var h = c.extend({}, f),
          l,
          k = this.nodeType === 1,
          o = k && c(this).is(":hidden"),
          x = this;
        for (l in a) {
          var r = c.camelCase(l);
          if (l !== r) {
            a[r] = a[l];
            delete a[l];
            l = r;
          }
          if ((a[l] === "hide" && o) || (a[l] === "show" && !o))
            return h.complete.call(this);
          if (k && (l === "height" || l === "width")) {
            h.overflow = [
              this.style.overflow,
              this.style.overflowX,
              this.style.overflowY,
            ];
            if (
              c.css(this, "display") === "inline" &&
              c.css(this, "float") === "none"
            )
              if (c.support.inlineBlockNeedsLayout)
                if (qa(this.nodeName) === "inline")
                  this.style.display = "inline-block";
                else {
                  this.style.display = "inline";
                  this.style.zoom = 1;
                }
              else this.style.display = "inline-block";
          }
          if (c.isArray(a[l])) {
            (h.specialEasing = h.specialEasing || {})[l] = a[l][1];
            a[l] = a[l][0];
          }
        }
        if (h.overflow != null) this.style.overflow = "hidden";
        h.curAnim = c.extend({}, a);
        c.each(a, function (A, C) {
          var J = new c.fx(x, h, A);
          if (vb.test(C)) J[C === "toggle" ? (o ? "show" : "hide") : C](a);
          else {
            var w = wb.exec(C),
              I = J.cur() || 0;
            if (w) {
              var L = parseFloat(w[2]),
                g = w[3] || "px";
              if (g !== "px") {
                c.style(x, A, (L || 1) + g);
                I = ((L || 1) / J.cur()) * I;
                c.style(x, A, I + g);
              }
              if (w[1]) L = (w[1] === "-=" ? -1 : 1) * L + I;
              J.custom(I, L, g);
            } else J.custom(I, C, "");
          }
        });
        return true;
      });
    },
    stop: function (a, b) {
      var d = c.timers;
      a && this.queue([]);
      this.each(function () {
        for (var e = d.length - 1; e >= 0; e--)
          if (d[e].elem === this) {
            b && d[e](true);
            d.splice(e, 1);
          }
      });
      b || this.dequeue();
      return this;
    },
  });
  c.each(
    {
      slideDown: S("show", 1),
      slideUp: S("hide", 1),
      slideToggle: S("toggle", 1),
      fadeIn: { opacity: "show" },
      fadeOut: { opacity: "hide" },
      fadeToggle: { opacity: "toggle" },
    },
    function (a, b) {
      c.fn[a] = function (d, e, f) {
        return this.animate(b, d, e, f);
      };
    }
  );
  c.extend({
    speed: function (a, b, d) {
      var e =
        a && typeof a === "object"
          ? c.extend({}, a)
          : {
              complete: d || (!d && b) || (c.isFunction(a) && a),
              duration: a,
              easing: (d && b) || (b && !c.isFunction(b) && b),
            };
      e.duration = c.fx.off
        ? 0
        : typeof e.duration === "number"
        ? e.duration
        : e.duration in c.fx.speeds
        ? c.fx.speeds[e.duration]
        : c.fx.speeds._default;
      e.old = e.complete;
      e.complete = function () {
        e.queue !== false && c(this).dequeue();
        c.isFunction(e.old) && e.old.call(this);
      };
      return e;
    },
    easing: {
      linear: function (a, b, d, e) {
        return d + e * a;
      },
      swing: function (a, b, d, e) {
        return (-Math.cos(a * Math.PI) / 2 + 0.5) * e + d;
      },
    },
    timers: [],
    fx: function (a, b, d) {
      this.options = b;
      this.elem = a;
      this.prop = d;
      if (!b.orig) b.orig = {};
    },
  });
  c.fx.prototype = {
    update: function () {
      this.options.step && this.options.step.call(this.elem, this.now, this);
      (c.fx.step[this.prop] || c.fx.step._default)(this);
    },
    cur: function () {
      if (
        this.elem[this.prop] != null &&
        (!this.elem.style || this.elem.style[this.prop] == null)
      )
        return this.elem[this.prop];
      var a = parseFloat(c.css(this.elem, this.prop));
      return a && a > -1e4 ? a : 0;
    },
    custom: function (a, b, d) {
      function e(l) {
        return f.step(l);
      }
      var f = this,
        h = c.fx;
      this.startTime = c.now();
      this.start = a;
      this.end = b;
      this.unit = d || this.unit || "px";
      this.now = this.start;
      this.pos = this.state = 0;
      e.elem = this.elem;
      if (e() && c.timers.push(e) && !ba) ba = setInterval(h.tick, h.interval);
    },
    show: function () {
      this.options.orig[this.prop] = c.style(this.elem, this.prop);
      this.options.show = true;
      this.custom(
        this.prop === "width" || this.prop === "height" ? 1 : 0,
        this.cur()
      );
      c(this.elem).show();
    },
    hide: function () {
      this.options.orig[this.prop] = c.style(this.elem, this.prop);
      this.options.hide = true;
      this.custom(this.cur(), 0);
    },
    step: function (a) {
      var b = c.now(),
        d = true;
      if (a || b >= this.options.duration + this.startTime) {
        this.now = this.end;
        this.pos = this.state = 1;
        this.update();
        this.options.curAnim[this.prop] = true;
        for (var e in this.options.curAnim)
          if (this.options.curAnim[e] !== true) d = false;
        if (d) {
          if (this.options.overflow != null && !c.support.shrinkWrapBlocks) {
            var f = this.elem,
              h = this.options;
            c.each(["", "X", "Y"], function (k, o) {
              f.style["overflow" + o] = h.overflow[k];
            });
          }
          this.options.hide && c(this.elem).hide();
          if (this.options.hide || this.options.show)
            for (var l in this.options.curAnim)
              c.style(this.elem, l, this.options.orig[l]);
          this.options.complete.call(this.elem);
        }
        return false;
      } else {
        a = b - this.startTime;
        this.state = a / this.options.duration;
        b = this.options.easing || (c.easing.swing ? "swing" : "linear");
        this.pos = c.easing[
          (this.options.specialEasing &&
            this.options.specialEasing[this.prop]) ||
            b
        ](this.state, a, 0, 1, this.options.duration);
        this.now = this.start + (this.end - this.start) * this.pos;
        this.update();
      }
      return true;
    },
  };
  c.extend(c.fx, {
    tick: function () {
      for (var a = c.timers, b = 0; b < a.length; b++)
        a[b]() || a.splice(b--, 1);
      a.length || c.fx.stop();
    },
    interval: 13,
    stop: function () {
      clearInterval(ba);
      ba = null;
    },
    speeds: { slow: 600, fast: 200, _default: 400 },
    step: {
      opacity: function (a) {
        c.style(a.elem, "opacity", a.now);
      },
      _default: function (a) {
        if (a.elem.style && a.elem.style[a.prop] != null)
          a.elem.style[a.prop] =
            (a.prop === "width" || a.prop === "height"
              ? Math.max(0, a.now)
              : a.now) + a.unit;
        else a.elem[a.prop] = a.now;
      },
    },
  });
  if (c.expr && c.expr.filters)
    c.expr.filters.animated = function (a) {
      return c.grep(c.timers, function (b) {
        return a === b.elem;
      }).length;
    };
  var xb = /^t(?:able|d|h)$/i,
    Ia = /^(?:body|html)$/i;
  c.fn.offset =
    "getBoundingClientRect" in t.documentElement
      ? function (a) {
          var b = this[0],
            d;
          if (a)
            return this.each(function (l) {
              c.offset.setOffset(this, a, l);
            });
          if (!b || !b.ownerDocument) return null;
          if (b === b.ownerDocument.body) return c.offset.bodyOffset(b);
          try {
            d = b.getBoundingClientRect();
          } catch (e) {}
          var f = b.ownerDocument,
            h = f.documentElement;
          if (!d || !c.contains(h, b)) return d || { top: 0, left: 0 };
          b = f.body;
          f = fa(f);
          return {
            top:
              d.top +
              (f.pageYOffset ||
                (c.support.boxModel && h.scrollTop) ||
                b.scrollTop) -
              (h.clientTop || b.clientTop || 0),
            left:
              d.left +
              (f.pageXOffset ||
                (c.support.boxModel && h.scrollLeft) ||
                b.scrollLeft) -
              (h.clientLeft || b.clientLeft || 0),
          };
        }
      : function (a) {
          var b = this[0];
          if (a)
            return this.each(function (x) {
              c.offset.setOffset(this, a, x);
            });
          if (!b || !b.ownerDocument) return null;
          if (b === b.ownerDocument.body) return c.offset.bodyOffset(b);
          c.offset.initialize();
          var d,
            e = b.offsetParent,
            f = b.ownerDocument,
            h = f.documentElement,
            l = f.body;
          d = (f = f.defaultView)
            ? f.getComputedStyle(b, null)
            : b.currentStyle;
          for (
            var k = b.offsetTop, o = b.offsetLeft;
            (b = b.parentNode) && b !== l && b !== h;

          ) {
            if (c.offset.supportsFixedPosition && d.position === "fixed") break;
            d = f ? f.getComputedStyle(b, null) : b.currentStyle;
            k -= b.scrollTop;
            o -= b.scrollLeft;
            if (b === e) {
              k += b.offsetTop;
              o += b.offsetLeft;
              if (
                c.offset.doesNotAddBorder &&
                !(c.offset.doesAddBorderForTableAndCells && xb.test(b.nodeName))
              ) {
                k += parseFloat(d.borderTopWidth) || 0;
                o += parseFloat(d.borderLeftWidth) || 0;
              }
              e = b.offsetParent;
            }
            if (
              c.offset.subtractsBorderForOverflowNotVisible &&
              d.overflow !== "visible"
            ) {
              k += parseFloat(d.borderTopWidth) || 0;
              o += parseFloat(d.borderLeftWidth) || 0;
            }
            d = d;
          }
          if (d.position === "relative" || d.position === "static") {
            k += l.offsetTop;
            o += l.offsetLeft;
          }
          if (c.offset.supportsFixedPosition && d.position === "fixed") {
            k += Math.max(h.scrollTop, l.scrollTop);
            o += Math.max(h.scrollLeft, l.scrollLeft);
          }
          return { top: k, left: o };
        };
  c.offset = {
    initialize: function () {
      var a = t.body,
        b = t.createElement("div"),
        d,
        e,
        f,
        h = parseFloat(c.css(a, "marginTop")) || 0;
      c.extend(b.style, {
        position: "absolute",
        top: 0,
        left: 0,
        margin: 0,
        border: 0,
        width: "1px",
        height: "1px",
        visibility: "hidden",
      });
      b.innerHTML =
        "<div style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;'><div></div></div><table style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>";
      a.insertBefore(b, a.firstChild);
      d = b.firstChild;
      e = d.firstChild;
      f = d.nextSibling.firstChild.firstChild;
      this.doesNotAddBorder = e.offsetTop !== 5;
      this.doesAddBorderForTableAndCells = f.offsetTop === 5;
      e.style.position = "fixed";
      e.style.top = "20px";
      this.supportsFixedPosition = e.offsetTop === 20 || e.offsetTop === 15;
      e.style.position = e.style.top = "";
      d.style.overflow = "hidden";
      d.style.position = "relative";
      this.subtractsBorderForOverflowNotVisible = e.offsetTop === -5;
      this.doesNotIncludeMarginInBodyOffset = a.offsetTop !== h;
      a.removeChild(b);
      c.offset.initialize = c.noop;
    },
    bodyOffset: function (a) {
      var b = a.offsetTop,
        d = a.offsetLeft;
      c.offset.initialize();
      if (c.offset.doesNotIncludeMarginInBodyOffset) {
        b += parseFloat(c.css(a, "marginTop")) || 0;
        d += parseFloat(c.css(a, "marginLeft")) || 0;
      }
      return { top: b, left: d };
    },
    setOffset: function (a, b, d) {
      var e = c.css(a, "position");
      if (e === "static") a.style.position = "relative";
      var f = c(a),
        h = f.offset(),
        l = c.css(a, "top"),
        k = c.css(a, "left"),
        o = e === "absolute" && c.inArray("auto", [l, k]) > -1;
      e = {};
      var x = {};
      if (o) x = f.position();
      l = o ? x.top : parseInt(l, 10) || 0;
      k = o ? x.left : parseInt(k, 10) || 0;
      if (c.isFunction(b)) b = b.call(a, d, h);
      if (b.top != null) e.top = b.top - h.top + l;
      if (b.left != null) e.left = b.left - h.left + k;
      "using" in b ? b.using.call(a, e) : f.css(e);
    },
  };
  c.fn.extend({
    position: function () {
      if (!this[0]) return null;
      var a = this[0],
        b = this.offsetParent(),
        d = this.offset(),
        e = Ia.test(b[0].nodeName) ? { top: 0, left: 0 } : b.offset();
      d.top -= parseFloat(c.css(a, "marginTop")) || 0;
      d.left -= parseFloat(c.css(a, "marginLeft")) || 0;
      e.top += parseFloat(c.css(b[0], "borderTopWidth")) || 0;
      e.left += parseFloat(c.css(b[0], "borderLeftWidth")) || 0;
      return { top: d.top - e.top, left: d.left - e.left };
    },
    offsetParent: function () {
      return this.map(function () {
        for (
          var a = this.offsetParent || t.body;
          a && !Ia.test(a.nodeName) && c.css(a, "position") === "static";

        )
          a = a.offsetParent;
        return a;
      });
    },
  });
  c.each(["Left", "Top"], function (a, b) {
    var d = "scroll" + b;
    c.fn[d] = function (e) {
      var f = this[0],
        h;
      if (!f) return null;
      if (e !== B)
        return this.each(function () {
          if ((h = fa(this)))
            h.scrollTo(!a ? e : c(h).scrollLeft(), a ? e : c(h).scrollTop());
          else this[d] = e;
        });
      else
        return (h = fa(f))
          ? "pageXOffset" in h
            ? h[a ? "pageYOffset" : "pageXOffset"]
            : (c.support.boxModel && h.document.documentElement[d]) ||
              h.document.body[d]
          : f[d];
    };
  });
  c.each(["Height", "Width"], function (a, b) {
    var d = b.toLowerCase();
    c.fn["inner" + b] = function () {
      return this[0] ? parseFloat(c.css(this[0], d, "padding")) : null;
    };
    c.fn["outer" + b] = function (e) {
      return this[0]
        ? parseFloat(c.css(this[0], d, e ? "margin" : "border"))
        : null;
    };
    c.fn[d] = function (e) {
      var f = this[0];
      if (!f) return e == null ? null : this;
      if (c.isFunction(e))
        return this.each(function (l) {
          var k = c(this);
          k[d](e.call(this, l, k[d]()));
        });
      if (c.isWindow(f))
        return (
          (f.document.compatMode === "CSS1Compat" &&
            f.document.documentElement["client" + b]) ||
          f.document.body["client" + b]
        );
      else if (f.nodeType === 9)
        return Math.max(
          f.documentElement["client" + b],
          f.body["scroll" + b],
          f.documentElement["scroll" + b],
          f.body["offset" + b],
          f.documentElement["offset" + b]
        );
      else if (e === B) {
        f = c.css(f, d);
        var h = parseFloat(f);
        return c.isNaN(h) ? f : h;
      } else return this.css(d, typeof e === "string" ? e : e + "px");
    };
  });
})(window);
/**
 * For jQuery versions less than 3.4.0, this replaces the jQuery.extend
 * function with the one from jQuery 3.4.0, slightly modified (documented
 * below) to be compatible with older jQuery versions and browsers.
 *
 * This provides the Object.prototype pollution vulnerability fix to Drupal
 * installations running older jQuery versions, including the versions shipped
 * with Drupal core and https://www.drupal.org/project/jquery_update.
 *
 * @see https://github.com/jquery/jquery/pull/4333
 */

(function (jQuery) {
  // Do not override jQuery.extend() if the jQuery version is already >=3.4.0.
  var versionParts = jQuery.fn.jquery.split(".");
  var majorVersion = parseInt(versionParts[0]);
  var minorVersion = parseInt(versionParts[1]);
  var patchVersion = parseInt(versionParts[2]);
  var isPreReleaseVersion = patchVersion.toString() !== versionParts[2];
  if (
    majorVersion > 3 ||
    (majorVersion === 3 && minorVersion > 4) ||
    (majorVersion === 3 && minorVersion === 4 && patchVersion > 0) ||
    (majorVersion === 3 &&
      minorVersion === 4 &&
      patchVersion === 0 &&
      !isPreReleaseVersion)
  ) {
    return;
  }

  /**
   * This is almost verbatim copied from jQuery 3.4.0.
   *
   * Only two minor changes have been made:
   * - The call to isFunction() is changed to jQuery.isFunction().
   * - The two calls to Array.isArray() is changed to jQuery.isArray().
   *
   * The above two changes ensure compatibility with all older jQuery versions
   * (1.4.4 - 3.3.1) and older browser versions (e.g., IE8).
   */
  jQuery.extend = jQuery.fn.extend = function () {
    var options,
      name,
      src,
      copy,
      copyIsArray,
      clone,
      target = arguments[0] || {},
      i = 1,
      length = arguments.length,
      deep = false;

    // Handle a deep copy situation
    if (typeof target === "boolean") {
      deep = target;

      // Skip the boolean and the target
      target = arguments[i] || {};
      i++;
    }

    // Handle case when target is a string or something (possible in deep copy)
    if (typeof target !== "object" && !jQuery.isFunction(target)) {
      target = {};
    }

    // Extend jQuery itself if only one argument is passed
    if (i === length) {
      target = this;
      i--;
    }

    for (; i < length; i++) {
      // Only deal with non-null/undefined values
      if ((options = arguments[i]) != null) {
        // Extend the base object
        for (name in options) {
          copy = options[name];

          // Prevent Object.prototype pollution
          // Prevent never-ending loop
          if (name === "__proto__" || target === copy) {
            continue;
          }

          // Recurse if we're merging plain objects or arrays
          if (
            deep &&
            copy &&
            (jQuery.isPlainObject(copy) || (copyIsArray = jQuery.isArray(copy)))
          ) {
            src = target[name];

            // Ensure proper type for the source value
            if (copyIsArray && !jQuery.isArray(src)) {
              clone = [];
            } else if (!copyIsArray && !jQuery.isPlainObject(src)) {
              clone = {};
            } else {
              clone = src;
            }
            copyIsArray = false;

            // Never move original objects, clone them
            target[name] = jQuery.extend(deep, clone, copy);

            // Don't bring in undefined values
          } else if (copy !== undefined) {
            target[name] = copy;
          }
        }
      }
    }

    // Return the modified object
    return target;
  };
})(jQuery);
/**
 * jQuery Once Plugin v1.2
 * http://plugins.jquery.com/project/once
 *
 * Dual licensed under the MIT and GPL licenses:
 *   http://www.opensource.org/licenses/mit-license.php
 *   http://www.gnu.org/licenses/gpl.html
 */

(function ($) {
  var cache = {},
    uuid = 0;

  /**
   * Filters elements by whether they have not yet been processed.
   *
   * @param id
   *   (Optional) If this is a string, then it will be used as the CSS class
   *   name that is applied to the elements for determining whether it has
   *   already been processed. The elements will get a class in the form of
   *   "id-processed".
   *
   *   If the id parameter is a function, it will be passed off to the fn
   *   parameter and the id will become a unique identifier, represented as a
   *   number.
   *
   *   When the id is neither a string or a function, it becomes a unique
   *   identifier, depicted as a number. The element's class will then be
   *   represented in the form of "jquery-once-#-processed".
   *
   *   Take note that the id must be valid for usage as an element's class name.
   * @param fn
   *   (Optional) If given, this function will be called for each element that
   *   has not yet been processed. The function's return value follows the same
   *   logic as $.each(). Returning true will continue to the next matched
   *   element in the set, while returning false will entirely break the
   *   iteration.
   */
  $.fn.once = function (id, fn) {
    if (typeof id != "string") {
      // Generate a numeric ID if the id passed can't be used as a CSS class.
      if (!(id in cache)) {
        cache[id] = ++uuid;
      }
      // When the fn parameter is not passed, we interpret it from the id.
      if (!fn) {
        fn = id;
      }
      id = "jquery-once-" + cache[id];
    }
    // Remove elements from the set that have already been processed.
    var name = id + "-processed";
    var elements = this.not("." + name).addClass(name);

    return $.isFunction(fn) ? elements.each(fn) : elements;
  };

  /**
   * Filters elements that have been processed once already.
   *
   * @param id
   *   A required string representing the name of the class which should be used
   *   when filtering the elements. This only filters elements that have already
   *   been processed by the once function. The id should be the same id that
   *   was originally passed to the once() function.
   * @param fn
   *   (Optional) If given, this function will be called for each element that
   *   has not yet been processed. The function's return value follows the same
   *   logic as $.each(). Returning true will continue to the next matched
   *   element in the set, while returning false will entirely break the
   *   iteration.
   */
  $.fn.removeOnce = function (id, fn) {
    var name = id + "-processed";
    var elements = this.filter("." + name).removeClass(name);

    return $.isFunction(fn) ? elements.each(fn) : elements;
  };
})(jQuery);
var Drupal = Drupal || { settings: {}, behaviors: {}, locale: {} };

// Allow other JavaScript libraries to use $.
jQuery.noConflict();

(function ($) {
  /**
   * Override jQuery.fn.init to guard against XSS attacks.
   *
   * See http://bugs.jquery.com/ticket/9521
   */
  var jquery_init = $.fn.init;
  $.fn.init = function (selector, context, rootjQuery) {
    // If the string contains a "#" before a "<", treat it as invalid HTML.
    if (selector && typeof selector === "string") {
      var hash_position = selector.indexOf("#");
      if (hash_position >= 0) {
        var bracket_position = selector.indexOf("<");
        if (bracket_position > hash_position) {
          throw "Syntax error, unrecognized expression: " + selector;
        }
      }
    }
    return jquery_init.call(this, selector, context, rootjQuery);
  };
  $.fn.init.prototype = jquery_init.prototype;

  /**
   * Pre-filter Ajax requests to guard against XSS attacks.
   *
   * See https://github.com/jquery/jquery/issues/2432
   */
  if ($.ajaxPrefilter) {
    // For newer versions of jQuery, use an Ajax prefilter to prevent
    // auto-executing script tags from untrusted domains. This is similar to the
    // fix that is built in to jQuery 3.0 and higher.
    $.ajaxPrefilter(function (s) {
      if (s.crossDomain) {
        s.contents.script = false;
      }
    });
  } else if ($.httpData) {
    // For the version of jQuery that ships with Drupal core, override
    // jQuery.httpData to prevent auto-detecting "script" data types from
    // untrusted domains.
    var jquery_httpData = $.httpData;
    $.httpData = function (xhr, type, s) {
      // @todo Consider backporting code from newer jQuery versions to check for
      //   a cross-domain request here, rather than using Drupal.urlIsLocal() to
      //   block scripts from all URLs that are not on the same site.
      if (!type && !Drupal.urlIsLocal(s.url)) {
        var content_type = xhr.getResponseHeader("content-type") || "";
        if (content_type.indexOf("javascript") >= 0) {
          // Default to a safe data type.
          type = "text";
        }
      }
      return jquery_httpData.call(this, xhr, type, s);
    };
    $.httpData.prototype = jquery_httpData.prototype;
  }

  /**
   * Attach all registered behaviors to a page element.
   *
   * Behaviors are event-triggered actions that attach to page elements, enhancing
   * default non-JavaScript UIs. Behaviors are registered in the Drupal.behaviors
   * object using the method 'attach' and optionally also 'detach' as follows:
   * @code
   *    Drupal.behaviors.behaviorName = {
   *      attach: function (context, settings) {
   *        ...
   *      },
   *      detach: function (context, settings, trigger) {
   *        ...
   *      }
   *    };
   * @endcode
   *
   * Drupal.attachBehaviors is added below to the jQuery ready event and so
   * runs on initial page load. Developers implementing AHAH/Ajax in their
   * solutions should also call this function after new page content has been
   * loaded, feeding in an element to be processed, in order to attach all
   * behaviors to the new content.
   *
   * Behaviors should use
   * @code
   *   $(selector).once('behavior-name', function () {
   *     ...
   *   });
   * @endcode
   * to ensure the behavior is attached only once to a given element. (Doing so
   * enables the reprocessing of given elements, which may be needed on occasion
   * despite the ability to limit behavior attachment to a particular element.)
   *
   * @param context
   *   An element to attach behaviors to. If none is given, the document element
   *   is used.
   * @param settings
   *   An object containing settings for the current context. If none given, the
   *   global Drupal.settings object is used.
   */
  Drupal.attachBehaviors = function (context, settings) {
    context = context || document;
    settings = settings || Drupal.settings;
    // Execute all of them.
    $.each(Drupal.behaviors, function () {
      if ($.isFunction(this.attach)) {
        this.attach(context, settings);
      }
    });
  };

  /**
   * Detach registered behaviors from a page element.
   *
   * Developers implementing AHAH/Ajax in their solutions should call this
   * function before page content is about to be removed, feeding in an element
   * to be processed, in order to allow special behaviors to detach from the
   * content.
   *
   * Such implementations should look for the class name that was added in their
   * corresponding Drupal.behaviors.behaviorName.attach implementation, i.e.
   * behaviorName-processed, to ensure the behavior is detached only from
   * previously processed elements.
   *
   * @param context
   *   An element to detach behaviors from. If none is given, the document element
   *   is used.
   * @param settings
   *   An object containing settings for the current context. If none given, the
   *   global Drupal.settings object is used.
   * @param trigger
   *   A string containing what's causing the behaviors to be detached. The
   *   possible triggers are:
   *   - unload: (default) The context element is being removed from the DOM.
   *   - move: The element is about to be moved within the DOM (for example,
   *     during a tabledrag row swap). After the move is completed,
   *     Drupal.attachBehaviors() is called, so that the behavior can undo
   *     whatever it did in response to the move. Many behaviors won't need to
   *     do anything simply in response to the element being moved, but because
   *     IFRAME elements reload their "src" when being moved within the DOM,
   *     behaviors bound to IFRAME elements (like WYSIWYG editors) may need to
   *     take some action.
   *   - serialize: When an Ajax form is submitted, this is called with the
   *     form as the context. This provides every behavior within the form an
   *     opportunity to ensure that the field elements have correct content
   *     in them before the form is serialized. The canonical use-case is so
   *     that WYSIWYG editors can update the hidden textarea to which they are
   *     bound.
   *
   * @see Drupal.attachBehaviors
   */
  Drupal.detachBehaviors = function (context, settings, trigger) {
    context = context || document;
    settings = settings || Drupal.settings;
    trigger = trigger || "unload";
    // Execute all of them.
    $.each(Drupal.behaviors, function () {
      if ($.isFunction(this.detach)) {
        this.detach(context, settings, trigger);
      }
    });
  };

  /**
   * Encode special characters in a plain-text string for display as HTML.
   *
   * @ingroup sanitization
   */
  Drupal.checkPlain = function (str) {
    var character,
      regex,
      replace = {
        "&": "&amp;",
        "'": "&#39;",
        '"': "&quot;",
        "<": "&lt;",
        ">": "&gt;",
      };
    str = String(str);
    for (character in replace) {
      if (replace.hasOwnProperty(character)) {
        regex = new RegExp(character, "g");
        str = str.replace(regex, replace[character]);
      }
    }
    return str;
  };

  /**
   * Replace placeholders with sanitized values in a string.
   *
   * @param str
   *   A string with placeholders.
   * @param args
   *   An object of replacements pairs to make. Incidences of any key in this
   *   array are replaced with the corresponding value. Based on the first
   *   character of the key, the value is escaped and/or themed:
   *    - !variable: inserted as is
   *    - @variable: escape plain text to HTML (Drupal.checkPlain)
   *    - %variable: escape text and theme as a placeholder for user-submitted
   *      content (checkPlain + Drupal.theme('placeholder'))
   *
   * @see Drupal.t()
   * @ingroup sanitization
   */
  Drupal.formatString = function (str, args) {
    // Transform arguments before inserting them.
    for (var key in args) {
      if (args.hasOwnProperty(key)) {
        switch (key.charAt(0)) {
          // Escaped only.
          case "@":
            args[key] = Drupal.checkPlain(args[key]);
            break;
          // Pass-through.
          case "!":
            break;
          // Escaped and placeholder.
          default:
            args[key] = Drupal.theme("placeholder", args[key]);
            break;
        }
      }
    }

    return Drupal.stringReplace(str, args, null);
  };

  /**
   * Replace substring.
   *
   * The longest keys will be tried first. Once a substring has been replaced,
   * its new value will not be searched again.
   *
   * @param {String} str
   *   A string with placeholders.
   * @param {Object} args
   *   Key-value pairs.
   * @param {Array|null} keys
   *   Array of keys from the "args".  Internal use only.
   *
   * @return {String}
   *   Returns the replaced string.
   */
  Drupal.stringReplace = function (str, args, keys) {
    if (str.length === 0) {
      return str;
    }

    // If the array of keys is not passed then collect the keys from the args.
    if (!$.isArray(keys)) {
      keys = [];
      for (var k in args) {
        if (args.hasOwnProperty(k)) {
          keys.push(k);
        }
      }

      // Order the keys by the character length. The shortest one is the first.
      keys.sort(function (a, b) {
        return a.length - b.length;
      });
    }

    if (keys.length === 0) {
      return str;
    }

    // Take next longest one from the end.
    var key = keys.pop();
    var fragments = str.split(key);

    if (keys.length) {
      for (var i = 0; i < fragments.length; i++) {
        // Process each fragment with a copy of remaining keys.
        fragments[i] = Drupal.stringReplace(fragments[i], args, keys.slice(0));
      }
    }

    return fragments.join(args[key]);
  };

  /**
   * Translate strings to the page language or a given language.
   *
   * See the documentation of the server-side t() function for further details.
   *
   * @param str
   *   A string containing the English string to translate.
   * @param args
   *   An object of replacements pairs to make after translation. Incidences
   *   of any key in this array are replaced with the corresponding value.
   *   See Drupal.formatString().
   *
   * @param options
   *   - 'context' (defaults to the empty context): The context the source string
   *     belongs to.
   *
   * @return
   *   The translated string.
   */
  Drupal.t = function (str, args, options) {
    options = options || {};
    options.context = options.context || "";

    // Fetch the localized version of the string.
    if (
      Drupal.locale.strings &&
      Drupal.locale.strings[options.context] &&
      Drupal.locale.strings[options.context][str]
    ) {
      str = Drupal.locale.strings[options.context][str];
    }

    if (args) {
      str = Drupal.formatString(str, args);
    }
    return str;
  };

  /**
   * Format a string containing a count of items.
   *
   * This function ensures that the string is pluralized correctly. Since Drupal.t() is
   * called by this function, make sure not to pass already-localized strings to it.
   *
   * See the documentation of the server-side format_plural() function for further details.
   *
   * @param count
   *   The item count to display.
   * @param singular
   *   The string for the singular case. Please make sure it is clear this is
   *   singular, to ease translation (e.g. use "1 new comment" instead of "1 new").
   *   Do not use @count in the singular string.
   * @param plural
   *   The string for the plural case. Please make sure it is clear this is plural,
   *   to ease translation. Use @count in place of the item count, as in "@count
   *   new comments".
   * @param args
   *   An object of replacements pairs to make after translation. Incidences
   *   of any key in this array are replaced with the corresponding value.
   *   See Drupal.formatString().
   *   Note that you do not need to include @count in this array.
   *   This replacement is done automatically for the plural case.
   * @param options
   *   The options to pass to the Drupal.t() function.
   * @return
   *   A translated string.
   */
  Drupal.formatPlural = function (count, singular, plural, args, options) {
    args = args || {};
    args["@count"] = count;
    // Determine the index of the plural form.
    var index = Drupal.locale.pluralFormula
      ? Drupal.locale.pluralFormula(args["@count"])
      : args["@count"] == 1
      ? 0
      : 1;

    if (index == 0) {
      return Drupal.t(singular, args, options);
    } else if (index == 1) {
      return Drupal.t(plural, args, options);
    } else {
      args["@count[" + index + "]"] = args["@count"];
      delete args["@count"];
      return Drupal.t(
        plural.replace("@count", "@count[" + index + "]"),
        args,
        options
      );
    }
  };

  /**
   * Returns the passed in URL as an absolute URL.
   *
   * @param url
   *   The URL string to be normalized to an absolute URL.
   *
   * @return
   *   The normalized, absolute URL.
   *
   * @see https://github.com/angular/angular.js/blob/v1.4.4/src/ng/urlUtils.js
   * @see https://grack.com/blog/2009/11/17/absolutizing-url-in-javascript
   * @see https://github.com/jquery/jquery-ui/blob/1.11.4/ui/tabs.js#L53
   */
  Drupal.absoluteUrl = function (url) {
    var urlParsingNode = document.createElement("a");

    // Decode the URL first; this is required by IE <= 6. Decoding non-UTF-8
    // strings may throw an exception.
    try {
      url = decodeURIComponent(url);
    } catch (e) {}

    urlParsingNode.setAttribute("href", url);

    // IE <= 7 normalizes the URL when assigned to the anchor node similar to
    // the other browsers.
    return urlParsingNode.cloneNode(false).href;
  };

  /**
   * Returns true if the URL is within Drupal's base path.
   *
   * @param url
   *   The URL string to be tested.
   *
   * @return
   *   Boolean true if local.
   *
   * @see https://github.com/jquery/jquery-ui/blob/1.11.4/ui/tabs.js#L58
   */
  Drupal.urlIsLocal = function (url) {
    // Always use browser-derived absolute URLs in the comparison, to avoid
    // attempts to break out of the base path using directory traversal.
    var absoluteUrl = Drupal.absoluteUrl(url);
    var protocol = location.protocol;

    // Consider URLs that match this site's base URL but use HTTPS instead of HTTP
    // as local as well.
    if (protocol === "http:" && absoluteUrl.indexOf("https:") === 0) {
      protocol = "https:";
    }
    var baseUrl =
      protocol + "//" + location.host + Drupal.settings.basePath.slice(0, -1);

    // Decoding non-UTF-8 strings may throw an exception.
    try {
      absoluteUrl = decodeURIComponent(absoluteUrl);
    } catch (e) {}
    try {
      baseUrl = decodeURIComponent(baseUrl);
    } catch (e) {}

    // The given URL matches the site's base URL, or has a path under the site's
    // base URL.
    return absoluteUrl === baseUrl || absoluteUrl.indexOf(baseUrl + "/") === 0;
  };

  /**
   * Generate the themed representation of a Drupal object.
   *
   * All requests for themed output must go through this function. It examines
   * the request and routes it to the appropriate theme function. If the current
   * theme does not provide an override function, the generic theme function is
   * called.
   *
   * For example, to retrieve the HTML for text that should be emphasized and
   * displayed as a placeholder inside a sentence, call
   * Drupal.theme('placeholder', text).
   *
   * @param func
   *   The name of the theme function to call.
   * @param ...
   *   Additional arguments to pass along to the theme function.
   * @return
   *   Any data the theme function returns. This could be a plain HTML string,
   *   but also a complex object.
   */
  Drupal.theme = function (func) {
    var args = Array.prototype.slice.apply(arguments, [1]);

    return (Drupal.theme[func] || Drupal.theme.prototype[func]).apply(
      this,
      args
    );
  };

  /**
   * Freeze the current body height (as minimum height). Used to prevent
   * unnecessary upwards scrolling when doing DOM manipulations.
   */
  Drupal.freezeHeight = function () {
    Drupal.unfreezeHeight();
    $('<div id="freeze-height"></div>')
      .css({
        position: "absolute",
        top: "0px",
        left: "0px",
        width: "1px",
        height: $("body").css("height"),
      })
      .appendTo("body");
  };

  /**
   * Unfreeze the body height.
   */
  Drupal.unfreezeHeight = function () {
    $("#freeze-height").remove();
  };

  /**
   * Encodes a Drupal path for use in a URL.
   *
   * For aesthetic reasons slashes are not escaped.
   */
  Drupal.encodePath = function (item, uri) {
    uri = uri || location.href;
    return encodeURIComponent(item).replace(/%2F/g, "/");
  };

  /**
   * Get the text selection in a textarea.
   */
  Drupal.getSelection = function (element) {
    if (typeof element.selectionStart != "number" && document.selection) {
      // The current selection.
      var range1 = document.selection.createRange();
      var range2 = range1.duplicate();
      // Select all text.
      range2.moveToElementText(element);
      // Now move 'dummy' end point to end point of original range.
      range2.setEndPoint("EndToEnd", range1);
      // Now we can calculate start and end points.
      var start = range2.text.length - range1.text.length;
      var end = start + range1.text.length;
      return { start: start, end: end };
    }
    return { start: element.selectionStart, end: element.selectionEnd };
  };

  /**
   * Add a global variable which determines if the window is being unloaded.
   *
   * This is primarily used by Drupal.displayAjaxError().
   */
  Drupal.beforeUnloadCalled = false;
  $(window).bind("beforeunload pagehide", function () {
    Drupal.beforeUnloadCalled = true;
  });

  /**
   * Displays a JavaScript error from an Ajax response when appropriate to do so.
   */
  Drupal.displayAjaxError = function (message) {
    // Skip displaying the message if the user deliberately aborted (for example,
    // by reloading the page or navigating to a different page) while the Ajax
    // request was still ongoing. See, for example, the discussion at
    // http://stackoverflow.com/questions/699941/handle-ajax-error-when-a-user-clicks-refresh.
    if (!Drupal.beforeUnloadCalled) {
      alert(message);
    }
  };

  /**
   * Build an error message from an Ajax response.
   */
  Drupal.ajaxError = function (xmlhttp, uri, customMessage) {
    var statusCode, statusText, pathText, responseText, readyStateText, message;
    if (xmlhttp.status) {
      statusCode =
        "\n" +
        Drupal.t("An AJAX HTTP error occurred.") +
        "\n" +
        Drupal.t("HTTP Result Code: !status", { "!status": xmlhttp.status });
    } else {
      statusCode =
        "\n" + Drupal.t("An AJAX HTTP request terminated abnormally.");
    }
    statusCode += "\n" + Drupal.t("Debugging information follows.");
    pathText = "\n" + Drupal.t("Path: !uri", { "!uri": uri });
    statusText = "";
    // In some cases, when statusCode == 0, xmlhttp.statusText may not be defined.
    // Unfortunately, testing for it with typeof, etc, doesn't seem to catch that
    // and the test causes an exception. So we need to catch the exception here.
    try {
      statusText =
        "\n" +
        Drupal.t("StatusText: !statusText", {
          "!statusText": $.trim(xmlhttp.statusText),
        });
    } catch (e) {}

    responseText = "";
    // Again, we don't have a way to know for sure whether accessing
    // xmlhttp.responseText is going to throw an exception. So we'll catch it.
    try {
      responseText =
        "\n" +
        Drupal.t("ResponseText: !responseText", {
          "!responseText": $.trim(xmlhttp.responseText),
        });
    } catch (e) {}

    // Make the responseText more readable by stripping HTML tags and newlines.
    responseText = responseText.replace(/<("[^"]*"|'[^']*'|[^'">])*>/gi, "");
    responseText = responseText.replace(/[\n]+\s+/g, "\n");

    // We don't need readyState except for status == 0.
    readyStateText =
      xmlhttp.status == 0
        ? "\n" +
          Drupal.t("ReadyState: !readyState", {
            "!readyState": xmlhttp.readyState,
          })
        : "";

    // Additional message beyond what the xmlhttp object provides.
    customMessage = customMessage
      ? "\n" +
        Drupal.t("CustomMessage: !customMessage", {
          "!customMessage": customMessage,
        })
      : "";

    message =
      statusCode +
      pathText +
      statusText +
      customMessage +
      responseText +
      readyStateText;
    return message;
  };

  // Class indicating that JS is enabled; used for styling purpose.
  $("html").addClass("js");

  // 'js enabled' cookie.
  document.cookie = "has_js=1; path=/";

  /**
   * Additions to jQuery.support.
   */
  $(function () {
    /**
     * Boolean indicating whether or not position:fixed is supported.
     */
    if (jQuery.support.positionFixed === undefined) {
      var el = $('<div style="position:fixed; top:10px" />').appendTo(
        document.body
      );
      jQuery.support.positionFixed = el[0].offsetTop === 10;
      el.remove();
    }
  });

  //Attach all behaviors.
  $(function () {
    Drupal.attachBehaviors(document, Drupal.settings);
  });

  /**
   * The default themes.
   */
  Drupal.theme.prototype = {
    /**
     * Formats text for emphasized display in a placeholder inside a sentence.
     *
     * @param str
     *   The text to format (plain-text).
     * @return
     *   The formatted text (html).
     */
    placeholder: function (str) {
      return '<em class="placeholder">' + Drupal.checkPlain(str) + "</em>";
    },
  };
})(jQuery);
/*jslint bitwise: true, eqeqeq: true, immed: true, newcap: true, nomen: false,
 onevar: false, plusplus: false, regexp: true, undef: true, white: true, indent: 2
 browser: true */

/*global jQuery: true Drupal: true window: true ThemeBuilder: true */

(function ($) {
  /**
   * Acquia object is created if it doesn't exist.
   */
  Drupal.behaviors.acquia = Drupal.behaviors.acquia || {};

  /**
   * Attach handler.
   */
  Drupal.behaviors.acquia = {
    equalCols: true,
    delay: NaN,
    attach: function (context, settings) {
      var addCommentTrigger = $(".comment-add a");
      var addCommentForm = $("#comment-new");
      var themebuilderIsOpen = Drupal.behaviors.acquia.checkThemeBuilderStatus();
      // Add only if the comment form exists on the page.
      if (addCommentForm.length > 0) {
        // Bind click event handlers to all .comment_add links
        addCommentTrigger.bind(
          "click",
          { scrollTarget: addCommentForm },
          Drupal.behaviors.acquia.scrollTo
        );
      }
      // Run functions that require a slight delay so that the screen can finish painting
      Drupal.behaviors.acquia.delay = setInterval(
        Drupal.behaviors.acquia.delayFunctions,
        750
      );
      // Run the following only if the ThemeBuilder is closed
      if (!themebuilderIsOpen) {
        Drupal.behaviors.acquia.enhanceRotatingBanner();
      }
    },
  };

  /**
   * Run functions that require a slight delay so that the screen can finish painting
   */
  Drupal.behaviors.acquia.delayFunctions = function () {
    // Clear the timeout
    clearTimeout(Drupal.behaviors.acquia.delay);
    // Set all sidebars to the height of their parent container.
    Drupal.behaviors.acquia.equalizeColumns();
  };

  /**
   * Scrolls the page to the clicked element's location
   * @param {event} event
   *   The event.
   */
  Drupal.behaviors.acquia.scrollTo = function (event) {
    // Keep the page from jumping to the hash target
    event.preventDefault();
    var toolbar = {};
    toolbar.menuHeight = $(".toolbar-menu", "#toolbar").height() || 0;
    toolbar.drawerHeight = $(".toolbar-drawer", "#toolbar").height() || 0;
    var targetOffset =
      event.data.scrollTarget.offset().top -
      toolbar.menuHeight -
      toolbar.drawerHeight;
    $("html,body").animate({ scrollTop: targetOffset }, 1000);
  };

  /**
   * Equalizes all .col elements in a stack to the height of the tallest .col
   */
  Drupal.behaviors.acquia.equalizeColumns = function () {
    if (Drupal.behaviors.acquia.equalCols) {
      $("body").once("acquia-equalcols", function () {
        var $stacks = $(".box");
        for (var i = 0; i < $stacks.length; i++) {
          // Get the current stack reference
          var _this = $stacks.eq(i);
          // Instantiate the boxHeight variable
          var boxHeight = 0;
          // Get the columns in the stack
          var cols = _this.find(".tb-height-balance");
          // We don't need to balance the columns if only one column is present
          if (cols.length > 1) {
            for (var j = 0; j < cols.size(); j++) {
              var col = cols.eq(j);
              // Only balance the height if the col is visible
              if (
                col.css("display") !== "none" &&
                col.css("visibility") !== "hidden"
              ) {
                var colHeight = col.outerHeight(false);
                if (colHeight > boxHeight) {
                  // If the height of the col is more than previous height, use it
                  boxHeight = colHeight;
                }
              }
            }
          }
          // Only set the min-heights if boxHeight was assigned a real value
          if (boxHeight > 0) {
            cols.css("min-height", boxHeight);
          }
        }
      });
    }
  };

  /**
   * Adds a click handler to the layout wrapper of the rotating banner.  Otherwise this element
   * would obsure the link wrapped around the image element
   */
  Drupal.behaviors.acquia.enhanceRotatingBanner = function () {
    var layouts = $(".layout-wrapper", ".rotating-banner");
    var len = layouts.length;
    if (len > 0) {
      while (len--) {
        Drupal.behaviors.acquia.pseudoLink(layouts.eq(len));
      }
    }
  };

  /**
   * Navigates to the designated element's data-link attribute value
   *
   * @param {DomElement} element
   *   Element that the pseudo link will be applied to
   *
   * @attribute
   *   data-link is an element attribute that uses the HTML5 data- pattern to store information in the DOM
   */
  Drupal.behaviors.acquia.pseudoLink = function (element) {
    var link = element.attr("data-link");
    if (link && link.length > 0) {
      // Bind a click event to the slide layout wrapper if it has a link, stored
      // in data-link attribute.
      element.click(function (event) {
        // The rotating banner may have text which could be a link. When the
        // visitor clicks the link there is nothing else to do, especially that
        // the link might be an external url which is being opened in a new
        // window / tab thanks to ext_link module.
        var link_parent = $(event.target, event.currentTarget).closest("a");
        if (link_parent.length == 0) {
          window.location = $(event.currentTarget).attr("data-link");
        }
      });
    }
  };

  /**
   * Determines if the ThemeBuilder is open
   *
   * @return {Boolean}
   *   returns a boolean that represents the open state of the ThemeBuilder. True equals open.
   */
  Drupal.behaviors.acquia.checkThemeBuilderStatus = function () {
    return $("body").hasClass("themebuilder") ? true : false;
  };
})(jQuery);
(function ($) {
  function preventSubmit(event) {
    return false;
  }

  function handleInitialSubmit(event) {
    var f = $.proxy(preventSubmit, this);
    $(this)
      .unbind(".preventMultiSubmits")
      .bind("submit.preventMultiSubmits", f);
  }

  Drupal.behaviors.preventMultiSubmits = {
    attach: function (context, settings) {
      $(".comment-form").once("prevent-multi-submits", function (index) {
        var f = $.proxy(handleInitialSubmit, this);
        $(this).bind("submit.preventMultiSubmits", f);
      });
    },
  };
})(jQuery);
(function ($) {
  var self = this;
  (function (name, global, definition) {
    if (typeof module !== "undefined") {
      module.exports = definition(name, global);
    } else {
      if (typeof define === "function" && typeof define.amd === "object") {
        define(definition);
      } else {
        global[name] = definition(name, global);
      }
    }
  })("PubSub", (typeof window !== "undefined" && window) || this, function (
    name,
    global
  ) {
    var PubSub = {
        name: "PubSubJS",
        version: "1.3.1-dev",
      },
      messages = {},
      lastUid = -1;
    function throwException(ex) {
      return function reThrowException() {
        throw ex;
      };
    }

    function callSubscriber(subscriber, message, data) {
      try {
        subscriber(message, data);
      } catch (ex) {
        setTimeout(throwException(ex), 0);
      }
    }

    function deliverMessage(originalMessage, matchedMessage, data) {
      var subscribers = messages[matchedMessage],
        i,
        j;
      if (!messages.hasOwnProperty(matchedMessage)) {
        return;
      }
      for (i = 0, j = subscribers.length; i < j; i++) {
        callSubscriber(subscribers[i].func, originalMessage, data);
      }
    }

    function createDeliveryFunction(message, data) {
      return function deliverNamespaced() {
        var topic = String(message),
          position = topic.lastIndexOf(".");
        deliverMessage(message, message, data);
        while (position !== -1) {
          topic = topic.substr(0, position);
          position = topic.lastIndexOf(".");
          deliverMessage(message, topic, data);
        }
      };
    }

    function messageHasSubscribers(message) {
      var topic = String(message),
        found = messages.hasOwnProperty(topic),
        position = topic.lastIndexOf(".");
      while (!found && position !== -1) {
        topic = topic.substr(0, position);
        position = topic.lastIndexOf(".");
        found = messages.hasOwnProperty(topic);
      }
      return found;
    }

    function publish(message, data, sync) {
      var deliver = createDeliveryFunction(message, data),
        hasSubscribers = messageHasSubscribers(message);
      if (!hasSubscribers) {
        return false;
      }
      if (sync === true) {
        deliver();
      } else {
        setTimeout(deliver, 0);
      }
      return true;
    }

    PubSub.publish = function (message, data) {
      return publish(message, data, false);
    };
    PubSub.publishSync = function (message, data) {
      return publish(message, data, true);
    };
    PubSub.subscribe = function (message, func) {
      if (!messages.hasOwnProperty(message)) {
        messages[message] = [];
      }
      var token = String(++lastUid);
      messages[message].push({
        token: token,
        func: func,
      });
      return token;
    };
    PubSub.unsubscribe = function (tokenOrFunction) {
      var isToken = typeof tokenOrFunction === "string",
        key = isToken ? "token" : "func",
        succesfulReturnValue = isToken ? tokenOrFunction : true,
        result = false,
        m,
        i,
        j;
      for (m in messages) {
        if (messages.hasOwnProperty(m)) {
          for (i = messages[m].length - 1; i >= 0; i--) {
            if (messages[m][i][key] === tokenOrFunction) {
              messages[m].splice(i, 1);
              result = succesfulReturnValue;
              if (isToken) {
                return result;
              }
            }
          }
        }
      }
      return result;
    };
    return PubSub;
  });
  if ($.pubsub) {
    $.error(
      "pubsub is already defined on jQuery, skipping integration of PubSubJS"
    );
    return false;
  }
  function pubsub(method) {
    if (PubSub.hasOwnProperty(method) && typeof PubSub[method] === "function") {
      return PubSub[method].apply(
        self,
        Array.prototype.slice.call(arguments, 1)
      );
    } else {
      $.error("Method " + method + " does not exist on jQuery.pubsub");
    }
  }

  pubsub.version = PubSub.name + " " + PubSub.version;
  $.pubsub = pubsub;
})(jQuery);
/**
 * Klass.js - copyright @dedfat
 * version 1.0
 * https://github.com/ded/klass
 * Follow our software http://twitter.com/dedfat :)
 * MIT License
 */
!(function (a, b) {
  function j(a, b) {
    function c() {}
    c[e] = this[e];
    var d = this,
      g = new c(),
      h = f(a),
      j = h ? a : this,
      k = h ? {} : a,
      l = function () {
        this.initialize
          ? this.initialize.apply(this, arguments)
          : (b || (h && d.apply(this, arguments)), j.apply(this, arguments));
      };
    (l.methods = function (a) {
      i(g, a, d), (l[e] = g);
      return this;
    }),
      (l.methods.call(l, k).prototype.constructor = l),
      (l.extend = arguments.callee),
      (l[e].implement = l.statics = function (a, b) {
        (a =
          typeof a == "string"
            ? (function () {
                var c = {};
                c[a] = b;
                return c;
              })()
            : a),
          i(this, a, d);
        return this;
      });
    return l;
  }
  function i(a, b, d) {
    for (var g in b)
      b.hasOwnProperty(g) &&
        (a[g] = f(b[g]) && f(d[e][g]) && c.test(b[g]) ? h(g, b[g], d) : b[g]);
  }
  function h(a, b, c) {
    return function () {
      var d = this.supr;
      this.supr = c[e][a];
      var f = b.apply(this, arguments);
      this.supr = d;
      return f;
    };
  }
  function g(a) {
    return j.call(f(a) ? a : d, a, 1);
  }
  var c = /xyz/.test(function () {
      xyz;
    })
      ? /\bsupr\b/
      : /.*/,
    d = function () {},
    e = "prototype",
    f = function (a) {
      return typeof a === b;
    };
  if (typeof module != "undefined" && module.exports) module.exports = g;
  else {
    var k = a.klass;
    (g.noConflict = function () {
      a.klass = k;
      return this;
    }),
      (a.klass = g);
  }
})(this, "function");
/*! jQuery v1.8.3 jquery.com | jquery.org/license */
(function (e, t) {
  function _(e) {
    var t = (M[e] = {});
    return (
      v.each(e.split(y), function (e, n) {
        t[n] = !0;
      }),
      t
    );
  }
  function H(e, n, r) {
    if (r === t && e.nodeType === 1) {
      var i = "data-" + n.replace(P, "-$1").toLowerCase();
      r = e.getAttribute(i);
      if (typeof r == "string") {
        try {
          r =
            r === "true"
              ? !0
              : r === "false"
              ? !1
              : r === "null"
              ? null
              : +r + "" === r
              ? +r
              : D.test(r)
              ? v.parseJSON(r)
              : r;
        } catch (s) {}
        v.data(e, n, r);
      } else r = t;
    }
    return r;
  }
  function B(e) {
    var t;
    for (t in e) {
      if (t === "data" && v.isEmptyObject(e[t])) continue;
      if (t !== "toJSON") return !1;
    }
    return !0;
  }
  function et() {
    return !1;
  }
  function tt() {
    return !0;
  }
  function ut(e) {
    return !e || !e.parentNode || e.parentNode.nodeType === 11;
  }
  function at(e, t) {
    do e = e[t];
    while (e && e.nodeType !== 1);
    return e;
  }
  function ft(e, t, n) {
    t = t || 0;
    if (v.isFunction(t))
      return v.grep(e, function (e, r) {
        var i = !!t.call(e, r, e);
        return i === n;
      });
    if (t.nodeType)
      return v.grep(e, function (e, r) {
        return (e === t) === n;
      });
    if (typeof t == "string") {
      var r = v.grep(e, function (e) {
        return e.nodeType === 1;
      });
      if (it.test(t)) return v.filter(t, r, !n);
      t = v.filter(t, r);
    }
    return v.grep(e, function (e, r) {
      return v.inArray(e, t) >= 0 === n;
    });
  }
  function lt(e) {
    var t = ct.split("|"),
      n = e.createDocumentFragment();
    if (n.createElement) while (t.length) n.createElement(t.pop());
    return n;
  }
  function Lt(e, t) {
    return (
      e.getElementsByTagName(t)[0] ||
      e.appendChild(e.ownerDocument.createElement(t))
    );
  }
  function At(e, t) {
    if (t.nodeType !== 1 || !v.hasData(e)) return;
    var n,
      r,
      i,
      s = v._data(e),
      o = v._data(t, s),
      u = s.events;
    if (u) {
      delete o.handle, (o.events = {});
      for (n in u)
        for (r = 0, i = u[n].length; r < i; r++) v.event.add(t, n, u[n][r]);
    }
    o.data && (o.data = v.extend({}, o.data));
  }
  function Ot(e, t) {
    var n;
    if (t.nodeType !== 1) return;
    t.clearAttributes && t.clearAttributes(),
      t.mergeAttributes && t.mergeAttributes(e),
      (n = t.nodeName.toLowerCase()),
      n === "object"
        ? (t.parentNode && (t.outerHTML = e.outerHTML),
          v.support.html5Clone &&
            e.innerHTML &&
            !v.trim(t.innerHTML) &&
            (t.innerHTML = e.innerHTML))
        : n === "input" && Et.test(e.type)
        ? ((t.defaultChecked = t.checked = e.checked),
          t.value !== e.value && (t.value = e.value))
        : n === "option"
        ? (t.selected = e.defaultSelected)
        : n === "input" || n === "textarea"
        ? (t.defaultValue = e.defaultValue)
        : n === "script" && t.text !== e.text && (t.text = e.text),
      t.removeAttribute(v.expando);
  }
  function Mt(e) {
    return typeof e.getElementsByTagName != "undefined"
      ? e.getElementsByTagName("*")
      : typeof e.querySelectorAll != "undefined"
      ? e.querySelectorAll("*")
      : [];
  }
  function _t(e) {
    Et.test(e.type) && (e.defaultChecked = e.checked);
  }
  function Qt(e, t) {
    if (t in e) return t;
    var n = t.charAt(0).toUpperCase() + t.slice(1),
      r = t,
      i = Jt.length;
    while (i--) {
      t = Jt[i] + n;
      if (t in e) return t;
    }
    return r;
  }
  function Gt(e, t) {
    return (
      (e = t || e),
      v.css(e, "display") === "none" || !v.contains(e.ownerDocument, e)
    );
  }
  function Yt(e, t) {
    var n,
      r,
      i = [],
      s = 0,
      o = e.length;
    for (; s < o; s++) {
      n = e[s];
      if (!n.style) continue;
      (i[s] = v._data(n, "olddisplay")),
        t
          ? (!i[s] && n.style.display === "none" && (n.style.display = ""),
            n.style.display === "" &&
              Gt(n) &&
              (i[s] = v._data(n, "olddisplay", nn(n.nodeName))))
          : ((r = Dt(n, "display")),
            !i[s] && r !== "none" && v._data(n, "olddisplay", r));
    }
    for (s = 0; s < o; s++) {
      n = e[s];
      if (!n.style) continue;
      if (!t || n.style.display === "none" || n.style.display === "")
        n.style.display = t ? i[s] || "" : "none";
    }
    return e;
  }
  function Zt(e, t, n) {
    var r = Rt.exec(t);
    return r ? Math.max(0, r[1] - (n || 0)) + (r[2] || "px") : t;
  }
  function en(e, t, n, r) {
    var i = n === (r ? "border" : "content") ? 4 : t === "width" ? 1 : 0,
      s = 0;
    for (; i < 4; i += 2)
      n === "margin" && (s += v.css(e, n + $t[i], !0)),
        r
          ? (n === "content" &&
              (s -= parseFloat(Dt(e, "padding" + $t[i])) || 0),
            n !== "margin" &&
              (s -= parseFloat(Dt(e, "border" + $t[i] + "Width")) || 0))
          : ((s += parseFloat(Dt(e, "padding" + $t[i])) || 0),
            n !== "padding" &&
              (s += parseFloat(Dt(e, "border" + $t[i] + "Width")) || 0));
    return s;
  }
  function tn(e, t, n) {
    var r = t === "width" ? e.offsetWidth : e.offsetHeight,
      i = !0,
      s = v.support.boxSizing && v.css(e, "boxSizing") === "border-box";
    if (r <= 0 || r == null) {
      r = Dt(e, t);
      if (r < 0 || r == null) r = e.style[t];
      if (Ut.test(r)) return r;
      (i = s && (v.support.boxSizingReliable || r === e.style[t])),
        (r = parseFloat(r) || 0);
    }
    return r + en(e, t, n || (s ? "border" : "content"), i) + "px";
  }
  function nn(e) {
    if (Wt[e]) return Wt[e];
    var t = v("<" + e + ">").appendTo(i.body),
      n = t.css("display");
    t.remove();
    if (n === "none" || n === "") {
      Pt = i.body.appendChild(
        Pt ||
          v.extend(i.createElement("iframe"), {
            frameBorder: 0,
            width: 0,
            height: 0,
          })
      );
      if (!Ht || !Pt.createElement)
        (Ht = (Pt.contentWindow || Pt.contentDocument).document),
          Ht.write("<!doctype html><html><body>"),
          Ht.close();
      (t = Ht.body.appendChild(Ht.createElement(e))),
        (n = Dt(t, "display")),
        i.body.removeChild(Pt);
    }
    return (Wt[e] = n), n;
  }
  function fn(e, t, n, r) {
    var i;
    if (v.isArray(t))
      v.each(t, function (t, i) {
        n || sn.test(e)
          ? r(e, i)
          : fn(e + "[" + (typeof i == "object" ? t : "") + "]", i, n, r);
      });
    else if (!n && v.type(t) === "object")
      for (i in t) fn(e + "[" + i + "]", t[i], n, r);
    else r(e, t);
  }
  function Cn(e) {
    return function (t, n) {
      typeof t != "string" && ((n = t), (t = "*"));
      var r,
        i,
        s,
        o = t.toLowerCase().split(y),
        u = 0,
        a = o.length;
      if (v.isFunction(n))
        for (; u < a; u++)
          (r = o[u]),
            (s = /^\+/.test(r)),
            s && (r = r.substr(1) || "*"),
            (i = e[r] = e[r] || []),
            i[s ? "unshift" : "push"](n);
    };
  }
  function kn(e, n, r, i, s, o) {
    (s = s || n.dataTypes[0]), (o = o || {}), (o[s] = !0);
    var u,
      a = e[s],
      f = 0,
      l = a ? a.length : 0,
      c = e === Sn;
    for (; f < l && (c || !u); f++)
      (u = a[f](n, r, i)),
        typeof u == "string" &&
          (!c || o[u]
            ? (u = t)
            : (n.dataTypes.unshift(u), (u = kn(e, n, r, i, u, o))));
    return (c || !u) && !o["*"] && (u = kn(e, n, r, i, "*", o)), u;
  }
  function Ln(e, n) {
    var r,
      i,
      s = v.ajaxSettings.flatOptions || {};
    for (r in n) n[r] !== t && ((s[r] ? e : i || (i = {}))[r] = n[r]);
    i && v.extend(!0, e, i);
  }
  function An(e, n, r) {
    var i,
      s,
      o,
      u,
      a = e.contents,
      f = e.dataTypes,
      l = e.responseFields;
    for (s in l) s in r && (n[l[s]] = r[s]);
    while (f[0] === "*")
      f.shift(),
        i === t && (i = e.mimeType || n.getResponseHeader("content-type"));
    if (i)
      for (s in a)
        if (a[s] && a[s].test(i)) {
          f.unshift(s);
          break;
        }
    if (f[0] in r) o = f[0];
    else {
      for (s in r) {
        if (!f[0] || e.converters[s + " " + f[0]]) {
          o = s;
          break;
        }
        u || (u = s);
      }
      o = o || u;
    }
    if (o) return o !== f[0] && f.unshift(o), r[o];
  }
  function On(e, t) {
    var n,
      r,
      i,
      s,
      o = e.dataTypes.slice(),
      u = o[0],
      a = {},
      f = 0;
    e.dataFilter && (t = e.dataFilter(t, e.dataType));
    if (o[1]) for (n in e.converters) a[n.toLowerCase()] = e.converters[n];
    for (; (i = o[++f]); )
      if (i !== "*") {
        if (u !== "*" && u !== i) {
          n = a[u + " " + i] || a["* " + i];
          if (!n)
            for (r in a) {
              s = r.split(" ");
              if (s[1] === i) {
                n = a[u + " " + s[0]] || a["* " + s[0]];
                if (n) {
                  n === !0
                    ? (n = a[r])
                    : a[r] !== !0 && ((i = s[0]), o.splice(f--, 0, i));
                  break;
                }
              }
            }
          if (n !== !0)
            if (n && e["throws"]) t = n(t);
            else
              try {
                t = n(t);
              } catch (l) {
                return {
                  state: "parsererror",
                  error: n ? l : "No conversion from " + u + " to " + i,
                };
              }
        }
        u = i;
      }
    return { state: "success", data: t };
  }
  function Fn() {
    try {
      return new e.XMLHttpRequest();
    } catch (t) {}
  }
  function In() {
    try {
      return new e.ActiveXObject("Microsoft.XMLHTTP");
    } catch (t) {}
  }
  function $n() {
    return (
      setTimeout(function () {
        qn = t;
      }, 0),
      (qn = v.now())
    );
  }
  function Jn(e, t) {
    v.each(t, function (t, n) {
      var r = (Vn[t] || []).concat(Vn["*"]),
        i = 0,
        s = r.length;
      for (; i < s; i++) if (r[i].call(e, t, n)) return;
    });
  }
  function Kn(e, t, n) {
    var r,
      i = 0,
      s = 0,
      o = Xn.length,
      u = v.Deferred().always(function () {
        delete a.elem;
      }),
      a = function () {
        var t = qn || $n(),
          n = Math.max(0, f.startTime + f.duration - t),
          r = n / f.duration || 0,
          i = 1 - r,
          s = 0,
          o = f.tweens.length;
        for (; s < o; s++) f.tweens[s].run(i);
        return (
          u.notifyWith(e, [f, i, n]),
          i < 1 && o ? n : (u.resolveWith(e, [f]), !1)
        );
      },
      f = u.promise({
        elem: e,
        props: v.extend({}, t),
        opts: v.extend(!0, { specialEasing: {} }, n),
        originalProperties: t,
        originalOptions: n,
        startTime: qn || $n(),
        duration: n.duration,
        tweens: [],
        createTween: function (t, n, r) {
          var i = v.Tween(
            e,
            f.opts,
            t,
            n,
            f.opts.specialEasing[t] || f.opts.easing
          );
          return f.tweens.push(i), i;
        },
        stop: function (t) {
          var n = 0,
            r = t ? f.tweens.length : 0;
          for (; n < r; n++) f.tweens[n].run(1);
          return t ? u.resolveWith(e, [f, t]) : u.rejectWith(e, [f, t]), this;
        },
      }),
      l = f.props;
    Qn(l, f.opts.specialEasing);
    for (; i < o; i++) {
      r = Xn[i].call(f, e, l, f.opts);
      if (r) return r;
    }
    return (
      Jn(f, l),
      v.isFunction(f.opts.start) && f.opts.start.call(e, f),
      v.fx.timer(v.extend(a, { anim: f, queue: f.opts.queue, elem: e })),
      f
        .progress(f.opts.progress)
        .done(f.opts.done, f.opts.complete)
        .fail(f.opts.fail)
        .always(f.opts.always)
    );
  }
  function Qn(e, t) {
    var n, r, i, s, o;
    for (n in e) {
      (r = v.camelCase(n)),
        (i = t[r]),
        (s = e[n]),
        v.isArray(s) && ((i = s[1]), (s = e[n] = s[0])),
        n !== r && ((e[r] = s), delete e[n]),
        (o = v.cssHooks[r]);
      if (o && "expand" in o) {
        (s = o.expand(s)), delete e[r];
        for (n in s) n in e || ((e[n] = s[n]), (t[n] = i));
      } else t[r] = i;
    }
  }
  function Gn(e, t, n) {
    var r,
      i,
      s,
      o,
      u,
      a,
      f,
      l,
      c,
      h = this,
      p = e.style,
      d = {},
      m = [],
      g = e.nodeType && Gt(e);
    n.queue ||
      ((l = v._queueHooks(e, "fx")),
      l.unqueued == null &&
        ((l.unqueued = 0),
        (c = l.empty.fire),
        (l.empty.fire = function () {
          l.unqueued || c();
        })),
      l.unqueued++,
      h.always(function () {
        h.always(function () {
          l.unqueued--, v.queue(e, "fx").length || l.empty.fire();
        });
      })),
      e.nodeType === 1 &&
        ("height" in t || "width" in t) &&
        ((n.overflow = [p.overflow, p.overflowX, p.overflowY]),
        v.css(e, "display") === "inline" &&
          v.css(e, "float") === "none" &&
          (!v.support.inlineBlockNeedsLayout || nn(e.nodeName) === "inline"
            ? (p.display = "inline-block")
            : (p.zoom = 1))),
      n.overflow &&
        ((p.overflow = "hidden"),
        v.support.shrinkWrapBlocks ||
          h.done(function () {
            (p.overflow = n.overflow[0]),
              (p.overflowX = n.overflow[1]),
              (p.overflowY = n.overflow[2]);
          }));
    for (r in t) {
      s = t[r];
      if (Un.exec(s)) {
        delete t[r], (a = a || s === "toggle");
        if (s === (g ? "hide" : "show")) continue;
        m.push(r);
      }
    }
    o = m.length;
    if (o) {
      (u = v._data(e, "fxshow") || v._data(e, "fxshow", {})),
        "hidden" in u && (g = u.hidden),
        a && (u.hidden = !g),
        g
          ? v(e).show()
          : h.done(function () {
              v(e).hide();
            }),
        h.done(function () {
          var t;
          v.removeData(e, "fxshow", !0);
          for (t in d) v.style(e, t, d[t]);
        });
      for (r = 0; r < o; r++)
        (i = m[r]),
          (f = h.createTween(i, g ? u[i] : 0)),
          (d[i] = u[i] || v.style(e, i)),
          i in u ||
            ((u[i] = f.start),
            g &&
              ((f.end = f.start),
              (f.start = i === "width" || i === "height" ? 1 : 0)));
    }
  }
  function Yn(e, t, n, r, i) {
    return new Yn.prototype.init(e, t, n, r, i);
  }
  function Zn(e, t) {
    var n,
      r = { height: e },
      i = 0;
    t = t ? 1 : 0;
    for (; i < 4; i += 2 - t)
      (n = $t[i]), (r["margin" + n] = r["padding" + n] = e);
    return t && (r.opacity = r.width = e), r;
  }
  function tr(e) {
    return v.isWindow(e)
      ? e
      : e.nodeType === 9
      ? e.defaultView || e.parentWindow
      : !1;
  }
  var n,
    r,
    i = e.document,
    s = e.location,
    o = e.navigator,
    u = e.jQuery,
    a = e.$,
    f = Array.prototype.push,
    l = Array.prototype.slice,
    c = Array.prototype.indexOf,
    h = Object.prototype.toString,
    p = Object.prototype.hasOwnProperty,
    d = String.prototype.trim,
    v = function (e, t) {
      return new v.fn.init(e, t, n);
    },
    m = /[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,
    g = /\S/,
    y = /\s+/,
    b = /^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,
    w = /^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,
    E = /^<(\w+)\s*\/?>(?:<\/\1>|)$/,
    S = /^[\],:{}\s]*$/,
    x = /(?:^|:|,)(?:\s*\[)+/g,
    T = /\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,
    N = /"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,
    C = /^-ms-/,
    k = /-([\da-z])/gi,
    L = function (e, t) {
      return (t + "").toUpperCase();
    },
    A = function () {
      i.addEventListener
        ? (i.removeEventListener("DOMContentLoaded", A, !1), v.ready())
        : i.readyState === "complete" &&
          (i.detachEvent("onreadystatechange", A), v.ready());
    },
    O = {};
  (v.fn = v.prototype = {
    constructor: v,
    init: function (e, n, r) {
      var s, o, u, a;
      if (!e) return this;
      if (e.nodeType)
        return (this.context = this[0] = e), (this.length = 1), this;
      if (typeof e == "string") {
        e.charAt(0) === "<" && e.charAt(e.length - 1) === ">" && e.length >= 3
          ? (s = [null, e, null])
          : (s = w.exec(e));
        if (s && (s[1] || !n)) {
          if (s[1])
            return (
              (n = n instanceof v ? n[0] : n),
              (a = n && n.nodeType ? n.ownerDocument || n : i),
              (e = v.parseHTML(s[1], a, !0)),
              E.test(s[1]) && v.isPlainObject(n) && this.attr.call(e, n, !0),
              v.merge(this, e)
            );
          o = i.getElementById(s[2]);
          if (o && o.parentNode) {
            if (o.id !== s[2]) return r.find(e);
            (this.length = 1), (this[0] = o);
          }
          return (this.context = i), (this.selector = e), this;
        }
        return !n || n.jquery ? (n || r).find(e) : this.constructor(n).find(e);
      }
      return v.isFunction(e)
        ? r.ready(e)
        : (e.selector !== t &&
            ((this.selector = e.selector), (this.context = e.context)),
          v.makeArray(e, this));
    },
    selector: "",
    jquery: "1.8.3",
    length: 0,
    size: function () {
      return this.length;
    },
    toArray: function () {
      return l.call(this);
    },
    get: function (e) {
      return e == null
        ? this.toArray()
        : e < 0
        ? this[this.length + e]
        : this[e];
    },
    pushStack: function (e, t, n) {
      var r = v.merge(this.constructor(), e);
      return (
        (r.prevObject = this),
        (r.context = this.context),
        t === "find"
          ? (r.selector = this.selector + (this.selector ? " " : "") + n)
          : t && (r.selector = this.selector + "." + t + "(" + n + ")"),
        r
      );
    },
    each: function (e, t) {
      return v.each(this, e, t);
    },
    ready: function (e) {
      return v.ready.promise().done(e), this;
    },
    eq: function (e) {
      return (e = +e), e === -1 ? this.slice(e) : this.slice(e, e + 1);
    },
    first: function () {
      return this.eq(0);
    },
    last: function () {
      return this.eq(-1);
    },
    slice: function () {
      return this.pushStack(
        l.apply(this, arguments),
        "slice",
        l.call(arguments).join(",")
      );
    },
    map: function (e) {
      return this.pushStack(
        v.map(this, function (t, n) {
          return e.call(t, n, t);
        })
      );
    },
    end: function () {
      return this.prevObject || this.constructor(null);
    },
    push: f,
    sort: [].sort,
    splice: [].splice,
  }),
    (v.fn.init.prototype = v.fn),
    (v.extend = v.fn.extend = function () {
      var e,
        n,
        r,
        i,
        s,
        o,
        u = arguments[0] || {},
        a = 1,
        f = arguments.length,
        l = !1;
      typeof u == "boolean" && ((l = u), (u = arguments[1] || {}), (a = 2)),
        typeof u != "object" && !v.isFunction(u) && (u = {}),
        f === a && ((u = this), --a);
      for (; a < f; a++)
        if ((e = arguments[a]) != null)
          for (n in e) {
            (r = u[n]), (i = e[n]);
            if (u === i) continue;
            l && i && (v.isPlainObject(i) || (s = v.isArray(i)))
              ? (s
                  ? ((s = !1), (o = r && v.isArray(r) ? r : []))
                  : (o = r && v.isPlainObject(r) ? r : {}),
                (u[n] = v.extend(l, o, i)))
              : i !== t && (u[n] = i);
          }
      return u;
    }),
    v.extend({
      noConflict: function (t) {
        return e.$ === v && (e.$ = a), t && e.jQuery === v && (e.jQuery = u), v;
      },
      isReady: !1,
      readyWait: 1,
      holdReady: function (e) {
        e ? v.readyWait++ : v.ready(!0);
      },
      ready: function (e) {
        if (e === !0 ? --v.readyWait : v.isReady) return;
        if (!i.body) return setTimeout(v.ready, 1);
        v.isReady = !0;
        if (e !== !0 && --v.readyWait > 0) return;
        r.resolveWith(i, [v]),
          v.fn.trigger && v(i).trigger("ready").off("ready");
      },
      isFunction: function (e) {
        return v.type(e) === "function";
      },
      isArray:
        Array.isArray ||
        function (e) {
          return v.type(e) === "array";
        },
      isWindow: function (e) {
        return e != null && e == e.window;
      },
      isNumeric: function (e) {
        return !isNaN(parseFloat(e)) && isFinite(e);
      },
      type: function (e) {
        return e == null ? String(e) : O[h.call(e)] || "object";
      },
      isPlainObject: function (e) {
        if (!e || v.type(e) !== "object" || e.nodeType || v.isWindow(e))
          return !1;
        try {
          if (
            e.constructor &&
            !p.call(e, "constructor") &&
            !p.call(e.constructor.prototype, "isPrototypeOf")
          )
            return !1;
        } catch (n) {
          return !1;
        }
        var r;
        for (r in e);
        return r === t || p.call(e, r);
      },
      isEmptyObject: function (e) {
        var t;
        for (t in e) return !1;
        return !0;
      },
      error: function (e) {
        throw new Error(e);
      },
      parseHTML: function (e, t, n) {
        var r;
        return !e || typeof e != "string"
          ? null
          : (typeof t == "boolean" && ((n = t), (t = 0)),
            (t = t || i),
            (r = E.exec(e))
              ? [t.createElement(r[1])]
              : ((r = v.buildFragment([e], t, n ? null : [])),
                v.merge(
                  [],
                  (r.cacheable ? v.clone(r.fragment) : r.fragment).childNodes
                )));
      },
      parseJSON: function (t) {
        if (!t || typeof t != "string") return null;
        t = v.trim(t);
        if (e.JSON && e.JSON.parse) return e.JSON.parse(t);
        if (S.test(t.replace(T, "@").replace(N, "]").replace(x, "")))
          return new Function("return " + t)();
        v.error("Invalid JSON: " + t);
      },
      parseXML: function (n) {
        var r, i;
        if (!n || typeof n != "string") return null;
        try {
          e.DOMParser
            ? ((i = new DOMParser()), (r = i.parseFromString(n, "text/xml")))
            : ((r = new ActiveXObject("Microsoft.XMLDOM")),
              (r.async = "false"),
              r.loadXML(n));
        } catch (s) {
          r = t;
        }
        return (
          (!r ||
            !r.documentElement ||
            r.getElementsByTagName("parsererror").length) &&
            v.error("Invalid XML: " + n),
          r
        );
      },
      noop: function () {},
      globalEval: function (t) {
        t &&
          g.test(t) &&
          (
            e.execScript ||
            function (t) {
              e.eval.call(e, t);
            }
          )(t);
      },
      camelCase: function (e) {
        return e.replace(C, "ms-").replace(k, L);
      },
      nodeName: function (e, t) {
        return e.nodeName && e.nodeName.toLowerCase() === t.toLowerCase();
      },
      each: function (e, n, r) {
        var i,
          s = 0,
          o = e.length,
          u = o === t || v.isFunction(e);
        if (r) {
          if (u) {
            for (i in e) if (n.apply(e[i], r) === !1) break;
          } else for (; s < o; ) if (n.apply(e[s++], r) === !1) break;
        } else if (u) {
          for (i in e) if (n.call(e[i], i, e[i]) === !1) break;
        } else for (; s < o; ) if (n.call(e[s], s, e[s++]) === !1) break;
        return e;
      },
      trim:
        d && !d.call("\ufeff\u00a0")
          ? function (e) {
              return e == null ? "" : d.call(e);
            }
          : function (e) {
              return e == null ? "" : (e + "").replace(b, "");
            },
      makeArray: function (e, t) {
        var n,
          r = t || [];
        return (
          e != null &&
            ((n = v.type(e)),
            e.length == null ||
            n === "string" ||
            n === "function" ||
            n === "regexp" ||
            v.isWindow(e)
              ? f.call(r, e)
              : v.merge(r, e)),
          r
        );
      },
      inArray: function (e, t, n) {
        var r;
        if (t) {
          if (c) return c.call(t, e, n);
          (r = t.length), (n = n ? (n < 0 ? Math.max(0, r + n) : n) : 0);
          for (; n < r; n++) if (n in t && t[n] === e) return n;
        }
        return -1;
      },
      merge: function (e, n) {
        var r = n.length,
          i = e.length,
          s = 0;
        if (typeof r == "number") for (; s < r; s++) e[i++] = n[s];
        else while (n[s] !== t) e[i++] = n[s++];
        return (e.length = i), e;
      },
      grep: function (e, t, n) {
        var r,
          i = [],
          s = 0,
          o = e.length;
        n = !!n;
        for (; s < o; s++) (r = !!t(e[s], s)), n !== r && i.push(e[s]);
        return i;
      },
      map: function (e, n, r) {
        var i,
          s,
          o = [],
          u = 0,
          a = e.length,
          f =
            e instanceof v ||
            (a !== t &&
              typeof a == "number" &&
              ((a > 0 && e[0] && e[a - 1]) || a === 0 || v.isArray(e)));
        if (f)
          for (; u < a; u++)
            (i = n(e[u], u, r)), i != null && (o[o.length] = i);
        else for (s in e) (i = n(e[s], s, r)), i != null && (o[o.length] = i);
        return o.concat.apply([], o);
      },
      guid: 1,
      proxy: function (e, n) {
        var r, i, s;
        return (
          typeof n == "string" && ((r = e[n]), (n = e), (e = r)),
          v.isFunction(e)
            ? ((i = l.call(arguments, 2)),
              (s = function () {
                return e.apply(n, i.concat(l.call(arguments)));
              }),
              (s.guid = e.guid = e.guid || v.guid++),
              s)
            : t
        );
      },
      access: function (e, n, r, i, s, o, u) {
        var a,
          f = r == null,
          l = 0,
          c = e.length;
        if (r && typeof r == "object") {
          for (l in r) v.access(e, n, l, r[l], 1, o, i);
          s = 1;
        } else if (i !== t) {
          (a = u === t && v.isFunction(i)),
            f &&
              (a
                ? ((a = n),
                  (n = function (e, t, n) {
                    return a.call(v(e), n);
                  }))
                : (n.call(e, i), (n = null)));
          if (n)
            for (; l < c; l++)
              n(e[l], r, a ? i.call(e[l], l, n(e[l], r)) : i, u);
          s = 1;
        }
        return s ? e : f ? n.call(e) : c ? n(e[0], r) : o;
      },
      now: function () {
        return new Date().getTime();
      },
    }),
    (v.ready.promise = function (t) {
      if (!r) {
        r = v.Deferred();
        if (i.readyState === "complete") setTimeout(v.ready, 1);
        else if (i.addEventListener)
          i.addEventListener("DOMContentLoaded", A, !1),
            e.addEventListener("load", v.ready, !1);
        else {
          i.attachEvent("onreadystatechange", A),
            e.attachEvent("onload", v.ready);
          var n = !1;
          try {
            n = e.frameElement == null && i.documentElement;
          } catch (s) {}
          n &&
            n.doScroll &&
            (function o() {
              if (!v.isReady) {
                try {
                  n.doScroll("left");
                } catch (e) {
                  return setTimeout(o, 50);
                }
                v.ready();
              }
            })();
        }
      }
      return r.promise(t);
    }),
    v.each(
      "Boolean Number String Function Array Date RegExp Object".split(" "),
      function (e, t) {
        O["[object " + t + "]"] = t.toLowerCase();
      }
    ),
    (n = v(i));
  var M = {};
  (v.Callbacks = function (e) {
    e = typeof e == "string" ? M[e] || _(e) : v.extend({}, e);
    var n,
      r,
      i,
      s,
      o,
      u,
      a = [],
      f = !e.once && [],
      l = function (t) {
        (n = e.memory && t),
          (r = !0),
          (u = s || 0),
          (s = 0),
          (o = a.length),
          (i = !0);
        for (; a && u < o; u++)
          if (a[u].apply(t[0], t[1]) === !1 && e.stopOnFalse) {
            n = !1;
            break;
          }
        (i = !1),
          a && (f ? f.length && l(f.shift()) : n ? (a = []) : c.disable());
      },
      c = {
        add: function () {
          if (a) {
            var t = a.length;
            (function r(t) {
              v.each(t, function (t, n) {
                var i = v.type(n);
                i === "function"
                  ? (!e.unique || !c.has(n)) && a.push(n)
                  : n && n.length && i !== "string" && r(n);
              });
            })(arguments),
              i ? (o = a.length) : n && ((s = t), l(n));
          }
          return this;
        },
        remove: function () {
          return (
            a &&
              v.each(arguments, function (e, t) {
                var n;
                while ((n = v.inArray(t, a, n)) > -1)
                  a.splice(n, 1), i && (n <= o && o--, n <= u && u--);
              }),
            this
          );
        },
        has: function (e) {
          return v.inArray(e, a) > -1;
        },
        empty: function () {
          return (a = []), this;
        },
        disable: function () {
          return (a = f = n = t), this;
        },
        disabled: function () {
          return !a;
        },
        lock: function () {
          return (f = t), n || c.disable(), this;
        },
        locked: function () {
          return !f;
        },
        fireWith: function (e, t) {
          return (
            (t = t || []),
            (t = [e, t.slice ? t.slice() : t]),
            a && (!r || f) && (i ? f.push(t) : l(t)),
            this
          );
        },
        fire: function () {
          return c.fireWith(this, arguments), this;
        },
        fired: function () {
          return !!r;
        },
      };
    return c;
  }),
    v.extend({
      Deferred: function (e) {
        var t = [
            ["resolve", "done", v.Callbacks("once memory"), "resolved"],
            ["reject", "fail", v.Callbacks("once memory"), "rejected"],
            ["notify", "progress", v.Callbacks("memory")],
          ],
          n = "pending",
          r = {
            state: function () {
              return n;
            },
            always: function () {
              return i.done(arguments).fail(arguments), this;
            },
            then: function () {
              var e = arguments;
              return v
                .Deferred(function (n) {
                  v.each(t, function (t, r) {
                    var s = r[0],
                      o = e[t];
                    i[r[1]](
                      v.isFunction(o)
                        ? function () {
                            var e = o.apply(this, arguments);
                            e && v.isFunction(e.promise)
                              ? e
                                  .promise()
                                  .done(n.resolve)
                                  .fail(n.reject)
                                  .progress(n.notify)
                              : n[s + "With"](this === i ? n : this, [e]);
                          }
                        : n[s]
                    );
                  }),
                    (e = null);
                })
                .promise();
            },
            promise: function (e) {
              return e != null ? v.extend(e, r) : r;
            },
          },
          i = {};
        return (
          (r.pipe = r.then),
          v.each(t, function (e, s) {
            var o = s[2],
              u = s[3];
            (r[s[1]] = o.add),
              u &&
                o.add(
                  function () {
                    n = u;
                  },
                  t[e ^ 1][2].disable,
                  t[2][2].lock
                ),
              (i[s[0]] = o.fire),
              (i[s[0] + "With"] = o.fireWith);
          }),
          r.promise(i),
          e && e.call(i, i),
          i
        );
      },
      when: function (e) {
        var t = 0,
          n = l.call(arguments),
          r = n.length,
          i = r !== 1 || (e && v.isFunction(e.promise)) ? r : 0,
          s = i === 1 ? e : v.Deferred(),
          o = function (e, t, n) {
            return function (r) {
              (t[e] = this),
                (n[e] = arguments.length > 1 ? l.call(arguments) : r),
                n === u ? s.notifyWith(t, n) : --i || s.resolveWith(t, n);
            };
          },
          u,
          a,
          f;
        if (r > 1) {
          (u = new Array(r)), (a = new Array(r)), (f = new Array(r));
          for (; t < r; t++)
            n[t] && v.isFunction(n[t].promise)
              ? n[t]
                  .promise()
                  .done(o(t, f, n))
                  .fail(s.reject)
                  .progress(o(t, a, u))
              : --i;
        }
        return i || s.resolveWith(f, n), s.promise();
      },
    }),
    (v.support = (function () {
      var t,
        n,
        r,
        s,
        o,
        u,
        a,
        f,
        l,
        c,
        h,
        p = i.createElement("div");
      p.setAttribute("className", "t"),
        (p.innerHTML =
          "  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>"),
        (n = p.getElementsByTagName("*")),
        (r = p.getElementsByTagName("a")[0]);
      if (!n || !r || !n.length) return {};
      (s = i.createElement("select")),
        (o = s.appendChild(i.createElement("option"))),
        (u = p.getElementsByTagName("input")[0]),
        (r.style.cssText = "top:1px;float:left;opacity:.5"),
        (t = {
          leadingWhitespace: p.firstChild.nodeType === 3,
          tbody: !p.getElementsByTagName("tbody").length,
          htmlSerialize: !!p.getElementsByTagName("link").length,
          style: /top/.test(r.getAttribute("style")),
          hrefNormalized: r.getAttribute("href") === "/a",
          opacity: /^0.5/.test(r.style.opacity),
          cssFloat: !!r.style.cssFloat,
          checkOn: u.value === "on",
          optSelected: o.selected,
          getSetAttribute: p.className !== "t",
          enctype: !!i.createElement("form").enctype,
          html5Clone:
            i.createElement("nav").cloneNode(!0).outerHTML !== "<:nav></:nav>",
          boxModel: i.compatMode === "CSS1Compat",
          submitBubbles: !0,
          changeBubbles: !0,
          focusinBubbles: !1,
          deleteExpando: !0,
          noCloneEvent: !0,
          inlineBlockNeedsLayout: !1,
          shrinkWrapBlocks: !1,
          reliableMarginRight: !0,
          boxSizingReliable: !0,
          pixelPosition: !1,
        }),
        (u.checked = !0),
        (t.noCloneChecked = u.cloneNode(!0).checked),
        (s.disabled = !0),
        (t.optDisabled = !o.disabled);
      try {
        delete p.test;
      } catch (d) {
        t.deleteExpando = !1;
      }
      !p.addEventListener &&
        p.attachEvent &&
        p.fireEvent &&
        (p.attachEvent(
          "onclick",
          (h = function () {
            t.noCloneEvent = !1;
          })
        ),
        p.cloneNode(!0).fireEvent("onclick"),
        p.detachEvent("onclick", h)),
        (u = i.createElement("input")),
        (u.value = "t"),
        u.setAttribute("type", "radio"),
        (t.radioValue = u.value === "t"),
        u.setAttribute("checked", "checked"),
        u.setAttribute("name", "t"),
        p.appendChild(u),
        (a = i.createDocumentFragment()),
        a.appendChild(p.lastChild),
        (t.checkClone = a.cloneNode(!0).cloneNode(!0).lastChild.checked),
        (t.appendChecked = u.checked),
        a.removeChild(u),
        a.appendChild(p);
      if (p.attachEvent)
        for (l in { submit: !0, change: !0, focusin: !0 })
          (f = "on" + l),
            (c = f in p),
            c ||
              (p.setAttribute(f, "return;"), (c = typeof p[f] == "function")),
            (t[l + "Bubbles"] = c);
      return (
        v(function () {
          var n,
            r,
            s,
            o,
            u = "padding:0;margin:0;border:0;display:block;overflow:hidden;",
            a = i.getElementsByTagName("body")[0];
          if (!a) return;
          (n = i.createElement("div")),
            (n.style.cssText =
              "visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px"),
            a.insertBefore(n, a.firstChild),
            (r = i.createElement("div")),
            n.appendChild(r),
            (r.innerHTML = "<table><tr><td></td><td>t</td></tr></table>"),
            (s = r.getElementsByTagName("td")),
            (s[0].style.cssText = "padding:0;margin:0;border:0;display:none"),
            (c = s[0].offsetHeight === 0),
            (s[0].style.display = ""),
            (s[1].style.display = "none"),
            (t.reliableHiddenOffsets = c && s[0].offsetHeight === 0),
            (r.innerHTML = ""),
            (r.style.cssText =
              "box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;"),
            (t.boxSizing = r.offsetWidth === 4),
            (t.doesNotIncludeMarginInBodyOffset = a.offsetTop !== 1),
            e.getComputedStyle &&
              ((t.pixelPosition =
                (e.getComputedStyle(r, null) || {}).top !== "1%"),
              (t.boxSizingReliable =
                (e.getComputedStyle(r, null) || { width: "4px" }).width ===
                "4px"),
              (o = i.createElement("div")),
              (o.style.cssText = r.style.cssText = u),
              (o.style.marginRight = o.style.width = "0"),
              (r.style.width = "1px"),
              r.appendChild(o),
              (t.reliableMarginRight = !parseFloat(
                (e.getComputedStyle(o, null) || {}).marginRight
              ))),
            typeof r.style.zoom != "undefined" &&
              ((r.innerHTML = ""),
              (r.style.cssText =
                u + "width:1px;padding:1px;display:inline;zoom:1"),
              (t.inlineBlockNeedsLayout = r.offsetWidth === 3),
              (r.style.display = "block"),
              (r.style.overflow = "visible"),
              (r.innerHTML = "<div></div>"),
              (r.firstChild.style.width = "5px"),
              (t.shrinkWrapBlocks = r.offsetWidth !== 3),
              (n.style.zoom = 1)),
            a.removeChild(n),
            (n = r = s = o = null);
        }),
        a.removeChild(p),
        (n = r = s = o = u = a = p = null),
        t
      );
    })());
  var D = /(?:\{[\s\S]*\}|\[[\s\S]*\])$/,
    P = /([A-Z])/g;
  v.extend({
    cache: {},
    deletedIds: [],
    uuid: 0,
    expando: "jQuery" + (v.fn.jquery + Math.random()).replace(/\D/g, ""),
    noData: {
      embed: !0,
      object: "clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",
      applet: !0,
    },
    hasData: function (e) {
      return (
        (e = e.nodeType ? v.cache[e[v.expando]] : e[v.expando]), !!e && !B(e)
      );
    },
    data: function (e, n, r, i) {
      if (!v.acceptData(e)) return;
      var s,
        o,
        u = v.expando,
        a = typeof n == "string",
        f = e.nodeType,
        l = f ? v.cache : e,
        c = f ? e[u] : e[u] && u;
      if ((!c || !l[c] || (!i && !l[c].data)) && a && r === t) return;
      c || (f ? (e[u] = c = v.deletedIds.pop() || v.guid++) : (c = u)),
        l[c] || ((l[c] = {}), f || (l[c].toJSON = v.noop));
      if (typeof n == "object" || typeof n == "function")
        i ? (l[c] = v.extend(l[c], n)) : (l[c].data = v.extend(l[c].data, n));
      return (
        (s = l[c]),
        i || (s.data || (s.data = {}), (s = s.data)),
        r !== t && (s[v.camelCase(n)] = r),
        a ? ((o = s[n]), o == null && (o = s[v.camelCase(n)])) : (o = s),
        o
      );
    },
    removeData: function (e, t, n) {
      if (!v.acceptData(e)) return;
      var r,
        i,
        s,
        o = e.nodeType,
        u = o ? v.cache : e,
        a = o ? e[v.expando] : v.expando;
      if (!u[a]) return;
      if (t) {
        r = n ? u[a] : u[a].data;
        if (r) {
          v.isArray(t) ||
            (t in r
              ? (t = [t])
              : ((t = v.camelCase(t)),
                t in r ? (t = [t]) : (t = t.split(" "))));
          for (i = 0, s = t.length; i < s; i++) delete r[t[i]];
          if (!(n ? B : v.isEmptyObject)(r)) return;
        }
      }
      if (!n) {
        delete u[a].data;
        if (!B(u[a])) return;
      }
      o
        ? v.cleanData([e], !0)
        : v.support.deleteExpando || u != u.window
        ? delete u[a]
        : (u[a] = null);
    },
    _data: function (e, t, n) {
      return v.data(e, t, n, !0);
    },
    acceptData: function (e) {
      var t = e.nodeName && v.noData[e.nodeName.toLowerCase()];
      return !t || (t !== !0 && e.getAttribute("classid") === t);
    },
  }),
    v.fn.extend({
      data: function (e, n) {
        var r,
          i,
          s,
          o,
          u,
          a = this[0],
          f = 0,
          l = null;
        if (e === t) {
          if (this.length) {
            l = v.data(a);
            if (a.nodeType === 1 && !v._data(a, "parsedAttrs")) {
              s = a.attributes;
              for (u = s.length; f < u; f++)
                (o = s[f].name),
                  o.indexOf("data-") ||
                    ((o = v.camelCase(o.substring(5))), H(a, o, l[o]));
              v._data(a, "parsedAttrs", !0);
            }
          }
          return l;
        }
        return typeof e == "object"
          ? this.each(function () {
              v.data(this, e);
            })
          : ((r = e.split(".", 2)),
            (r[1] = r[1] ? "." + r[1] : ""),
            (i = r[1] + "!"),
            v.access(
              this,
              function (n) {
                if (n === t)
                  return (
                    (l = this.triggerHandler("getData" + i, [r[0]])),
                    l === t && a && ((l = v.data(a, e)), (l = H(a, e, l))),
                    l === t && r[1] ? this.data(r[0]) : l
                  );
                (r[1] = n),
                  this.each(function () {
                    var t = v(this);
                    t.triggerHandler("setData" + i, r),
                      v.data(this, e, n),
                      t.triggerHandler("changeData" + i, r);
                  });
              },
              null,
              n,
              arguments.length > 1,
              null,
              !1
            ));
      },
      removeData: function (e) {
        return this.each(function () {
          v.removeData(this, e);
        });
      },
    }),
    v.extend({
      queue: function (e, t, n) {
        var r;
        if (e)
          return (
            (t = (t || "fx") + "queue"),
            (r = v._data(e, t)),
            n &&
              (!r || v.isArray(n)
                ? (r = v._data(e, t, v.makeArray(n)))
                : r.push(n)),
            r || []
          );
      },
      dequeue: function (e, t) {
        t = t || "fx";
        var n = v.queue(e, t),
          r = n.length,
          i = n.shift(),
          s = v._queueHooks(e, t),
          o = function () {
            v.dequeue(e, t);
          };
        i === "inprogress" && ((i = n.shift()), r--),
          i &&
            (t === "fx" && n.unshift("inprogress"),
            delete s.stop,
            i.call(e, o, s)),
          !r && s && s.empty.fire();
      },
      _queueHooks: function (e, t) {
        var n = t + "queueHooks";
        return (
          v._data(e, n) ||
          v._data(e, n, {
            empty: v.Callbacks("once memory").add(function () {
              v.removeData(e, t + "queue", !0), v.removeData(e, n, !0);
            }),
          })
        );
      },
    }),
    v.fn.extend({
      queue: function (e, n) {
        var r = 2;
        return (
          typeof e != "string" && ((n = e), (e = "fx"), r--),
          arguments.length < r
            ? v.queue(this[0], e)
            : n === t
            ? this
            : this.each(function () {
                var t = v.queue(this, e, n);
                v._queueHooks(this, e),
                  e === "fx" && t[0] !== "inprogress" && v.dequeue(this, e);
              })
        );
      },
      dequeue: function (e) {
        return this.each(function () {
          v.dequeue(this, e);
        });
      },
      delay: function (e, t) {
        return (
          (e = v.fx ? v.fx.speeds[e] || e : e),
          (t = t || "fx"),
          this.queue(t, function (t, n) {
            var r = setTimeout(t, e);
            n.stop = function () {
              clearTimeout(r);
            };
          })
        );
      },
      clearQueue: function (e) {
        return this.queue(e || "fx", []);
      },
      promise: function (e, n) {
        var r,
          i = 1,
          s = v.Deferred(),
          o = this,
          u = this.length,
          a = function () {
            --i || s.resolveWith(o, [o]);
          };
        typeof e != "string" && ((n = e), (e = t)), (e = e || "fx");
        while (u--)
          (r = v._data(o[u], e + "queueHooks")),
            r && r.empty && (i++, r.empty.add(a));
        return a(), s.promise(n);
      },
    });
  var j,
    F,
    I,
    q = /[\t\r\n]/g,
    R = /\r/g,
    U = /^(?:button|input)$/i,
    z = /^(?:button|input|object|select|textarea)$/i,
    W = /^a(?:rea|)$/i,
    X = /^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,
    V = v.support.getSetAttribute;
  v.fn.extend({
    attr: function (e, t) {
      return v.access(this, v.attr, e, t, arguments.length > 1);
    },
    removeAttr: function (e) {
      return this.each(function () {
        v.removeAttr(this, e);
      });
    },
    prop: function (e, t) {
      return v.access(this, v.prop, e, t, arguments.length > 1);
    },
    removeProp: function (e) {
      return (
        (e = v.propFix[e] || e),
        this.each(function () {
          try {
            (this[e] = t), delete this[e];
          } catch (n) {}
        })
      );
    },
    addClass: function (e) {
      var t, n, r, i, s, o, u;
      if (v.isFunction(e))
        return this.each(function (t) {
          v(this).addClass(e.call(this, t, this.className));
        });
      if (e && typeof e == "string") {
        t = e.split(y);
        for (n = 0, r = this.length; n < r; n++) {
          i = this[n];
          if (i.nodeType === 1)
            if (!i.className && t.length === 1) i.className = e;
            else {
              s = " " + i.className + " ";
              for (o = 0, u = t.length; o < u; o++)
                s.indexOf(" " + t[o] + " ") < 0 && (s += t[o] + " ");
              i.className = v.trim(s);
            }
        }
      }
      return this;
    },
    removeClass: function (e) {
      var n, r, i, s, o, u, a;
      if (v.isFunction(e))
        return this.each(function (t) {
          v(this).removeClass(e.call(this, t, this.className));
        });
      if ((e && typeof e == "string") || e === t) {
        n = (e || "").split(y);
        for (u = 0, a = this.length; u < a; u++) {
          i = this[u];
          if (i.nodeType === 1 && i.className) {
            r = (" " + i.className + " ").replace(q, " ");
            for (s = 0, o = n.length; s < o; s++)
              while (r.indexOf(" " + n[s] + " ") >= 0)
                r = r.replace(" " + n[s] + " ", " ");
            i.className = e ? v.trim(r) : "";
          }
        }
      }
      return this;
    },
    toggleClass: function (e, t) {
      var n = typeof e,
        r = typeof t == "boolean";
      return v.isFunction(e)
        ? this.each(function (n) {
            v(this).toggleClass(e.call(this, n, this.className, t), t);
          })
        : this.each(function () {
            if (n === "string") {
              var i,
                s = 0,
                o = v(this),
                u = t,
                a = e.split(y);
              while ((i = a[s++]))
                (u = r ? u : !o.hasClass(i)),
                  o[u ? "addClass" : "removeClass"](i);
            } else if (n === "undefined" || n === "boolean") this.className && v._data(this, "__className__", this.className), (this.className = this.className || e === !1 ? "" : v._data(this, "__className__") || "");
          });
    },
    hasClass: function (e) {
      var t = " " + e + " ",
        n = 0,
        r = this.length;
      for (; n < r; n++)
        if (
          this[n].nodeType === 1 &&
          (" " + this[n].className + " ").replace(q, " ").indexOf(t) >= 0
        )
          return !0;
      return !1;
    },
    val: function (e) {
      var n,
        r,
        i,
        s = this[0];
      if (!arguments.length) {
        if (s)
          return (
            (n = v.valHooks[s.type] || v.valHooks[s.nodeName.toLowerCase()]),
            n && "get" in n && (r = n.get(s, "value")) !== t
              ? r
              : ((r = s.value),
                typeof r == "string" ? r.replace(R, "") : r == null ? "" : r)
          );
        return;
      }
      return (
        (i = v.isFunction(e)),
        this.each(function (r) {
          var s,
            o = v(this);
          if (this.nodeType !== 1) return;
          i ? (s = e.call(this, r, o.val())) : (s = e),
            s == null
              ? (s = "")
              : typeof s == "number"
              ? (s += "")
              : v.isArray(s) &&
                (s = v.map(s, function (e) {
                  return e == null ? "" : e + "";
                })),
            (n =
              v.valHooks[this.type] || v.valHooks[this.nodeName.toLowerCase()]);
          if (!n || !("set" in n) || n.set(this, s, "value") === t)
            this.value = s;
        })
      );
    },
  }),
    v.extend({
      valHooks: {
        option: {
          get: function (e) {
            var t = e.attributes.value;
            return !t || t.specified ? e.value : e.text;
          },
        },
        select: {
          get: function (e) {
            var t,
              n,
              r = e.options,
              i = e.selectedIndex,
              s = e.type === "select-one" || i < 0,
              o = s ? null : [],
              u = s ? i + 1 : r.length,
              a = i < 0 ? u : s ? i : 0;
            for (; a < u; a++) {
              n = r[a];
              if (
                (n.selected || a === i) &&
                (v.support.optDisabled
                  ? !n.disabled
                  : n.getAttribute("disabled") === null) &&
                (!n.parentNode.disabled ||
                  !v.nodeName(n.parentNode, "optgroup"))
              ) {
                t = v(n).val();
                if (s) return t;
                o.push(t);
              }
            }
            return o;
          },
          set: function (e, t) {
            var n = v.makeArray(t);
            return (
              v(e)
                .find("option")
                .each(function () {
                  this.selected = v.inArray(v(this).val(), n) >= 0;
                }),
              n.length || (e.selectedIndex = -1),
              n
            );
          },
        },
      },
      attrFn: {},
      attr: function (e, n, r, i) {
        var s,
          o,
          u,
          a = e.nodeType;
        if (!e || a === 3 || a === 8 || a === 2) return;
        if (i && v.isFunction(v.fn[n])) return v(e)[n](r);
        if (typeof e.getAttribute == "undefined") return v.prop(e, n, r);
        (u = a !== 1 || !v.isXMLDoc(e)),
          u &&
            ((n = n.toLowerCase()),
            (o = v.attrHooks[n] || (X.test(n) ? F : j)));
        if (r !== t) {
          if (r === null) {
            v.removeAttr(e, n);
            return;
          }
          return o && "set" in o && u && (s = o.set(e, r, n)) !== t
            ? s
            : (e.setAttribute(n, r + ""), r);
        }
        return o && "get" in o && u && (s = o.get(e, n)) !== null
          ? s
          : ((s = e.getAttribute(n)), s === null ? t : s);
      },
      removeAttr: function (e, t) {
        var n,
          r,
          i,
          s,
          o = 0;
        if (t && e.nodeType === 1) {
          r = t.split(y);
          for (; o < r.length; o++)
            (i = r[o]),
              i &&
                ((n = v.propFix[i] || i),
                (s = X.test(i)),
                s || v.attr(e, i, ""),
                e.removeAttribute(V ? i : n),
                s && n in e && (e[n] = !1));
        }
      },
      attrHooks: {
        type: {
          set: function (e, t) {
            if (U.test(e.nodeName) && e.parentNode)
              v.error("type property can't be changed");
            else if (
              !v.support.radioValue &&
              t === "radio" &&
              v.nodeName(e, "input")
            ) {
              var n = e.value;
              return e.setAttribute("type", t), n && (e.value = n), t;
            }
          },
        },
        value: {
          get: function (e, t) {
            return j && v.nodeName(e, "button")
              ? j.get(e, t)
              : t in e
              ? e.value
              : null;
          },
          set: function (e, t, n) {
            if (j && v.nodeName(e, "button")) return j.set(e, t, n);
            e.value = t;
          },
        },
      },
      propFix: {
        tabindex: "tabIndex",
        readonly: "readOnly",
        for: "htmlFor",
        class: "className",
        maxlength: "maxLength",
        cellspacing: "cellSpacing",
        cellpadding: "cellPadding",
        rowspan: "rowSpan",
        colspan: "colSpan",
        usemap: "useMap",
        frameborder: "frameBorder",
        contenteditable: "contentEditable",
      },
      prop: function (e, n, r) {
        var i,
          s,
          o,
          u = e.nodeType;
        if (!e || u === 3 || u === 8 || u === 2) return;
        return (
          (o = u !== 1 || !v.isXMLDoc(e)),
          o && ((n = v.propFix[n] || n), (s = v.propHooks[n])),
          r !== t
            ? s && "set" in s && (i = s.set(e, r, n)) !== t
              ? i
              : (e[n] = r)
            : s && "get" in s && (i = s.get(e, n)) !== null
            ? i
            : e[n]
        );
      },
      propHooks: {
        tabIndex: {
          get: function (e) {
            var n = e.getAttributeNode("tabindex");
            return n && n.specified
              ? parseInt(n.value, 10)
              : z.test(e.nodeName) || (W.test(e.nodeName) && e.href)
              ? 0
              : t;
          },
        },
      },
    }),
    (F = {
      get: function (e, n) {
        var r,
          i = v.prop(e, n);
        return i === !0 ||
          (typeof i != "boolean" &&
            (r = e.getAttributeNode(n)) &&
            r.nodeValue !== !1)
          ? n.toLowerCase()
          : t;
      },
      set: function (e, t, n) {
        var r;
        return (
          t === !1
            ? v.removeAttr(e, n)
            : ((r = v.propFix[n] || n),
              r in e && (e[r] = !0),
              e.setAttribute(n, n.toLowerCase())),
          n
        );
      },
    }),
    V ||
      ((I = { name: !0, id: !0, coords: !0 }),
      (j = v.valHooks.button = {
        get: function (e, n) {
          var r;
          return (
            (r = e.getAttributeNode(n)),
            r && (I[n] ? r.value !== "" : r.specified) ? r.value : t
          );
        },
        set: function (e, t, n) {
          var r = e.getAttributeNode(n);
          return (
            r || ((r = i.createAttribute(n)), e.setAttributeNode(r)),
            (r.value = t + "")
          );
        },
      }),
      v.each(["width", "height"], function (e, t) {
        v.attrHooks[t] = v.extend(v.attrHooks[t], {
          set: function (e, n) {
            if (n === "") return e.setAttribute(t, "auto"), n;
          },
        });
      }),
      (v.attrHooks.contenteditable = {
        get: j.get,
        set: function (e, t, n) {
          t === "" && (t = "false"), j.set(e, t, n);
        },
      })),
    v.support.hrefNormalized ||
      v.each(["href", "src", "width", "height"], function (e, n) {
        v.attrHooks[n] = v.extend(v.attrHooks[n], {
          get: function (e) {
            var r = e.getAttribute(n, 2);
            return r === null ? t : r;
          },
        });
      }),
    v.support.style ||
      (v.attrHooks.style = {
        get: function (e) {
          return e.style.cssText.toLowerCase() || t;
        },
        set: function (e, t) {
          return (e.style.cssText = t + "");
        },
      }),
    v.support.optSelected ||
      (v.propHooks.selected = v.extend(v.propHooks.selected, {
        get: function (e) {
          var t = e.parentNode;
          return (
            t && (t.selectedIndex, t.parentNode && t.parentNode.selectedIndex),
            null
          );
        },
      })),
    v.support.enctype || (v.propFix.enctype = "encoding"),
    v.support.checkOn ||
      v.each(["radio", "checkbox"], function () {
        v.valHooks[this] = {
          get: function (e) {
            return e.getAttribute("value") === null ? "on" : e.value;
          },
        };
      }),
    v.each(["radio", "checkbox"], function () {
      v.valHooks[this] = v.extend(v.valHooks[this], {
        set: function (e, t) {
          if (v.isArray(t)) return (e.checked = v.inArray(v(e).val(), t) >= 0);
        },
      });
    });
  var $ = /^(?:textarea|input|select)$/i,
    J = /^([^\.]*|)(?:\.(.+)|)$/,
    K = /(?:^|\s)hover(\.\S+|)\b/,
    Q = /^key/,
    G = /^(?:mouse|contextmenu)|click/,
    Y = /^(?:focusinfocus|focusoutblur)$/,
    Z = function (e) {
      return v.event.special.hover
        ? e
        : e.replace(K, "mouseenter$1 mouseleave$1");
    };
  (v.event = {
    add: function (e, n, r, i, s) {
      var o, u, a, f, l, c, h, p, d, m, g;
      if (e.nodeType === 3 || e.nodeType === 8 || !n || !r || !(o = v._data(e)))
        return;
      r.handler && ((d = r), (r = d.handler), (s = d.selector)),
        r.guid || (r.guid = v.guid++),
        (a = o.events),
        a || (o.events = a = {}),
        (u = o.handle),
        u ||
          ((o.handle = u = function (e) {
            return typeof v == "undefined" ||
              (!!e && v.event.triggered === e.type)
              ? t
              : v.event.dispatch.apply(u.elem, arguments);
          }),
          (u.elem = e)),
        (n = v.trim(Z(n)).split(" "));
      for (f = 0; f < n.length; f++) {
        (l = J.exec(n[f]) || []),
          (c = l[1]),
          (h = (l[2] || "").split(".").sort()),
          (g = v.event.special[c] || {}),
          (c = (s ? g.delegateType : g.bindType) || c),
          (g = v.event.special[c] || {}),
          (p = v.extend(
            {
              type: c,
              origType: l[1],
              data: i,
              handler: r,
              guid: r.guid,
              selector: s,
              needsContext: s && v.expr.match.needsContext.test(s),
              namespace: h.join("."),
            },
            d
          )),
          (m = a[c]);
        if (!m) {
          (m = a[c] = []), (m.delegateCount = 0);
          if (!g.setup || g.setup.call(e, i, h, u) === !1)
            e.addEventListener
              ? e.addEventListener(c, u, !1)
              : e.attachEvent && e.attachEvent("on" + c, u);
        }
        g.add &&
          (g.add.call(e, p), p.handler.guid || (p.handler.guid = r.guid)),
          s ? m.splice(m.delegateCount++, 0, p) : m.push(p),
          (v.event.global[c] = !0);
      }
      e = null;
    },
    global: {},
    remove: function (e, t, n, r, i) {
      var s,
        o,
        u,
        a,
        f,
        l,
        c,
        h,
        p,
        d,
        m,
        g = v.hasData(e) && v._data(e);
      if (!g || !(h = g.events)) return;
      t = v.trim(Z(t || "")).split(" ");
      for (s = 0; s < t.length; s++) {
        (o = J.exec(t[s]) || []), (u = a = o[1]), (f = o[2]);
        if (!u) {
          for (u in h) v.event.remove(e, u + t[s], n, r, !0);
          continue;
        }
        (p = v.event.special[u] || {}),
          (u = (r ? p.delegateType : p.bindType) || u),
          (d = h[u] || []),
          (l = d.length),
          (f = f
            ? new RegExp(
                "(^|\\.)" +
                  f.split(".").sort().join("\\.(?:.*\\.|)") +
                  "(\\.|$)"
              )
            : null);
        for (c = 0; c < d.length; c++)
          (m = d[c]),
            (i || a === m.origType) &&
              (!n || n.guid === m.guid) &&
              (!f || f.test(m.namespace)) &&
              (!r || r === m.selector || (r === "**" && m.selector)) &&
              (d.splice(c--, 1),
              m.selector && d.delegateCount--,
              p.remove && p.remove.call(e, m));
        d.length === 0 &&
          l !== d.length &&
          ((!p.teardown || p.teardown.call(e, f, g.handle) === !1) &&
            v.removeEvent(e, u, g.handle),
          delete h[u]);
      }
      v.isEmptyObject(h) && (delete g.handle, v.removeData(e, "events", !0));
    },
    customEvent: { getData: !0, setData: !0, changeData: !0 },
    trigger: function (n, r, s, o) {
      if (!s || (s.nodeType !== 3 && s.nodeType !== 8)) {
        var u,
          a,
          f,
          l,
          c,
          h,
          p,
          d,
          m,
          g,
          y = n.type || n,
          b = [];
        if (Y.test(y + v.event.triggered)) return;
        y.indexOf("!") >= 0 && ((y = y.slice(0, -1)), (a = !0)),
          y.indexOf(".") >= 0 &&
            ((b = y.split(".")), (y = b.shift()), b.sort());
        if ((!s || v.event.customEvent[y]) && !v.event.global[y]) return;
        (n =
          typeof n == "object"
            ? n[v.expando]
              ? n
              : new v.Event(y, n)
            : new v.Event(y)),
          (n.type = y),
          (n.isTrigger = !0),
          (n.exclusive = a),
          (n.namespace = b.join(".")),
          (n.namespace_re = n.namespace
            ? new RegExp("(^|\\.)" + b.join("\\.(?:.*\\.|)") + "(\\.|$)")
            : null),
          (h = y.indexOf(":") < 0 ? "on" + y : "");
        if (!s) {
          u = v.cache;
          for (f in u)
            u[f].events &&
              u[f].events[y] &&
              v.event.trigger(n, r, u[f].handle.elem, !0);
          return;
        }
        (n.result = t),
          n.target || (n.target = s),
          (r = r != null ? v.makeArray(r) : []),
          r.unshift(n),
          (p = v.event.special[y] || {});
        if (p.trigger && p.trigger.apply(s, r) === !1) return;
        m = [[s, p.bindType || y]];
        if (!o && !p.noBubble && !v.isWindow(s)) {
          (g = p.delegateType || y), (l = Y.test(g + y) ? s : s.parentNode);
          for (c = s; l; l = l.parentNode) m.push([l, g]), (c = l);
          c === (s.ownerDocument || i) &&
            m.push([c.defaultView || c.parentWindow || e, g]);
        }
        for (f = 0; f < m.length && !n.isPropagationStopped(); f++)
          (l = m[f][0]),
            (n.type = m[f][1]),
            (d = (v._data(l, "events") || {})[n.type] && v._data(l, "handle")),
            d && d.apply(l, r),
            (d = h && l[h]),
            d &&
              v.acceptData(l) &&
              d.apply &&
              d.apply(l, r) === !1 &&
              n.preventDefault();
        return (
          (n.type = y),
          !o &&
            !n.isDefaultPrevented() &&
            (!p._default || p._default.apply(s.ownerDocument, r) === !1) &&
            (y !== "click" || !v.nodeName(s, "a")) &&
            v.acceptData(s) &&
            h &&
            s[y] &&
            ((y !== "focus" && y !== "blur") || n.target.offsetWidth !== 0) &&
            !v.isWindow(s) &&
            ((c = s[h]),
            c && (s[h] = null),
            (v.event.triggered = y),
            s[y](),
            (v.event.triggered = t),
            c && (s[h] = c)),
          n.result
        );
      }
      return;
    },
    dispatch: function (n) {
      n = v.event.fix(n || e.event);
      var r,
        i,
        s,
        o,
        u,
        a,
        f,
        c,
        h,
        p,
        d = (v._data(this, "events") || {})[n.type] || [],
        m = d.delegateCount,
        g = l.call(arguments),
        y = !n.exclusive && !n.namespace,
        b = v.event.special[n.type] || {},
        w = [];
      (g[0] = n), (n.delegateTarget = this);
      if (b.preDispatch && b.preDispatch.call(this, n) === !1) return;
      if (m && (!n.button || n.type !== "click"))
        for (s = n.target; s != this; s = s.parentNode || this)
          if (s.disabled !== !0 || n.type !== "click") {
            (u = {}), (f = []);
            for (r = 0; r < m; r++)
              (c = d[r]),
                (h = c.selector),
                u[h] === t &&
                  (u[h] = c.needsContext
                    ? v(h, this).index(s) >= 0
                    : v.find(h, this, null, [s]).length),
                u[h] && f.push(c);
            f.length && w.push({ elem: s, matches: f });
          }
      d.length > m && w.push({ elem: this, matches: d.slice(m) });
      for (r = 0; r < w.length && !n.isPropagationStopped(); r++) {
        (a = w[r]), (n.currentTarget = a.elem);
        for (
          i = 0;
          i < a.matches.length && !n.isImmediatePropagationStopped();
          i++
        ) {
          c = a.matches[i];
          if (
            y ||
            (!n.namespace && !c.namespace) ||
            (n.namespace_re && n.namespace_re.test(c.namespace))
          )
            (n.data = c.data),
              (n.handleObj = c),
              (o = (
                (v.event.special[c.origType] || {}).handle || c.handler
              ).apply(a.elem, g)),
              o !== t &&
                ((n.result = o),
                o === !1 && (n.preventDefault(), n.stopPropagation()));
        }
      }
      return b.postDispatch && b.postDispatch.call(this, n), n.result;
    },
    props: "attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(
      " "
    ),
    fixHooks: {},
    keyHooks: {
      props: "char charCode key keyCode".split(" "),
      filter: function (e, t) {
        return (
          e.which == null &&
            (e.which = t.charCode != null ? t.charCode : t.keyCode),
          e
        );
      },
    },
    mouseHooks: {
      props: "button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(
        " "
      ),
      filter: function (e, n) {
        var r,
          s,
          o,
          u = n.button,
          a = n.fromElement;
        return (
          e.pageX == null &&
            n.clientX != null &&
            ((r = e.target.ownerDocument || i),
            (s = r.documentElement),
            (o = r.body),
            (e.pageX =
              n.clientX +
              ((s && s.scrollLeft) || (o && o.scrollLeft) || 0) -
              ((s && s.clientLeft) || (o && o.clientLeft) || 0)),
            (e.pageY =
              n.clientY +
              ((s && s.scrollTop) || (o && o.scrollTop) || 0) -
              ((s && s.clientTop) || (o && o.clientTop) || 0))),
          !e.relatedTarget &&
            a &&
            (e.relatedTarget = a === e.target ? n.toElement : a),
          !e.which &&
            u !== t &&
            (e.which = u & 1 ? 1 : u & 2 ? 3 : u & 4 ? 2 : 0),
          e
        );
      },
    },
    fix: function (e) {
      if (e[v.expando]) return e;
      var t,
        n,
        r = e,
        s = v.event.fixHooks[e.type] || {},
        o = s.props ? this.props.concat(s.props) : this.props;
      e = v.Event(r);
      for (t = o.length; t; ) (n = o[--t]), (e[n] = r[n]);
      return (
        e.target || (e.target = r.srcElement || i),
        e.target.nodeType === 3 && (e.target = e.target.parentNode),
        (e.metaKey = !!e.metaKey),
        s.filter ? s.filter(e, r) : e
      );
    },
    special: {
      load: { noBubble: !0 },
      focus: { delegateType: "focusin" },
      blur: { delegateType: "focusout" },
      beforeunload: {
        setup: function (e, t, n) {
          v.isWindow(this) && (this.onbeforeunload = n);
        },
        teardown: function (e, t) {
          this.onbeforeunload === t && (this.onbeforeunload = null);
        },
      },
    },
    simulate: function (e, t, n, r) {
      var i = v.extend(new v.Event(), n, {
        type: e,
        isSimulated: !0,
        originalEvent: {},
      });
      r ? v.event.trigger(i, null, t) : v.event.dispatch.call(t, i),
        i.isDefaultPrevented() && n.preventDefault();
    },
  }),
    (v.event.handle = v.event.dispatch),
    (v.removeEvent = i.removeEventListener
      ? function (e, t, n) {
          e.removeEventListener && e.removeEventListener(t, n, !1);
        }
      : function (e, t, n) {
          var r = "on" + t;
          e.detachEvent &&
            (typeof e[r] == "undefined" && (e[r] = null), e.detachEvent(r, n));
        }),
    (v.Event = function (e, t) {
      if (!(this instanceof v.Event)) return new v.Event(e, t);
      e && e.type
        ? ((this.originalEvent = e),
          (this.type = e.type),
          (this.isDefaultPrevented =
            e.defaultPrevented ||
            e.returnValue === !1 ||
            (e.getPreventDefault && e.getPreventDefault())
              ? tt
              : et))
        : (this.type = e),
        t && v.extend(this, t),
        (this.timeStamp = (e && e.timeStamp) || v.now()),
        (this[v.expando] = !0);
    }),
    (v.Event.prototype = {
      preventDefault: function () {
        this.isDefaultPrevented = tt;
        var e = this.originalEvent;
        if (!e) return;
        e.preventDefault ? e.preventDefault() : (e.returnValue = !1);
      },
      stopPropagation: function () {
        this.isPropagationStopped = tt;
        var e = this.originalEvent;
        if (!e) return;
        e.stopPropagation && e.stopPropagation(), (e.cancelBubble = !0);
      },
      stopImmediatePropagation: function () {
        (this.isImmediatePropagationStopped = tt), this.stopPropagation();
      },
      isDefaultPrevented: et,
      isPropagationStopped: et,
      isImmediatePropagationStopped: et,
    }),
    v.each({ mouseenter: "mouseover", mouseleave: "mouseout" }, function (
      e,
      t
    ) {
      v.event.special[e] = {
        delegateType: t,
        bindType: t,
        handle: function (e) {
          var n,
            r = this,
            i = e.relatedTarget,
            s = e.handleObj,
            o = s.selector;
          if (!i || (i !== r && !v.contains(r, i)))
            (e.type = s.origType),
              (n = s.handler.apply(this, arguments)),
              (e.type = t);
          return n;
        },
      };
    }),
    v.support.submitBubbles ||
      (v.event.special.submit = {
        setup: function () {
          if (v.nodeName(this, "form")) return !1;
          v.event.add(this, "click._submit keypress._submit", function (e) {
            var n = e.target,
              r =
                v.nodeName(n, "input") || v.nodeName(n, "button") ? n.form : t;
            r &&
              !v._data(r, "_submit_attached") &&
              (v.event.add(r, "submit._submit", function (e) {
                e._submit_bubble = !0;
              }),
              v._data(r, "_submit_attached", !0));
          });
        },
        postDispatch: function (e) {
          e._submit_bubble &&
            (delete e._submit_bubble,
            this.parentNode &&
              !e.isTrigger &&
              v.event.simulate("submit", this.parentNode, e, !0));
        },
        teardown: function () {
          if (v.nodeName(this, "form")) return !1;
          v.event.remove(this, "._submit");
        },
      }),
    v.support.changeBubbles ||
      (v.event.special.change = {
        setup: function () {
          if ($.test(this.nodeName)) {
            if (this.type === "checkbox" || this.type === "radio")
              v.event.add(this, "propertychange._change", function (e) {
                e.originalEvent.propertyName === "checked" &&
                  (this._just_changed = !0);
              }),
                v.event.add(this, "click._change", function (e) {
                  this._just_changed &&
                    !e.isTrigger &&
                    (this._just_changed = !1),
                    v.event.simulate("change", this, e, !0);
                });
            return !1;
          }
          v.event.add(this, "beforeactivate._change", function (e) {
            var t = e.target;
            $.test(t.nodeName) &&
              !v._data(t, "_change_attached") &&
              (v.event.add(t, "change._change", function (e) {
                this.parentNode &&
                  !e.isSimulated &&
                  !e.isTrigger &&
                  v.event.simulate("change", this.parentNode, e, !0);
              }),
              v._data(t, "_change_attached", !0));
          });
        },
        handle: function (e) {
          var t = e.target;
          if (
            this !== t ||
            e.isSimulated ||
            e.isTrigger ||
            (t.type !== "radio" && t.type !== "checkbox")
          )
            return e.handleObj.handler.apply(this, arguments);
        },
        teardown: function () {
          return v.event.remove(this, "._change"), !$.test(this.nodeName);
        },
      }),
    v.support.focusinBubbles ||
      v.each({ focus: "focusin", blur: "focusout" }, function (e, t) {
        var n = 0,
          r = function (e) {
            v.event.simulate(t, e.target, v.event.fix(e), !0);
          };
        v.event.special[t] = {
          setup: function () {
            n++ === 0 && i.addEventListener(e, r, !0);
          },
          teardown: function () {
            --n === 0 && i.removeEventListener(e, r, !0);
          },
        };
      }),
    v.fn.extend({
      on: function (e, n, r, i, s) {
        var o, u;
        if (typeof e == "object") {
          typeof n != "string" && ((r = r || n), (n = t));
          for (u in e) this.on(u, n, r, e[u], s);
          return this;
        }
        r == null && i == null
          ? ((i = n), (r = n = t))
          : i == null &&
            (typeof n == "string"
              ? ((i = r), (r = t))
              : ((i = r), (r = n), (n = t)));
        if (i === !1) i = et;
        else if (!i) return this;
        return (
          s === 1 &&
            ((o = i),
            (i = function (e) {
              return v().off(e), o.apply(this, arguments);
            }),
            (i.guid = o.guid || (o.guid = v.guid++))),
          this.each(function () {
            v.event.add(this, e, i, r, n);
          })
        );
      },
      one: function (e, t, n, r) {
        return this.on(e, t, n, r, 1);
      },
      off: function (e, n, r) {
        var i, s;
        if (e && e.preventDefault && e.handleObj)
          return (
            (i = e.handleObj),
            v(e.delegateTarget).off(
              i.namespace ? i.origType + "." + i.namespace : i.origType,
              i.selector,
              i.handler
            ),
            this
          );
        if (typeof e == "object") {
          for (s in e) this.off(s, n, e[s]);
          return this;
        }
        if (n === !1 || typeof n == "function") (r = n), (n = t);
        return (
          r === !1 && (r = et),
          this.each(function () {
            v.event.remove(this, e, r, n);
          })
        );
      },
      bind: function (e, t, n) {
        return this.on(e, null, t, n);
      },
      unbind: function (e, t) {
        return this.off(e, null, t);
      },
      live: function (e, t, n) {
        return v(this.context).on(e, this.selector, t, n), this;
      },
      die: function (e, t) {
        return v(this.context).off(e, this.selector || "**", t), this;
      },
      delegate: function (e, t, n, r) {
        return this.on(t, e, n, r);
      },
      undelegate: function (e, t, n) {
        return arguments.length === 1
          ? this.off(e, "**")
          : this.off(t, e || "**", n);
      },
      trigger: function (e, t) {
        return this.each(function () {
          v.event.trigger(e, t, this);
        });
      },
      triggerHandler: function (e, t) {
        if (this[0]) return v.event.trigger(e, t, this[0], !0);
      },
      toggle: function (e) {
        var t = arguments,
          n = e.guid || v.guid++,
          r = 0,
          i = function (n) {
            var i = (v._data(this, "lastToggle" + e.guid) || 0) % r;
            return (
              v._data(this, "lastToggle" + e.guid, i + 1),
              n.preventDefault(),
              t[i].apply(this, arguments) || !1
            );
          };
        i.guid = n;
        while (r < t.length) t[r++].guid = n;
        return this.click(i);
      },
      hover: function (e, t) {
        return this.mouseenter(e).mouseleave(t || e);
      },
    }),
    v.each(
      "blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(
        " "
      ),
      function (e, t) {
        (v.fn[t] = function (e, n) {
          return (
            n == null && ((n = e), (e = null)),
            arguments.length > 0 ? this.on(t, null, e, n) : this.trigger(t)
          );
        }),
          Q.test(t) && (v.event.fixHooks[t] = v.event.keyHooks),
          G.test(t) && (v.event.fixHooks[t] = v.event.mouseHooks);
      }
    ),
    (function (e, t) {
      function nt(e, t, n, r) {
        (n = n || []), (t = t || g);
        var i,
          s,
          a,
          f,
          l = t.nodeType;
        if (!e || typeof e != "string") return n;
        if (l !== 1 && l !== 9) return [];
        a = o(t);
        if (!a && !r)
          if ((i = R.exec(e)))
            if ((f = i[1])) {
              if (l === 9) {
                s = t.getElementById(f);
                if (!s || !s.parentNode) return n;
                if (s.id === f) return n.push(s), n;
              } else if (
                t.ownerDocument &&
                (s = t.ownerDocument.getElementById(f)) &&
                u(t, s) &&
                s.id === f
              )
                return n.push(s), n;
            } else {
              if (i[2])
                return S.apply(n, x.call(t.getElementsByTagName(e), 0)), n;
              if ((f = i[3]) && Z && t.getElementsByClassName)
                return S.apply(n, x.call(t.getElementsByClassName(f), 0)), n;
            }
        return vt(e.replace(j, "$1"), t, n, r, a);
      }
      function rt(e) {
        return function (t) {
          var n = t.nodeName.toLowerCase();
          return n === "input" && t.type === e;
        };
      }
      function it(e) {
        return function (t) {
          var n = t.nodeName.toLowerCase();
          return (n === "input" || n === "button") && t.type === e;
        };
      }
      function st(e) {
        return N(function (t) {
          return (
            (t = +t),
            N(function (n, r) {
              var i,
                s = e([], n.length, t),
                o = s.length;
              while (o--) n[(i = s[o])] && (n[i] = !(r[i] = n[i]));
            })
          );
        });
      }
      function ot(e, t, n) {
        if (e === t) return n;
        var r = e.nextSibling;
        while (r) {
          if (r === t) return -1;
          r = r.nextSibling;
        }
        return 1;
      }
      function ut(e, t) {
        var n,
          r,
          s,
          o,
          u,
          a,
          f,
          l = L[d][e + " "];
        if (l) return t ? 0 : l.slice(0);
        (u = e), (a = []), (f = i.preFilter);
        while (u) {
          if (!n || (r = F.exec(u)))
            r && (u = u.slice(r[0].length) || u), a.push((s = []));
          n = !1;
          if ((r = I.exec(u)))
            s.push((n = new m(r.shift()))),
              (u = u.slice(n.length)),
              (n.type = r[0].replace(j, " "));
          for (o in i.filter)
            (r = J[o].exec(u)) &&
              (!f[o] || (r = f[o](r))) &&
              (s.push((n = new m(r.shift()))),
              (u = u.slice(n.length)),
              (n.type = o),
              (n.matches = r));
          if (!n) break;
        }
        return t ? u.length : u ? nt.error(e) : L(e, a).slice(0);
      }
      function at(e, t, r) {
        var i = t.dir,
          s = r && t.dir === "parentNode",
          o = w++;
        return t.first
          ? function (t, n, r) {
              while ((t = t[i])) if (s || t.nodeType === 1) return e(t, n, r);
            }
          : function (t, r, u) {
              if (!u) {
                var a,
                  f = b + " " + o + " ",
                  l = f + n;
                while ((t = t[i]))
                  if (s || t.nodeType === 1) {
                    if ((a = t[d]) === l) return t.sizset;
                    if (typeof a == "string" && a.indexOf(f) === 0) {
                      if (t.sizset) return t;
                    } else {
                      t[d] = l;
                      if (e(t, r, u)) return (t.sizset = !0), t;
                      t.sizset = !1;
                    }
                  }
              } else
                while ((t = t[i]))
                  if (s || t.nodeType === 1) if (e(t, r, u)) return t;
            };
      }
      function ft(e) {
        return e.length > 1
          ? function (t, n, r) {
              var i = e.length;
              while (i--) if (!e[i](t, n, r)) return !1;
              return !0;
            }
          : e[0];
      }
      function lt(e, t, n, r, i) {
        var s,
          o = [],
          u = 0,
          a = e.length,
          f = t != null;
        for (; u < a; u++)
          if ((s = e[u])) if (!n || n(s, r, i)) o.push(s), f && t.push(u);
        return o;
      }
      function ct(e, t, n, r, i, s) {
        return (
          r && !r[d] && (r = ct(r)),
          i && !i[d] && (i = ct(i, s)),
          N(function (s, o, u, a) {
            var f,
              l,
              c,
              h = [],
              p = [],
              d = o.length,
              v = s || dt(t || "*", u.nodeType ? [u] : u, []),
              m = e && (s || !t) ? lt(v, h, e, u, a) : v,
              g = n ? (i || (s ? e : d || r) ? [] : o) : m;
            n && n(m, g, u, a);
            if (r) {
              (f = lt(g, p)), r(f, [], u, a), (l = f.length);
              while (l--) if ((c = f[l])) g[p[l]] = !(m[p[l]] = c);
            }
            if (s) {
              if (i || e) {
                if (i) {
                  (f = []), (l = g.length);
                  while (l--) (c = g[l]) && f.push((m[l] = c));
                  i(null, (g = []), f, a);
                }
                l = g.length;
                while (l--)
                  (c = g[l]) &&
                    (f = i ? T.call(s, c) : h[l]) > -1 &&
                    (s[f] = !(o[f] = c));
              }
            } else (g = lt(g === o ? g.splice(d, g.length) : g)), i ? i(null, o, g, a) : S.apply(o, g);
          })
        );
      }
      function ht(e) {
        var t,
          n,
          r,
          s = e.length,
          o = i.relative[e[0].type],
          u = o || i.relative[" "],
          a = o ? 1 : 0,
          f = at(
            function (e) {
              return e === t;
            },
            u,
            !0
          ),
          l = at(
            function (e) {
              return T.call(t, e) > -1;
            },
            u,
            !0
          ),
          h = [
            function (e, n, r) {
              return (
                (!o && (r || n !== c)) ||
                ((t = n).nodeType ? f(e, n, r) : l(e, n, r))
              );
            },
          ];
        for (; a < s; a++)
          if ((n = i.relative[e[a].type])) h = [at(ft(h), n)];
          else {
            n = i.filter[e[a].type].apply(null, e[a].matches);
            if (n[d]) {
              r = ++a;
              for (; r < s; r++) if (i.relative[e[r].type]) break;
              return ct(
                a > 1 && ft(h),
                a > 1 &&
                  e
                    .slice(0, a - 1)
                    .join("")
                    .replace(j, "$1"),
                n,
                a < r && ht(e.slice(a, r)),
                r < s && ht((e = e.slice(r))),
                r < s && e.join("")
              );
            }
            h.push(n);
          }
        return ft(h);
      }
      function pt(e, t) {
        var r = t.length > 0,
          s = e.length > 0,
          o = function (u, a, f, l, h) {
            var p,
              d,
              v,
              m = [],
              y = 0,
              w = "0",
              x = u && [],
              T = h != null,
              N = c,
              C = u || (s && i.find.TAG("*", (h && a.parentNode) || a)),
              k = (b += N == null ? 1 : Math.E);
            T && ((c = a !== g && a), (n = o.el));
            for (; (p = C[w]) != null; w++) {
              if (s && p) {
                for (d = 0; (v = e[d]); d++)
                  if (v(p, a, f)) {
                    l.push(p);
                    break;
                  }
                T && ((b = k), (n = ++o.el));
              }
              r && ((p = !v && p) && y--, u && x.push(p));
            }
            y += w;
            if (r && w !== y) {
              for (d = 0; (v = t[d]); d++) v(x, m, a, f);
              if (u) {
                if (y > 0) while (w--) !x[w] && !m[w] && (m[w] = E.call(l));
                m = lt(m);
              }
              S.apply(l, m),
                T && !u && m.length > 0 && y + t.length > 1 && nt.uniqueSort(l);
            }
            return T && ((b = k), (c = N)), x;
          };
        return (o.el = 0), r ? N(o) : o;
      }
      function dt(e, t, n) {
        var r = 0,
          i = t.length;
        for (; r < i; r++) nt(e, t[r], n);
        return n;
      }
      function vt(e, t, n, r, s) {
        var o,
          u,
          f,
          l,
          c,
          h = ut(e),
          p = h.length;
        if (!r && h.length === 1) {
          u = h[0] = h[0].slice(0);
          if (
            u.length > 2 &&
            (f = u[0]).type === "ID" &&
            t.nodeType === 9 &&
            !s &&
            i.relative[u[1].type]
          ) {
            t = i.find.ID(f.matches[0].replace($, ""), t, s)[0];
            if (!t) return n;
            e = e.slice(u.shift().length);
          }
          for (o = J.POS.test(e) ? -1 : u.length - 1; o >= 0; o--) {
            f = u[o];
            if (i.relative[(l = f.type)]) break;
            if ((c = i.find[l]))
              if (
                (r = c(
                  f.matches[0].replace($, ""),
                  (z.test(u[0].type) && t.parentNode) || t,
                  s
                ))
              ) {
                u.splice(o, 1), (e = r.length && u.join(""));
                if (!e) return S.apply(n, x.call(r, 0)), n;
                break;
              }
          }
        }
        return a(e, h)(r, t, s, n, z.test(e)), n;
      }
      function mt() {}
      var n,
        r,
        i,
        s,
        o,
        u,
        a,
        f,
        l,
        c,
        h = !0,
        p = "undefined",
        d = ("sizcache" + Math.random()).replace(".", ""),
        m = String,
        g = e.document,
        y = g.documentElement,
        b = 0,
        w = 0,
        E = [].pop,
        S = [].push,
        x = [].slice,
        T =
          [].indexOf ||
          function (e) {
            var t = 0,
              n = this.length;
            for (; t < n; t++) if (this[t] === e) return t;
            return -1;
          },
        N = function (e, t) {
          return (e[d] = t == null || t), e;
        },
        C = function () {
          var e = {},
            t = [];
          return N(function (n, r) {
            return (
              t.push(n) > i.cacheLength && delete e[t.shift()], (e[n + " "] = r)
            );
          }, e);
        },
        k = C(),
        L = C(),
        A = C(),
        O = "[\\x20\\t\\r\\n\\f]",
        M = "(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+",
        _ = M.replace("w", "w#"),
        D = "([*^$|!~]?=)",
        P =
          "\\[" +
          O +
          "*(" +
          M +
          ")" +
          O +
          "*(?:" +
          D +
          O +
          "*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|(" +
          _ +
          ")|)|)" +
          O +
          "*\\]",
        H =
          ":(" +
          M +
          ")(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|([^()[\\]]*|(?:(?:" +
          P +
          ")|[^:]|\\\\.)*|.*))\\)|)",
        B =
          ":(even|odd|eq|gt|lt|nth|first|last)(?:\\(" +
          O +
          "*((?:-\\d)?\\d*)" +
          O +
          "*\\)|)(?=[^-]|$)",
        j = new RegExp("^" + O + "+|((?:^|[^\\\\])(?:\\\\.)*)" + O + "+$", "g"),
        F = new RegExp("^" + O + "*," + O + "*"),
        I = new RegExp("^" + O + "*([\\x20\\t\\r\\n\\f>+~])" + O + "*"),
        q = new RegExp(H),
        R = /^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,
        U = /^:not/,
        z = /[\x20\t\r\n\f]*[+~]/,
        W = /:not\($/,
        X = /h\d/i,
        V = /input|select|textarea|button/i,
        $ = /\\(?!\\)/g,
        J = {
          ID: new RegExp("^#(" + M + ")"),
          CLASS: new RegExp("^\\.(" + M + ")"),
          NAME: new RegExp("^\\[name=['\"]?(" + M + ")['\"]?\\]"),
          TAG: new RegExp("^(" + M.replace("w", "w*") + ")"),
          ATTR: new RegExp("^" + P),
          PSEUDO: new RegExp("^" + H),
          POS: new RegExp(B, "i"),
          CHILD: new RegExp(
            "^:(only|nth|first|last)-child(?:\\(" +
              O +
              "*(even|odd|(([+-]|)(\\d*)n|)" +
              O +
              "*(?:([+-]|)" +
              O +
              "*(\\d+)|))" +
              O +
              "*\\)|)",
            "i"
          ),
          needsContext: new RegExp("^" + O + "*[>+~]|" + B, "i"),
        },
        K = function (e) {
          var t = g.createElement("div");
          try {
            return e(t);
          } catch (n) {
            return !1;
          } finally {
            t = null;
          }
        },
        Q = K(function (e) {
          return (
            e.appendChild(g.createComment("")),
            !e.getElementsByTagName("*").length
          );
        }),
        G = K(function (e) {
          return (
            (e.innerHTML = "<a href='#'></a>"),
            e.firstChild &&
              typeof e.firstChild.getAttribute !== p &&
              e.firstChild.getAttribute("href") === "#"
          );
        }),
        Y = K(function (e) {
          e.innerHTML = "<select></select>";
          var t = typeof e.lastChild.getAttribute("multiple");
          return t !== "boolean" && t !== "string";
        }),
        Z = K(function (e) {
          return (
            (e.innerHTML =
              "<div class='hidden e'></div><div class='hidden'></div>"),
            !e.getElementsByClassName || !e.getElementsByClassName("e").length
              ? !1
              : ((e.lastChild.className = "e"),
                e.getElementsByClassName("e").length === 2)
          );
        }),
        et = K(function (e) {
          (e.id = d + 0),
            (e.innerHTML =
              "<a name='" + d + "'></a><div name='" + d + "'></div>"),
            y.insertBefore(e, y.firstChild);
          var t =
            g.getElementsByName &&
            g.getElementsByName(d).length ===
              2 + g.getElementsByName(d + 0).length;
          return (r = !g.getElementById(d)), y.removeChild(e), t;
        });
      try {
        x.call(y.childNodes, 0)[0].nodeType;
      } catch (tt) {
        x = function (e) {
          var t,
            n = [];
          for (; (t = this[e]); e++) n.push(t);
          return n;
        };
      }
      (nt.matches = function (e, t) {
        return nt(e, null, null, t);
      }),
        (nt.matchesSelector = function (e, t) {
          return nt(t, null, null, [e]).length > 0;
        }),
        (s = nt.getText = function (e) {
          var t,
            n = "",
            r = 0,
            i = e.nodeType;
          if (i) {
            if (i === 1 || i === 9 || i === 11) {
              if (typeof e.textContent == "string") return e.textContent;
              for (e = e.firstChild; e; e = e.nextSibling) n += s(e);
            } else if (i === 3 || i === 4) return e.nodeValue;
          } else for (; (t = e[r]); r++) n += s(t);
          return n;
        }),
        (o = nt.isXML = function (e) {
          var t = e && (e.ownerDocument || e).documentElement;
          return t ? t.nodeName !== "HTML" : !1;
        }),
        (u = nt.contains = y.contains
          ? function (e, t) {
              var n = e.nodeType === 9 ? e.documentElement : e,
                r = t && t.parentNode;
              return (
                e === r ||
                !!(r && r.nodeType === 1 && n.contains && n.contains(r))
              );
            }
          : y.compareDocumentPosition
          ? function (e, t) {
              return t && !!(e.compareDocumentPosition(t) & 16);
            }
          : function (e, t) {
              while ((t = t.parentNode)) if (t === e) return !0;
              return !1;
            }),
        (nt.attr = function (e, t) {
          var n,
            r = o(e);
          return (
            r || (t = t.toLowerCase()),
            (n = i.attrHandle[t])
              ? n(e)
              : r || Y
              ? e.getAttribute(t)
              : ((n = e.getAttributeNode(t)),
                n
                  ? typeof e[t] == "boolean"
                    ? e[t]
                      ? t
                      : null
                    : n.specified
                    ? n.value
                    : null
                  : null)
          );
        }),
        (i = nt.selectors = {
          cacheLength: 50,
          createPseudo: N,
          match: J,
          attrHandle: G
            ? {}
            : {
                href: function (e) {
                  return e.getAttribute("href", 2);
                },
                type: function (e) {
                  return e.getAttribute("type");
                },
              },
          find: {
            ID: r
              ? function (e, t, n) {
                  if (typeof t.getElementById !== p && !n) {
                    var r = t.getElementById(e);
                    return r && r.parentNode ? [r] : [];
                  }
                }
              : function (e, n, r) {
                  if (typeof n.getElementById !== p && !r) {
                    var i = n.getElementById(e);
                    return i
                      ? i.id === e ||
                        (typeof i.getAttributeNode !== p &&
                          i.getAttributeNode("id").value === e)
                        ? [i]
                        : t
                      : [];
                  }
                },
            TAG: Q
              ? function (e, t) {
                  if (typeof t.getElementsByTagName !== p)
                    return t.getElementsByTagName(e);
                }
              : function (e, t) {
                  var n = t.getElementsByTagName(e);
                  if (e === "*") {
                    var r,
                      i = [],
                      s = 0;
                    for (; (r = n[s]); s++) r.nodeType === 1 && i.push(r);
                    return i;
                  }
                  return n;
                },
            NAME:
              et &&
              function (e, t) {
                if (typeof t.getElementsByName !== p)
                  return t.getElementsByName(name);
              },
            CLASS:
              Z &&
              function (e, t, n) {
                if (typeof t.getElementsByClassName !== p && !n)
                  return t.getElementsByClassName(e);
              },
          },
          relative: {
            ">": { dir: "parentNode", first: !0 },
            " ": { dir: "parentNode" },
            "+": { dir: "previousSibling", first: !0 },
            "~": { dir: "previousSibling" },
          },
          preFilter: {
            ATTR: function (e) {
              return (
                (e[1] = e[1].replace($, "")),
                (e[3] = (e[4] || e[5] || "").replace($, "")),
                e[2] === "~=" && (e[3] = " " + e[3] + " "),
                e.slice(0, 4)
              );
            },
            CHILD: function (e) {
              return (
                (e[1] = e[1].toLowerCase()),
                e[1] === "nth"
                  ? (e[2] || nt.error(e[0]),
                    (e[3] = +(e[3]
                      ? e[4] + (e[5] || 1)
                      : 2 * (e[2] === "even" || e[2] === "odd"))),
                    (e[4] = +(e[6] + e[7] || e[2] === "odd")))
                  : e[2] && nt.error(e[0]),
                e
              );
            },
            PSEUDO: function (e) {
              var t, n;
              if (J.CHILD.test(e[0])) return null;
              if (e[3]) e[2] = e[3];
              else if ((t = e[4]))
                q.test(t) &&
                  (n = ut(t, !0)) &&
                  (n = t.indexOf(")", t.length - n) - t.length) &&
                  ((t = t.slice(0, n)), (e[0] = e[0].slice(0, n))),
                  (e[2] = t);
              return e.slice(0, 3);
            },
          },
          filter: {
            ID: r
              ? function (e) {
                  return (
                    (e = e.replace($, "")),
                    function (t) {
                      return t.getAttribute("id") === e;
                    }
                  );
                }
              : function (e) {
                  return (
                    (e = e.replace($, "")),
                    function (t) {
                      var n =
                        typeof t.getAttributeNode !== p &&
                        t.getAttributeNode("id");
                      return n && n.value === e;
                    }
                  );
                },
            TAG: function (e) {
              return e === "*"
                ? function () {
                    return !0;
                  }
                : ((e = e.replace($, "").toLowerCase()),
                  function (t) {
                    return t.nodeName && t.nodeName.toLowerCase() === e;
                  });
            },
            CLASS: function (e) {
              var t = k[d][e + " "];
              return (
                t ||
                ((t = new RegExp("(^|" + O + ")" + e + "(" + O + "|$)")) &&
                  k(e, function (e) {
                    return t.test(
                      e.className ||
                        (typeof e.getAttribute !== p &&
                          e.getAttribute("class")) ||
                        ""
                    );
                  }))
              );
            },
            ATTR: function (e, t, n) {
              return function (r, i) {
                var s = nt.attr(r, e);
                return s == null
                  ? t === "!="
                  : t
                  ? ((s += ""),
                    t === "="
                      ? s === n
                      : t === "!="
                      ? s !== n
                      : t === "^="
                      ? n && s.indexOf(n) === 0
                      : t === "*="
                      ? n && s.indexOf(n) > -1
                      : t === "$="
                      ? n && s.substr(s.length - n.length) === n
                      : t === "~="
                      ? (" " + s + " ").indexOf(n) > -1
                      : t === "|="
                      ? s === n || s.substr(0, n.length + 1) === n + "-"
                      : !1)
                  : !0;
              };
            },
            CHILD: function (e, t, n, r) {
              return e === "nth"
                ? function (e) {
                    var t,
                      i,
                      s = e.parentNode;
                    if (n === 1 && r === 0) return !0;
                    if (s) {
                      i = 0;
                      for (t = s.firstChild; t; t = t.nextSibling)
                        if (t.nodeType === 1) {
                          i++;
                          if (e === t) break;
                        }
                    }
                    return (i -= r), i === n || (i % n === 0 && i / n >= 0);
                  }
                : function (t) {
                    var n = t;
                    switch (e) {
                      case "only":
                      case "first":
                        while ((n = n.previousSibling))
                          if (n.nodeType === 1) return !1;
                        if (e === "first") return !0;
                        n = t;
                      case "last":
                        while ((n = n.nextSibling))
                          if (n.nodeType === 1) return !1;
                        return !0;
                    }
                  };
            },
            PSEUDO: function (e, t) {
              var n,
                r =
                  i.pseudos[e] ||
                  i.setFilters[e.toLowerCase()] ||
                  nt.error("unsupported pseudo: " + e);
              return r[d]
                ? r(t)
                : r.length > 1
                ? ((n = [e, e, "", t]),
                  i.setFilters.hasOwnProperty(e.toLowerCase())
                    ? N(function (e, n) {
                        var i,
                          s = r(e, t),
                          o = s.length;
                        while (o--)
                          (i = T.call(e, s[o])), (e[i] = !(n[i] = s[o]));
                      })
                    : function (e) {
                        return r(e, 0, n);
                      })
                : r;
            },
          },
          pseudos: {
            not: N(function (e) {
              var t = [],
                n = [],
                r = a(e.replace(j, "$1"));
              return r[d]
                ? N(function (e, t, n, i) {
                    var s,
                      o = r(e, null, i, []),
                      u = e.length;
                    while (u--) if ((s = o[u])) e[u] = !(t[u] = s);
                  })
                : function (e, i, s) {
                    return (t[0] = e), r(t, null, s, n), !n.pop();
                  };
            }),
            has: N(function (e) {
              return function (t) {
                return nt(e, t).length > 0;
              };
            }),
            contains: N(function (e) {
              return function (t) {
                return (t.textContent || t.innerText || s(t)).indexOf(e) > -1;
              };
            }),
            enabled: function (e) {
              return e.disabled === !1;
            },
            disabled: function (e) {
              return e.disabled === !0;
            },
            checked: function (e) {
              var t = e.nodeName.toLowerCase();
              return (
                (t === "input" && !!e.checked) ||
                (t === "option" && !!e.selected)
              );
            },
            selected: function (e) {
              return (
                e.parentNode && e.parentNode.selectedIndex, e.selected === !0
              );
            },
            parent: function (e) {
              return !i.pseudos.empty(e);
            },
            empty: function (e) {
              var t;
              e = e.firstChild;
              while (e) {
                if (e.nodeName > "@" || (t = e.nodeType) === 3 || t === 4)
                  return !1;
                e = e.nextSibling;
              }
              return !0;
            },
            header: function (e) {
              return X.test(e.nodeName);
            },
            text: function (e) {
              var t, n;
              return (
                e.nodeName.toLowerCase() === "input" &&
                (t = e.type) === "text" &&
                ((n = e.getAttribute("type")) == null || n.toLowerCase() === t)
              );
            },
            radio: rt("radio"),
            checkbox: rt("checkbox"),
            file: rt("file"),
            password: rt("password"),
            image: rt("image"),
            submit: it("submit"),
            reset: it("reset"),
            button: function (e) {
              var t = e.nodeName.toLowerCase();
              return (t === "input" && e.type === "button") || t === "button";
            },
            input: function (e) {
              return V.test(e.nodeName);
            },
            focus: function (e) {
              var t = e.ownerDocument;
              return (
                e === t.activeElement &&
                (!t.hasFocus || t.hasFocus()) &&
                !!(e.type || e.href || ~e.tabIndex)
              );
            },
            active: function (e) {
              return e === e.ownerDocument.activeElement;
            },
            first: st(function () {
              return [0];
            }),
            last: st(function (e, t) {
              return [t - 1];
            }),
            eq: st(function (e, t, n) {
              return [n < 0 ? n + t : n];
            }),
            even: st(function (e, t) {
              for (var n = 0; n < t; n += 2) e.push(n);
              return e;
            }),
            odd: st(function (e, t) {
              for (var n = 1; n < t; n += 2) e.push(n);
              return e;
            }),
            lt: st(function (e, t, n) {
              for (var r = n < 0 ? n + t : n; --r >= 0; ) e.push(r);
              return e;
            }),
            gt: st(function (e, t, n) {
              for (var r = n < 0 ? n + t : n; ++r < t; ) e.push(r);
              return e;
            }),
          },
        }),
        (f = y.compareDocumentPosition
          ? function (e, t) {
              return e === t
                ? ((l = !0), 0)
                : (
                    !e.compareDocumentPosition || !t.compareDocumentPosition
                      ? e.compareDocumentPosition
                      : e.compareDocumentPosition(t) & 4
                  )
                ? -1
                : 1;
            }
          : function (e, t) {
              if (e === t) return (l = !0), 0;
              if (e.sourceIndex && t.sourceIndex)
                return e.sourceIndex - t.sourceIndex;
              var n,
                r,
                i = [],
                s = [],
                o = e.parentNode,
                u = t.parentNode,
                a = o;
              if (o === u) return ot(e, t);
              if (!o) return -1;
              if (!u) return 1;
              while (a) i.unshift(a), (a = a.parentNode);
              a = u;
              while (a) s.unshift(a), (a = a.parentNode);
              (n = i.length), (r = s.length);
              for (var f = 0; f < n && f < r; f++)
                if (i[f] !== s[f]) return ot(i[f], s[f]);
              return f === n ? ot(e, s[f], -1) : ot(i[f], t, 1);
            }),
        [0, 0].sort(f),
        (h = !l),
        (nt.uniqueSort = function (e) {
          var t,
            n = [],
            r = 1,
            i = 0;
          (l = h), e.sort(f);
          if (l) {
            for (; (t = e[r]); r++) t === e[r - 1] && (i = n.push(r));
            while (i--) e.splice(n[i], 1);
          }
          return e;
        }),
        (nt.error = function (e) {
          throw new Error("Syntax error, unrecognized expression: " + e);
        }),
        (a = nt.compile = function (e, t) {
          var n,
            r = [],
            i = [],
            s = A[d][e + " "];
          if (!s) {
            t || (t = ut(e)), (n = t.length);
            while (n--) (s = ht(t[n])), s[d] ? r.push(s) : i.push(s);
            s = A(e, pt(i, r));
          }
          return s;
        }),
        g.querySelectorAll &&
          (function () {
            var e,
              t = vt,
              n = /'|\\/g,
              r = /\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,
              i = [":focus"],
              s = [":active"],
              u =
                y.matchesSelector ||
                y.mozMatchesSelector ||
                y.webkitMatchesSelector ||
                y.oMatchesSelector ||
                y.msMatchesSelector;
            K(function (e) {
              (e.innerHTML = "<select><option selected=''></option></select>"),
                e.querySelectorAll("[selected]").length ||
                  i.push(
                    "\\[" +
                      O +
                      "*(?:checked|disabled|ismap|multiple|readonly|selected|value)"
                  ),
                e.querySelectorAll(":checked").length || i.push(":checked");
            }),
              K(function (e) {
                (e.innerHTML = "<p test=''></p>"),
                  e.querySelectorAll("[test^='']").length &&
                    i.push("[*^$]=" + O + "*(?:\"\"|'')"),
                  (e.innerHTML = "<input type='hidden'/>"),
                  e.querySelectorAll(":enabled").length ||
                    i.push(":enabled", ":disabled");
              }),
              (i = new RegExp(i.join("|"))),
              (vt = function (e, r, s, o, u) {
                if (!o && !u && !i.test(e)) {
                  var a,
                    f,
                    l = !0,
                    c = d,
                    h = r,
                    p = r.nodeType === 9 && e;
                  if (
                    r.nodeType === 1 &&
                    r.nodeName.toLowerCase() !== "object"
                  ) {
                    (a = ut(e)),
                      (l = r.getAttribute("id"))
                        ? (c = l.replace(n, "\\$&"))
                        : r.setAttribute("id", c),
                      (c = "[id='" + c + "'] "),
                      (f = a.length);
                    while (f--) a[f] = c + a[f].join("");
                    (h = (z.test(e) && r.parentNode) || r), (p = a.join(","));
                  }
                  if (p)
                    try {
                      return S.apply(s, x.call(h.querySelectorAll(p), 0)), s;
                    } catch (v) {
                    } finally {
                      l || r.removeAttribute("id");
                    }
                }
                return t(e, r, s, o, u);
              }),
              u &&
                (K(function (t) {
                  e = u.call(t, "div");
                  try {
                    u.call(t, "[test!='']:sizzle"), s.push("!=", H);
                  } catch (n) {}
                }),
                (s = new RegExp(s.join("|"))),
                (nt.matchesSelector = function (t, n) {
                  n = n.replace(r, "='$1']");
                  if (!o(t) && !s.test(n) && !i.test(n))
                    try {
                      var a = u.call(t, n);
                      if (a || e || (t.document && t.document.nodeType !== 11))
                        return a;
                    } catch (f) {}
                  return nt(n, null, null, [t]).length > 0;
                }));
          })(),
        (i.pseudos.nth = i.pseudos.eq),
        (i.filters = mt.prototype = i.pseudos),
        (i.setFilters = new mt()),
        (nt.attr = v.attr),
        (v.find = nt),
        (v.expr = nt.selectors),
        (v.expr[":"] = v.expr.pseudos),
        (v.unique = nt.uniqueSort),
        (v.text = nt.getText),
        (v.isXMLDoc = nt.isXML),
        (v.contains = nt.contains);
    })(e);
  var nt = /Until$/,
    rt = /^(?:parents|prev(?:Until|All))/,
    it = /^.[^:#\[\.,]*$/,
    st = v.expr.match.needsContext,
    ot = { children: !0, contents: !0, next: !0, prev: !0 };
  v.fn.extend({
    find: function (e) {
      var t,
        n,
        r,
        i,
        s,
        o,
        u = this;
      if (typeof e != "string")
        return v(e).filter(function () {
          for (t = 0, n = u.length; t < n; t++)
            if (v.contains(u[t], this)) return !0;
        });
      o = this.pushStack("", "find", e);
      for (t = 0, n = this.length; t < n; t++) {
        (r = o.length), v.find(e, this[t], o);
        if (t > 0)
          for (i = r; i < o.length; i++)
            for (s = 0; s < r; s++)
              if (o[s] === o[i]) {
                o.splice(i--, 1);
                break;
              }
      }
      return o;
    },
    has: function (e) {
      var t,
        n = v(e, this),
        r = n.length;
      return this.filter(function () {
        for (t = 0; t < r; t++) if (v.contains(this, n[t])) return !0;
      });
    },
    not: function (e) {
      return this.pushStack(ft(this, e, !1), "not", e);
    },
    filter: function (e) {
      return this.pushStack(ft(this, e, !0), "filter", e);
    },
    is: function (e) {
      return (
        !!e &&
        (typeof e == "string"
          ? st.test(e)
            ? v(e, this.context).index(this[0]) >= 0
            : v.filter(e, this).length > 0
          : this.filter(e).length > 0)
      );
    },
    closest: function (e, t) {
      var n,
        r = 0,
        i = this.length,
        s = [],
        o = st.test(e) || typeof e != "string" ? v(e, t || this.context) : 0;
      for (; r < i; r++) {
        n = this[r];
        while (n && n.ownerDocument && n !== t && n.nodeType !== 11) {
          if (o ? o.index(n) > -1 : v.find.matchesSelector(n, e)) {
            s.push(n);
            break;
          }
          n = n.parentNode;
        }
      }
      return (
        (s = s.length > 1 ? v.unique(s) : s), this.pushStack(s, "closest", e)
      );
    },
    index: function (e) {
      return e
        ? typeof e == "string"
          ? v.inArray(this[0], v(e))
          : v.inArray(e.jquery ? e[0] : e, this)
        : this[0] && this[0].parentNode
        ? this.prevAll().length
        : -1;
    },
    add: function (e, t) {
      var n =
          typeof e == "string"
            ? v(e, t)
            : v.makeArray(e && e.nodeType ? [e] : e),
        r = v.merge(this.get(), n);
      return this.pushStack(ut(n[0]) || ut(r[0]) ? r : v.unique(r));
    },
    addBack: function (e) {
      return this.add(e == null ? this.prevObject : this.prevObject.filter(e));
    },
  }),
    (v.fn.andSelf = v.fn.addBack),
    v.each(
      {
        parent: function (e) {
          var t = e.parentNode;
          return t && t.nodeType !== 11 ? t : null;
        },
        parents: function (e) {
          return v.dir(e, "parentNode");
        },
        parentsUntil: function (e, t, n) {
          return v.dir(e, "parentNode", n);
        },
        next: function (e) {
          return at(e, "nextSibling");
        },
        prev: function (e) {
          return at(e, "previousSibling");
        },
        nextAll: function (e) {
          return v.dir(e, "nextSibling");
        },
        prevAll: function (e) {
          return v.dir(e, "previousSibling");
        },
        nextUntil: function (e, t, n) {
          return v.dir(e, "nextSibling", n);
        },
        prevUntil: function (e, t, n) {
          return v.dir(e, "previousSibling", n);
        },
        siblings: function (e) {
          return v.sibling((e.parentNode || {}).firstChild, e);
        },
        children: function (e) {
          return v.sibling(e.firstChild);
        },
        contents: function (e) {
          return v.nodeName(e, "iframe")
            ? e.contentDocument || e.contentWindow.document
            : v.merge([], e.childNodes);
        },
      },
      function (e, t) {
        v.fn[e] = function (n, r) {
          var i = v.map(this, t, n);
          return (
            nt.test(e) || (r = n),
            r && typeof r == "string" && (i = v.filter(r, i)),
            (i = this.length > 1 && !ot[e] ? v.unique(i) : i),
            this.length > 1 && rt.test(e) && (i = i.reverse()),
            this.pushStack(i, e, l.call(arguments).join(","))
          );
        };
      }
    ),
    v.extend({
      filter: function (e, t, n) {
        return (
          n && (e = ":not(" + e + ")"),
          t.length === 1
            ? v.find.matchesSelector(t[0], e)
              ? [t[0]]
              : []
            : v.find.matches(e, t)
        );
      },
      dir: function (e, n, r) {
        var i = [],
          s = e[n];
        while (
          s &&
          s.nodeType !== 9 &&
          (r === t || s.nodeType !== 1 || !v(s).is(r))
        )
          s.nodeType === 1 && i.push(s), (s = s[n]);
        return i;
      },
      sibling: function (e, t) {
        var n = [];
        for (; e; e = e.nextSibling) e.nodeType === 1 && e !== t && n.push(e);
        return n;
      },
    });
  var ct =
      "abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",
    ht = / jQuery\d+="(?:null|\d+)"/g,
    pt = /^\s+/,
    dt = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,
    vt = /<([\w:]+)/,
    mt = /<tbody/i,
    gt = /<|&#?\w+;/,
    yt = /<(?:script|style|link)/i,
    bt = /<(?:script|object|embed|option|style)/i,
    wt = new RegExp("<(?:" + ct + ")[\\s/>]", "i"),
    Et = /^(?:checkbox|radio)$/,
    St = /checked\s*(?:[^=]|=\s*.checked.)/i,
    xt = /\/(java|ecma)script/i,
    Tt = /^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,
    Nt = {
      option: [1, "<select multiple='multiple'>", "</select>"],
      legend: [1, "<fieldset>", "</fieldset>"],
      thead: [1, "<table>", "</table>"],
      tr: [2, "<table><tbody>", "</tbody></table>"],
      td: [3, "<table><tbody><tr>", "</tr></tbody></table>"],
      col: [2, "<table><tbody></tbody><colgroup>", "</colgroup></table>"],
      area: [1, "<map>", "</map>"],
      _default: [0, "", ""],
    },
    Ct = lt(i),
    kt = Ct.appendChild(i.createElement("div"));
  (Nt.optgroup = Nt.option),
    (Nt.tbody = Nt.tfoot = Nt.colgroup = Nt.caption = Nt.thead),
    (Nt.th = Nt.td),
    v.support.htmlSerialize || (Nt._default = [1, "X<div>", "</div>"]),
    v.fn.extend({
      text: function (e) {
        return v.access(
          this,
          function (e) {
            return e === t
              ? v.text(this)
              : this.empty().append(
                  ((this[0] && this[0].ownerDocument) || i).createTextNode(e)
                );
          },
          null,
          e,
          arguments.length
        );
      },
      wrapAll: function (e) {
        if (v.isFunction(e))
          return this.each(function (t) {
            v(this).wrapAll(e.call(this, t));
          });
        if (this[0]) {
          var t = v(e, this[0].ownerDocument).eq(0).clone(!0);
          this[0].parentNode && t.insertBefore(this[0]),
            t
              .map(function () {
                var e = this;
                while (e.firstChild && e.firstChild.nodeType === 1)
                  e = e.firstChild;
                return e;
              })
              .append(this);
        }
        return this;
      },
      wrapInner: function (e) {
        return v.isFunction(e)
          ? this.each(function (t) {
              v(this).wrapInner(e.call(this, t));
            })
          : this.each(function () {
              var t = v(this),
                n = t.contents();
              n.length ? n.wrapAll(e) : t.append(e);
            });
      },
      wrap: function (e) {
        var t = v.isFunction(e);
        return this.each(function (n) {
          v(this).wrapAll(t ? e.call(this, n) : e);
        });
      },
      unwrap: function () {
        return this.parent()
          .each(function () {
            v.nodeName(this, "body") || v(this).replaceWith(this.childNodes);
          })
          .end();
      },
      append: function () {
        return this.domManip(arguments, !0, function (e) {
          (this.nodeType === 1 || this.nodeType === 11) && this.appendChild(e);
        });
      },
      prepend: function () {
        return this.domManip(arguments, !0, function (e) {
          (this.nodeType === 1 || this.nodeType === 11) &&
            this.insertBefore(e, this.firstChild);
        });
      },
      before: function () {
        if (!ut(this[0]))
          return this.domManip(arguments, !1, function (e) {
            this.parentNode.insertBefore(e, this);
          });
        if (arguments.length) {
          var e = v.clean(arguments);
          return this.pushStack(v.merge(e, this), "before", this.selector);
        }
      },
      after: function () {
        if (!ut(this[0]))
          return this.domManip(arguments, !1, function (e) {
            this.parentNode.insertBefore(e, this.nextSibling);
          });
        if (arguments.length) {
          var e = v.clean(arguments);
          return this.pushStack(v.merge(this, e), "after", this.selector);
        }
      },
      remove: function (e, t) {
        var n,
          r = 0;
        for (; (n = this[r]) != null; r++)
          if (!e || v.filter(e, [n]).length)
            !t &&
              n.nodeType === 1 &&
              (v.cleanData(n.getElementsByTagName("*")), v.cleanData([n])),
              n.parentNode && n.parentNode.removeChild(n);
        return this;
      },
      empty: function () {
        var e,
          t = 0;
        for (; (e = this[t]) != null; t++) {
          e.nodeType === 1 && v.cleanData(e.getElementsByTagName("*"));
          while (e.firstChild) e.removeChild(e.firstChild);
        }
        return this;
      },
      clone: function (e, t) {
        return (
          (e = e == null ? !1 : e),
          (t = t == null ? e : t),
          this.map(function () {
            return v.clone(this, e, t);
          })
        );
      },
      html: function (e) {
        return v.access(
          this,
          function (e) {
            var n = this[0] || {},
              r = 0,
              i = this.length;
            if (e === t)
              return n.nodeType === 1 ? n.innerHTML.replace(ht, "") : t;
            if (
              typeof e == "string" &&
              !yt.test(e) &&
              (v.support.htmlSerialize || !wt.test(e)) &&
              (v.support.leadingWhitespace || !pt.test(e)) &&
              !Nt[(vt.exec(e) || ["", ""])[1].toLowerCase()]
            ) {
              e = e.replace(dt, "<$1></$2>");
              try {
                for (; r < i; r++)
                  (n = this[r] || {}),
                    n.nodeType === 1 &&
                      (v.cleanData(n.getElementsByTagName("*")),
                      (n.innerHTML = e));
                n = 0;
              } catch (s) {}
            }
            n && this.empty().append(e);
          },
          null,
          e,
          arguments.length
        );
      },
      replaceWith: function (e) {
        return ut(this[0])
          ? this.length
            ? this.pushStack(v(v.isFunction(e) ? e() : e), "replaceWith", e)
            : this
          : v.isFunction(e)
          ? this.each(function (t) {
              var n = v(this),
                r = n.html();
              n.replaceWith(e.call(this, t, r));
            })
          : (typeof e != "string" && (e = v(e).detach()),
            this.each(function () {
              var t = this.nextSibling,
                n = this.parentNode;
              v(this).remove(), t ? v(t).before(e) : v(n).append(e);
            }));
      },
      detach: function (e) {
        return this.remove(e, !0);
      },
      domManip: function (e, n, r) {
        e = [].concat.apply([], e);
        var i,
          s,
          o,
          u,
          a = 0,
          f = e[0],
          l = [],
          c = this.length;
        if (
          !v.support.checkClone &&
          c > 1 &&
          typeof f == "string" &&
          St.test(f)
        )
          return this.each(function () {
            v(this).domManip(e, n, r);
          });
        if (v.isFunction(f))
          return this.each(function (i) {
            var s = v(this);
            (e[0] = f.call(this, i, n ? s.html() : t)), s.domManip(e, n, r);
          });
        if (this[0]) {
          (i = v.buildFragment(e, this, l)),
            (o = i.fragment),
            (s = o.firstChild),
            o.childNodes.length === 1 && (o = s);
          if (s) {
            n = n && v.nodeName(s, "tr");
            for (u = i.cacheable || c - 1; a < c; a++)
              r.call(
                n && v.nodeName(this[a], "table")
                  ? Lt(this[a], "tbody")
                  : this[a],
                a === u ? o : v.clone(o, !0, !0)
              );
          }
          (o = s = null),
            l.length &&
              v.each(l, function (e, t) {
                t.src
                  ? v.ajax
                    ? v.ajax({
                        url: t.src,
                        type: "GET",
                        dataType: "script",
                        async: !1,
                        global: !1,
                        throws: !0,
                      })
                    : v.error("no ajax")
                  : v.globalEval(
                      (t.text || t.textContent || t.innerHTML || "").replace(
                        Tt,
                        ""
                      )
                    ),
                  t.parentNode && t.parentNode.removeChild(t);
              });
        }
        return this;
      },
    }),
    (v.buildFragment = function (e, n, r) {
      var s,
        o,
        u,
        a = e[0];
      return (
        (n = n || i),
        (n = (!n.nodeType && n[0]) || n),
        (n = n.ownerDocument || n),
        e.length === 1 &&
          typeof a == "string" &&
          a.length < 512 &&
          n === i &&
          a.charAt(0) === "<" &&
          !bt.test(a) &&
          (v.support.checkClone || !St.test(a)) &&
          (v.support.html5Clone || !wt.test(a)) &&
          ((o = !0), (s = v.fragments[a]), (u = s !== t)),
        s ||
          ((s = n.createDocumentFragment()),
          v.clean(e, n, s, r),
          o && (v.fragments[a] = u && s)),
        { fragment: s, cacheable: o }
      );
    }),
    (v.fragments = {}),
    v.each(
      {
        appendTo: "append",
        prependTo: "prepend",
        insertBefore: "before",
        insertAfter: "after",
        replaceAll: "replaceWith",
      },
      function (e, t) {
        v.fn[e] = function (n) {
          var r,
            i = 0,
            s = [],
            o = v(n),
            u = o.length,
            a = this.length === 1 && this[0].parentNode;
          if (
            (a == null ||
              (a && a.nodeType === 11 && a.childNodes.length === 1)) &&
            u === 1
          )
            return o[t](this[0]), this;
          for (; i < u; i++)
            (r = (i > 0 ? this.clone(!0) : this).get()),
              v(o[i])[t](r),
              (s = s.concat(r));
          return this.pushStack(s, e, o.selector);
        };
      }
    ),
    v.extend({
      clone: function (e, t, n) {
        var r, i, s, o;
        v.support.html5Clone ||
        v.isXMLDoc(e) ||
        !wt.test("<" + e.nodeName + ">")
          ? (o = e.cloneNode(!0))
          : ((kt.innerHTML = e.outerHTML), kt.removeChild((o = kt.firstChild)));
        if (
          (!v.support.noCloneEvent || !v.support.noCloneChecked) &&
          (e.nodeType === 1 || e.nodeType === 11) &&
          !v.isXMLDoc(e)
        ) {
          Ot(e, o), (r = Mt(e)), (i = Mt(o));
          for (s = 0; r[s]; ++s) i[s] && Ot(r[s], i[s]);
        }
        if (t) {
          At(e, o);
          if (n) {
            (r = Mt(e)), (i = Mt(o));
            for (s = 0; r[s]; ++s) At(r[s], i[s]);
          }
        }
        return (r = i = null), o;
      },
      clean: function (e, t, n, r) {
        var s,
          o,
          u,
          a,
          f,
          l,
          c,
          h,
          p,
          d,
          m,
          g,
          y = t === i && Ct,
          b = [];
        if (!t || typeof t.createDocumentFragment == "undefined") t = i;
        for (s = 0; (u = e[s]) != null; s++) {
          typeof u == "number" && (u += "");
          if (!u) continue;
          if (typeof u == "string")
            if (!gt.test(u)) u = t.createTextNode(u);
            else {
              (y = y || lt(t)),
                (c = t.createElement("div")),
                y.appendChild(c),
                (u = u.replace(dt, "<$1></$2>")),
                (a = (vt.exec(u) || ["", ""])[1].toLowerCase()),
                (f = Nt[a] || Nt._default),
                (l = f[0]),
                (c.innerHTML = f[1] + u + f[2]);
              while (l--) c = c.lastChild;
              if (!v.support.tbody) {
                (h = mt.test(u)),
                  (p =
                    a === "table" && !h
                      ? c.firstChild && c.firstChild.childNodes
                      : f[1] === "<table>" && !h
                      ? c.childNodes
                      : []);
                for (o = p.length - 1; o >= 0; --o)
                  v.nodeName(p[o], "tbody") &&
                    !p[o].childNodes.length &&
                    p[o].parentNode.removeChild(p[o]);
              }
              !v.support.leadingWhitespace &&
                pt.test(u) &&
                c.insertBefore(t.createTextNode(pt.exec(u)[0]), c.firstChild),
                (u = c.childNodes),
                c.parentNode.removeChild(c);
            }
          u.nodeType ? b.push(u) : v.merge(b, u);
        }
        c && (u = c = y = null);
        if (!v.support.appendChecked)
          for (s = 0; (u = b[s]) != null; s++)
            v.nodeName(u, "input")
              ? _t(u)
              : typeof u.getElementsByTagName != "undefined" &&
                v.grep(u.getElementsByTagName("input"), _t);
        if (n) {
          m = function (e) {
            if (!e.type || xt.test(e.type))
              return r
                ? r.push(e.parentNode ? e.parentNode.removeChild(e) : e)
                : n.appendChild(e);
          };
          for (s = 0; (u = b[s]) != null; s++)
            if (!v.nodeName(u, "script") || !m(u))
              n.appendChild(u),
                typeof u.getElementsByTagName != "undefined" &&
                  ((g = v.grep(
                    v.merge([], u.getElementsByTagName("script")),
                    m
                  )),
                  b.splice.apply(b, [s + 1, 0].concat(g)),
                  (s += g.length));
        }
        return b;
      },
      cleanData: function (e, t) {
        var n,
          r,
          i,
          s,
          o = 0,
          u = v.expando,
          a = v.cache,
          f = v.support.deleteExpando,
          l = v.event.special;
        for (; (i = e[o]) != null; o++)
          if (t || v.acceptData(i)) {
            (r = i[u]), (n = r && a[r]);
            if (n) {
              if (n.events)
                for (s in n.events)
                  l[s] ? v.event.remove(i, s) : v.removeEvent(i, s, n.handle);
              a[r] &&
                (delete a[r],
                f
                  ? delete i[u]
                  : i.removeAttribute
                  ? i.removeAttribute(u)
                  : (i[u] = null),
                v.deletedIds.push(r));
            }
          }
      },
    }),
    (function () {
      var e, t;
      (v.uaMatch = function (e) {
        e = e.toLowerCase();
        var t =
          /(chrome)[ \/]([\w.]+)/.exec(e) ||
          /(webkit)[ \/]([\w.]+)/.exec(e) ||
          /(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e) ||
          /(msie) ([\w.]+)/.exec(e) ||
          (e.indexOf("compatible") < 0 &&
            /(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)) ||
          [];
        return { browser: t[1] || "", version: t[2] || "0" };
      }),
        (e = v.uaMatch(o.userAgent)),
        (t = {}),
        e.browser && ((t[e.browser] = !0), (t.version = e.version)),
        t.chrome ? (t.webkit = !0) : t.webkit && (t.safari = !0),
        (v.browser = t),
        (v.sub = function () {
          function e(t, n) {
            return new e.fn.init(t, n);
          }
          v.extend(!0, e, this),
            (e.superclass = this),
            (e.fn = e.prototype = this()),
            (e.fn.constructor = e),
            (e.sub = this.sub),
            (e.fn.init = function (r, i) {
              return (
                i && i instanceof v && !(i instanceof e) && (i = e(i)),
                v.fn.init.call(this, r, i, t)
              );
            }),
            (e.fn.init.prototype = e.fn);
          var t = e(i);
          return e;
        });
    })();
  var Dt,
    Pt,
    Ht,
    Bt = /alpha\([^)]*\)/i,
    jt = /opacity=([^)]*)/,
    Ft = /^(top|right|bottom|left)$/,
    It = /^(none|table(?!-c[ea]).+)/,
    qt = /^margin/,
    Rt = new RegExp("^(" + m + ")(.*)$", "i"),
    Ut = new RegExp("^(" + m + ")(?!px)[a-z%]+$", "i"),
    zt = new RegExp("^([-+])=(" + m + ")", "i"),
    Wt = { BODY: "block" },
    Xt = { position: "absolute", visibility: "hidden", display: "block" },
    Vt = { letterSpacing: 0, fontWeight: 400 },
    $t = ["Top", "Right", "Bottom", "Left"],
    Jt = ["Webkit", "O", "Moz", "ms"],
    Kt = v.fn.toggle;
  v.fn.extend({
    css: function (e, n) {
      return v.access(
        this,
        function (e, n, r) {
          return r !== t ? v.style(e, n, r) : v.css(e, n);
        },
        e,
        n,
        arguments.length > 1
      );
    },
    show: function () {
      return Yt(this, !0);
    },
    hide: function () {
      return Yt(this);
    },
    toggle: function (e, t) {
      var n = typeof e == "boolean";
      return v.isFunction(e) && v.isFunction(t)
        ? Kt.apply(this, arguments)
        : this.each(function () {
            (n ? e : Gt(this)) ? v(this).show() : v(this).hide();
          });
    },
  }),
    v.extend({
      cssHooks: {
        opacity: {
          get: function (e, t) {
            if (t) {
              var n = Dt(e, "opacity");
              return n === "" ? "1" : n;
            }
          },
        },
      },
      cssNumber: {
        fillOpacity: !0,
        fontWeight: !0,
        lineHeight: !0,
        opacity: !0,
        orphans: !0,
        widows: !0,
        zIndex: !0,
        zoom: !0,
      },
      cssProps: { float: v.support.cssFloat ? "cssFloat" : "styleFloat" },
      style: function (e, n, r, i) {
        if (!e || e.nodeType === 3 || e.nodeType === 8 || !e.style) return;
        var s,
          o,
          u,
          a = v.camelCase(n),
          f = e.style;
        (n = v.cssProps[a] || (v.cssProps[a] = Qt(f, a))),
          (u = v.cssHooks[n] || v.cssHooks[a]);
        if (r === t)
          return u && "get" in u && (s = u.get(e, !1, i)) !== t ? s : f[n];
        (o = typeof r),
          o === "string" &&
            (s = zt.exec(r)) &&
            ((r = (s[1] + 1) * s[2] + parseFloat(v.css(e, n))), (o = "number"));
        if (r == null || (o === "number" && isNaN(r))) return;
        o === "number" && !v.cssNumber[a] && (r += "px");
        if (!u || !("set" in u) || (r = u.set(e, r, i)) !== t)
          try {
            f[n] = r;
          } catch (l) {}
      },
      css: function (e, n, r, i) {
        var s,
          o,
          u,
          a = v.camelCase(n);
        return (
          (n = v.cssProps[a] || (v.cssProps[a] = Qt(e.style, a))),
          (u = v.cssHooks[n] || v.cssHooks[a]),
          u && "get" in u && (s = u.get(e, !0, i)),
          s === t && (s = Dt(e, n)),
          s === "normal" && n in Vt && (s = Vt[n]),
          r || i !== t
            ? ((o = parseFloat(s)), r || v.isNumeric(o) ? o || 0 : s)
            : s
        );
      },
      swap: function (e, t, n) {
        var r,
          i,
          s = {};
        for (i in t) (s[i] = e.style[i]), (e.style[i] = t[i]);
        r = n.call(e);
        for (i in t) e.style[i] = s[i];
        return r;
      },
    }),
    e.getComputedStyle
      ? (Dt = function (t, n) {
          var r,
            i,
            s,
            o,
            u = e.getComputedStyle(t, null),
            a = t.style;
          return (
            u &&
              ((r = u.getPropertyValue(n) || u[n]),
              r === "" &&
                !v.contains(t.ownerDocument, t) &&
                (r = v.style(t, n)),
              Ut.test(r) &&
                qt.test(n) &&
                ((i = a.width),
                (s = a.minWidth),
                (o = a.maxWidth),
                (a.minWidth = a.maxWidth = a.width = r),
                (r = u.width),
                (a.width = i),
                (a.minWidth = s),
                (a.maxWidth = o))),
            r
          );
        })
      : i.documentElement.currentStyle &&
        (Dt = function (e, t) {
          var n,
            r,
            i = e.currentStyle && e.currentStyle[t],
            s = e.style;
          return (
            i == null && s && s[t] && (i = s[t]),
            Ut.test(i) &&
              !Ft.test(t) &&
              ((n = s.left),
              (r = e.runtimeStyle && e.runtimeStyle.left),
              r && (e.runtimeStyle.left = e.currentStyle.left),
              (s.left = t === "fontSize" ? "1em" : i),
              (i = s.pixelLeft + "px"),
              (s.left = n),
              r && (e.runtimeStyle.left = r)),
            i === "" ? "auto" : i
          );
        }),
    v.each(["height", "width"], function (e, t) {
      v.cssHooks[t] = {
        get: function (e, n, r) {
          if (n)
            return e.offsetWidth === 0 && It.test(Dt(e, "display"))
              ? v.swap(e, Xt, function () {
                  return tn(e, t, r);
                })
              : tn(e, t, r);
        },
        set: function (e, n, r) {
          return Zt(
            e,
            n,
            r
              ? en(
                  e,
                  t,
                  r,
                  v.support.boxSizing && v.css(e, "boxSizing") === "border-box"
                )
              : 0
          );
        },
      };
    }),
    v.support.opacity ||
      (v.cssHooks.opacity = {
        get: function (e, t) {
          return jt.test(
            (t && e.currentStyle ? e.currentStyle.filter : e.style.filter) || ""
          )
            ? 0.01 * parseFloat(RegExp.$1) + ""
            : t
            ? "1"
            : "";
        },
        set: function (e, t) {
          var n = e.style,
            r = e.currentStyle,
            i = v.isNumeric(t) ? "alpha(opacity=" + t * 100 + ")" : "",
            s = (r && r.filter) || n.filter || "";
          n.zoom = 1;
          if (t >= 1 && v.trim(s.replace(Bt, "")) === "" && n.removeAttribute) {
            n.removeAttribute("filter");
            if (r && !r.filter) return;
          }
          n.filter = Bt.test(s) ? s.replace(Bt, i) : s + " " + i;
        },
      }),
    v(function () {
      v.support.reliableMarginRight ||
        (v.cssHooks.marginRight = {
          get: function (e, t) {
            return v.swap(e, { display: "inline-block" }, function () {
              if (t) return Dt(e, "marginRight");
            });
          },
        }),
        !v.support.pixelPosition &&
          v.fn.position &&
          v.each(["top", "left"], function (e, t) {
            v.cssHooks[t] = {
              get: function (e, n) {
                if (n) {
                  var r = Dt(e, t);
                  return Ut.test(r) ? v(e).position()[t] + "px" : r;
                }
              },
            };
          });
    }),
    v.expr &&
      v.expr.filters &&
      ((v.expr.filters.hidden = function (e) {
        return (
          (e.offsetWidth === 0 && e.offsetHeight === 0) ||
          (!v.support.reliableHiddenOffsets &&
            ((e.style && e.style.display) || Dt(e, "display")) === "none")
        );
      }),
      (v.expr.filters.visible = function (e) {
        return !v.expr.filters.hidden(e);
      })),
    v.each({ margin: "", padding: "", border: "Width" }, function (e, t) {
      (v.cssHooks[e + t] = {
        expand: function (n) {
          var r,
            i = typeof n == "string" ? n.split(" ") : [n],
            s = {};
          for (r = 0; r < 4; r++) s[e + $t[r] + t] = i[r] || i[r - 2] || i[0];
          return s;
        },
      }),
        qt.test(e) || (v.cssHooks[e + t].set = Zt);
    });
  var rn = /%20/g,
    sn = /\[\]$/,
    on = /\r?\n/g,
    un = /^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,
    an = /^(?:select|textarea)/i;
  v.fn.extend({
    serialize: function () {
      return v.param(this.serializeArray());
    },
    serializeArray: function () {
      return this.map(function () {
        return this.elements ? v.makeArray(this.elements) : this;
      })
        .filter(function () {
          return (
            this.name &&
            !this.disabled &&
            (this.checked || an.test(this.nodeName) || un.test(this.type))
          );
        })
        .map(function (e, t) {
          var n = v(this).val();
          return n == null
            ? null
            : v.isArray(n)
            ? v.map(n, function (e, n) {
                return { name: t.name, value: e.replace(on, "\r\n") };
              })
            : { name: t.name, value: n.replace(on, "\r\n") };
        })
        .get();
    },
  }),
    (v.param = function (e, n) {
      var r,
        i = [],
        s = function (e, t) {
          (t = v.isFunction(t) ? t() : t == null ? "" : t),
            (i[i.length] = encodeURIComponent(e) + "=" + encodeURIComponent(t));
        };
      n === t && (n = v.ajaxSettings && v.ajaxSettings.traditional);
      if (v.isArray(e) || (e.jquery && !v.isPlainObject(e)))
        v.each(e, function () {
          s(this.name, this.value);
        });
      else for (r in e) fn(r, e[r], n, s);
      return i.join("&").replace(rn, "+");
    });
  var ln,
    cn,
    hn = /#.*$/,
    pn = /^(.*?):[ \t]*([^\r\n]*)\r?$/gm,
    dn = /^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,
    vn = /^(?:GET|HEAD)$/,
    mn = /^\/\//,
    gn = /\?/,
    yn = /<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,
    bn = /([?&])_=[^&]*/,
    wn = /^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,
    En = v.fn.load,
    Sn = {},
    xn = {},
    Tn = ["*/"] + ["*"];
  try {
    cn = s.href;
  } catch (Nn) {
    (cn = i.createElement("a")), (cn.href = ""), (cn = cn.href);
  }
  (ln = wn.exec(cn.toLowerCase()) || []),
    (v.fn.load = function (e, n, r) {
      if (typeof e != "string" && En) return En.apply(this, arguments);
      if (!this.length) return this;
      var i,
        s,
        o,
        u = this,
        a = e.indexOf(" ");
      return (
        a >= 0 && ((i = e.slice(a, e.length)), (e = e.slice(0, a))),
        v.isFunction(n)
          ? ((r = n), (n = t))
          : n && typeof n == "object" && (s = "POST"),
        v
          .ajax({
            url: e,
            type: s,
            dataType: "html",
            data: n,
            complete: function (e, t) {
              r && u.each(r, o || [e.responseText, t, e]);
            },
          })
          .done(function (e) {
            (o = arguments),
              u.html(i ? v("<div>").append(e.replace(yn, "")).find(i) : e);
          }),
        this
      );
    }),
    v.each(
      "ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(
        " "
      ),
      function (e, t) {
        v.fn[t] = function (e) {
          return this.on(t, e);
        };
      }
    ),
    v.each(["get", "post"], function (e, n) {
      v[n] = function (e, r, i, s) {
        return (
          v.isFunction(r) && ((s = s || i), (i = r), (r = t)),
          v.ajax({ type: n, url: e, data: r, success: i, dataType: s })
        );
      };
    }),
    v.extend({
      getScript: function (e, n) {
        return v.get(e, t, n, "script");
      },
      getJSON: function (e, t, n) {
        return v.get(e, t, n, "json");
      },
      ajaxSetup: function (e, t) {
        return (
          t ? Ln(e, v.ajaxSettings) : ((t = e), (e = v.ajaxSettings)),
          Ln(e, t),
          e
        );
      },
      ajaxSettings: {
        url: cn,
        isLocal: dn.test(ln[1]),
        global: !0,
        type: "GET",
        contentType: "application/x-www-form-urlencoded; charset=UTF-8",
        processData: !0,
        async: !0,
        accepts: {
          xml: "application/xml, text/xml",
          html: "text/html",
          text: "text/plain",
          json: "application/json, text/javascript",
          "*": Tn,
        },
        contents: { xml: /xml/, html: /html/, json: /json/ },
        responseFields: { xml: "responseXML", text: "responseText" },
        converters: {
          "* text": e.String,
          "text html": !0,
          "text json": v.parseJSON,
          "text xml": v.parseXML,
        },
        flatOptions: { context: !0, url: !0 },
      },
      ajaxPrefilter: Cn(Sn),
      ajaxTransport: Cn(xn),
      ajax: function (e, n) {
        function T(e, n, s, a) {
          var l,
            y,
            b,
            w,
            S,
            T = n;
          if (E === 2) return;
          (E = 2),
            u && clearTimeout(u),
            (o = t),
            (i = a || ""),
            (x.readyState = e > 0 ? 4 : 0),
            s && (w = An(c, x, s));
          if ((e >= 200 && e < 300) || e === 304)
            c.ifModified &&
              ((S = x.getResponseHeader("Last-Modified")),
              S && (v.lastModified[r] = S),
              (S = x.getResponseHeader("Etag")),
              S && (v.etag[r] = S)),
              e === 304
                ? ((T = "notmodified"), (l = !0))
                : ((l = On(c, w)),
                  (T = l.state),
                  (y = l.data),
                  (b = l.error),
                  (l = !b));
          else {
            b = T;
            if (!T || e) (T = "error"), e < 0 && (e = 0);
          }
          (x.status = e),
            (x.statusText = (n || T) + ""),
            l ? d.resolveWith(h, [y, T, x]) : d.rejectWith(h, [x, T, b]),
            x.statusCode(g),
            (g = t),
            f &&
              p.trigger("ajax" + (l ? "Success" : "Error"), [x, c, l ? y : b]),
            m.fireWith(h, [x, T]),
            f &&
              (p.trigger("ajaxComplete", [x, c]),
              --v.active || v.event.trigger("ajaxStop"));
        }
        typeof e == "object" && ((n = e), (e = t)), (n = n || {});
        var r,
          i,
          s,
          o,
          u,
          a,
          f,
          l,
          c = v.ajaxSetup({}, n),
          h = c.context || c,
          p = h !== c && (h.nodeType || h instanceof v) ? v(h) : v.event,
          d = v.Deferred(),
          m = v.Callbacks("once memory"),
          g = c.statusCode || {},
          b = {},
          w = {},
          E = 0,
          S = "canceled",
          x = {
            readyState: 0,
            setRequestHeader: function (e, t) {
              if (!E) {
                var n = e.toLowerCase();
                (e = w[n] = w[n] || e), (b[e] = t);
              }
              return this;
            },
            getAllResponseHeaders: function () {
              return E === 2 ? i : null;
            },
            getResponseHeader: function (e) {
              var n;
              if (E === 2) {
                if (!s) {
                  s = {};
                  while ((n = pn.exec(i))) s[n[1].toLowerCase()] = n[2];
                }
                n = s[e.toLowerCase()];
              }
              return n === t ? null : n;
            },
            overrideMimeType: function (e) {
              return E || (c.mimeType = e), this;
            },
            abort: function (e) {
              return (e = e || S), o && o.abort(e), T(0, e), this;
            },
          };
        d.promise(x),
          (x.success = x.done),
          (x.error = x.fail),
          (x.complete = m.add),
          (x.statusCode = function (e) {
            if (e) {
              var t;
              if (E < 2) for (t in e) g[t] = [g[t], e[t]];
              else (t = e[x.status]), x.always(t);
            }
            return this;
          }),
          (c.url = ((e || c.url) + "")
            .replace(hn, "")
            .replace(mn, ln[1] + "//")),
          (c.dataTypes = v
            .trim(c.dataType || "*")
            .toLowerCase()
            .split(y)),
          c.crossDomain == null &&
            ((a = wn.exec(c.url.toLowerCase())),
            (c.crossDomain = !(
              !a ||
              (a[1] === ln[1] &&
                a[2] === ln[2] &&
                (a[3] || (a[1] === "http:" ? 80 : 443)) ==
                  (ln[3] || (ln[1] === "http:" ? 80 : 443)))
            ))),
          c.data &&
            c.processData &&
            typeof c.data != "string" &&
            (c.data = v.param(c.data, c.traditional)),
          kn(Sn, c, n, x);
        if (E === 2) return x;
        (f = c.global),
          (c.type = c.type.toUpperCase()),
          (c.hasContent = !vn.test(c.type)),
          f && v.active++ === 0 && v.event.trigger("ajaxStart");
        if (!c.hasContent) {
          c.data &&
            ((c.url += (gn.test(c.url) ? "&" : "?") + c.data), delete c.data),
            (r = c.url);
          if (c.cache === !1) {
            var N = v.now(),
              C = c.url.replace(bn, "$1_=" + N);
            c.url =
              C + (C === c.url ? (gn.test(c.url) ? "&" : "?") + "_=" + N : "");
          }
        }
        ((c.data && c.hasContent && c.contentType !== !1) || n.contentType) &&
          x.setRequestHeader("Content-Type", c.contentType),
          c.ifModified &&
            ((r = r || c.url),
            v.lastModified[r] &&
              x.setRequestHeader("If-Modified-Since", v.lastModified[r]),
            v.etag[r] && x.setRequestHeader("If-None-Match", v.etag[r])),
          x.setRequestHeader(
            "Accept",
            c.dataTypes[0] && c.accepts[c.dataTypes[0]]
              ? c.accepts[c.dataTypes[0]] +
                  (c.dataTypes[0] !== "*" ? ", " + Tn + "; q=0.01" : "")
              : c.accepts["*"]
          );
        for (l in c.headers) x.setRequestHeader(l, c.headers[l]);
        if (!c.beforeSend || (c.beforeSend.call(h, x, c) !== !1 && E !== 2)) {
          S = "abort";
          for (l in { success: 1, error: 1, complete: 1 }) x[l](c[l]);
          o = kn(xn, c, n, x);
          if (!o) T(-1, "No Transport");
          else {
            (x.readyState = 1),
              f && p.trigger("ajaxSend", [x, c]),
              c.async &&
                c.timeout > 0 &&
                (u = setTimeout(function () {
                  x.abort("timeout");
                }, c.timeout));
            try {
              (E = 1), o.send(b, T);
            } catch (k) {
              if (!(E < 2)) throw k;
              T(-1, k);
            }
          }
          return x;
        }
        return x.abort();
      },
      active: 0,
      lastModified: {},
      etag: {},
    });
  var Mn = [],
    _n = /\?/,
    Dn = /(=)\?(?=&|$)|\?\?/,
    Pn = v.now();
  v.ajaxSetup({
    jsonp: "callback",
    jsonpCallback: function () {
      var e = Mn.pop() || v.expando + "_" + Pn++;
      return (this[e] = !0), e;
    },
  }),
    v.ajaxPrefilter("json jsonp", function (n, r, i) {
      var s,
        o,
        u,
        a = n.data,
        f = n.url,
        l = n.jsonp !== !1,
        c = l && Dn.test(f),
        h =
          l &&
          !c &&
          typeof a == "string" &&
          !(n.contentType || "").indexOf("application/x-www-form-urlencoded") &&
          Dn.test(a);
      if (n.dataTypes[0] === "jsonp" || c || h)
        return (
          (s = n.jsonpCallback = v.isFunction(n.jsonpCallback)
            ? n.jsonpCallback()
            : n.jsonpCallback),
          (o = e[s]),
          c
            ? (n.url = f.replace(Dn, "$1" + s))
            : h
            ? (n.data = a.replace(Dn, "$1" + s))
            : l && (n.url += (_n.test(f) ? "&" : "?") + n.jsonp + "=" + s),
          (n.converters["script json"] = function () {
            return u || v.error(s + " was not called"), u[0];
          }),
          (n.dataTypes[0] = "json"),
          (e[s] = function () {
            u = arguments;
          }),
          i.always(function () {
            (e[s] = o),
              n[s] && ((n.jsonpCallback = r.jsonpCallback), Mn.push(s)),
              u && v.isFunction(o) && o(u[0]),
              (u = o = t);
          }),
          "script"
        );
    }),
    v.ajaxSetup({
      accepts: {
        script:
          "text/javascript, application/javascript, application/ecmascript, application/x-ecmascript",
      },
      contents: { script: /javascript|ecmascript/ },
      converters: {
        "text script": function (e) {
          return v.globalEval(e), e;
        },
      },
    }),
    v.ajaxPrefilter("script", function (e) {
      e.cache === t && (e.cache = !1),
        e.crossDomain && ((e.type = "GET"), (e.global = !1));
    }),
    v.ajaxTransport("script", function (e) {
      if (e.crossDomain) {
        var n,
          r = i.head || i.getElementsByTagName("head")[0] || i.documentElement;
        return {
          send: function (s, o) {
            (n = i.createElement("script")),
              (n.async = "async"),
              e.scriptCharset && (n.charset = e.scriptCharset),
              (n.src = e.url),
              (n.onload = n.onreadystatechange = function (e, i) {
                if (i || !n.readyState || /loaded|complete/.test(n.readyState))
                  (n.onload = n.onreadystatechange = null),
                    r && n.parentNode && r.removeChild(n),
                    (n = t),
                    i || o(200, "success");
              }),
              r.insertBefore(n, r.firstChild);
          },
          abort: function () {
            n && n.onload(0, 1);
          },
        };
      }
    });
  var Hn,
    Bn = e.ActiveXObject
      ? function () {
          for (var e in Hn) Hn[e](0, 1);
        }
      : !1,
    jn = 0;
  (v.ajaxSettings.xhr = e.ActiveXObject
    ? function () {
        return (!this.isLocal && Fn()) || In();
      }
    : Fn),
    (function (e) {
      v.extend(v.support, { ajax: !!e, cors: !!e && "withCredentials" in e });
    })(v.ajaxSettings.xhr()),
    v.support.ajax &&
      v.ajaxTransport(function (n) {
        if (!n.crossDomain || v.support.cors) {
          var r;
          return {
            send: function (i, s) {
              var o,
                u,
                a = n.xhr();
              n.username
                ? a.open(n.type, n.url, n.async, n.username, n.password)
                : a.open(n.type, n.url, n.async);
              if (n.xhrFields) for (u in n.xhrFields) a[u] = n.xhrFields[u];
              n.mimeType &&
                a.overrideMimeType &&
                a.overrideMimeType(n.mimeType),
                !n.crossDomain &&
                  !i["X-Requested-With"] &&
                  (i["X-Requested-With"] = "XMLHttpRequest");
              try {
                for (u in i) a.setRequestHeader(u, i[u]);
              } catch (f) {}
              a.send((n.hasContent && n.data) || null),
                (r = function (e, i) {
                  var u, f, l, c, h;
                  try {
                    if (r && (i || a.readyState === 4)) {
                      (r = t),
                        o &&
                          ((a.onreadystatechange = v.noop), Bn && delete Hn[o]);
                      if (i) a.readyState !== 4 && a.abort();
                      else {
                        (u = a.status),
                          (l = a.getAllResponseHeaders()),
                          (c = {}),
                          (h = a.responseXML),
                          h && h.documentElement && (c.xml = h);
                        try {
                          c.text = a.responseText;
                        } catch (p) {}
                        try {
                          f = a.statusText;
                        } catch (p) {
                          f = "";
                        }
                        !u && n.isLocal && !n.crossDomain
                          ? (u = c.text ? 200 : 404)
                          : u === 1223 && (u = 204);
                      }
                    }
                  } catch (d) {
                    i || s(-1, d);
                  }
                  c && s(u, f, c, l);
                }),
                n.async
                  ? a.readyState === 4
                    ? setTimeout(r, 0)
                    : ((o = ++jn),
                      Bn && (Hn || ((Hn = {}), v(e).unload(Bn)), (Hn[o] = r)),
                      (a.onreadystatechange = r))
                  : r();
            },
            abort: function () {
              r && r(0, 1);
            },
          };
        }
      });
  var qn,
    Rn,
    Un = /^(?:toggle|show|hide)$/,
    zn = new RegExp("^(?:([-+])=|)(" + m + ")([a-z%]*)$", "i"),
    Wn = /queueHooks$/,
    Xn = [Gn],
    Vn = {
      "*": [
        function (e, t) {
          var n,
            r,
            i = this.createTween(e, t),
            s = zn.exec(t),
            o = i.cur(),
            u = +o || 0,
            a = 1,
            f = 20;
          if (s) {
            (n = +s[2]), (r = s[3] || (v.cssNumber[e] ? "" : "px"));
            if (r !== "px" && u) {
              u = v.css(i.elem, e, !0) || n || 1;
              do (a = a || ".5"), (u /= a), v.style(i.elem, e, u + r);
              while (a !== (a = i.cur() / o) && a !== 1 && --f);
            }
            (i.unit = r),
              (i.start = u),
              (i.end = s[1] ? u + (s[1] + 1) * n : n);
          }
          return i;
        },
      ],
    };
  (v.Animation = v.extend(Kn, {
    tweener: function (e, t) {
      v.isFunction(e) ? ((t = e), (e = ["*"])) : (e = e.split(" "));
      var n,
        r = 0,
        i = e.length;
      for (; r < i; r++) (n = e[r]), (Vn[n] = Vn[n] || []), Vn[n].unshift(t);
    },
    prefilter: function (e, t) {
      t ? Xn.unshift(e) : Xn.push(e);
    },
  })),
    (v.Tween = Yn),
    (Yn.prototype = {
      constructor: Yn,
      init: function (e, t, n, r, i, s) {
        (this.elem = e),
          (this.prop = n),
          (this.easing = i || "swing"),
          (this.options = t),
          (this.start = this.now = this.cur()),
          (this.end = r),
          (this.unit = s || (v.cssNumber[n] ? "" : "px"));
      },
      cur: function () {
        var e = Yn.propHooks[this.prop];
        return e && e.get ? e.get(this) : Yn.propHooks._default.get(this);
      },
      run: function (e) {
        var t,
          n = Yn.propHooks[this.prop];
        return (
          this.options.duration
            ? (this.pos = t = v.easing[this.easing](
                e,
                this.options.duration * e,
                0,
                1,
                this.options.duration
              ))
            : (this.pos = t = e),
          (this.now = (this.end - this.start) * t + this.start),
          this.options.step &&
            this.options.step.call(this.elem, this.now, this),
          n && n.set ? n.set(this) : Yn.propHooks._default.set(this),
          this
        );
      },
    }),
    (Yn.prototype.init.prototype = Yn.prototype),
    (Yn.propHooks = {
      _default: {
        get: function (e) {
          var t;
          return e.elem[e.prop] == null ||
            (!!e.elem.style && e.elem.style[e.prop] != null)
            ? ((t = v.css(e.elem, e.prop, !1, "")), !t || t === "auto" ? 0 : t)
            : e.elem[e.prop];
        },
        set: function (e) {
          v.fx.step[e.prop]
            ? v.fx.step[e.prop](e)
            : e.elem.style &&
              (e.elem.style[v.cssProps[e.prop]] != null || v.cssHooks[e.prop])
            ? v.style(e.elem, e.prop, e.now + e.unit)
            : (e.elem[e.prop] = e.now);
        },
      },
    }),
    (Yn.propHooks.scrollTop = Yn.propHooks.scrollLeft = {
      set: function (e) {
        e.elem.nodeType && e.elem.parentNode && (e.elem[e.prop] = e.now);
      },
    }),
    v.each(["toggle", "show", "hide"], function (e, t) {
      var n = v.fn[t];
      v.fn[t] = function (r, i, s) {
        return r == null ||
          typeof r == "boolean" ||
          (!e && v.isFunction(r) && v.isFunction(i))
          ? n.apply(this, arguments)
          : this.animate(Zn(t, !0), r, i, s);
      };
    }),
    v.fn.extend({
      fadeTo: function (e, t, n, r) {
        return this.filter(Gt)
          .css("opacity", 0)
          .show()
          .end()
          .animate({ opacity: t }, e, n, r);
      },
      animate: function (e, t, n, r) {
        var i = v.isEmptyObject(e),
          s = v.speed(t, n, r),
          o = function () {
            var t = Kn(this, v.extend({}, e), s);
            i && t.stop(!0);
          };
        return i || s.queue === !1 ? this.each(o) : this.queue(s.queue, o);
      },
      stop: function (e, n, r) {
        var i = function (e) {
          var t = e.stop;
          delete e.stop, t(r);
        };
        return (
          typeof e != "string" && ((r = n), (n = e), (e = t)),
          n && e !== !1 && this.queue(e || "fx", []),
          this.each(function () {
            var t = !0,
              n = e != null && e + "queueHooks",
              s = v.timers,
              o = v._data(this);
            if (n) o[n] && o[n].stop && i(o[n]);
            else for (n in o) o[n] && o[n].stop && Wn.test(n) && i(o[n]);
            for (n = s.length; n--; )
              s[n].elem === this &&
                (e == null || s[n].queue === e) &&
                (s[n].anim.stop(r), (t = !1), s.splice(n, 1));
            (t || !r) && v.dequeue(this, e);
          })
        );
      },
    }),
    v.each(
      {
        slideDown: Zn("show"),
        slideUp: Zn("hide"),
        slideToggle: Zn("toggle"),
        fadeIn: { opacity: "show" },
        fadeOut: { opacity: "hide" },
        fadeToggle: { opacity: "toggle" },
      },
      function (e, t) {
        v.fn[e] = function (e, n, r) {
          return this.animate(t, e, n, r);
        };
      }
    ),
    (v.speed = function (e, t, n) {
      var r =
        e && typeof e == "object"
          ? v.extend({}, e)
          : {
              complete: n || (!n && t) || (v.isFunction(e) && e),
              duration: e,
              easing: (n && t) || (t && !v.isFunction(t) && t),
            };
      r.duration = v.fx.off
        ? 0
        : typeof r.duration == "number"
        ? r.duration
        : r.duration in v.fx.speeds
        ? v.fx.speeds[r.duration]
        : v.fx.speeds._default;
      if (r.queue == null || r.queue === !0) r.queue = "fx";
      return (
        (r.old = r.complete),
        (r.complete = function () {
          v.isFunction(r.old) && r.old.call(this),
            r.queue && v.dequeue(this, r.queue);
        }),
        r
      );
    }),
    (v.easing = {
      linear: function (e) {
        return e;
      },
      swing: function (e) {
        return 0.5 - Math.cos(e * Math.PI) / 2;
      },
    }),
    (v.timers = []),
    (v.fx = Yn.prototype.init),
    (v.fx.tick = function () {
      var e,
        n = v.timers,
        r = 0;
      qn = v.now();
      for (; r < n.length; r++)
        (e = n[r]), !e() && n[r] === e && n.splice(r--, 1);
      n.length || v.fx.stop(), (qn = t);
    }),
    (v.fx.timer = function (e) {
      e() &&
        v.timers.push(e) &&
        !Rn &&
        (Rn = setInterval(v.fx.tick, v.fx.interval));
    }),
    (v.fx.interval = 13),
    (v.fx.stop = function () {
      clearInterval(Rn), (Rn = null);
    }),
    (v.fx.speeds = { slow: 600, fast: 200, _default: 400 }),
    (v.fx.step = {}),
    v.expr &&
      v.expr.filters &&
      (v.expr.filters.animated = function (e) {
        return v.grep(v.timers, function (t) {
          return e === t.elem;
        }).length;
      });
  var er = /^(?:body|html)$/i;
  (v.fn.offset = function (e) {
    if (arguments.length)
      return e === t
        ? this
        : this.each(function (t) {
            v.offset.setOffset(this, e, t);
          });
    var n,
      r,
      i,
      s,
      o,
      u,
      a,
      f = { top: 0, left: 0 },
      l = this[0],
      c = l && l.ownerDocument;
    if (!c) return;
    return (r = c.body) === l
      ? v.offset.bodyOffset(l)
      : ((n = c.documentElement),
        v.contains(n, l)
          ? (typeof l.getBoundingClientRect != "undefined" &&
              (f = l.getBoundingClientRect()),
            (i = tr(c)),
            (s = n.clientTop || r.clientTop || 0),
            (o = n.clientLeft || r.clientLeft || 0),
            (u = i.pageYOffset || n.scrollTop),
            (a = i.pageXOffset || n.scrollLeft),
            { top: f.top + u - s, left: f.left + a - o })
          : f);
  }),
    (v.offset = {
      bodyOffset: function (e) {
        var t = e.offsetTop,
          n = e.offsetLeft;
        return (
          v.support.doesNotIncludeMarginInBodyOffset &&
            ((t += parseFloat(v.css(e, "marginTop")) || 0),
            (n += parseFloat(v.css(e, "marginLeft")) || 0)),
          { top: t, left: n }
        );
      },
      setOffset: function (e, t, n) {
        var r = v.css(e, "position");
        r === "static" && (e.style.position = "relative");
        var i = v(e),
          s = i.offset(),
          o = v.css(e, "top"),
          u = v.css(e, "left"),
          a =
            (r === "absolute" || r === "fixed") &&
            v.inArray("auto", [o, u]) > -1,
          f = {},
          l = {},
          c,
          h;
        a
          ? ((l = i.position()), (c = l.top), (h = l.left))
          : ((c = parseFloat(o) || 0), (h = parseFloat(u) || 0)),
          v.isFunction(t) && (t = t.call(e, n, s)),
          t.top != null && (f.top = t.top - s.top + c),
          t.left != null && (f.left = t.left - s.left + h),
          "using" in t ? t.using.call(e, f) : i.css(f);
      },
    }),
    v.fn.extend({
      position: function () {
        if (!this[0]) return;
        var e = this[0],
          t = this.offsetParent(),
          n = this.offset(),
          r = er.test(t[0].nodeName) ? { top: 0, left: 0 } : t.offset();
        return (
          (n.top -= parseFloat(v.css(e, "marginTop")) || 0),
          (n.left -= parseFloat(v.css(e, "marginLeft")) || 0),
          (r.top += parseFloat(v.css(t[0], "borderTopWidth")) || 0),
          (r.left += parseFloat(v.css(t[0], "borderLeftWidth")) || 0),
          { top: n.top - r.top, left: n.left - r.left }
        );
      },
      offsetParent: function () {
        return this.map(function () {
          var e = this.offsetParent || i.body;
          while (e && !er.test(e.nodeName) && v.css(e, "position") === "static")
            e = e.offsetParent;
          return e || i.body;
        });
      },
    }),
    v.each({ scrollLeft: "pageXOffset", scrollTop: "pageYOffset" }, function (
      e,
      n
    ) {
      var r = /Y/.test(n);
      v.fn[e] = function (i) {
        return v.access(
          this,
          function (e, i, s) {
            var o = tr(e);
            if (s === t)
              return o ? (n in o ? o[n] : o.document.documentElement[i]) : e[i];
            o
              ? o.scrollTo(r ? v(o).scrollLeft() : s, r ? s : v(o).scrollTop())
              : (e[i] = s);
          },
          e,
          i,
          arguments.length,
          null
        );
      };
    }),
    v.each({ Height: "height", Width: "width" }, function (e, n) {
      v.each({ padding: "inner" + e, content: n, "": "outer" + e }, function (
        r,
        i
      ) {
        v.fn[i] = function (i, s) {
          var o = arguments.length && (r || typeof i != "boolean"),
            u = r || (i === !0 || s === !0 ? "margin" : "border");
          return v.access(
            this,
            function (n, r, i) {
              var s;
              return v.isWindow(n)
                ? n.document.documentElement["client" + e]
                : n.nodeType === 9
                ? ((s = n.documentElement),
                  Math.max(
                    n.body["scroll" + e],
                    s["scroll" + e],
                    n.body["offset" + e],
                    s["offset" + e],
                    s["client" + e]
                  ))
                : i === t
                ? v.css(n, r, i, u)
                : v.style(n, r, i, u);
            },
            n,
            o ? i : t,
            o,
            null
          );
        };
      });
    }),
    (e.jQuery = e.$ = v),
    typeof define == "function" &&
      define.amd &&
      define.amd.jQuery &&
      define("jquery", [], function () {
        return v;
      });
})(window);

var $jq18 = jQuery.noConflict(true);
/*! fancyBox v2.1.4 fancyapps.com | fancyapps.com/fancybox/#license */
(function (C, z, f, r) {
  var q = f(C),
    n = f(z),
    b = (f.fancybox = function () {
      b.open.apply(this, arguments);
    }),
    H = navigator.userAgent.match(/msie/),
    w = null,
    s = z.createTouch !== r,
    t = function (a) {
      return a && a.hasOwnProperty && a instanceof f;
    },
    p = function (a) {
      return a && "string" === f.type(a);
    },
    F = function (a) {
      return p(a) && 0 < a.indexOf("%");
    },
    l = function (a, d) {
      var e = parseInt(a, 10) || 0;
      d && F(a) && (e *= b.getViewport()[d] / 100);
      return Math.ceil(e);
    },
    x = function (a, b) {
      return l(a, b) + "px";
    };
  f.extend(b, {
    version: "2.1.4",
    defaults: {
      padding: 15,
      margin: 20,
      width: 800,
      height: 600,
      minWidth: 100,
      minHeight: 100,
      maxWidth: 9999,
      maxHeight: 9999,
      autoSize: !0,
      autoHeight: !1,
      autoWidth: !1,
      autoResize: !0,
      autoCenter: !s,
      fitToView: !0,
      aspectRatio: !1,
      topRatio: 0.5,
      leftRatio: 0.5,
      scrolling: "auto",
      wrapCSS: "",
      arrows: !0,
      closeBtn: !0,
      closeClick: !1,
      nextClick: !1,
      mouseWheel: !0,
      autoPlay: !1,
      playSpeed: 3e3,
      preload: 3,
      modal: !1,
      loop: !0,
      ajax: { dataType: "html", headers: { "X-fancyBox": !0 } },
      iframe: { scrolling: "auto", preload: !0 },
      swf: {
        wmode: "transparent",
        allowfullscreen: "true",
        allowscriptaccess: "always",
      },
      keys: {
        next: { 13: "left", 34: "up", 39: "left", 40: "up" },
        prev: { 8: "right", 33: "down", 37: "right", 38: "down" },
        close: [27],
        play: [32],
        toggle: [70],
      },
      direction: { next: "left", prev: "right" },
      scrollOutside: !0,
      index: 0,
      type: null,
      href: null,
      content: null,
      title: null,
      tpl: {
        wrap:
          '<div class="fancybox-wrap" tabIndex="-1"><div class="fancybox-skin"><div class="fancybox-outer"><div class="fancybox-inner"></div></div></div></div>',
        image: '<img class="fancybox-image" src="{href}" alt="" />',
        iframe:
          '<iframe id="fancybox-frame{rnd}" name="fancybox-frame{rnd}" class="fancybox-iframe" frameborder="0" vspace="0" hspace="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen' +
          (H ? ' allowtransparency="true"' : "") +
          "></iframe>",
        error:
          '<p class="fancybox-error">The requested content cannot be loaded.<br/>Please try again later.</p>',
        closeBtn:
          '<a title="Close" class="fancybox-item fancybox-close" href="javascript:;"></a>',
        next:
          '<a title="Next" class="fancybox-nav fancybox-next" href="javascript:;"><span></span></a>',
        prev:
          '<a title="Previous" class="fancybox-nav fancybox-prev" href="javascript:;"><span></span></a>',
      },
      openEffect: "fade",
      openSpeed: 250,
      openEasing: "swing",
      openOpacity: !0,
      openMethod: "zoomIn",
      closeEffect: "fade",
      closeSpeed: 250,
      closeEasing: "swing",
      closeOpacity: !0,
      closeMethod: "zoomOut",
      nextEffect: "elastic",
      nextSpeed: 250,
      nextEasing: "swing",
      nextMethod: "changeIn",
      prevEffect: "elastic",
      prevSpeed: 250,
      prevEasing: "swing",
      prevMethod: "changeOut",
      helpers: { overlay: !0, title: !0 },
      onCancel: f.noop,
      beforeLoad: f.noop,
      afterLoad: f.noop,
      beforeShow: f.noop,
      afterShow: f.noop,
      beforeChange: f.noop,
      beforeClose: f.noop,
      afterClose: f.noop,
    },
    group: {},
    opts: {},
    previous: null,
    coming: null,
    current: null,
    isActive: !1,
    isOpen: !1,
    isOpened: !1,
    wrap: null,
    skin: null,
    outer: null,
    inner: null,
    player: { timer: null, isActive: !1 },
    ajaxLoad: null,
    imgPreload: null,
    transitions: {},
    helpers: {},
    open: function (a, d) {
      if (a && (f.isPlainObject(d) || (d = {}), !1 !== b.close(!0)))
        return (
          f.isArray(a) || (a = t(a) ? f(a).get() : [a]),
          f.each(a, function (e, c) {
            var k = {},
              g,
              h,
              j,
              m,
              l;
            "object" === f.type(c) &&
              (c.nodeType && (c = f(c)),
              t(c)
                ? ((k = {
                    href: c.data("fancybox-href") || c.attr("href"),
                    title: c.data("fancybox-title") || c.attr("title"),
                    isDom: !0,
                    element: c,
                  }),
                  f.metadata && f.extend(!0, k, c.metadata()))
                : (k = c));
            g = d.href || k.href || (p(c) ? c : null);
            h = d.title !== r ? d.title : k.title || "";
            m = (j = d.content || k.content) ? "html" : d.type || k.type;
            !m &&
              k.isDom &&
              ((m = c.data("fancybox-type")),
              m ||
                (m = (m = c.prop("class").match(/fancybox\.(\w+)/))
                  ? m[1]
                  : null));
            p(g) &&
              (m ||
                (b.isImage(g)
                  ? (m = "image")
                  : b.isSWF(g)
                  ? (m = "swf")
                  : "#" === g.charAt(0)
                  ? (m = "inline")
                  : p(c) && ((m = "html"), (j = c))),
              "ajax" === m &&
                ((l = g.split(/\s+/, 2)), (g = l.shift()), (l = l.shift())));
            j ||
              ("inline" === m
                ? g
                  ? (j = f(p(g) ? g.replace(/.*(?=#[^\s]+$)/, "") : g))
                  : k.isDom && (j = c)
                : "html" === m
                ? (j = g)
                : !m && !g && k.isDom && ((m = "inline"), (j = c)));
            f.extend(k, {
              href: g,
              type: m,
              content: j,
              title: h,
              selector: l,
            });
            a[e] = k;
          }),
          (b.opts = f.extend(!0, {}, b.defaults, d)),
          d.keys !== r &&
            (b.opts.keys = d.keys ? f.extend({}, b.defaults.keys, d.keys) : !1),
          (b.group = a),
          b._start(b.opts.index)
        );
    },
    cancel: function () {
      var a = b.coming;
      a &&
        !1 !== b.trigger("onCancel") &&
        (b.hideLoading(),
        b.ajaxLoad && b.ajaxLoad.abort(),
        (b.ajaxLoad = null),
        b.imgPreload && (b.imgPreload.onload = b.imgPreload.onerror = null),
        a.wrap && a.wrap.stop(!0, !0).trigger("onReset").remove(),
        (b.coming = null),
        b.current || b._afterZoomOut(a));
    },
    close: function (a) {
      b.cancel();
      !1 !== b.trigger("beforeClose") &&
        (b.unbindEvents(),
        b.isActive &&
          (!b.isOpen || !0 === a
            ? (f(".fancybox-wrap").stop(!0).trigger("onReset").remove(),
              b._afterZoomOut())
            : ((b.isOpen = b.isOpened = !1),
              (b.isClosing = !0),
              f(".fancybox-item, .fancybox-nav").remove(),
              b.wrap.stop(!0, !0).removeClass("fancybox-opened"),
              b.transitions[b.current.closeMethod]())));
    },
    play: function (a) {
      var d = function () {
          clearTimeout(b.player.timer);
        },
        e = function () {
          d();
          b.current &&
            b.player.isActive &&
            (b.player.timer = setTimeout(b.next, b.current.playSpeed));
        },
        c = function () {
          d();
          f("body").unbind(".player");
          b.player.isActive = !1;
          b.trigger("onPlayEnd");
        };
      if (!0 === a || (!b.player.isActive && !1 !== a)) {
        if (
          b.current &&
          (b.current.loop || b.current.index < b.group.length - 1)
        )
          (b.player.isActive = !0),
            f("body").bind({
              "afterShow.player onUpdate.player": e,
              "onCancel.player beforeClose.player": c,
              "beforeLoad.player": d,
            }),
            e(),
            b.trigger("onPlayStart");
      } else c();
    },
    next: function (a) {
      var d = b.current;
      d && (p(a) || (a = d.direction.next), b.jumpto(d.index + 1, a, "next"));
    },
    prev: function (a) {
      var d = b.current;
      d && (p(a) || (a = d.direction.prev), b.jumpto(d.index - 1, a, "prev"));
    },
    jumpto: function (a, d, e) {
      var c = b.current;
      c &&
        ((a = l(a)),
        (b.direction = d || c.direction[a >= c.index ? "next" : "prev"]),
        (b.router = e || "jumpto"),
        c.loop &&
          (0 > a && (a = c.group.length + (a % c.group.length)),
          (a %= c.group.length)),
        c.group[a] !== r && (b.cancel(), b._start(a)));
    },
    reposition: function (a, d) {
      var e = b.current,
        c = e ? e.wrap : null,
        k;
      c &&
        ((k = b._getPosition(d)),
        a && "scroll" === a.type
          ? (delete k.position, c.stop(!0, !0).animate(k, 200))
          : (c.css(k), (e.pos = f.extend({}, e.dim, k))));
    },
    update: function (a) {
      var d = a && a.type,
        e = !d || "orientationchange" === d;
      e && (clearTimeout(w), (w = null));
      b.isOpen &&
        !w &&
        (w = setTimeout(
          function () {
            var c = b.current;
            c &&
              !b.isClosing &&
              (b.wrap.removeClass("fancybox-tmp"),
              (e || "load" === d || ("resize" === d && c.autoResize)) &&
                b._setDimension(),
              ("scroll" === d && c.canShrink) || b.reposition(a),
              b.trigger("onUpdate"),
              (w = null));
          },
          e && !s ? 0 : 300
        ));
    },
    toggle: function (a) {
      b.isOpen &&
        ((b.current.fitToView =
          "boolean" === f.type(a) ? a : !b.current.fitToView),
        s &&
          (b.wrap.removeAttr("style").addClass("fancybox-tmp"),
          b.trigger("onUpdate")),
        b.update());
    },
    hideLoading: function () {
      n.unbind(".loading");
      f("#fancybox-loading").remove();
    },
    showLoading: function () {
      var a, d;
      b.hideLoading();
      a = f('<div id="fancybox-loading"><div></div></div>')
        .click(b.cancel)
        .appendTo("body");
      n.bind("keydown.loading", function (a) {
        if (27 === (a.which || a.keyCode)) a.preventDefault(), b.cancel();
      });
      b.defaults.fixed ||
        ((d = b.getViewport()),
        a.css({
          position: "absolute",
          top: 0.5 * d.h + d.y,
          left: 0.5 * d.w + d.x,
        }));
    },
    getViewport: function () {
      var a = (b.current && b.current.locked) || !1,
        d = { x: q.scrollLeft(), y: q.scrollTop() };
      a
        ? ((d.w = a[0].clientWidth), (d.h = a[0].clientHeight))
        : ((d.w = s && C.innerWidth ? C.innerWidth : q.width()),
          (d.h = s && C.innerHeight ? C.innerHeight : q.height()));
      return d;
    },
    unbindEvents: function () {
      b.wrap && t(b.wrap) && b.wrap.unbind(".fb");
      n.unbind(".fb");
      q.unbind(".fb");
    },
    bindEvents: function () {
      var a = b.current,
        d;
      a &&
        (q.bind(
          "orientationchange.fb" +
            (s ? "" : " resize.fb") +
            (a.autoCenter && !a.locked ? " scroll.fb" : ""),
          b.update
        ),
        (d = a.keys) &&
          n.bind("keydown.fb", function (e) {
            var c = e.which || e.keyCode,
              k = e.target || e.srcElement;
            if (27 === c && b.coming) return !1;
            !e.ctrlKey &&
              !e.altKey &&
              !e.shiftKey &&
              !e.metaKey &&
              (!k || (!k.type && !f(k).is("[contenteditable]"))) &&
              f.each(d, function (d, k) {
                if (1 < a.group.length && k[c] !== r)
                  return b[d](k[c]), e.preventDefault(), !1;
                if (-1 < f.inArray(c, k)) return b[d](), e.preventDefault(), !1;
              });
          }),
        f.fn.mousewheel &&
          a.mouseWheel &&
          b.wrap.bind("mousewheel.fb", function (d, c, k, g) {
            for (
              var h = f(d.target || null), j = !1;
              h.length &&
              !j &&
              !h.is(".fancybox-skin") &&
              !h.is(".fancybox-wrap");

            )
              (j =
                h[0] &&
                !(h[0].style.overflow && "hidden" === h[0].style.overflow) &&
                ((h[0].clientWidth && h[0].scrollWidth > h[0].clientWidth) ||
                  (h[0].clientHeight &&
                    h[0].scrollHeight > h[0].clientHeight))),
                (h = f(h).parent());
            if (0 !== c && !j && 1 < b.group.length && !a.canShrink) {
              if (0 < g || 0 < k) b.prev(0 < g ? "down" : "left");
              else if (0 > g || 0 > k) b.next(0 > g ? "up" : "right");
              d.preventDefault();
            }
          }));
    },
    trigger: function (a, d) {
      var e,
        c = d || b.coming || b.current;
      if (c) {
        f.isFunction(c[a]) &&
          (e = c[a].apply(c, Array.prototype.slice.call(arguments, 1)));
        if (!1 === e) return !1;
        c.helpers &&
          f.each(c.helpers, function (d, e) {
            e &&
              b.helpers[d] &&
              f.isFunction(b.helpers[d][a]) &&
              ((e = f.extend(!0, {}, b.helpers[d].defaults, e)),
              b.helpers[d][a](e, c));
          });
        f.event.trigger(a + ".fb");
      }
    },
    isImage: function (a) {
      return (
        p(a) &&
        a.match(
          /(^data:image\/.*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp)((\?|#).*)?$)/i
        )
      );
    },
    isSWF: function (a) {
      return p(a) && a.match(/\.(swf)((\?|#).*)?$/i);
    },
    _start: function (a) {
      var d = {},
        e,
        c;
      a = l(a);
      e = b.group[a] || null;
      if (!e) return !1;
      d = f.extend(!0, {}, b.opts, e);
      e = d.margin;
      c = d.padding;
      "number" === f.type(e) && (d.margin = [e, e, e, e]);
      "number" === f.type(c) && (d.padding = [c, c, c, c]);
      d.modal &&
        f.extend(!0, d, {
          closeBtn: !1,
          closeClick: !1,
          nextClick: !1,
          arrows: !1,
          mouseWheel: !1,
          keys: null,
          helpers: { overlay: { closeClick: !1 } },
        });
      d.autoSize && (d.autoWidth = d.autoHeight = !0);
      "auto" === d.width && (d.autoWidth = !0);
      "auto" === d.height && (d.autoHeight = !0);
      d.group = b.group;
      d.index = a;
      b.coming = d;
      if (!1 === b.trigger("beforeLoad")) b.coming = null;
      else {
        c = d.type;
        e = d.href;
        if (!c)
          return (
            (b.coming = null),
            b.current && b.router && "jumpto" !== b.router
              ? ((b.current.index = a), b[b.router](b.direction))
              : !1
          );
        b.isActive = !0;
        if ("image" === c || "swf" === c)
          (d.autoHeight = d.autoWidth = !1), (d.scrolling = "visible");
        "image" === c && (d.aspectRatio = !0);
        "iframe" === c && s && (d.scrolling = "scroll");
        d.wrap = f(d.tpl.wrap)
          .addClass(
            "fancybox-" +
              (s ? "mobile" : "desktop") +
              " fancybox-type-" +
              c +
              " fancybox-tmp " +
              d.wrapCSS
          )
          .appendTo(d.parent || "body");
        f.extend(d, {
          skin: f(".fancybox-skin", d.wrap),
          outer: f(".fancybox-outer", d.wrap),
          inner: f(".fancybox-inner", d.wrap),
        });
        f.each(["Top", "Right", "Bottom", "Left"], function (a, b) {
          d.skin.css("padding" + b, x(d.padding[a]));
        });
        b.trigger("onReady");
        if ("inline" === c || "html" === c) {
          if (!d.content || !d.content.length) return b._error("content");
        } else if (!e) return b._error("href");
        "image" === c
          ? b._loadImage()
          : "ajax" === c
          ? b._loadAjax()
          : "iframe" === c
          ? b._loadIframe()
          : b._afterLoad();
      }
    },
    _error: function (a) {
      f.extend(b.coming, {
        type: "html",
        autoWidth: !0,
        autoHeight: !0,
        minWidth: 0,
        minHeight: 0,
        scrolling: "no",
        hasError: a,
        content: b.coming.tpl.error,
      });
      b._afterLoad();
    },
    _loadImage: function () {
      var a = (b.imgPreload = new Image());
      a.onload = function () {
        this.onload = this.onerror = null;
        b.coming.width = this.width;
        b.coming.height = this.height;
        b._afterLoad();
      };
      a.onerror = function () {
        this.onload = this.onerror = null;
        b._error("image");
      };
      a.src = b.coming.href;
      !0 !== a.complete && b.showLoading();
    },
    _loadAjax: function () {
      var a = b.coming;
      b.showLoading();
      b.ajaxLoad = f.ajax(
        f.extend({}, a.ajax, {
          url: a.href,
          error: function (a, e) {
            b.coming && "abort" !== e ? b._error("ajax", a) : b.hideLoading();
          },
          success: function (d, e) {
            "success" === e && ((a.content = d), b._afterLoad());
          },
        })
      );
    },
    _loadIframe: function () {
      var a = b.coming,
        d = f(a.tpl.iframe.replace(/\{rnd\}/g, new Date().getTime()))
          .attr("scrolling", s ? "auto" : a.iframe.scrolling)
          .attr("src", a.href);
      f(a.wrap).bind("onReset", function () {
        try {
          f(this)
            .find("iframe")
            .hide()
            .attr("src", "//about:blank")
            .end()
            .empty();
        } catch (a) {}
      });
      a.iframe.preload &&
        (b.showLoading(),
        d.one("load", function () {
          f(this).data("ready", 1);
          s || f(this).bind("load.fb", b.update);
          f(this)
            .parents(".fancybox-wrap")
            .width("100%")
            .removeClass("fancybox-tmp")
            .show();
          b._afterLoad();
        }));
      a.content = d.appendTo(a.inner);
      a.iframe.preload || b._afterLoad();
    },
    _preloadImages: function () {
      var a = b.group,
        d = b.current,
        e = a.length,
        c = d.preload ? Math.min(d.preload, e - 1) : 0,
        f,
        g;
      for (g = 1; g <= c; g += 1)
        (f = a[(d.index + g) % e]),
          "image" === f.type && f.href && (new Image().src = f.href);
    },
    _afterLoad: function () {
      var a = b.coming,
        d = b.current,
        e,
        c,
        k,
        g,
        h;
      b.hideLoading();
      if (a && !1 !== b.isActive)
        if (!1 === b.trigger("afterLoad", a, d))
          a.wrap.stop(!0).trigger("onReset").remove(), (b.coming = null);
        else {
          d &&
            (b.trigger("beforeChange", d),
            d.wrap
              .stop(!0)
              .removeClass("fancybox-opened")
              .find(".fancybox-item, .fancybox-nav")
              .remove());
          b.unbindEvents();
          e = a.content;
          c = a.type;
          k = a.scrolling;
          f.extend(b, {
            wrap: a.wrap,
            skin: a.skin,
            outer: a.outer,
            inner: a.inner,
            current: a,
            previous: d,
          });
          g = a.href;
          switch (c) {
            case "inline":
            case "ajax":
            case "html":
              a.selector
                ? (e = f("<div>").html(e).find(a.selector))
                : t(e) &&
                  (e.data("fancybox-placeholder") ||
                    e.data(
                      "fancybox-placeholder",
                      f('<div class="fancybox-placeholder"></div>')
                        .insertAfter(e)
                        .hide()
                    ),
                  (e = e.show().detach()),
                  a.wrap.bind("onReset", function () {
                    f(this).find(e).length &&
                      e
                        .hide()
                        .replaceAll(e.data("fancybox-placeholder"))
                        .data("fancybox-placeholder", !1);
                  }));
              break;
            case "image":
              e = a.tpl.image.replace("{href}", g);
              break;
            case "swf":
              (e =
                '<object id="fancybox-swf" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%"><param name="movie" value="' +
                g +
                '"></param>'),
                (h = ""),
                f.each(a.swf, function (a, b) {
                  e += '<param name="' + a + '" value="' + b + '"></param>';
                  h += " " + a + '="' + b + '"';
                }),
                (e +=
                  '<embed src="' +
                  g +
                  '" type="application/x-shockwave-flash" width="100%" height="100%"' +
                  h +
                  "></embed></object>");
          }
          (!t(e) || !e.parent().is(a.inner)) && a.inner.append(e);
          b.trigger("beforeShow");
          a.inner.css(
            "overflow",
            "yes" === k ? "scroll" : "no" === k ? "hidden" : k
          );
          b._setDimension();
          b.reposition();
          b.isOpen = !1;
          b.coming = null;
          b.bindEvents();
          if (b.isOpened) {
            if (d.prevMethod) b.transitions[d.prevMethod]();
          } else
            f(".fancybox-wrap")
              .not(a.wrap)
              .stop(!0)
              .trigger("onReset")
              .remove();
          b.transitions[b.isOpened ? a.nextMethod : a.openMethod]();
          b._preloadImages();
        }
    },
    _setDimension: function () {
      var a = b.getViewport(),
        d = 0,
        e = !1,
        c = !1,
        e = b.wrap,
        k = b.skin,
        g = b.inner,
        h = b.current,
        c = h.width,
        j = h.height,
        m = h.minWidth,
        u = h.minHeight,
        n = h.maxWidth,
        v = h.maxHeight,
        s = h.scrolling,
        q = h.scrollOutside ? h.scrollbarWidth : 0,
        y = h.margin,
        p = l(y[1] + y[3]),
        r = l(y[0] + y[2]),
        z,
        A,
        t,
        D,
        B,
        G,
        C,
        E,
        w;
      e.add(k).add(g).width("auto").height("auto").removeClass("fancybox-tmp");
      y = l(k.outerWidth(!0) - k.width());
      z = l(k.outerHeight(!0) - k.height());
      A = p + y;
      t = r + z;
      D = F(c) ? ((a.w - A) * l(c)) / 100 : c;
      B = F(j) ? ((a.h - t) * l(j)) / 100 : j;
      if ("iframe" === h.type) {
        if (((w = h.content), h.autoHeight && 1 === w.data("ready")))
          try {
            w[0].contentWindow.document.location &&
              (g.width(D).height(9999),
              (G = w.contents().find("body")),
              q && G.css("overflow-x", "hidden"),
              (B = G.height()));
          } catch (H) {}
      } else if (h.autoWidth || h.autoHeight)
        g.addClass("fancybox-tmp"),
          h.autoWidth || g.width(D),
          h.autoHeight || g.height(B),
          h.autoWidth && (D = g.width()),
          h.autoHeight && (B = g.height()),
          g.removeClass("fancybox-tmp");
      c = l(D);
      j = l(B);
      E = D / B;
      m = l(F(m) ? l(m, "w") - A : m);
      n = l(F(n) ? l(n, "w") - A : n);
      u = l(F(u) ? l(u, "h") - t : u);
      v = l(F(v) ? l(v, "h") - t : v);
      G = n;
      C = v;
      h.fitToView && ((n = Math.min(a.w - A, n)), (v = Math.min(a.h - t, v)));
      A = a.w - p;
      r = a.h - r;
      h.aspectRatio
        ? (c > n && ((c = n), (j = l(c / E))),
          j > v && ((j = v), (c = l(j * E))),
          c < m && ((c = m), (j = l(c / E))),
          j < u && ((j = u), (c = l(j * E))))
        : ((c = Math.max(m, Math.min(c, n))),
          h.autoHeight && "iframe" !== h.type && (g.width(c), (j = g.height())),
          (j = Math.max(u, Math.min(j, v))));
      if (h.fitToView)
        if (
          (g.width(c).height(j),
          e.width(c + y),
          (a = e.width()),
          (p = e.height()),
          h.aspectRatio)
        )
          for (; (a > A || p > r) && c > m && j > u && !(19 < d++); )
            (j = Math.max(u, Math.min(v, j - 10))),
              (c = l(j * E)),
              c < m && ((c = m), (j = l(c / E))),
              c > n && ((c = n), (j = l(c / E))),
              g.width(c).height(j),
              e.width(c + y),
              (a = e.width()),
              (p = e.height());
        else
          (c = Math.max(m, Math.min(c, c - (a - A)))),
            (j = Math.max(u, Math.min(j, j - (p - r))));
      q && "auto" === s && j < B && c + y + q < A && (c += q);
      g.width(c).height(j);
      e.width(c + y);
      a = e.width();
      p = e.height();
      e = (a > A || p > r) && c > m && j > u;
      c = h.aspectRatio
        ? c < G && j < C && c < D && j < B
        : (c < G || j < C) && (c < D || j < B);
      f.extend(h, {
        dim: { width: x(a), height: x(p) },
        origWidth: D,
        origHeight: B,
        canShrink: e,
        canExpand: c,
        wPadding: y,
        hPadding: z,
        wrapSpace: p - k.outerHeight(!0),
        skinSpace: k.height() - j,
      });
      !w && h.autoHeight && j > u && j < v && !c && g.height("auto");
    },
    _getPosition: function (a) {
      var d = b.current,
        e = b.getViewport(),
        c = d.margin,
        f = b.wrap.width() + c[1] + c[3],
        g = b.wrap.height() + c[0] + c[2],
        c = { position: "absolute", top: c[0], left: c[3] };
      d.autoCenter && d.fixed && !a && g <= e.h && f <= e.w
        ? (c.position = "fixed")
        : d.locked || ((c.top += e.y), (c.left += e.x));
      c.top = x(Math.max(c.top, c.top + (e.h - g) * d.topRatio));
      c.left = x(Math.max(c.left, c.left + (e.w - f) * d.leftRatio));
      return c;
    },
    _afterZoomIn: function () {
      var a = b.current;
      a &&
        ((b.isOpen = b.isOpened = !0),
        b.wrap.css("overflow", "visible").addClass("fancybox-opened"),
        b.update(),
        (a.closeClick || (a.nextClick && 1 < b.group.length)) &&
          b.inner.css("cursor", "pointer").bind("click.fb", function (d) {
            !f(d.target).is("a") &&
              !f(d.target).parent().is("a") &&
              (d.preventDefault(), b[a.closeClick ? "close" : "next"]());
          }),
        a.closeBtn &&
          f(a.tpl.closeBtn)
            .appendTo(b.skin)
            .bind("click.fb", function (a) {
              a.preventDefault();
              b.close();
            }),
        a.arrows &&
          1 < b.group.length &&
          ((a.loop || 0 < a.index) &&
            f(a.tpl.prev).appendTo(b.outer).bind("click.fb", b.prev),
          (a.loop || a.index < b.group.length - 1) &&
            f(a.tpl.next).appendTo(b.outer).bind("click.fb", b.next)),
        b.trigger("afterShow"),
        !a.loop && a.index === a.group.length - 1
          ? b.play(!1)
          : b.opts.autoPlay &&
            !b.player.isActive &&
            ((b.opts.autoPlay = !1), b.play()));
    },
    _afterZoomOut: function (a) {
      a = a || b.current;
      f(".fancybox-wrap").trigger("onReset").remove();
      f.extend(b, {
        group: {},
        opts: {},
        router: !1,
        current: null,
        isActive: !1,
        isOpened: !1,
        isOpen: !1,
        isClosing: !1,
        wrap: null,
        skin: null,
        outer: null,
        inner: null,
      });
      b.trigger("afterClose", a);
    },
  });
  b.transitions = {
    getOrigPosition: function () {
      var a = b.current,
        d = a.element,
        e = a.orig,
        c = {},
        f = 50,
        g = 50,
        h = a.hPadding,
        j = a.wPadding,
        m = b.getViewport();
      !e &&
        a.isDom &&
        d.is(":visible") &&
        ((e = d.find("img:first")), e.length || (e = d));
      t(e)
        ? ((c = e.offset()),
          e.is("img") && ((f = e.outerWidth()), (g = e.outerHeight())))
        : ((c.top = m.y + (m.h - g) * a.topRatio),
          (c.left = m.x + (m.w - f) * a.leftRatio));
      if ("fixed" === b.wrap.css("position") || a.locked)
        (c.top -= m.y), (c.left -= m.x);
      return (c = {
        top: x(c.top - h * a.topRatio),
        left: x(c.left - j * a.leftRatio),
        width: x(f + j),
        height: x(g + h),
      });
    },
    step: function (a, d) {
      var e,
        c,
        f = d.prop;
      c = b.current;
      var g = c.wrapSpace,
        h = c.skinSpace;
      if ("width" === f || "height" === f)
        (e = d.end === d.start ? 1 : (a - d.start) / (d.end - d.start)),
          b.isClosing && (e = 1 - e),
          (c = "width" === f ? c.wPadding : c.hPadding),
          (c = a - c),
          b.skin[f](l("width" === f ? c : c - g * e)),
          b.inner[f](l("width" === f ? c : c - g * e - h * e));
    },
    zoomIn: function () {
      var a = b.current,
        d = a.pos,
        e = a.openEffect,
        c = "elastic" === e,
        k = f.extend({ opacity: 1 }, d);
      delete k.position;
      c
        ? ((d = this.getOrigPosition()), a.openOpacity && (d.opacity = 0.1))
        : "fade" === e && (d.opacity = 0.1);
      b.wrap
        .css(d)
        .animate(k, {
          duration: "none" === e ? 0 : a.openSpeed,
          easing: a.openEasing,
          step: c ? this.step : null,
          complete: b._afterZoomIn,
        });
    },
    zoomOut: function () {
      var a = b.current,
        d = a.closeEffect,
        e = "elastic" === d,
        c = { opacity: 0.1 };
      e && ((c = this.getOrigPosition()), a.closeOpacity && (c.opacity = 0.1));
      b.wrap.animate(c, {
        duration: "none" === d ? 0 : a.closeSpeed,
        easing: a.closeEasing,
        step: e ? this.step : null,
        complete: b._afterZoomOut,
      });
    },
    changeIn: function () {
      var a = b.current,
        d = a.nextEffect,
        e = a.pos,
        c = { opacity: 1 },
        f = b.direction,
        g;
      e.opacity = 0.1;
      "elastic" === d &&
        ((g = "down" === f || "up" === f ? "top" : "left"),
        "down" === f || "right" === f
          ? ((e[g] = x(l(e[g]) - 200)), (c[g] = "+=200px"))
          : ((e[g] = x(l(e[g]) + 200)), (c[g] = "-=200px")));
      "none" === d
        ? b._afterZoomIn()
        : b.wrap
            .css(e)
            .animate(c, {
              duration: a.nextSpeed,
              easing: a.nextEasing,
              complete: b._afterZoomIn,
            });
    },
    changeOut: function () {
      var a = b.previous,
        d = a.prevEffect,
        e = { opacity: 0.1 },
        c = b.direction;
      "elastic" === d &&
        (e["down" === c || "up" === c ? "top" : "left"] =
          ("up" === c || "left" === c ? "-" : "+") + "=200px");
      a.wrap.animate(e, {
        duration: "none" === d ? 0 : a.prevSpeed,
        easing: a.prevEasing,
        complete: function () {
          f(this).trigger("onReset").remove();
        },
      });
    },
  };
  b.helpers.overlay = {
    defaults: {
      closeClick: !0,
      speedOut: 200,
      showEarly: !0,
      css: {},
      locked: !s,
      fixed: !0,
    },
    overlay: null,
    fixed: !1,
    create: function (a) {
      a = f.extend({}, this.defaults, a);
      this.overlay && this.close();
      this.overlay = f('<div class="fancybox-overlay"></div>').appendTo("body");
      this.fixed = !1;
      a.fixed &&
        b.defaults.fixed &&
        (this.overlay.addClass("fancybox-overlay-fixed"), (this.fixed = !0));
    },
    open: function (a) {
      var d = this;
      a = f.extend({}, this.defaults, a);
      this.overlay
        ? this.overlay.unbind(".overlay").width("auto").height("auto")
        : this.create(a);
      this.fixed ||
        (q.bind("resize.overlay", f.proxy(this.update, this)), this.update());
      a.closeClick &&
        this.overlay.bind("click.overlay", function (a) {
          f(a.target).hasClass("fancybox-overlay") &&
            (b.isActive ? b.close() : d.close());
        });
      this.overlay.css(a.css).show();
    },
    close: function () {
      f(".fancybox-overlay").remove();
      q.unbind("resize.overlay");
      this.overlay = null;
      !1 !== this.margin &&
        (f("body").css("margin-right", this.margin), (this.margin = !1));
      this.el && this.el.removeClass("fancybox-lock");
    },
    update: function () {
      var a = "100%",
        b;
      this.overlay.width(a).height("100%");
      H
        ? ((b = Math.max(z.documentElement.offsetWidth, z.body.offsetWidth)),
          n.width() > b && (a = n.width()))
        : n.width() > q.width() && (a = n.width());
      this.overlay.width(a).height(n.height());
    },
    onReady: function (a, b) {
      f(".fancybox-overlay").stop(!0, !0);
      this.overlay ||
        ((this.margin =
          n.height() > q.height() || "scroll" === f("body").css("overflow-y")
            ? f("body").css("margin-right")
            : !1),
        (this.el = z.all && !z.querySelector ? f("html") : f("body")),
        this.create(a));
      a.locked &&
        this.fixed &&
        ((b.locked = this.overlay.append(b.wrap)), (b.fixed = !1));
      !0 === a.showEarly && this.beforeShow.apply(this, arguments);
    },
    beforeShow: function (a, b) {
      b.locked &&
        (this.el.addClass("fancybox-lock"),
        !1 !== this.margin &&
          f("body").css("margin-right", l(this.margin) + b.scrollbarWidth));
      this.open(a);
    },
    onUpdate: function () {
      this.fixed || this.update();
    },
    afterClose: function (a) {
      this.overlay &&
        !b.isActive &&
        this.overlay.fadeOut(a.speedOut, f.proxy(this.close, this));
    },
  };
  b.helpers.title = {
    defaults: { type: "float", position: "bottom" },
    beforeShow: function (a) {
      var d = b.current,
        e = d.title,
        c = a.type;
      f.isFunction(e) && (e = e.call(d.element, d));
      if (p(e) && "" !== f.trim(e)) {
        d = f(
          '<div class="fancybox-title fancybox-title-' +
            c +
            '-wrap">' +
            e +
            "</div>"
        );
        switch (c) {
          case "inside":
            c = b.skin;
            break;
          case "outside":
            c = b.wrap;
            break;
          case "over":
            c = b.inner;
            break;
          default:
            (c = b.skin),
              d.appendTo("body"),
              H && d.width(d.width()),
              d.wrapInner('<span class="child"></span>'),
              (b.current.margin[2] += Math.abs(l(d.css("margin-bottom"))));
        }
        d["top" === a.position ? "prependTo" : "appendTo"](c);
      }
    },
  };
  f.fn.fancybox = function (a) {
    var d,
      e = f(this),
      c = this.selector || "",
      k = function (g) {
        var h = f(this).blur(),
          j = d,
          k,
          l;
        !g.ctrlKey &&
          !g.altKey &&
          !g.shiftKey &&
          !g.metaKey &&
          !h.is(".fancybox-wrap") &&
          ((k = a.groupAttr || "data-fancybox-group"),
          (l = h.attr(k)),
          l || ((k = "rel"), (l = h.get(0)[k])),
          l &&
            "" !== l &&
            "nofollow" !== l &&
            ((h = c.length ? f(c) : e),
            (h = h.filter("[" + k + '="' + l + '"]')),
            (j = h.index(this))),
          (a.index = j),
          !1 !== b.open(h, a) && g.preventDefault());
      };
    a = a || {};
    d = a.index || 0;
    !c || !1 === a.live
      ? e.unbind("click.fb-start").bind("click.fb-start", k)
      : n
          .undelegate(c, "click.fb-start")
          .delegate(
            c + ":not('.fancybox-item, .fancybox-nav')",
            "click.fb-start",
            k
          );
    this.filter("[data-fancybox-start=1]").trigger("click");
    return this;
  };
  n.ready(function () {
    f.scrollbarWidth === r &&
      (f.scrollbarWidth = function () {
        var a = f(
            '<div style="width:50px;height:50px;overflow:auto"><div/></div>'
          ).appendTo("body"),
          b = a.children(),
          b = b.innerWidth() - b.height(99).innerWidth();
        a.remove();
        return b;
      });
    if (f.support.fixedPosition === r) {
      var a = f.support,
        d = f('<div style="position:fixed;top:20px;"></div>').appendTo("body"),
        e = 20 === d[0].offsetTop || 15 === d[0].offsetTop;
      d.remove();
      a.fixedPosition = e;
    }
    f.extend(b.defaults, {
      scrollbarWidth: f.scrollbarWidth(),
      fixed: f.support.fixedPosition,
      parent: f("body"),
    });
  });
})(window, document, $jq18);
// PhotoSwipe - http://www.photoswipe.com/
// Copyright (c) 2012 by Code Computerlove (http://www.codecomputerlove.com)
// Licensed under the MIT license
// version: 3.0.5
(function (e) {
  if (!Function.prototype.bind)
    Function.prototype.bind = function (c) {
      var a = [].slice,
        b = a.call(arguments, 1),
        d = this,
        f = function () {},
        g = function () {
          return d.apply(
            this instanceof f ? this : c || {},
            b.concat(a.call(arguments))
          );
        };
      f.prototype = d.prototype;
      g.prototype = new f();
      return g;
    };
  if (typeof e.Code === "undefined") e.Code = {};
  e.Code.Util = {
    registerNamespace: function () {
      var c = arguments,
        a = null,
        b,
        d,
        f,
        g,
        h;
      b = 0;
      for (g = c.length; b < g; b++) {
        f = c[b];
        f = f.split(".");
        a = f[0];
        typeof e[a] === "undefined" && (e[a] = {});
        a = e[a];
        d = 1;
        for (h = f.length; d < h; ++d) (a[f[d]] = a[f[d]] || {}), (a = a[f[d]]);
      }
    },
    coalesce: function () {
      var c, a;
      c = 0;
      for (a = arguments.length; c < a; c++)
        if (!this.isNothing(arguments[c])) return arguments[c];
      return null;
    },
    extend: function (c, a, b) {
      var d;
      this.isNothing(b) && (b = !0);
      if (c && a && this.isObject(a))
        for (d in a)
          this.objectHasProperty(a, d) &&
            (b ? (c[d] = a[d]) : typeof c[d] === "undefined" && (c[d] = a[d]));
    },
    clone: function (c) {
      var a = {};
      this.extend(a, c);
      return a;
    },
    isObject: function (c) {
      return c instanceof Object;
    },
    isFunction: function (c) {
      return {}.toString.call(c) === "[object Function]";
    },
    isArray: function (c) {
      return c instanceof Array;
    },
    isLikeArray: function (c) {
      return typeof c.length === "number";
    },
    isNumber: function (c) {
      return typeof c === "number";
    },
    isString: function (c) {
      return typeof c === "string";
    },
    isNothing: function (c) {
      if (typeof c === "undefined" || c === null) return !0;
      return !1;
    },
    swapArrayElements: function (c, a, b) {
      var d = c[a];
      c[a] = c[b];
      c[b] = d;
    },
    trim: function (c) {
      return c.replace(/^\s\s*/, "").replace(/\s\s*$/, "");
    },
    toCamelCase: function (c) {
      return c.replace(/(\-[a-z])/g, function (a) {
        return a.toUpperCase().replace("-", "");
      });
    },
    toDashedCase: function (c) {
      return c.replace(/([A-Z])/g, function (a) {
        return "-" + a.toLowerCase();
      });
    },
    arrayIndexOf: function (c, a, b) {
      var d, f, g, e;
      g = -1;
      d = 0;
      for (f = a.length; d < f; d++)
        if (((e = a[d]), this.isNothing(b))) {
          if (e === c) {
            g = d;
            break;
          }
        } else if (this.objectHasProperty(e, b) && e[b] === c) {
          g = d;
          break;
        }
      return g;
    },
    objectHasProperty: function (c, a) {
      return c.hasOwnProperty
        ? c.hasOwnProperty(a)
        : "undefined" !== typeof c[a];
    },
  };
})(window);
(function (e, c) {
  c.Browser = {
    ua: null,
    version: null,
    safari: null,
    webkit: null,
    opera: null,
    msie: null,
    chrome: null,
    mozilla: null,
    android: null,
    blackberry: null,
    iPad: null,
    iPhone: null,
    iPod: null,
    iOS: null,
    is3dSupported: null,
    isCSSTransformSupported: null,
    isTouchSupported: null,
    isGestureSupported: null,
    _detect: function () {
      this.ua = e.navigator.userAgent;
      this.version = this.ua.match(/.+(?:rv|it|ra|ie)[\/: ]([\d.]+)/) || [];
      this.safari = /Safari/gi.test(e.navigator.appVersion);
      this.webkit = /webkit/i.test(this.ua);
      this.opera = /opera/i.test(this.ua);
      this.msie = /msie/i.test(this.ua) && !this.opera;
      this.chrome = /Chrome/i.test(this.ua);
      this.firefox = /Firefox/i.test(this.ua);
      this.fennec = /Fennec/i.test(this.ua);
      this.mozilla =
        /mozilla/i.test(this.ua) && !/(compatible|webkit)/.test(this.ua);
      this.android = /android/i.test(this.ua);
      this.blackberry = /blackberry/i.test(this.ua);
      this.iOS = /iphone|ipod|ipad/gi.test(e.navigator.platform);
      this.iPad = /ipad/gi.test(e.navigator.platform);
      this.iPhone = /iphone/gi.test(e.navigator.platform);
      this.iPod = /ipod/gi.test(e.navigator.platform);
      var a = document.createElement("div");
      this.is3dSupported = !c.isNothing(a.style.WebkitPerspective);
      this.isCSSTransformSupported =
        !c.isNothing(a.style.WebkitTransform) ||
        !c.isNothing(a.style.MozTransform) ||
        !c.isNothing(a.style.transformProperty);
      this.isTouchSupported = this.isEventSupported("touchstart");
      this.isGestureSupported = this.isEventSupported("gesturestart");
    },
    _eventTagNames: {
      select: "input",
      change: "input",
      submit: "form",
      reset: "form",
      error: "img",
      load: "img",
      abort: "img",
    },
    isEventSupported: function (a) {
      var b = document.createElement(this._eventTagNames[a] || "div"),
        d,
        a = "on" + a;
      d = c.objectHasProperty(b, a);
      d || (b.setAttribute(a, "return;"), (d = typeof b[a] === "function"));
      return d;
    },
    isLandscape: function () {
      return c.DOM.windowWidth() > c.DOM.windowHeight();
    },
  };
  c.Browser._detect();
})(window, window.Code.Util);
(function (e, c) {
  c.extend(c, {
    Events: {
      add: function (a, b, d) {
        this._checkHandlersProperty(a);
        b === "mousewheel" && (b = this._normaliseMouseWheelType());
        typeof a.__eventHandlers[b] === "undefined" &&
          (a.__eventHandlers[b] = []);
        a.__eventHandlers[b].push(d);
        this._isBrowserObject(a) && a.addEventListener(b, d, !1);
      },
      remove: function (a, b, d) {
        this._checkHandlersProperty(a);
        b === "mousewheel" && (b = this._normaliseMouseWheelType());
        if (a.__eventHandlers[b] instanceof Array) {
          var f,
            g,
            e = a.__eventHandlers[b];
          if (c.isNothing(d)) {
            if (this._isBrowserObject(a)) {
              f = 0;
              for (g = e.length; f < g; f++) a.removeEventListener(b, e[f], !1);
            }
            a.__eventHandlers[b] = [];
          } else {
            f = 0;
            for (g = e.length; f < g; f++)
              if (e[f] === d) {
                e.splice(f, 1);
                break;
              }
            this._isBrowserObject(a) && a.removeEventListener(b, d, !1);
          }
        }
      },
      fire: function (a, b) {
        var d,
          f,
          g,
          h,
          j = Array.prototype.slice.call(arguments).splice(2);
        b === "mousewheel" && (b = this._normaliseMouseWheelType());
        if (this._isBrowserObject(a)) {
          if (typeof b !== "string")
            throw "type must be a string for DOM elements";
          g = this._NATIVE_EVENTS[b];
          d = document.createEvent(g ? "HTMLEvents" : "UIEvents");
          d[g ? "initEvent" : "initUIEvent"](b, !0, !0, e, 1);
          if (j.length < 1) {
            a.dispatchEvent(d);
            return;
          }
        }
        this._checkHandlersProperty(a);
        d = typeof b === "string" ? { type: b } : b;
        if (!d.target) d.target = a;
        if (!d.type) throw Error("Event object missing 'type' property.");
        if (a.__eventHandlers[d.type] instanceof Array) {
          g = a.__eventHandlers[d.type];
          j.unshift(d);
          d = 0;
          for (f = g.length; d < f; d++)
            (h = g[d]), c.isNothing(h) || h.apply(a, j);
        }
      },
      getMousePosition: function (a) {
        var b = { x: 0, y: 0 };
        if (a.pageX) b.x = a.pageX;
        else if (a.clientX)
          b.x =
            a.clientX +
            (document.documentElement.scrollLeft || document.body.scrollLeft);
        if (a.pageY) b.y = a.pageY;
        else if (a.clientY)
          b.y =
            a.clientY +
            (document.documentElement.scrollTop || document.body.scrollTop);
        return b;
      },
      getTouchEvent: function (a) {
        return a;
      },
      getWheelDelta: function (a) {
        var b = 0;
        c.isNothing(a.wheelDelta)
          ? c.isNothing(a.detail) || (b = -a.detail / 3)
          : (b = a.wheelDelta / 120);
        return b;
      },
      domReady: function (a) {
        document.addEventListener("DOMContentLoaded", a, !1);
      },
      _checkHandlersProperty: function (a) {
        c.isNothing(a.__eventHandlers) && c.extend(a, { __eventHandlers: {} });
      },
      _isBrowserObject: function (a) {
        if (a === e || a === e.document) return !0;
        return this._isElement(a) || this._isNode(a);
      },
      _isElement: function (a) {
        return typeof e.HTMLElement === "object"
          ? a instanceof e.HTMLElement
          : typeof a === "object" &&
              a.nodeType === 1 &&
              typeof a.nodeName === "string";
      },
      _isNode: function (a) {
        return typeof e.Node === "object"
          ? a instanceof e.Node
          : typeof a === "object" &&
              typeof a.nodeType === "number" &&
              typeof a.nodeName === "string";
      },
      _normaliseMouseWheelType: function () {
        if (c.Browser.isEventSupported("mousewheel")) return "mousewheel";
        return "DOMMouseScroll";
      },
      _NATIVE_EVENTS: {
        click: 1,
        dblclick: 1,
        mouseup: 1,
        mousedown: 1,
        contextmenu: 1,
        mousewheel: 1,
        DOMMouseScroll: 1,
        mouseover: 1,
        mouseout: 1,
        mousemove: 1,
        selectstart: 1,
        selectend: 1,
        keydown: 1,
        keypress: 1,
        keyup: 1,
        orientationchange: 1,
        touchstart: 1,
        touchmove: 1,
        touchend: 1,
        touchcancel: 1,
        gesturestart: 1,
        gesturechange: 1,
        gestureend: 1,
        focus: 1,
        blur: 1,
        change: 1,
        reset: 1,
        select: 1,
        submit: 1,
        load: 1,
        unload: 1,
        beforeunload: 1,
        resize: 1,
        move: 1,
        DOMContentLoaded: 1,
        readystatechange: 1,
        error: 1,
        abort: 1,
        scroll: 1,
      },
    },
  });
})(window, window.Code.Util);
(function (e, c) {
  c.extend(c, {
    DOM: {
      setData: function (a, b, d) {
        if (c.isLikeArray(a)) {
          var f, g;
          f = 0;
          for (g = a.length; f < g; f++) c.DOM._setData(a[f], b, d);
        } else c.DOM._setData(a, b, d);
      },
      _setData: function (a, b, d) {
        c.DOM.setAttribute(a, "data-" + b, d);
      },
      getData: function (a, b, d) {
        return c.DOM.getAttribute(a, "data-" + b, d);
      },
      removeData: function (a, b) {
        if (c.isLikeArray(a)) {
          var d, f;
          d = 0;
          for (f = a.length; d < f; d++) c.DOM._removeData(a[d], b);
        } else c.DOM._removeData(a, b);
      },
      _removeData: function (a, b) {
        c.DOM.removeAttribute(a, "data-" + b);
      },
      isChildOf: function (a, b) {
        if (b === a) return !1;
        for (; a && a !== b; ) a = a.parentNode;
        return a === b;
      },
      find: function (a, b) {
        if (c.isNothing(b)) b = e.document;
        var d = b.querySelectorAll(a),
          f = [],
          g,
          h;
        g = 0;
        for (h = d.length; g < h; g++) f.push(d[g]);
        return f;
      },
      createElement: function (a, b, d) {
        var f,
          a = document.createElement(a);
        for (f in b) c.objectHasProperty(b, f) && a.setAttribute(f, b[f]);
        a.innerHTML = d || "";
        return a;
      },
      appendChild: function (a, b) {
        b.appendChild(a);
      },
      insertBefore: function (a, b, d) {
        d.insertBefore(a, b);
      },
      appendText: function (a, b) {
        c.DOM.appendChild(document.createTextNode(a), b);
      },
      appendToBody: function (a) {
        this.appendChild(a, document.body);
      },
      removeChild: function (a, b) {
        b.removeChild(a);
      },
      removeChildren: function (a) {
        if (a.hasChildNodes())
          for (; a.childNodes.length >= 1; )
            a.removeChild(a.childNodes[a.childNodes.length - 1]);
      },
      hasAttribute: function (a, b) {
        return !c.isNothing(a.getAttribute(b));
      },
      getAttribute: function (a, b, d) {
        a = a.getAttribute(b);
        c.isNothing(a) && !c.isNothing(d) && (a = d);
        return a;
      },
      setAttribute: function (a, b, d) {
        if (c.isLikeArray(a)) {
          var f, g;
          f = 0;
          for (g = a.length; f < g; f++) c.DOM._setAttribute(a[f], b, d);
        } else c.DOM._setAttribute(a, b, d);
      },
      _setAttribute: function (a, b, d) {
        a.setAttribute(b, d);
      },
      removeAttribute: function (a, b) {
        if (c.isLikeArray(a)) {
          var d, f;
          d = 0;
          for (f = a.length; d < f; d++) c.DOM._removeAttribute(a[d], b);
        } else c.DOM._removeAttribute(a, b);
      },
      _removeAttribute: function (a, b) {
        this.hasAttribute(a, b) && a.removeAttribute(b);
      },
      addClass: function (a, b) {
        if (c.isLikeArray(a)) {
          var d, f;
          d = 0;
          for (f = a.length; d < f; d++) c.DOM._addClass(a[d], b);
        } else c.DOM._addClass(a, b);
      },
      _addClass: function (a, b) {
        var d = c.DOM.getAttribute(a, "class", "");
        RegExp("(?:^|\\s+)" + b + "(?:\\s+|$)").test(d) ||
          (d !== "" && (d += " "), (d += b), c.DOM.setAttribute(a, "class", d));
      },
      removeClass: function (a, b) {
        if (c.isLikeArray(a)) {
          var d, f;
          d = 0;
          for (f = a.length; d < f; d++) c.DOM._removeClass(a[d], b);
        } else c.DOM._removeClass(a, b);
      },
      _removeClass: function (a, b) {
        var d = c.DOM.getAttribute(a, "class", ""),
          d = c.trim(d).split(" "),
          f = "",
          g,
          e;
        g = 0;
        for (e = d.length; g < e; g++)
          d[g] !== b && (f !== "" && (f += " "), (f += d[g]));
        f === ""
          ? c.DOM.removeAttribute(a, "class")
          : c.DOM.setAttribute(a, "class", f);
      },
      hasClass: function (a, b) {
        return RegExp("(?:^|\\s+)" + b + "(?:\\s+|$)").test(
          c.DOM.getAttribute(a, "class", "")
        );
      },
      setStyle: function (a, b, d) {
        if (c.isLikeArray(a)) {
          var f, g;
          f = 0;
          for (g = a.length; f < g; f++) c.DOM._setStyle(a[f], b, d);
        } else c.DOM._setStyle(a, b, d);
      },
      _setStyle: function (a, b, d) {
        var f;
        if (c.isObject(b))
          for (f in b)
            c.objectHasProperty(b, f) &&
              (f === "width"
                ? c.DOM.width(a, b[f])
                : f === "height"
                ? c.DOM.height(a, b[f])
                : (a.style[f] = b[f]));
        else a.style[b] = d;
      },
      getStyle: function (a, b) {
        var d = e.getComputedStyle(a, "").getPropertyValue(b);
        d === "" && (d = a.style[b]);
        return d;
      },
      hide: function (a) {
        if (c.isLikeArray(a)) {
          var b, d;
          b = 0;
          for (d = a.length; b < d; b++) c.DOM._hide(a[b]);
        } else c.DOM._hide(a);
      },
      _hide: function (a) {
        c.DOM.setData(a, "ccl-disp", c.DOM.getStyle(a, "display"));
        c.DOM.setStyle(a, "display", "none");
      },
      show: function (a) {
        if (c.isLikeArray(a)) {
          var b, d;
          b = 0;
          for (d = a.length; b < d; b++) c.DOM._show(a[b]);
        } else c.DOM._show(a);
      },
      _show: function (a) {
        if (c.DOM.getStyle(a, "display") === "none") {
          var b = c.DOM.getData(a, "ccl-disp", "block");
          if (b === "none" || b === "") b = "block";
          c.DOM.setStyle(a, "display", b);
        }
      },
      width: function (a, b) {
        if (!c.isNothing(b)) c.isNumber(b) && (b += "px"), (a.style.width = b);
        return this._getDimension(a, "width");
      },
      outerWidth: function (a) {
        var b = c.DOM.width(a);
        b +=
          parseInt(c.DOM.getStyle(a, "padding-left"), 10) +
          parseInt(c.DOM.getStyle(a, "padding-right"), 10);
        b +=
          parseInt(c.DOM.getStyle(a, "margin-left"), 10) +
          parseInt(c.DOM.getStyle(a, "margin-right"), 10);
        b +=
          parseInt(c.DOM.getStyle(a, "border-left-width"), 10) +
          parseInt(c.DOM.getStyle(a, "border-right-width"), 10);
        return b;
      },
      height: function (a, b) {
        if (!c.isNothing(b)) c.isNumber(b) && (b += "px"), (a.style.height = b);
        return this._getDimension(a, "height");
      },
      _getDimension: function (a, b) {
        var d = e.parseInt(e.getComputedStyle(a, "").getPropertyValue(b)),
          f;
        if (isNaN(d))
          (f = { display: a.style.display, left: a.style.left }),
            (a.style.display = "block"),
            (a.style.left = "-1000000px"),
            (d = e.parseInt(e.getComputedStyle(a, "").getPropertyValue(b))),
            (a.style.display = f.display),
            (a.style.left = f.left);
        return d;
      },
      outerHeight: function (a) {
        var b = c.DOM.height(a);
        b +=
          parseInt(c.DOM.getStyle(a, "padding-top"), 10) +
          parseInt(c.DOM.getStyle(a, "padding-bottom"), 10);
        b +=
          parseInt(c.DOM.getStyle(a, "margin-top"), 10) +
          parseInt(c.DOM.getStyle(a, "margin-bottom"), 10);
        b +=
          parseInt(c.DOM.getStyle(a, "border-top-width"), 10) +
          parseInt(c.DOM.getStyle(a, "border-bottom-width"), 10);
        return b;
      },
      documentWidth: function () {
        return c.DOM.width(document.documentElement);
      },
      documentHeight: function () {
        return c.DOM.height(document.documentElement);
      },
      documentOuterWidth: function () {
        return c.DOM.width(document.documentElement);
      },
      documentOuterHeight: function () {
        return c.DOM.outerHeight(document.documentElement);
      },
      bodyWidth: function () {
        return c.DOM.width(document.body);
      },
      bodyHeight: function () {
        return c.DOM.height(document.body);
      },
      bodyOuterWidth: function () {
        return c.DOM.outerWidth(document.body);
      },
      bodyOuterHeight: function () {
        return c.DOM.outerHeight(document.body);
      },
      windowWidth: function () {
        return e.innerWidth;
      },
      windowHeight: function () {
        return e.innerHeight;
      },
      windowScrollLeft: function () {
        return e.pageXOffset;
      },
      windowScrollTop: function () {
        return e.pageYOffset;
      },
    },
  });
})(window, window.Code.Util);
(function (e, c) {
  c.extend(c, {
    Animation: {
      _applyTransitionDelay: 50,
      _transitionEndLabel:
        e.document.documentElement.style.webkitTransition !== void 0
          ? "webkitTransitionEnd"
          : "transitionend",
      _transitionEndHandler: null,
      _transitionPrefix:
        e.document.documentElement.style.webkitTransition !== void 0
          ? "webkitTransition"
          : e.document.documentElement.style.MozTransition !== void 0
          ? "MozTransition"
          : "transition",
      _transformLabel:
        e.document.documentElement.style.webkitTransform !== void 0
          ? "webkitTransform"
          : e.document.documentElement.style.MozTransition !== void 0
          ? "MozTransform"
          : "transform",
      _getTransitionEndHandler: function () {
        if (c.isNothing(this._transitionEndHandler))
          this._transitionEndHandler = this._onTransitionEnd.bind(this);
        return this._transitionEndHandler;
      },
      stop: function (a) {
        if (c.Browser.isCSSTransformSupported) {
          var b = {};
          c.Events.remove(
            a,
            this._transitionEndLabel,
            this._getTransitionEndHandler()
          );
          c.isNothing(a.callbackLabel) && delete a.callbackLabel;
          b[this._transitionPrefix + "Property"] = "";
          b[this._transitionPrefix + "Duration"] = "";
          b[this._transitionPrefix + "TimingFunction"] = "";
          b[this._transitionPrefix + "Delay"] = "";
          b[this._transformLabel] = "";
          c.DOM.setStyle(a, b);
        } else c.isNothing(e.jQuery) || e.jQuery(a).stop(!0, !0);
      },
      fadeIn: function (a, b, d, f, g) {
        g = c.coalesce(g, 1);
        g <= 0 && (g = 1);
        if (b <= 0 && (c.DOM.setStyle(a, "opacity", g), !c.isNothing(d))) {
          d(a);
          return;
        }
        c.DOM.getStyle(a, "opacity") >= 1 && c.DOM.setStyle(a, "opacity", 0);
        c.Browser.isCSSTransformSupported
          ? this._applyTransition(a, "opacity", g, b, d, f)
          : c.isNothing(e.jQuery) || e.jQuery(a).fadeTo(b, g, d);
      },
      fadeTo: function (a, b, d, f, c) {
        this.fadeIn(a, d, f, c, b);
      },
      fadeOut: function (a, b, d, f) {
        if (b <= 0 && (c.DOM.setStyle(a, "opacity", 0), !c.isNothing(d))) {
          d(a);
          return;
        }
        c.Browser.isCSSTransformSupported
          ? this._applyTransition(a, "opacity", 0, b, d, f)
          : e.jQuery(a).fadeTo(b, 0, d);
      },
      slideBy: function (a, b, d, f, g, h) {
        var j = {},
          b = c.coalesce(b, 0),
          d = c.coalesce(d, 0),
          h = c.coalesce(h, "ease-out");
        j[this._transitionPrefix + "Property"] = "all";
        j[this._transitionPrefix + "Delay"] = "0";
        f === 0
          ? ((j[this._transitionPrefix + "Duration"] = ""),
            (j[this._transitionPrefix + "TimingFunction"] = ""))
          : ((j[this._transitionPrefix + "Duration"] = f + "ms"),
            (j[this._transitionPrefix + "TimingFunction"] = c.coalesce(
              h,
              "ease-out"
            )),
            c.Events.add(
              a,
              this._transitionEndLabel,
              this._getTransitionEndHandler()
            ));
        j[this._transformLabel] = c.Browser.is3dSupported
          ? "translate3d(" + b + "px, " + d + "px, 0px)"
          : "translate(" + b + "px, " + d + "px)";
        if (!c.isNothing(g)) a.cclallcallback = g;
        c.DOM.setStyle(a, j);
        f === 0 &&
          e.setTimeout(
            function () {
              this._leaveTransforms(a);
            }.bind(this),
            this._applyTransitionDelay
          );
      },
      resetTranslate: function (a) {
        var b = {};
        b[this._transformLabel] = b[this._transformLabel] = c.Browser
          .is3dSupported
          ? "translate3d(0px, 0px, 0px)"
          : "translate(0px, 0px)";
        c.DOM.setStyle(a, b);
      },
      _applyTransition: function (a, b, d, f, g, h) {
        var j = {},
          h = c.coalesce(h, "ease-in");
        j[this._transitionPrefix + "Property"] = b;
        j[this._transitionPrefix + "Duration"] = f + "ms";
        j[this._transitionPrefix + "TimingFunction"] = h;
        j[this._transitionPrefix + "Delay"] = "0";
        c.Events.add(
          a,
          this._transitionEndLabel,
          this._getTransitionEndHandler()
        );
        c.DOM.setStyle(a, j);
        c.isNothing(g) || (a["ccl" + b + "callback"] = g);
        e.setTimeout(function () {
          c.DOM.setStyle(a, b, d);
        }, this._applyTransitionDelay);
      },
      _onTransitionEnd: function (a) {
        c.Events.remove(
          a.currentTarget,
          this._transitionEndLabel,
          this._getTransitionEndHandler()
        );
        this._leaveTransforms(a.currentTarget);
      },
      _leaveTransforms: function (a) {
        var b = a.style[this._transitionPrefix + "Property"],
          d = b !== "" ? "ccl" + b + "callback" : "cclallcallback",
          f,
          b = c.coalesce(
            a.style.webkitTransform,
            a.style.MozTransform,
            a.style.transform
          ),
          g,
          h = e.parseInt(c.DOM.getStyle(a, "left"), 0),
          j = e.parseInt(c.DOM.getStyle(a, "top"), 0),
          i,
          l,
          k = {};
        b !== "" &&
          ((b = c.Browser.is3dSupported
            ? b.match(/translate3d\((.*?)\)/)
            : b.match(/translate\((.*?)\)/)),
          c.isNothing(b) ||
            ((g = b[1].split(", ")),
            (i = e.parseInt(g[0], 0)),
            (l = e.parseInt(g[1], 0))));
        k[this._transitionPrefix + "Property"] = "";
        k[this._transitionPrefix + "Duration"] = "";
        k[this._transitionPrefix + "TimingFunction"] = "";
        k[this._transitionPrefix + "Delay"] = "";
        c.DOM.setStyle(a, k);
        e.setTimeout(
          function () {
            if (!c.isNothing(g))
              (k = {}),
                (k[this._transformLabel] = ""),
                (k.left = h + i + "px"),
                (k.top = j + l + "px"),
                c.DOM.setStyle(a, k);
            c.isNothing(a[d]) || ((f = a[d]), delete a[d], f(a));
          }.bind(this),
          this._applyTransitionDelay
        );
      },
    },
  });
})(window, window.Code.Util);
(function (e, c, a) {
  a.registerNamespace("Code.Util.TouchElement");
  a.TouchElement.EventTypes = { onTouch: "CodeUtilTouchElementOnTouch" };
  a.TouchElement.ActionTypes = {
    touchStart: "touchStart",
    touchMove: "touchMove",
    touchEnd: "touchEnd",
    touchMoveEnd: "touchMoveEnd",
    tap: "tap",
    doubleTap: "doubleTap",
    swipeLeft: "swipeLeft",
    swipeRight: "swipeRight",
    swipeUp: "swipeUp",
    swipeDown: "swipeDown",
    gestureStart: "gestureStart",
    gestureChange: "gestureChange",
    gestureEnd: "gestureEnd",
  };
})(window, window.klass, window.Code.Util);
(function (e, c, a) {
  a.registerNamespace("Code.Util.TouchElement");
  a.TouchElement.TouchElementClass = c({
    el: null,
    captureSettings: null,
    touchStartPoint: null,
    touchEndPoint: null,
    touchStartTime: null,
    doubleTapTimeout: null,
    touchStartHandler: null,
    touchMoveHandler: null,
    touchEndHandler: null,
    mouseDownHandler: null,
    mouseMoveHandler: null,
    mouseUpHandler: null,
    mouseOutHandler: null,
    gestureStartHandler: null,
    gestureChangeHandler: null,
    gestureEndHandler: null,
    swipeThreshold: null,
    swipeTimeThreshold: null,
    doubleTapSpeed: null,
    dispose: function () {
      var b;
      this.removeEventHandlers();
      for (b in this) a.objectHasProperty(this, b) && (this[b] = null);
    },
    initialize: function (b, d) {
      this.el = b;
      this.captureSettings = {
        swipe: !1,
        move: !1,
        gesture: !1,
        doubleTap: !1,
        preventDefaultTouchEvents: !0,
      };
      a.extend(this.captureSettings, d);
      this.swipeThreshold = 50;
      this.doubleTapSpeed = this.swipeTimeThreshold = 250;
      this.touchStartPoint = { x: 0, y: 0 };
      this.touchEndPoint = { x: 0, y: 0 };
    },
    addEventHandlers: function () {
      if (a.isNothing(this.touchStartHandler))
        (this.touchStartHandler = this.onTouchStart.bind(this)),
          (this.touchMoveHandler = this.onTouchMove.bind(this)),
          (this.touchEndHandler = this.onTouchEnd.bind(this)),
          (this.mouseDownHandler = this.onMouseDown.bind(this)),
          (this.mouseMoveHandler = this.onMouseMove.bind(this)),
          (this.mouseUpHandler = this.onMouseUp.bind(this)),
          (this.mouseOutHandler = this.onMouseOut.bind(this)),
          (this.gestureStartHandler = this.onGestureStart.bind(this)),
          (this.gestureChangeHandler = this.onGestureChange.bind(this)),
          (this.gestureEndHandler = this.onGestureEnd.bind(this));
      a.Events.add(this.el, "touchstart", this.touchStartHandler);
      this.captureSettings.move &&
        a.Events.add(this.el, "touchmove", this.touchMoveHandler);
      a.Events.add(this.el, "touchend", this.touchEndHandler);
      a.Events.add(this.el, "mousedown", this.mouseDownHandler);
      a.Browser.isGestureSupported &&
        this.captureSettings.gesture &&
        (a.Events.add(this.el, "gesturestart", this.gestureStartHandler),
        a.Events.add(this.el, "gesturechange", this.gestureChangeHandler),
        a.Events.add(this.el, "gestureend", this.gestureEndHandler));
    },
    removeEventHandlers: function () {
      a.Events.remove(this.el, "touchstart", this.touchStartHandler);
      this.captureSettings.move &&
        a.Events.remove(this.el, "touchmove", this.touchMoveHandler);
      a.Events.remove(this.el, "touchend", this.touchEndHandler);
      a.Events.remove(this.el, "mousedown", this.mouseDownHandler);
      a.Browser.isGestureSupported &&
        this.captureSettings.gesture &&
        (a.Events.remove(this.el, "gesturestart", this.gestureStartHandler),
        a.Events.remove(this.el, "gesturechange", this.gestureChangeHandler),
        a.Events.remove(this.el, "gestureend", this.gestureEndHandler));
    },
    getTouchPoint: function (a) {
      return { x: a[0].pageX, y: a[0].pageY };
    },
    fireTouchEvent: function (b) {
      var d = 0,
        f = 0,
        c = 0,
        h,
        d = this.touchEndPoint.x - this.touchStartPoint.x,
        f = this.touchEndPoint.y - this.touchStartPoint.y,
        c = Math.sqrt(d * d + f * f);
      if (
        this.captureSettings.swipe &&
        ((h = new Date()),
        (h -= this.touchStartTime),
        h <= this.swipeTimeThreshold)
      ) {
        if (e.Math.abs(d) >= this.swipeThreshold) {
          a.Events.fire(this, {
            type: a.TouchElement.EventTypes.onTouch,
            target: this,
            point: this.touchEndPoint,
            action:
              d < 0
                ? a.TouchElement.ActionTypes.swipeLeft
                : a.TouchElement.ActionTypes.swipeRight,
            targetEl: b.target,
            currentTargetEl: b.currentTarget,
          });
          return;
        }
        if (e.Math.abs(f) >= this.swipeThreshold) {
          a.Events.fire(this, {
            type: a.TouchElement.EventTypes.onTouch,
            target: this,
            point: this.touchEndPoint,
            action:
              f < 0
                ? a.TouchElement.ActionTypes.swipeUp
                : a.TouchElement.ActionTypes.swipeDown,
            targetEl: b.target,
            currentTargetEl: b.currentTarget,
          });
          return;
        }
      }
      c > 1
        ? a.Events.fire(this, {
            type: a.TouchElement.EventTypes.onTouch,
            target: this,
            action: a.TouchElement.ActionTypes.touchMoveEnd,
            point: this.touchEndPoint,
            targetEl: b.target,
            currentTargetEl: b.currentTarget,
          })
        : this.captureSettings.doubleTap
        ? a.isNothing(this.doubleTapTimeout)
          ? (this.doubleTapTimeout = e.setTimeout(
              function () {
                this.doubleTapTimeout = null;
                a.Events.fire(this, {
                  type: a.TouchElement.EventTypes.onTouch,
                  target: this,
                  point: this.touchEndPoint,
                  action: a.TouchElement.ActionTypes.tap,
                  targetEl: b.target,
                  currentTargetEl: b.currentTarget,
                });
              }.bind(this),
              this.doubleTapSpeed
            ))
          : (e.clearTimeout(this.doubleTapTimeout),
            (this.doubleTapTimeout = null),
            a.Events.fire(this, {
              type: a.TouchElement.EventTypes.onTouch,
              target: this,
              point: this.touchEndPoint,
              action: a.TouchElement.ActionTypes.doubleTap,
              targetEl: b.target,
              currentTargetEl: b.currentTarget,
            }))
        : a.Events.fire(this, {
            type: a.TouchElement.EventTypes.onTouch,
            target: this,
            point: this.touchEndPoint,
            action: a.TouchElement.ActionTypes.tap,
            targetEl: b.target,
            currentTargetEl: b.currentTarget,
          });
    },
    onTouchStart: function (b) {
      this.captureSettings.preventDefaultTouchEvents && b.preventDefault();
      a.Events.remove(this.el, "mousedown", this.mouseDownHandler);
      var d = a.Events.getTouchEvent(b).touches;
      d.length > 1 && this.captureSettings.gesture
        ? (this.isGesture = !0)
        : ((this.touchStartTime = new Date()),
          (this.isGesture = !1),
          (this.touchStartPoint = this.getTouchPoint(d)),
          a.Events.fire(this, {
            type: a.TouchElement.EventTypes.onTouch,
            target: this,
            action: a.TouchElement.ActionTypes.touchStart,
            point: this.touchStartPoint,
            targetEl: b.target,
            currentTargetEl: b.currentTarget,
          }));
    },
    onTouchMove: function (b) {
      this.captureSettings.preventDefaultTouchEvents && b.preventDefault();
      if (!this.isGesture || !this.captureSettings.gesture) {
        var d = a.Events.getTouchEvent(b).touches;
        a.Events.fire(this, {
          type: a.TouchElement.EventTypes.onTouch,
          target: this,
          action: a.TouchElement.ActionTypes.touchMove,
          point: this.getTouchPoint(d),
          targetEl: b.target,
          currentTargetEl: b.currentTarget,
        });
      }
    },
    onTouchEnd: function (b) {
      if (!this.isGesture || !this.captureSettings.gesture) {
        this.captureSettings.preventDefaultTouchEvents && b.preventDefault();
        var d = a.Events.getTouchEvent(b);
        this.touchEndPoint = this.getTouchPoint(
          !a.isNothing(d.changedTouches) ? d.changedTouches : d.touches
        );
        a.Events.fire(this, {
          type: a.TouchElement.EventTypes.onTouch,
          target: this,
          action: a.TouchElement.ActionTypes.touchEnd,
          point: this.touchEndPoint,
          targetEl: b.target,
          currentTargetEl: b.currentTarget,
        });
        this.fireTouchEvent(b);
      }
    },
    onMouseDown: function (b) {
      b.preventDefault();
      a.Events.remove(this.el, "touchstart", this.mouseDownHandler);
      a.Events.remove(this.el, "touchmove", this.touchMoveHandler);
      a.Events.remove(this.el, "touchend", this.touchEndHandler);
      this.captureSettings.move &&
        a.Events.add(this.el, "mousemove", this.mouseMoveHandler);
      a.Events.add(this.el, "mouseup", this.mouseUpHandler);
      a.Events.add(this.el, "mouseout", this.mouseOutHandler);
      this.touchStartTime = new Date();
      this.isGesture = !1;
      this.touchStartPoint = a.Events.getMousePosition(b);
      a.Events.fire(this, {
        type: a.TouchElement.EventTypes.onTouch,
        target: this,
        action: a.TouchElement.ActionTypes.touchStart,
        point: this.touchStartPoint,
        targetEl: b.target,
        currentTargetEl: b.currentTarget,
      });
    },
    onMouseMove: function (b) {
      b.preventDefault();
      a.Events.fire(this, {
        type: a.TouchElement.EventTypes.onTouch,
        target: this,
        action: a.TouchElement.ActionTypes.touchMove,
        point: a.Events.getMousePosition(b),
        targetEl: b.target,
        currentTargetEl: b.currentTarget,
      });
    },
    onMouseUp: function (b) {
      b.preventDefault();
      this.captureSettings.move &&
        a.Events.remove(this.el, "mousemove", this.mouseMoveHandler);
      a.Events.remove(this.el, "mouseup", this.mouseUpHandler);
      a.Events.remove(this.el, "mouseout", this.mouseOutHandler);
      this.touchEndPoint = a.Events.getMousePosition(b);
      a.Events.fire(this, {
        type: a.TouchElement.EventTypes.onTouch,
        target: this,
        action: a.TouchElement.ActionTypes.touchEnd,
        point: this.touchEndPoint,
        targetEl: b.target,
        currentTargetEl: b.currentTarget,
      });
      this.fireTouchEvent(b);
    },
    onMouseOut: function (b) {
      var d = b.relatedTarget;
      if (!(this.el === d || a.DOM.isChildOf(d, this.el)))
        b.preventDefault(),
          this.captureSettings.move &&
            a.Events.remove(this.el, "mousemove", this.mouseMoveHandler),
          a.Events.remove(this.el, "mouseup", this.mouseUpHandler),
          a.Events.remove(this.el, "mouseout", this.mouseOutHandler),
          (this.touchEndPoint = a.Events.getMousePosition(b)),
          a.Events.fire(this, {
            type: a.TouchElement.EventTypes.onTouch,
            target: this,
            action: a.TouchElement.ActionTypes.touchEnd,
            point: this.touchEndPoint,
            targetEl: b.target,
            currentTargetEl: b.currentTarget,
          }),
          this.fireTouchEvent(b);
    },
    onGestureStart: function (b) {
      b.preventDefault();
      var d = a.Events.getTouchEvent(b);
      a.Events.fire(this, {
        type: a.TouchElement.EventTypes.onTouch,
        target: this,
        action: a.TouchElement.ActionTypes.gestureStart,
        scale: d.scale,
        rotation: d.rotation,
        targetEl: b.target,
        currentTargetEl: b.currentTarget,
      });
    },
    onGestureChange: function (b) {
      b.preventDefault();
      var d = a.Events.getTouchEvent(b);
      a.Events.fire(this, {
        type: a.TouchElement.EventTypes.onTouch,
        target: this,
        action: a.TouchElement.ActionTypes.gestureChange,
        scale: d.scale,
        rotation: d.rotation,
        targetEl: b.target,
        currentTargetEl: b.currentTarget,
      });
    },
    onGestureEnd: function (b) {
      b.preventDefault();
      var d = a.Events.getTouchEvent(b);
      a.Events.fire(this, {
        type: a.TouchElement.EventTypes.onTouch,
        target: this,
        action: a.TouchElement.ActionTypes.gestureEnd,
        scale: d.scale,
        rotation: d.rotation,
        targetEl: b.target,
        currentTargetEl: b.currentTarget,
      });
    },
  });
})(window, window.klass, window.Code.Util);
(function (e, c, a) {
  a.registerNamespace("Code.PhotoSwipe.Image");
  e.Code.PhotoSwipe.Image.EventTypes = { onLoad: "onLoad", onError: "onError" };
})(window, window.klass, window.Code.Util);
(function (e, c, a) {
  a.registerNamespace("Code.PhotoSwipe.Image");
  var b = e.Code.PhotoSwipe;
  b.Image.ImageClass = c({
    refObj: null,
    imageEl: null,
    src: null,
    caption: null,
    metaData: null,
    imageLoadHandler: null,
    imageErrorHandler: null,
    dispose: function () {
      var d;
      this.shrinkImage();
      for (d in this) a.objectHasProperty(this, d) && (this[d] = null);
    },
    initialize: function (a, b, c, h) {
      this.refObj = a;
      this.src = this.originalSrc = b;
      this.caption = c;
      this.metaData = h;
      this.imageEl = new e.Image();
      this.imageLoadHandler = this.onImageLoad.bind(this);
      this.imageErrorHandler = this.onImageError.bind(this);
    },
    load: function () {
      this.imageEl.originalSrc = a.coalesce(this.imageEl.originalSrc, "");
      this.imageEl.originalSrc === this.src
        ? this.imageEl.isError
          ? a.Events.fire(this, {
              type: b.Image.EventTypes.onError,
              target: this,
            })
          : a.Events.fire(this, {
              type: b.Image.EventTypes.onLoad,
              target: this,
            })
        : ((this.imageEl.isError = !1),
          (this.imageEl.isLoading = !0),
          (this.imageEl.naturalWidth = null),
          (this.imageEl.naturalHeight = null),
          (this.imageEl.isLandscape = !1),
          (this.imageEl.onload = this.imageLoadHandler),
          (this.imageEl.onerror = this.imageErrorHandler),
          (this.imageEl.onabort = this.imageErrorHandler),
          (this.imageEl.originalSrc = this.src),
          (this.imageEl.src = this.src));
    },
    shrinkImage: function () {
      if (!a.isNothing(this.imageEl) && this.imageEl.src.indexOf(this.src) > -1)
        (this.imageEl.src =
          "data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="),
          a.isNothing(this.imageEl.parentNode) ||
            a.DOM.removeChild(this.imageEl, this.imageEl.parentNode);
    },
    onImageLoad: function () {
      this.imageEl.onload = null;
      this.imageEl.naturalWidth = a.coalesce(
        this.imageEl.naturalWidth,
        this.imageEl.width
      );
      this.imageEl.naturalHeight = a.coalesce(
        this.imageEl.naturalHeight,
        this.imageEl.height
      );
      this.imageEl.isLandscape =
        this.imageEl.naturalWidth > this.imageEl.naturalHeight;
      this.imageEl.isLoading = !1;
      a.Events.fire(this, { type: b.Image.EventTypes.onLoad, target: this });
    },
    onImageError: function () {
      this.imageEl.onload = null;
      this.imageEl.onerror = null;
      this.imageEl.onabort = null;
      this.imageEl.isLoading = !1;
      this.imageEl.isError = !0;
      a.Events.fire(this, { type: b.Image.EventTypes.onError, target: this });
    },
  });
})(window, window.klass, window.Code.Util);
(function (e, c, a) {
  a.registerNamespace("Code.PhotoSwipe.Cache");
  e = e.Code.PhotoSwipe;
  e.Cache.Mode = { normal: "normal", aggressive: "aggressive" };
  e.Cache.Functions = {
    getImageSource: function (a) {
      return a.href;
    },
    getImageCaption: function (b) {
      if (b.nodeName === "IMG") return a.DOM.getAttribute(b, "alt");
      var d, f, c;
      d = 0;
      for (f = b.childNodes.length; d < f; d++)
        if (((c = b.childNodes[d]), b.childNodes[d].nodeName === "IMG"))
          return a.DOM.getAttribute(c, "alt");
    },
    getImageMetaData: function () {
      return {};
    },
  };
})(window, window.klass, window.Code.Util);
(function (e, c, a) {
  a.registerNamespace("Code.PhotoSwipe.Cache");
  var b = e.Code.PhotoSwipe;
  b.Cache.CacheClass = c({
    images: null,
    settings: null,
    dispose: function () {
      var b, f, c;
      if (!a.isNothing(this.images)) {
        f = 0;
        for (c = this.images.length; f < c; f++) this.images[f].dispose();
        this.images.length = 0;
      }
      for (b in this) a.objectHasProperty(this, b) && (this[b] = null);
    },
    initialize: function (a, f) {
      var c, e, j, i, l, k;
      this.settings = f;
      this.images = [];
      c = 0;
      for (e = a.length; c < e; c++)
        (j = a[c]),
          (i = this.settings.getImageSource(j)),
          (l = this.settings.getImageCaption(j)),
          (k = this.settings.getImageMetaData(j)),
          this.images.push(new b.Image.ImageClass(j, i, l, k));
    },
    getImages: function (d) {
      var f,
        c,
        e = [],
        j;
      f = 0;
      for (c = d.length; f < c; f++) {
        j = this.images[d[f]];
        if (this.settings.cacheMode === b.Cache.Mode.aggressive)
          j.cacheDoNotShrink = !0;
        e.push(j);
      }
      if (this.settings.cacheMode === b.Cache.Mode.aggressive) {
        f = 0;
        for (c = this.images.length; f < c; f++)
          (j = this.images[f]),
            a.objectHasProperty(j, "cacheDoNotShrink")
              ? delete j.cacheDoNotShrink
              : j.shrinkImage();
      }
      return e;
    },
  });
})(window, window.klass, window.Code.Util, window.Code.PhotoSwipe.Image);
(function (e, c, a) {
  a.registerNamespace("Code.PhotoSwipe.DocumentOverlay");
  e.Code.PhotoSwipe.DocumentOverlay.CssClasses = {
    documentOverlay: "ps-document-overlay",
  };
})(window, window.klass, window.Code.Util);
(function (e, c, a) {
  a.registerNamespace("Code.PhotoSwipe.DocumentOverlay");
  var b = e.Code.PhotoSwipe;
  b.DocumentOverlay.DocumentOverlayClass = c({
    el: null,
    settings: null,
    initialBodyHeight: null,
    dispose: function () {
      var b;
      a.Animation.stop(this.el);
      a.DOM.removeChild(this.el, this.el.parentNode);
      for (b in this) a.objectHasProperty(this, b) && (this[b] = null);
    },
    initialize: function (d) {
      this.settings = d;
      this.el = a.DOM.createElement(
        "div",
        { class: b.DocumentOverlay.CssClasses.documentOverlay },
        ""
      );
      a.DOM.setStyle(this.el, {
        display: "block",
        position: "absolute",
        left: 0,
        top: 0,
        zIndex: this.settings.zIndex,
      });
      a.DOM.hide(this.el);
      this.settings.target === e
        ? a.DOM.appendToBody(this.el)
        : a.DOM.appendChild(this.el, this.settings.target);
      a.Animation.resetTranslate(this.el);
      this.initialBodyHeight = a.DOM.bodyOuterHeight();
    },
    resetPosition: function () {
      var b, f, c;
      if (this.settings.target === e) {
        b = a.DOM.windowWidth();
        f = a.DOM.bodyOuterHeight() * 2;
        c = this.settings.jQueryMobile ? a.DOM.windowScrollTop() + "px" : "0px";
        if (f < 1) f = this.initialBodyHeight;
        a.DOM.windowHeight() > f && (f = a.DOM.windowHeight());
      } else
        (b = a.DOM.width(this.settings.target)),
          (f = a.DOM.height(this.settings.target)),
          (c = "0px");
      a.DOM.setStyle(this.el, { width: b, height: f, top: c });
    },
    fadeIn: function (b, f) {
      this.resetPosition();
      a.DOM.setStyle(this.el, "opacity", 0);
      a.DOM.show(this.el);
      a.Animation.fadeIn(this.el, b, f);
    },
  });
})(window, window.klass, window.Code.Util);
(function (e, c, a) {
  a.registerNamespace("Code.PhotoSwipe.Carousel");
  e = e.Code.PhotoSwipe;
  e.Carousel.EventTypes = {
    onSlideByEnd: "PhotoSwipeCarouselOnSlideByEnd",
    onSlideshowStart: "PhotoSwipeCarouselOnSlideshowStart",
    onSlideshowStop: "PhotoSwipeCarouselOnSlideshowStop",
  };
  e.Carousel.CssClasses = {
    carousel: "ps-carousel",
    content: "ps-carousel-content",
    item: "ps-carousel-item",
    itemLoading: "ps-carousel-item-loading",
    itemError: "ps-carousel-item-error",
  };
  e.Carousel.SlideByAction = {
    previous: "previous",
    current: "current",
    next: "next",
  };
})(window, window.klass, window.Code.Util);
(function (e, c, a) {
  a.registerNamespace("Code.PhotoSwipe.Carousel");
  var b = e.Code.PhotoSwipe;
  b.Carousel.CarouselClass = c({
    el: null,
    contentEl: null,
    settings: null,
    cache: null,
    slideByEndHandler: null,
    currentCacheIndex: null,
    isSliding: null,
    isSlideshowActive: null,
    lastSlideByAction: null,
    touchStartPoint: null,
    touchStartPosition: null,
    imageLoadHandler: null,
    imageErrorHandler: null,
    slideshowTimeout: null,
    dispose: function () {
      var d, f, c;
      f = 0;
      for (c = this.cache.images.length; f < c; f++)
        a.Events.remove(
          this.cache.images[f],
          b.Image.EventTypes.onLoad,
          this.imageLoadHandler
        ),
          a.Events.remove(
            this.cache.images[f],
            b.Image.EventTypes.onError,
            this.imageErrorHandler
          );
      this.stopSlideshow();
      a.Animation.stop(this.el);
      a.DOM.removeChild(this.el, this.el.parentNode);
      for (d in this) a.objectHasProperty(this, d) && (this[d] = null);
    },
    initialize: function (d, f) {
      var c, h, j;
      this.cache = d;
      this.settings = f;
      this.slideByEndHandler = this.onSlideByEnd.bind(this);
      this.imageLoadHandler = this.onImageLoad.bind(this);
      this.imageErrorHandler = this.onImageError.bind(this);
      this.currentCacheIndex = 0;
      this.isSlideshowActive = this.isSliding = !1;
      if (this.cache.images.length < 3) this.settings.loop = !1;
      this.el = a.DOM.createElement(
        "div",
        { class: b.Carousel.CssClasses.carousel },
        ""
      );
      a.DOM.setStyle(this.el, {
        display: "block",
        position: "absolute",
        left: 0,
        top: 0,
        overflow: "hidden",
        zIndex: this.settings.zIndex,
      });
      a.DOM.hide(this.el);
      this.contentEl = a.DOM.createElement(
        "div",
        { class: b.Carousel.CssClasses.content },
        ""
      );
      a.DOM.setStyle(this.contentEl, {
        display: "block",
        position: "absolute",
        left: 0,
        top: 0,
      });
      a.DOM.appendChild(this.contentEl, this.el);
      h = d.images.length < 3 ? d.images.length : 3;
      for (c = 0; c < h; c++)
        (j = a.DOM.createElement(
          "div",
          {
            class:
              b.Carousel.CssClasses.item +
              " " +
              b.Carousel.CssClasses.item +
              "-" +
              c,
          },
          ""
        )),
          a.DOM.setAttribute(j, "style", "float: left;"),
          a.DOM.setStyle(j, {
            display: "block",
            position: "relative",
            left: 0,
            top: 0,
            overflow: "hidden",
          }),
          this.settings.margin > 0 &&
            a.DOM.setStyle(j, { marginRight: this.settings.margin + "px" }),
          a.DOM.appendChild(j, this.contentEl);
      this.settings.target === e
        ? a.DOM.appendToBody(this.el)
        : a.DOM.appendChild(this.el, this.settings.target);
    },
    resetPosition: function () {
      var d, f, c, h, j, i;
      this.settings.target === e
        ? ((d = a.DOM.windowWidth()),
          (f = a.DOM.windowHeight()),
          (c = a.DOM.windowScrollTop() + "px"))
        : ((d = a.DOM.width(this.settings.target)),
          (f = a.DOM.height(this.settings.target)),
          (c = "0px"));
      h = this.settings.margin > 0 ? d + this.settings.margin : d;
      j = a.DOM.find("." + b.Carousel.CssClasses.item, this.contentEl);
      h *= j.length;
      a.DOM.setStyle(this.el, { top: c, width: d, height: f });
      a.DOM.setStyle(this.contentEl, { width: h, height: f });
      c = 0;
      for (h = j.length; c < h; c++)
        (i = j[c]),
          a.DOM.setStyle(i, { width: d, height: f }),
          (i = a.DOM.find("img", i)[0]),
          a.isNothing(i) || this.resetImagePosition(i);
      this.setContentLeftPosition();
    },
    resetImagePosition: function (b) {
      if (!a.isNothing(b)) {
        a.DOM.getAttribute(b, "src");
        var c,
          e,
          h,
          j = a.DOM.width(this.el),
          i = a.DOM.height(this.el);
        this.settings.imageScaleMethod === "fitNoUpscale"
          ? ((e = b.naturalWidth),
            (h = b.naturalHeight),
            e > j &&
              ((c = j / e), (e = Math.round(e * c)), (h = Math.round(h * c))),
            h > i &&
              ((c = i / h), (h = Math.round(h * c)), (e = Math.round(e * c))))
          : ((c = b.isLandscape ? j / b.naturalWidth : i / b.naturalHeight),
            (e = Math.round(b.naturalWidth * c)),
            (h = Math.round(b.naturalHeight * c)),
            this.settings.imageScaleMethod === "zoom"
              ? ((c = 1),
                h < i ? (c = i / h) : e < j && (c = j / e),
                c !== 1 && ((e = Math.round(e * c)), (h = Math.round(h * c))))
              : this.settings.imageScaleMethod === "fit" &&
                ((c = 1),
                e > j ? (c = j / e) : h > i && (c = i / h),
                c !== 1 && ((e = Math.round(e * c)), (h = Math.round(h * c)))));
        a.DOM.setStyle(b, {
          position: "absolute",
          width: e,
          height: h,
          top: Math.round((i - h) / 2) + "px",
          left: Math.round((j - e) / 2) + "px",
          display: "block",
        });
      }
    },
    setContentLeftPosition: function () {
      var b, c, g;
      b =
        this.settings.target === e
          ? a.DOM.windowWidth()
          : a.DOM.width(this.settings.target);
      c = this.getItemEls();
      g = 0;
      this.settings.loop
        ? (g = (b + this.settings.margin) * -1)
        : this.currentCacheIndex === this.cache.images.length - 1
        ? (g = (c.length - 1) * (b + this.settings.margin) * -1)
        : this.currentCacheIndex > 0 && (g = (b + this.settings.margin) * -1);
      a.DOM.setStyle(this.contentEl, { left: g + "px" });
    },
    show: function (d) {
      this.currentCacheIndex = d;
      this.resetPosition();
      this.setImages(!1);
      a.DOM.show(this.el);
      a.Animation.resetTranslate(this.contentEl);
      var d = this.getItemEls(),
        c,
        e;
      c = 0;
      for (e = d.length; c < e; c++) a.Animation.resetTranslate(d[c]);
      a.Events.fire(this, {
        type: b.Carousel.EventTypes.onSlideByEnd,
        target: this,
        action: b.Carousel.SlideByAction.current,
        cacheIndex: this.currentCacheIndex,
      });
    },
    setImages: function (a) {
      var b,
        c = this.getItemEls();
      b = this.currentCacheIndex + 1;
      var e = this.currentCacheIndex - 1;
      this.settings.loop
        ? (b > this.cache.images.length - 1 && (b = 0),
          e < 0 && (e = this.cache.images.length - 1),
          (b = this.cache.getImages([e, this.currentCacheIndex, b])),
          a || this.addCacheImageToItemEl(b[1], c[1]),
          this.addCacheImageToItemEl(b[2], c[2]),
          this.addCacheImageToItemEl(b[0], c[0]))
        : c.length === 1
        ? a ||
          ((b = this.cache.getImages([this.currentCacheIndex])),
          this.addCacheImageToItemEl(b[0], c[0]))
        : c.length === 2
        ? this.currentCacheIndex === 0
          ? ((b = this.cache.getImages([
              this.currentCacheIndex,
              this.currentCacheIndex + 1,
            ])),
            a || this.addCacheImageToItemEl(b[0], c[0]),
            this.addCacheImageToItemEl(b[1], c[1]))
          : ((b = this.cache.getImages([
              this.currentCacheIndex - 1,
              this.currentCacheIndex,
            ])),
            a || this.addCacheImageToItemEl(b[1], c[1]),
            this.addCacheImageToItemEl(b[0], c[0]))
        : this.currentCacheIndex === 0
        ? ((b = this.cache.getImages([
            this.currentCacheIndex,
            this.currentCacheIndex + 1,
            this.currentCacheIndex + 2,
          ])),
          a || this.addCacheImageToItemEl(b[0], c[0]),
          this.addCacheImageToItemEl(b[1], c[1]),
          this.addCacheImageToItemEl(b[2], c[2]))
        : (this.currentCacheIndex === this.cache.images.length - 1
            ? ((b = this.cache.getImages([
                this.currentCacheIndex - 2,
                this.currentCacheIndex - 1,
                this.currentCacheIndex,
              ])),
              a || this.addCacheImageToItemEl(b[2], c[2]),
              this.addCacheImageToItemEl(b[1], c[1]))
            : ((b = this.cache.getImages([
                this.currentCacheIndex - 1,
                this.currentCacheIndex,
                this.currentCacheIndex + 1,
              ])),
              a || this.addCacheImageToItemEl(b[1], c[1]),
              this.addCacheImageToItemEl(b[2], c[2])),
          this.addCacheImageToItemEl(b[0], c[0]));
    },
    addCacheImageToItemEl: function (d, c) {
      a.DOM.removeClass(c, b.Carousel.CssClasses.itemError);
      a.DOM.addClass(c, b.Carousel.CssClasses.itemLoading);
      a.DOM.removeChildren(c);
      a.DOM.setStyle(d.imageEl, { display: "none" });
      a.DOM.appendChild(d.imageEl, c);
      a.Animation.resetTranslate(d.imageEl);
      a.Events.add(d, b.Image.EventTypes.onLoad, this.imageLoadHandler);
      a.Events.add(d, b.Image.EventTypes.onError, this.imageErrorHandler);
      d.load();
    },
    slideCarousel: function (d, c, g) {
      if (!this.isSliding) {
        var h, j;
        h =
          this.settings.target === e
            ? a.DOM.windowWidth() + this.settings.margin
            : a.DOM.width(this.settings.target) + this.settings.margin;
        g = a.coalesce(g, this.settings.slideSpeed);
        if (!(e.Math.abs(j) < 1)) {
          switch (c) {
            case a.TouchElement.ActionTypes.swipeLeft:
              d = h * -1;
              break;
            case a.TouchElement.ActionTypes.swipeRight:
              d = h;
              break;
            default:
              (j = d.x - this.touchStartPoint.x),
                (d = e.Math.abs(j) > h / 2 ? (j > 0 ? h : h * -1) : 0);
          }
          this.lastSlideByAction =
            d < 0
              ? b.Carousel.SlideByAction.next
              : d > 0
              ? b.Carousel.SlideByAction.previous
              : b.Carousel.SlideByAction.current;
          if (
            !this.settings.loop &&
            ((this.lastSlideByAction === b.Carousel.SlideByAction.previous &&
              this.currentCacheIndex === 0) ||
              (this.lastSlideByAction === b.Carousel.SlideByAction.next &&
                this.currentCacheIndex === this.cache.images.length - 1))
          )
            (d = 0),
              (this.lastSlideByAction = b.Carousel.SlideByAction.current);
          this.isSliding = !0;
          this.doSlideCarousel(d, g);
        }
      }
    },
    moveCarousel: function (a) {
      this.isSliding ||
        (this.settings.enableDrag &&
          this.doMoveCarousel(a.x - this.touchStartPoint.x));
    },
    getItemEls: function () {
      return a.DOM.find("." + b.Carousel.CssClasses.item, this.contentEl);
    },
    previous: function () {
      this.stopSlideshow();
      this.slideCarousel(
        { x: 0, y: 0 },
        a.TouchElement.ActionTypes.swipeRight,
        this.settings.nextPreviousSlideSpeed
      );
    },
    next: function () {
      this.stopSlideshow();
      this.slideCarousel(
        { x: 0, y: 0 },
        a.TouchElement.ActionTypes.swipeLeft,
        this.settings.nextPreviousSlideSpeed
      );
    },
    slideshowNext: function () {
      this.slideCarousel({ x: 0, y: 0 }, a.TouchElement.ActionTypes.swipeLeft);
    },
    startSlideshow: function () {
      this.stopSlideshow();
      this.isSlideshowActive = !0;
      this.slideshowTimeout = e.setTimeout(
        this.slideshowNext.bind(this),
        this.settings.slideshowDelay
      );
      a.Events.fire(this, {
        type: b.Carousel.EventTypes.onSlideshowStart,
        target: this,
      });
    },
    stopSlideshow: function () {
      if (!a.isNothing(this.slideshowTimeout))
        e.clearTimeout(this.slideshowTimeout),
          (this.slideshowTimeout = null),
          (this.isSlideshowActive = !1),
          a.Events.fire(this, {
            type: b.Carousel.EventTypes.onSlideshowStop,
            target: this,
          });
    },
    onSlideByEnd: function () {
      if (!a.isNothing(this.isSliding)) {
        var d = this.getItemEls();
        this.isSliding = !1;
        this.lastSlideByAction === b.Carousel.SlideByAction.next
          ? (this.currentCacheIndex += 1)
          : this.lastSlideByAction === b.Carousel.SlideByAction.previous &&
            (this.currentCacheIndex -= 1);
        if (this.settings.loop)
          if (
            (this.lastSlideByAction === b.Carousel.SlideByAction.next
              ? a.DOM.appendChild(d[0], this.contentEl)
              : this.lastSlideByAction === b.Carousel.SlideByAction.previous &&
                a.DOM.insertBefore(d[d.length - 1], d[0], this.contentEl),
            this.currentCacheIndex < 0)
          )
            this.currentCacheIndex = this.cache.images.length - 1;
          else {
            if (this.currentCacheIndex === this.cache.images.length)
              this.currentCacheIndex = 0;
          }
        else
          this.cache.images.length > 3 &&
            (this.currentCacheIndex > 1 &&
            this.currentCacheIndex < this.cache.images.length - 2
              ? this.lastSlideByAction === b.Carousel.SlideByAction.next
                ? a.DOM.appendChild(d[0], this.contentEl)
                : this.lastSlideByAction ===
                    b.Carousel.SlideByAction.previous &&
                  a.DOM.insertBefore(d[d.length - 1], d[0], this.contentEl)
              : this.currentCacheIndex === 1
              ? this.lastSlideByAction === b.Carousel.SlideByAction.previous &&
                a.DOM.insertBefore(d[d.length - 1], d[0], this.contentEl)
              : this.currentCacheIndex === this.cache.images.length - 2 &&
                this.lastSlideByAction === b.Carousel.SlideByAction.next &&
                a.DOM.appendChild(d[0], this.contentEl));
        this.lastSlideByAction !== b.Carousel.SlideByAction.current &&
          (this.setContentLeftPosition(), this.setImages(!0));
        a.Events.fire(this, {
          type: b.Carousel.EventTypes.onSlideByEnd,
          target: this,
          action: this.lastSlideByAction,
          cacheIndex: this.currentCacheIndex,
        });
        this.isSlideshowActive &&
          (this.lastSlideByAction !== b.Carousel.SlideByAction.current
            ? this.startSlideshow()
            : this.stopSlideshow());
      }
    },
    onTouch: function (b, c) {
      this.stopSlideshow();
      switch (b) {
        case a.TouchElement.ActionTypes.touchStart:
          this.touchStartPoint = c;
          this.touchStartPosition = {
            x: e.parseInt(a.DOM.getStyle(this.contentEl, "left"), 0),
            y: e.parseInt(a.DOM.getStyle(this.contentEl, "top"), 0),
          };
          break;
        case a.TouchElement.ActionTypes.touchMove:
          this.moveCarousel(c);
          break;
        case a.TouchElement.ActionTypes.touchMoveEnd:
        case a.TouchElement.ActionTypes.swipeLeft:
        case a.TouchElement.ActionTypes.swipeRight:
          this.slideCarousel(c, b);
      }
    },
    onImageLoad: function (d) {
      d = d.target;
      a.isNothing(d.imageEl.parentNode) ||
        (a.DOM.removeClass(
          d.imageEl.parentNode,
          b.Carousel.CssClasses.itemLoading
        ),
        this.resetImagePosition(d.imageEl));
      a.Events.remove(d, b.Image.EventTypes.onLoad, this.imageLoadHandler);
      a.Events.remove(d, b.Image.EventTypes.onError, this.imageErrorHandler);
    },
    onImageError: function (d) {
      d = d.target;
      a.isNothing(d.imageEl.parentNode) ||
        (a.DOM.removeClass(
          d.imageEl.parentNode,
          b.Carousel.CssClasses.itemLoading
        ),
        a.DOM.addClass(d.imageEl.parentNode, b.Carousel.CssClasses.itemError));
      a.Events.remove(d, b.Image.EventTypes.onLoad, this.imageLoadHandler);
      a.Events.remove(d, b.Image.EventTypes.onError, this.imageErrorHandler);
    },
  });
})(window, window.klass, window.Code.Util);
(function (e, c, a) {
  a.registerNamespace("Code.PhotoSwipe.Carousel");
  c = e.Code.PhotoSwipe;
  c.Carousel.CarouselClass = c.Carousel.CarouselClass.extend({
    getStartingPos: function () {
      var b = this.touchStartPosition;
      a.isNothing(b) &&
        (b = {
          x: e.parseInt(a.DOM.getStyle(this.contentEl, "left"), 0),
          y: e.parseInt(a.DOM.getStyle(this.contentEl, "top"), 0),
        });
      return b;
    },
    doMoveCarousel: function (b) {
      var d;
      a.Browser.isCSSTransformSupported
        ? ((d = {}),
          (d[a.Animation._transitionPrefix + "Property"] = "all"),
          (d[a.Animation._transitionPrefix + "Duration"] = ""),
          (d[a.Animation._transitionPrefix + "TimingFunction"] = ""),
          (d[a.Animation._transitionPrefix + "Delay"] = "0"),
          (d[a.Animation._transformLabel] = a.Browser.is3dSupported
            ? "translate3d(" + b + "px, 0px, 0px)"
            : "translate(" + b + "px, 0px)"),
          a.DOM.setStyle(this.contentEl, d))
        : a.isNothing(e.jQuery) ||
          e
            .jQuery(this.contentEl)
            .stop()
            .css("left", this.getStartingPos().x + b + "px");
    },
    doSlideCarousel: function (b, d) {
      var c;
      if (d <= 0) this.slideByEndHandler();
      else if (a.Browser.isCSSTransformSupported)
        (c = a.coalesce(
          this.contentEl.style.webkitTransform,
          this.contentEl.style.MozTransform,
          this.contentEl.style.transform,
          ""
        )),
          c.indexOf("translate3d(" + b) === 0
            ? this.slideByEndHandler()
            : c.indexOf("translate(" + b) === 0
            ? this.slideByEndHandler()
            : a.Animation.slideBy(
                this.contentEl,
                b,
                0,
                d,
                this.slideByEndHandler,
                this.settings.slideTimingFunction
              );
      else if (!a.isNothing(e.jQuery)) {
        c = { left: this.getStartingPos().x + b + "px" };
        if (this.settings.animationTimingFunction === "ease-out")
          this.settings.animationTimingFunction = "easeOutQuad";
        if (a.isNothing(e.jQuery.easing[this.settings.animationTimingFunction]))
          this.settings.animationTimingFunction = "linear";
        e.jQuery(this.contentEl).animate(
          c,
          this.settings.slideSpeed,
          this.settings.animationTimingFunction,
          this.slideByEndHandler
        );
      }
    },
  });
})(window, window.klass, window.Code.Util, window.Code.PhotoSwipe.TouchElement);
(function (e, c, a) {
  a.registerNamespace("Code.PhotoSwipe.Toolbar");
  var b = e.Code.PhotoSwipe;
  b.Toolbar.CssClasses = {
    toolbar: "ps-toolbar",
    toolbarContent: "ps-toolbar-content",
    toolbarTop: "ps-toolbar-top",
    caption: "ps-caption",
    captionBottom: "ps-caption-bottom",
    captionContent: "ps-caption-content",
    close: "ps-toolbar-close",
    play: "ps-toolbar-play",
    previous: "ps-toolbar-previous",
    previousDisabled: "ps-toolbar-previous-disabled",
    next: "ps-toolbar-next",
    nextDisabled: "ps-toolbar-next-disabled",
  };
  b.Toolbar.ToolbarAction = {
    close: "close",
    play: "play",
    next: "next",
    previous: "previous",
    none: "none",
  };
  b.Toolbar.EventTypes = {
    onTap: "PhotoSwipeToolbarOnClick",
    onBeforeShow: "PhotoSwipeToolbarOnBeforeShow",
    onShow: "PhotoSwipeToolbarOnShow",
    onBeforeHide: "PhotoSwipeToolbarOnBeforeHide",
    onHide: "PhotoSwipeToolbarOnHide",
  };
  b.Toolbar.getToolbar = function () {
    return (
      '<div class="' +
      b.Toolbar.CssClasses.close +
      '"><div class="' +
      b.Toolbar.CssClasses.toolbarContent +
      '"></div></div><div class="' +
      b.Toolbar.CssClasses.play +
      '"><div class="' +
      b.Toolbar.CssClasses.toolbarContent +
      '"></div></div><div class="' +
      b.Toolbar.CssClasses.previous +
      '"><div class="' +
      b.Toolbar.CssClasses.toolbarContent +
      '"></div></div><div class="' +
      b.Toolbar.CssClasses.next +
      '"><div class="' +
      b.Toolbar.CssClasses.toolbarContent +
      '"></div></div>'
    );
  };
})(window, window.klass, window.Code.Util);
(function (e, c, a) {
  a.registerNamespace("Code.PhotoSwipe.Toolbar");
  var b = e.Code.PhotoSwipe;
  b.Toolbar.ToolbarClass = c({
    toolbarEl: null,
    closeEl: null,
    playEl: null,
    previousEl: null,
    nextEl: null,
    captionEl: null,
    captionContentEl: null,
    currentCaption: null,
    settings: null,
    cache: null,
    timeout: null,
    isVisible: null,
    fadeOutHandler: null,
    touchStartHandler: null,
    touchMoveHandler: null,
    clickHandler: null,
    dispose: function () {
      var b;
      this.clearTimeout();
      this.removeEventHandlers();
      a.Animation.stop(this.toolbarEl);
      a.Animation.stop(this.captionEl);
      a.DOM.removeChild(this.toolbarEl, this.toolbarEl.parentNode);
      a.DOM.removeChild(this.captionEl, this.captionEl.parentNode);
      for (b in this) a.objectHasProperty(this, b) && (this[b] = null);
    },
    initialize: function (d, c) {
      var g;
      this.settings = c;
      this.cache = d;
      this.isVisible = !1;
      this.fadeOutHandler = this.onFadeOut.bind(this);
      this.touchStartHandler = this.onTouchStart.bind(this);
      this.touchMoveHandler = this.onTouchMove.bind(this);
      this.clickHandler = this.onClick.bind(this);
      g = b.Toolbar.CssClasses.toolbar;
      this.settings.captionAndToolbarFlipPosition &&
        (g = g + " " + b.Toolbar.CssClasses.toolbarTop);
      this.toolbarEl = a.DOM.createElement(
        "div",
        { class: g },
        this.settings.getToolbar()
      );
      a.DOM.setStyle(this.toolbarEl, {
        left: 0,
        position: "absolute",
        overflow: "hidden",
        zIndex: this.settings.zIndex,
      });
      this.settings.target === e
        ? a.DOM.appendToBody(this.toolbarEl)
        : a.DOM.appendChild(this.toolbarEl, this.settings.target);
      a.DOM.hide(this.toolbarEl);
      this.closeEl = a.DOM.find(
        "." + b.Toolbar.CssClasses.close,
        this.toolbarEl
      )[0];
      this.settings.preventHide &&
        !a.isNothing(this.closeEl) &&
        a.DOM.hide(this.closeEl);
      this.playEl = a.DOM.find(
        "." + b.Toolbar.CssClasses.play,
        this.toolbarEl
      )[0];
      this.settings.preventSlideshow &&
        !a.isNothing(this.playEl) &&
        a.DOM.hide(this.playEl);
      this.nextEl = a.DOM.find(
        "." + b.Toolbar.CssClasses.next,
        this.toolbarEl
      )[0];
      this.previousEl = a.DOM.find(
        "." + b.Toolbar.CssClasses.previous,
        this.toolbarEl
      )[0];
      g = b.Toolbar.CssClasses.caption;
      this.settings.captionAndToolbarFlipPosition &&
        (g = g + " " + b.Toolbar.CssClasses.captionBottom);
      this.captionEl = a.DOM.createElement("div", { class: g }, "");
      a.DOM.setStyle(this.captionEl, {
        left: 0,
        position: "absolute",
        overflow: "hidden",
        zIndex: this.settings.zIndex,
      });
      this.settings.target === e
        ? a.DOM.appendToBody(this.captionEl)
        : a.DOM.appendChild(this.captionEl, this.settings.target);
      a.DOM.hide(this.captionEl);
      this.captionContentEl = a.DOM.createElement(
        "div",
        { class: b.Toolbar.CssClasses.captionContent },
        ""
      );
      a.DOM.appendChild(this.captionContentEl, this.captionEl);
      this.addEventHandlers();
    },
    resetPosition: function () {
      var b, c, g;
      this.settings.target === e
        ? (this.settings.captionAndToolbarFlipPosition
            ? ((c = a.DOM.windowScrollTop()),
              (g =
                a.DOM.windowScrollTop() +
                a.DOM.windowHeight() -
                a.DOM.height(this.captionEl)))
            : ((c =
                a.DOM.windowScrollTop() +
                a.DOM.windowHeight() -
                a.DOM.height(this.toolbarEl)),
              (g = a.DOM.windowScrollTop())),
          (b = a.DOM.windowWidth()))
        : (this.settings.captionAndToolbarFlipPosition
            ? ((c = "0"),
              (g =
                a.DOM.height(this.settings.target) -
                a.DOM.height(this.captionEl)))
            : ((c =
                a.DOM.height(this.settings.target) -
                a.DOM.height(this.toolbarEl)),
              (g = 0)),
          (b = a.DOM.width(this.settings.target)));
      a.DOM.setStyle(this.toolbarEl, { top: c + "px", width: b });
      a.DOM.setStyle(this.captionEl, { top: g + "px", width: b });
    },
    toggleVisibility: function (a) {
      this.isVisible ? this.fadeOut() : this.show(a);
    },
    show: function (d) {
      a.Animation.stop(this.toolbarEl);
      a.Animation.stop(this.captionEl);
      this.resetPosition();
      this.setToolbarStatus(d);
      a.Events.fire(this, {
        type: b.Toolbar.EventTypes.onBeforeShow,
        target: this,
      });
      this.showToolbar();
      this.setCaption(d);
      this.showCaption();
      this.isVisible = !0;
      this.setTimeout();
      a.Events.fire(this, { type: b.Toolbar.EventTypes.onShow, target: this });
    },
    setTimeout: function () {
      if (this.settings.captionAndToolbarAutoHideDelay > 0)
        this.clearTimeout(),
          (this.timeout = e.setTimeout(
            this.fadeOut.bind(this),
            this.settings.captionAndToolbarAutoHideDelay
          ));
    },
    clearTimeout: function () {
      if (!a.isNothing(this.timeout))
        e.clearTimeout(this.timeout), (this.timeout = null);
    },
    fadeOut: function () {
      this.clearTimeout();
      a.Events.fire(this, {
        type: b.Toolbar.EventTypes.onBeforeHide,
        target: this,
      });
      a.Animation.fadeOut(this.toolbarEl, this.settings.fadeOutSpeed);
      a.Animation.fadeOut(
        this.captionEl,
        this.settings.fadeOutSpeed,
        this.fadeOutHandler
      );
      this.isVisible = !1;
    },
    addEventHandlers: function () {
      a.Browser.isTouchSupported &&
        (a.Browser.blackberry ||
          a.Events.add(this.toolbarEl, "touchstart", this.touchStartHandler),
        a.Events.add(this.toolbarEl, "touchmove", this.touchMoveHandler),
        a.Events.add(this.captionEl, "touchmove", this.touchMoveHandler));
      a.Events.add(this.toolbarEl, "click", this.clickHandler);
    },
    removeEventHandlers: function () {
      a.Browser.isTouchSupported &&
        (a.Browser.blackberry ||
          a.Events.remove(this.toolbarEl, "touchstart", this.touchStartHandler),
        a.Events.remove(this.toolbarEl, "touchmove", this.touchMoveHandler),
        a.Events.remove(this.captionEl, "touchmove", this.touchMoveHandler));
      a.Events.remove(this.toolbarEl, "click", this.clickHandler);
    },
    handleTap: function (d) {
      this.clearTimeout();
      var c;
      if (d.target === this.nextEl || a.DOM.isChildOf(d.target, this.nextEl))
        c = b.Toolbar.ToolbarAction.next;
      else if (
        d.target === this.previousEl ||
        a.DOM.isChildOf(d.target, this.previousEl)
      )
        c = b.Toolbar.ToolbarAction.previous;
      else if (
        d.target === this.closeEl ||
        a.DOM.isChildOf(d.target, this.closeEl)
      )
        c = b.Toolbar.ToolbarAction.close;
      else if (
        d.target === this.playEl ||
        a.DOM.isChildOf(d.target, this.playEl)
      )
        c = b.Toolbar.ToolbarAction.play;
      this.setTimeout();
      if (a.isNothing(c)) c = b.Toolbar.ToolbarAction.none;
      a.Events.fire(this, {
        type: b.Toolbar.EventTypes.onTap,
        target: this,
        action: c,
        tapTarget: d.target,
      });
    },
    setCaption: function (b) {
      a.DOM.removeChildren(this.captionContentEl);
      this.currentCaption = a.coalesce(this.cache.images[b].caption, "\u00a0");
      if (a.isObject(this.currentCaption))
        a.DOM.appendChild(this.currentCaption, this.captionContentEl);
      else {
        if (this.currentCaption === "") this.currentCaption = "\u00a0";
        a.DOM.appendText(this.currentCaption, this.captionContentEl);
      }
      this.currentCaption =
        this.currentCaption === "\u00a0" ? "" : this.currentCaption;
      this.resetPosition();
    },
    showToolbar: function () {
      a.DOM.setStyle(this.toolbarEl, {
        opacity: this.settings.captionAndToolbarOpacity,
      });
      a.DOM.show(this.toolbarEl);
    },
    showCaption: function () {
      (this.currentCaption === "" ||
        this.captionContentEl.childNodes.length < 1) &&
      !this.settings.captionAndToolbarShowEmptyCaptions
        ? a.DOM.hide(this.captionEl)
        : (a.DOM.setStyle(this.captionEl, {
            opacity: this.settings.captionAndToolbarOpacity,
          }),
          a.DOM.show(this.captionEl));
    },
    setToolbarStatus: function (d) {
      this.settings.loop ||
        (a.DOM.removeClass(
          this.previousEl,
          b.Toolbar.CssClasses.previousDisabled
        ),
        a.DOM.removeClass(this.nextEl, b.Toolbar.CssClasses.nextDisabled),
        (d > 0 && d < this.cache.images.length - 1) ||
          (d === 0 &&
            (a.isNothing(this.previousEl) ||
              a.DOM.addClass(
                this.previousEl,
                b.Toolbar.CssClasses.previousDisabled
              )),
          d === this.cache.images.length - 1 &&
            (a.isNothing(this.nextEl) ||
              a.DOM.addClass(this.nextEl, b.Toolbar.CssClasses.nextDisabled))));
    },
    onFadeOut: function () {
      a.DOM.hide(this.toolbarEl);
      a.DOM.hide(this.captionEl);
      a.Events.fire(this, { type: b.Toolbar.EventTypes.onHide, target: this });
    },
    onTouchStart: function (b) {
      b.preventDefault();
      a.Events.remove(this.toolbarEl, "click", this.clickHandler);
      this.handleTap(b);
    },
    onTouchMove: function (a) {
      a.preventDefault();
    },
    onClick: function (a) {
      a.preventDefault();
      this.handleTap(a);
    },
  });
})(window, window.klass, window.Code.Util);
(function (e, c, a) {
  a.registerNamespace("Code.PhotoSwipe.UILayer");
  e.Code.PhotoSwipe.UILayer.CssClasses = { uiLayer: "ps-uilayer" };
})(window, window.klass, window.Code.Util);
(function (e, c, a) {
  a.registerNamespace("Code.PhotoSwipe.UILayer");
  var b = e.Code.PhotoSwipe;
  b.UILayer.UILayerClass = a.TouchElement.TouchElementClass.extend({
    el: null,
    settings: null,
    dispose: function () {
      var b;
      this.removeEventHandlers();
      a.DOM.removeChild(this.el, this.el.parentNode);
      for (b in this) a.objectHasProperty(this, b) && (this[b] = null);
    },
    initialize: function (d) {
      this.settings = d;
      this.el = a.DOM.createElement(
        "div",
        { class: b.UILayer.CssClasses.uiLayer },
        ""
      );
      a.DOM.setStyle(this.el, {
        display: "block",
        position: "absolute",
        left: 0,
        top: 0,
        overflow: "hidden",
        zIndex: this.settings.zIndex,
        opacity: 0,
      });
      a.DOM.hide(this.el);
      this.settings.target === e
        ? a.DOM.appendToBody(this.el)
        : a.DOM.appendChild(this.el, this.settings.target);
      this.supr(this.el, {
        swipe: !0,
        move: !0,
        gesture: a.Browser.iOS,
        doubleTap: !0,
        preventDefaultTouchEvents: this.settings.preventDefaultTouchEvents,
      });
    },
    resetPosition: function () {
      this.settings.target === e
        ? a.DOM.setStyle(this.el, {
            top: a.DOM.windowScrollTop() + "px",
            width: a.DOM.windowWidth(),
            height: a.DOM.windowHeight(),
          })
        : a.DOM.setStyle(this.el, {
            top: "0px",
            width: a.DOM.width(this.settings.target),
            height: a.DOM.height(this.settings.target),
          });
    },
    show: function () {
      this.resetPosition();
      a.DOM.show(this.el);
      this.addEventHandlers();
    },
    addEventHandlers: function () {
      this.supr();
    },
    removeEventHandlers: function () {
      this.supr();
    },
  });
})(window, window.klass, window.Code.Util);
(function (e, c, a) {
  a.registerNamespace("Code.PhotoSwipe.ZoomPanRotate");
  e = e.Code.PhotoSwipe;
  e.ZoomPanRotate.CssClasses = { zoomPanRotate: "ps-zoom-pan-rotate" };
  e.ZoomPanRotate.EventTypes = {
    onTransform: "PhotoSwipeZoomPanRotateOnTransform",
  };
})(window, window.klass, window.Code.Util);
(function (e, c, a) {
  a.registerNamespace("Code.PhotoSwipe.ZoomPanRotate");
  var b = e.Code.PhotoSwipe;
  b.ZoomPanRotate.ZoomPanRotateClass = c({
    el: null,
    settings: null,
    containerEl: null,
    imageEl: null,
    transformSettings: null,
    panStartingPoint: null,
    transformEl: null,
    dispose: function () {
      var b;
      a.DOM.removeChild(this.el, this.el.parentNode);
      for (b in this) a.objectHasProperty(this, b) && (this[b] = null);
    },
    initialize: function (c, f, g) {
      var h, j, i;
      this.settings = c;
      this.settings.target === e
        ? ((c = document.body),
          (h = a.DOM.windowWidth()),
          (j = a.DOM.windowHeight()),
          (i = a.DOM.windowScrollTop() + "px"))
        : ((c = this.settings.target),
          (h = a.DOM.width(c)),
          (j = a.DOM.height(c)),
          (i = "0px"));
      this.imageEl = f.imageEl.cloneNode(!1);
      a.DOM.setStyle(this.imageEl, { zIndex: 1 });
      this.transformSettings = {
        startingScale: 1,
        scale: 1,
        startingRotation: 0,
        rotation: 0,
        startingTranslateX: 0,
        startingTranslateY: 0,
        translateX: 0,
        translateY: 0,
      };
      this.el = a.DOM.createElement(
        "div",
        { class: b.ZoomPanRotate.CssClasses.zoomPanRotate },
        ""
      );
      a.DOM.setStyle(this.el, {
        left: 0,
        top: i,
        position: "absolute",
        width: h,
        height: j,
        zIndex: this.settings.zIndex,
        display: "block",
      });
      a.DOM.insertBefore(this.el, g.el, c);
      a.Browser.iOS
        ? ((this.containerEl = a.DOM.createElement("div", "", "")),
          a.DOM.setStyle(this.containerEl, {
            left: 0,
            top: 0,
            width: h,
            height: j,
            position: "absolute",
            zIndex: 1,
          }),
          a.DOM.appendChild(this.imageEl, this.containerEl),
          a.DOM.appendChild(this.containerEl, this.el),
          a.Animation.resetTranslate(this.containerEl),
          a.Animation.resetTranslate(this.imageEl),
          (this.transformEl = this.containerEl))
        : (a.DOM.appendChild(this.imageEl, this.el),
          (this.transformEl = this.imageEl));
    },
    setStartingTranslateFromCurrentTransform: function () {
      var b = a.coalesce(
        this.transformEl.style.webkitTransform,
        this.transformEl.style.MozTransform,
        this.transformEl.style.transform
      );
      if (
        !a.isNothing(b) &&
        ((b = b.match(/translate\((.*?)\)/)), !a.isNothing(b))
      )
        (b = b[1].split(", ")),
          (this.transformSettings.startingTranslateX = e.parseInt(b[0], 10)),
          (this.transformSettings.startingTranslateY = e.parseInt(b[1], 10));
    },
    getScale: function (a) {
      a *= this.transformSettings.startingScale;
      if (this.settings.minUserZoom !== 0 && a < this.settings.minUserZoom)
        a = this.settings.minUserZoom;
      else if (this.settings.maxUserZoom !== 0 && a > this.settings.maxUserZoom)
        a = this.settings.maxUserZoom;
      return a;
    },
    setStartingScaleAndRotation: function (a, b) {
      this.transformSettings.startingScale = this.getScale(a);
      this.transformSettings.startingRotation =
        (this.transformSettings.startingRotation + b) % 360;
    },
    zoomRotate: function (a, b) {
      this.transformSettings.scale = this.getScale(a);
      this.transformSettings.rotation =
        this.transformSettings.startingRotation + b;
      this.applyTransform();
    },
    panStart: function (a) {
      this.setStartingTranslateFromCurrentTransform();
      this.panStartingPoint = { x: a.x, y: a.y };
    },
    pan: function (a) {
      var b = (a.y - this.panStartingPoint.y) / this.transformSettings.scale;
      this.transformSettings.translateX =
        this.transformSettings.startingTranslateX +
        (a.x - this.panStartingPoint.x) / this.transformSettings.scale;
      this.transformSettings.translateY =
        this.transformSettings.startingTranslateY + b;
      this.applyTransform();
    },
    zoomAndPanToPoint: function (b, c) {
      if (this.settings.target === e) {
        this.panStart({
          x: a.DOM.windowWidth() / 2,
          y: a.DOM.windowHeight() / 2,
        });
        var g = (c.y - this.panStartingPoint.y) / this.transformSettings.scale;
        this.transformSettings.translateX =
          (this.transformSettings.startingTranslateX +
            (c.x - this.panStartingPoint.x) / this.transformSettings.scale) *
          -1;
        this.transformSettings.translateY =
          (this.transformSettings.startingTranslateY + g) * -1;
      }
      this.setStartingScaleAndRotation(b, 0);
      this.transformSettings.scale = this.transformSettings.startingScale;
      this.transformSettings.rotation = 0;
      this.applyTransform();
    },
    applyTransform: function () {
      var c = this.transformSettings.rotation % 360,
        f = e.parseInt(this.transformSettings.translateX, 10),
        g = e.parseInt(this.transformSettings.translateY, 10),
        h =
          "scale(" +
          this.transformSettings.scale +
          ") rotate(" +
          c +
          "deg) translate(" +
          f +
          "px, " +
          g +
          "px)";
      a.DOM.setStyle(this.transformEl, {
        webkitTransform: h,
        MozTransform: h,
        msTransform: h,
        transform: h,
      });
      a.Events.fire(this, {
        target: this,
        type: b.ZoomPanRotate.EventTypes.onTransform,
        scale: this.transformSettings.scale,
        rotation: this.transformSettings.rotation,
        rotationDegs: c,
        translateX: f,
        translateY: g,
      });
    },
  });
})(window, window.klass, window.Code.Util);
(function (e, c) {
  c.registerNamespace("Code.PhotoSwipe");
  var a = e.Code.PhotoSwipe;
  a.CssClasses = { buildingBody: "ps-building", activeBody: "ps-active" };
  a.EventTypes = {
    onBeforeShow: "PhotoSwipeOnBeforeShow",
    onShow: "PhotoSwipeOnShow",
    onBeforeHide: "PhotoSwipeOnBeforeHide",
    onHide: "PhotoSwipeOnHide",
    onDisplayImage: "PhotoSwipeOnDisplayImage",
    onResetPosition: "PhotoSwipeOnResetPosition",
    onSlideshowStart: "PhotoSwipeOnSlideshowStart",
    onSlideshowStop: "PhotoSwipeOnSlideshowStop",
    onTouch: "PhotoSwipeOnTouch",
    onBeforeCaptionAndToolbarShow: "PhotoSwipeOnBeforeCaptionAndToolbarShow",
    onCaptionAndToolbarShow: "PhotoSwipeOnCaptionAndToolbarShow",
    onBeforeCaptionAndToolbarHide: "PhotoSwipeOnBeforeCaptionAndToolbarHide",
    onCaptionAndToolbarHide: "PhotoSwipeOnCaptionAndToolbarHide",
    onToolbarTap: "PhotoSwipeOnToolbarTap",
    onBeforeZoomPanRotateShow: "PhotoSwipeOnBeforeZoomPanRotateShow",
    onZoomPanRotateShow: "PhotoSwipeOnZoomPanRotateShow",
    onBeforeZoomPanRotateHide: "PhotoSwipeOnBeforeZoomPanRotateHide",
    onZoomPanRotateHide: "PhotoSwipeOnZoomPanRotateHide",
    onZoomPanRotateTransform: "PhotoSwipeOnZoomPanRotateTransform",
  };
  a.instances = [];
  a.activeInstances = [];
  a.setActivateInstance = function (b) {
    if (c.arrayIndexOf(b.settings.target, a.activeInstances, "target") > -1)
      throw "Code.PhotoSwipe.activateInstance: Unable to active instance as another instance is already active for this target";
    a.activeInstances.push({ target: b.settings.target, instance: b });
  };
  a.unsetActivateInstance = function (b) {
    b = c.arrayIndexOf(b, a.activeInstances, "instance");
    a.activeInstances.splice(b, 1);
  };
  a.attach = function (b, d, e) {
    var g, h;
    g = a.createInstance(b, d, e);
    d = 0;
    for (e = b.length; d < e; d++)
      if (((h = b[d]), !c.isNothing(h.nodeType) && h.nodeType === 1))
        (h.__photoSwipeClickHandler = a.onTriggerElementClick.bind(g)),
          c.Events.remove(h, "click", h.__photoSwipeClickHandler),
          c.Events.add(h, "click", h.__photoSwipeClickHandler);
    return g;
  };
  if (e.jQuery)
    e.jQuery.fn.photoSwipe = function (b, c) {
      return a.attach(this, b, c);
    };
  a.detatch = function (b) {
    var d, e, g;
    d = 0;
    for (e = b.originalImages.length; d < e; d++)
      (g = b.originalImages[d]),
        !c.isNothing(g.nodeType) &&
          g.nodeType === 1 &&
          (c.Events.remove(g, "click", g.__photoSwipeClickHandler),
          delete g.__photoSwipeClickHandler);
    a.disposeInstance(b);
  };
  a.createInstance = function (b, d, e) {
    var g;
    if (c.isNothing(b)) throw "Code.PhotoSwipe.attach: No images passed.";
    if (!c.isLikeArray(b))
      throw "Code.PhotoSwipe.createInstance: Images must be an array of elements or image urls.";
    if (b.length < 1)
      throw "Code.PhotoSwipe.createInstance: No images to passed.";
    d = c.coalesce(d, {});
    g = a.getInstance(e);
    if (c.isNothing(g))
      (g = new a.PhotoSwipeClass(b, d, e)), a.instances.push(g);
    else
      throw (
        'Code.PhotoSwipe.createInstance: Instance with id "' +
        e +
        ' already exists."'
      );
    return g;
  };
  a.disposeInstance = function (b) {
    var c = a.getInstanceIndex(b);
    if (c < 0)
      throw "Code.PhotoSwipe.disposeInstance: Unable to find instance to dispose.";
    b.dispose();
    a.instances.splice(c, 1);
  };
  a.onTriggerElementClick = function (a) {
    a.preventDefault();
    this.show(a.currentTarget);
  };
  a.getInstance = function (b) {
    var c, e, g;
    c = 0;
    for (e = a.instances.length; c < e; c++)
      if (((g = a.instances[c]), g.id === b)) return g;
    return null;
  };
  a.getInstanceIndex = function (b) {
    var c,
      e,
      g = -1;
    c = 0;
    for (e = a.instances.length; c < e; c++)
      if (a.instances[c] === b) {
        g = c;
        break;
      }
    return g;
  };
})(window, window.Code.Util);
(function (e, c, a, b, d, f, g, h, j) {
  a.registerNamespace("Code.PhotoSwipe");
  var i = e.Code.PhotoSwipe;
  i.PhotoSwipeClass = c({
    id: null,
    settings: null,
    isBackEventSupported: null,
    backButtonClicked: null,
    currentIndex: null,
    originalImages: null,
    mouseWheelStartTime: null,
    windowDimensions: null,
    cache: null,
    documentOverlay: null,
    carousel: null,
    uiLayer: null,
    toolbar: null,
    zoomPanRotate: null,
    windowOrientationChangeHandler: null,
    windowScrollHandler: null,
    windowHashChangeHandler: null,
    keyDownHandler: null,
    windowOrientationEventName: null,
    uiLayerTouchHandler: null,
    carouselSlideByEndHandler: null,
    carouselSlideshowStartHandler: null,
    carouselSlideshowStopHandler: null,
    toolbarTapHandler: null,
    toolbarBeforeShowHandler: null,
    toolbarShowHandler: null,
    toolbarBeforeHideHandler: null,
    toolbarHideHandler: null,
    mouseWheelHandler: null,
    zoomPanRotateTransformHandler: null,
    _isResettingPosition: null,
    _uiWebViewResetPositionTimeout: null,
    dispose: function () {
      var b;
      a.Events.remove(this, i.EventTypes.onBeforeShow);
      a.Events.remove(this, i.EventTypes.onShow);
      a.Events.remove(this, i.EventTypes.onBeforeHide);
      a.Events.remove(this, i.EventTypes.onHide);
      a.Events.remove(this, i.EventTypes.onDisplayImage);
      a.Events.remove(this, i.EventTypes.onResetPosition);
      a.Events.remove(this, i.EventTypes.onSlideshowStart);
      a.Events.remove(this, i.EventTypes.onSlideshowStop);
      a.Events.remove(this, i.EventTypes.onTouch);
      a.Events.remove(this, i.EventTypes.onBeforeCaptionAndToolbarShow);
      a.Events.remove(this, i.EventTypes.onCaptionAndToolbarShow);
      a.Events.remove(this, i.EventTypes.onBeforeCaptionAndToolbarHide);
      a.Events.remove(this, i.EventTypes.onCaptionAndToolbarHide);
      a.Events.remove(this, i.EventTypes.onZoomPanRotateTransform);
      this.removeEventHandlers();
      a.isNothing(this.documentOverlay) || this.documentOverlay.dispose();
      a.isNothing(this.carousel) || this.carousel.dispose();
      a.isNothing(this.uiLayer) || this.uiLayer.dispose();
      a.isNothing(this.toolbar) || this.toolbar.dispose();
      this.destroyZoomPanRotate();
      a.isNothing(this.cache) || this.cache.dispose();
      for (b in this) a.objectHasProperty(this, b) && (this[b] = null);
    },
    initialize: function (c, d, f) {
      this.id = a.isNothing(f)
        ? "PhotoSwipe" + new Date().getTime().toString()
        : f;
      this.originalImages = c;
      if (
        a.Browser.android &&
        !a.Browser.firefox &&
        e.navigator.userAgent
          .match(/Android (\d+.\d+)/)
          .toString()
          .replace(/^.*\,/, "") >= 2.1
      )
        this.isBackEventSupported = !0;
      if (!this.isBackEventSupported)
        this.isBackEventSupported = a.objectHasProperty(e, "onhashchange");
      this.settings = {
        fadeInSpeed: 250,
        fadeOutSpeed: 250,
        preventHide: !1,
        preventSlideshow: !1,
        zIndex: 1e3,
        backButtonHideEnabled: !0,
        enableKeyboard: !0,
        enableMouseWheel: !0,
        mouseWheelSpeed: 350,
        autoStartSlideshow: !1,
        jQueryMobile: !a.isNothing(e.jQuery) && !a.isNothing(e.jQuery.mobile),
        jQueryMobileDialogHash: "&ui-state=dialog",
        enableUIWebViewRepositionTimeout: !1,
        uiWebViewResetPositionDelay: 500,
        target: e,
        preventDefaultTouchEvents: !0,
        loop: !0,
        slideSpeed: 250,
        nextPreviousSlideSpeed: 0,
        enableDrag: !0,
        swipeThreshold: 50,
        swipeTimeThreshold: 250,
        slideTimingFunction: "ease-out",
        slideshowDelay: 3e3,
        doubleTapSpeed: 250,
        margin: 20,
        imageScaleMethod: "fit",
        captionAndToolbarHide: !1,
        captionAndToolbarFlipPosition: !1,
        captionAndToolbarAutoHideDelay: 5e3,
        captionAndToolbarOpacity: 0.8,
        captionAndToolbarShowEmptyCaptions: !0,
        getToolbar: i.Toolbar.getToolbar,
        allowUserZoom: !0,
        allowRotationOnUserZoom: !1,
        maxUserZoom: 5,
        minUserZoom: 0.5,
        doubleTapZoomLevel: 2.5,
        getImageSource: i.Cache.Functions.getImageSource,
        getImageCaption: i.Cache.Functions.getImageCaption,
        getImageMetaData: i.Cache.Functions.getImageMetaData,
        cacheMode: i.Cache.Mode.normal,
      };
      a.extend(this.settings, d);
      this.settings.target !== e &&
        ((d = a.DOM.getStyle(this.settings.target, "position")),
        (d !== "relative" || d !== "absolute") &&
          a.DOM.setStyle(this.settings.target, "position", "relative"));
      if (this.settings.target !== e)
        (this.isBackEventSupported = !1),
          (this.settings.backButtonHideEnabled = !1);
      else if (this.settings.preventHide)
        this.settings.backButtonHideEnabled = !1;
      this.cache = new b.CacheClass(c, this.settings);
    },
    show: function (b) {
      var c, d;
      this.backButtonClicked = this._isResettingPosition = !1;
      if (a.isNumber(b)) this.currentIndex = b;
      else {
        this.currentIndex = -1;
        c = 0;
        for (d = this.originalImages.length; c < d; c++)
          if (this.originalImages[c] === b) {
            this.currentIndex = c;
            break;
          }
      }
      if (
        this.currentIndex < 0 ||
        this.currentIndex > this.originalImages.length - 1
      )
        throw "Code.PhotoSwipe.PhotoSwipeClass.show: Starting index out of range";
      this.isAlreadyGettingPage = this.getWindowDimensions();
      i.setActivateInstance(this);
      this.windowDimensions = this.getWindowDimensions();
      this.settings.target === e
        ? a.DOM.addClass(e.document.body, i.CssClasses.buildingBody)
        : a.DOM.addClass(this.settings.target, i.CssClasses.buildingBody);
      this.createComponents();
      a.Events.fire(this, { type: i.EventTypes.onBeforeShow, target: this });
      this.documentOverlay.fadeIn(
        this.settings.fadeInSpeed,
        this.onDocumentOverlayFadeIn.bind(this)
      );
    },
    getWindowDimensions: function () {
      return { width: a.DOM.windowWidth(), height: a.DOM.windowHeight() };
    },
    createComponents: function () {
      this.documentOverlay = new d.DocumentOverlayClass(this.settings);
      this.carousel = new f.CarouselClass(this.cache, this.settings);
      this.uiLayer = new h.UILayerClass(this.settings);
      if (!this.settings.captionAndToolbarHide)
        this.toolbar = new g.ToolbarClass(this.cache, this.settings);
    },
    resetPosition: function () {
      if (!this._isResettingPosition) {
        var b = this.getWindowDimensions();
        if (
          a.isNothing(this.windowDimensions) ||
          !(
            b.width === this.windowDimensions.width &&
            b.height === this.windowDimensions.height
          )
        )
          (this._isResettingPosition = !0),
            (this.windowDimensions = b),
            this.destroyZoomPanRotate(),
            this.documentOverlay.resetPosition(),
            this.carousel.resetPosition(),
            a.isNothing(this.toolbar) || this.toolbar.resetPosition(),
            this.uiLayer.resetPosition(),
            (this._isResettingPosition = !1),
            a.Events.fire(this, {
              type: i.EventTypes.onResetPosition,
              target: this,
            });
      }
    },
    addEventHandler: function (b, c) {
      a.Events.add(this, b, c);
    },
    addEventHandlers: function () {
      if (a.isNothing(this.windowOrientationChangeHandler))
        (this.windowOrientationChangeHandler = this.onWindowOrientationChange.bind(
          this
        )),
          (this.windowScrollHandler = this.onWindowScroll.bind(this)),
          (this.keyDownHandler = this.onKeyDown.bind(this)),
          (this.windowHashChangeHandler = this.onWindowHashChange.bind(this)),
          (this.uiLayerTouchHandler = this.onUILayerTouch.bind(this)),
          (this.carouselSlideByEndHandler = this.onCarouselSlideByEnd.bind(
            this
          )),
          (this.carouselSlideshowStartHandler = this.onCarouselSlideshowStart.bind(
            this
          )),
          (this.carouselSlideshowStopHandler = this.onCarouselSlideshowStop.bind(
            this
          )),
          (this.toolbarTapHandler = this.onToolbarTap.bind(this)),
          (this.toolbarBeforeShowHandler = this.onToolbarBeforeShow.bind(this)),
          (this.toolbarShowHandler = this.onToolbarShow.bind(this)),
          (this.toolbarBeforeHideHandler = this.onToolbarBeforeHide.bind(this)),
          (this.toolbarHideHandler = this.onToolbarHide.bind(this)),
          (this.mouseWheelHandler = this.onMouseWheel.bind(this)),
          (this.zoomPanRotateTransformHandler = this.onZoomPanRotateTransform.bind(
            this
          ));
      a.Browser.android
        ? (this.orientationEventName = "resize")
        : a.Browser.iOS && !a.Browser.safari
        ? a.Events.add(
            e.document.body,
            "orientationchange",
            this.windowOrientationChangeHandler
          )
        : (this.orientationEventName = !a.isNothing(e.onorientationchange)
            ? "orientationchange"
            : "resize");
      a.isNothing(this.orientationEventName) ||
        a.Events.add(
          e,
          this.orientationEventName,
          this.windowOrientationChangeHandler
        );
      this.settings.target === e &&
        a.Events.add(e, "scroll", this.windowScrollHandler);
      this.settings.enableKeyboard &&
        a.Events.add(e.document, "keydown", this.keyDownHandler);
      if (this.isBackEventSupported && this.settings.backButtonHideEnabled)
        (this.windowHashChangeHandler = this.onWindowHashChange.bind(this)),
          this.settings.jQueryMobile
            ? (e.location.hash = this.settings.jQueryMobileDialogHash)
            : ((this.currentHistoryHashValue =
                "PhotoSwipe" + new Date().getTime().toString()),
              (e.location.hash = this.currentHistoryHashValue)),
          a.Events.add(e, "hashchange", this.windowHashChangeHandler);
      this.settings.enableMouseWheel &&
        a.Events.add(e, "mousewheel", this.mouseWheelHandler);
      a.Events.add(
        this.uiLayer,
        a.TouchElement.EventTypes.onTouch,
        this.uiLayerTouchHandler
      );
      a.Events.add(
        this.carousel,
        f.EventTypes.onSlideByEnd,
        this.carouselSlideByEndHandler
      );
      a.Events.add(
        this.carousel,
        f.EventTypes.onSlideshowStart,
        this.carouselSlideshowStartHandler
      );
      a.Events.add(
        this.carousel,
        f.EventTypes.onSlideshowStop,
        this.carouselSlideshowStopHandler
      );
      a.isNothing(this.toolbar) ||
        (a.Events.add(this.toolbar, g.EventTypes.onTap, this.toolbarTapHandler),
        a.Events.add(
          this.toolbar,
          g.EventTypes.onBeforeShow,
          this.toolbarBeforeShowHandler
        ),
        a.Events.add(
          this.toolbar,
          g.EventTypes.onShow,
          this.toolbarShowHandler
        ),
        a.Events.add(
          this.toolbar,
          g.EventTypes.onBeforeHide,
          this.toolbarBeforeHideHandler
        ),
        a.Events.add(
          this.toolbar,
          g.EventTypes.onHide,
          this.toolbarHideHandler
        ));
    },
    removeEventHandlers: function () {
      a.Browser.iOS &&
        !a.Browser.safari &&
        a.Events.remove(
          e.document.body,
          "orientationchange",
          this.windowOrientationChangeHandler
        );
      a.isNothing(this.orientationEventName) ||
        a.Events.remove(
          e,
          this.orientationEventName,
          this.windowOrientationChangeHandler
        );
      a.Events.remove(e, "scroll", this.windowScrollHandler);
      this.settings.enableKeyboard &&
        a.Events.remove(e.document, "keydown", this.keyDownHandler);
      this.isBackEventSupported &&
        this.settings.backButtonHideEnabled &&
        a.Events.remove(e, "hashchange", this.windowHashChangeHandler);
      this.settings.enableMouseWheel &&
        a.Events.remove(e, "mousewheel", this.mouseWheelHandler);
      a.isNothing(this.uiLayer) ||
        a.Events.remove(
          this.uiLayer,
          a.TouchElement.EventTypes.onTouch,
          this.uiLayerTouchHandler
        );
      a.isNothing(this.toolbar) ||
        (a.Events.remove(
          this.carousel,
          f.EventTypes.onSlideByEnd,
          this.carouselSlideByEndHandler
        ),
        a.Events.remove(
          this.carousel,
          f.EventTypes.onSlideshowStart,
          this.carouselSlideshowStartHandler
        ),
        a.Events.remove(
          this.carousel,
          f.EventTypes.onSlideshowStop,
          this.carouselSlideshowStopHandler
        ));
      a.isNothing(this.toolbar) ||
        (a.Events.remove(
          this.toolbar,
          g.EventTypes.onTap,
          this.toolbarTapHandler
        ),
        a.Events.remove(
          this.toolbar,
          g.EventTypes.onBeforeShow,
          this.toolbarBeforeShowHandler
        ),
        a.Events.remove(
          this.toolbar,
          g.EventTypes.onShow,
          this.toolbarShowHandler
        ),
        a.Events.remove(
          this.toolbar,
          g.EventTypes.onBeforeHide,
          this.toolbarBeforeHideHandler
        ),
        a.Events.remove(
          this.toolbar,
          g.EventTypes.onHide,
          this.toolbarHideHandler
        ));
    },
    hide: function () {
      if (!this.settings.preventHide) {
        if (a.isNothing(this.documentOverlay))
          throw "Code.PhotoSwipe.PhotoSwipeClass.hide: PhotoSwipe instance is already hidden";
        if (a.isNothing(this.hiding)) {
          this.clearUIWebViewResetPositionTimeout();
          this.destroyZoomPanRotate();
          this.removeEventHandlers();
          a.Events.fire(this, {
            type: i.EventTypes.onBeforeHide,
            target: this,
          });
          this.uiLayer.dispose();
          this.uiLayer = null;
          if (!a.isNothing(this.toolbar))
            this.toolbar.dispose(), (this.toolbar = null);
          this.carousel.dispose();
          this.carousel = null;
          a.DOM.removeClass(e.document.body, i.CssClasses.activeBody);
          this.documentOverlay.dispose();
          this.documentOverlay = null;
          this._isResettingPosition = !1;
          i.unsetActivateInstance(this);
          a.Events.fire(this, { type: i.EventTypes.onHide, target: this });
          this.goBackInHistory();
        }
      }
    },
    goBackInHistory: function () {
      this.isBackEventSupported &&
        this.settings.backButtonHideEnabled &&
        (this.backButtonClicked || e.history.back());
    },
    play: function () {
      !this.isZoomActive() &&
        !this.settings.preventSlideshow &&
        !a.isNothing(this.carousel) &&
        (!a.isNothing(this.toolbar) &&
          this.toolbar.isVisible &&
          this.toolbar.fadeOut(),
        this.carousel.startSlideshow());
    },
    stop: function () {
      this.isZoomActive() ||
        a.isNothing(this.carousel) ||
        this.carousel.stopSlideshow();
    },
    previous: function () {
      this.isZoomActive() ||
        a.isNothing(this.carousel) ||
        this.carousel.previous();
    },
    next: function () {
      this.isZoomActive() || a.isNothing(this.carousel) || this.carousel.next();
    },
    toggleToolbar: function () {
      this.isZoomActive() ||
        a.isNothing(this.toolbar) ||
        this.toolbar.toggleVisibility(this.currentIndex);
    },
    fadeOutToolbarIfVisible: function () {
      !a.isNothing(this.toolbar) &&
        this.toolbar.isVisible &&
        this.settings.captionAndToolbarAutoHideDelay > 0 &&
        this.toolbar.fadeOut();
    },
    createZoomPanRotate: function () {
      this.stop();
      if (this.canUserZoom() && !this.isZoomActive())
        a.Events.fire(this, i.EventTypes.onBeforeZoomPanRotateShow),
          (this.zoomPanRotate = new j.ZoomPanRotateClass(
            this.settings,
            this.cache.images[this.currentIndex],
            this.uiLayer
          )),
          (this.uiLayer.captureSettings.preventDefaultTouchEvents = !0),
          a.Events.add(
            this.zoomPanRotate,
            i.ZoomPanRotate.EventTypes.onTransform,
            this.zoomPanRotateTransformHandler
          ),
          a.Events.fire(this, i.EventTypes.onZoomPanRotateShow),
          !a.isNothing(this.toolbar) &&
            this.toolbar.isVisible &&
            this.toolbar.fadeOut();
    },
    destroyZoomPanRotate: function () {
      if (!a.isNothing(this.zoomPanRotate))
        a.Events.fire(this, i.EventTypes.onBeforeZoomPanRotateHide),
          a.Events.remove(
            this.zoomPanRotate,
            i.ZoomPanRotate.EventTypes.onTransform,
            this.zoomPanRotateTransformHandler
          ),
          this.zoomPanRotate.dispose(),
          (this.zoomPanRotate = null),
          (this.uiLayer.captureSettings.preventDefaultTouchEvents = this.settings.preventDefaultTouchEvents),
          a.Events.fire(this, i.EventTypes.onZoomPanRotateHide);
    },
    canUserZoom: function () {
      var b;
      if (a.Browser.msie) {
        if (
          ((b = document.createElement("div")),
          a.isNothing(b.style.msTransform))
        )
          return !1;
      } else if (!a.Browser.isCSSTransformSupported) return !1;
      if (!this.settings.allowUserZoom) return !1;
      if (this.carousel.isSliding) return !1;
      b = this.cache.images[this.currentIndex];
      if (a.isNothing(b)) return !1;
      if (b.isLoading) return !1;
      return !0;
    },
    isZoomActive: function () {
      return !a.isNothing(this.zoomPanRotate);
    },
    getCurrentImage: function () {
      return this.cache.images[this.currentIndex];
    },
    onDocumentOverlayFadeIn: function () {
      e.setTimeout(
        function () {
          var b =
            this.settings.target === e ? e.document.body : this.settings.target;
          a.DOM.removeClass(b, i.CssClasses.buildingBody);
          a.DOM.addClass(b, i.CssClasses.activeBody);
          this.addEventHandlers();
          this.carousel.show(this.currentIndex);
          this.uiLayer.show();
          this.settings.autoStartSlideshow
            ? this.play()
            : a.isNothing(this.toolbar) || this.toolbar.show(this.currentIndex);
          a.Events.fire(this, { type: i.EventTypes.onShow, target: this });
          this.setUIWebViewResetPositionTimeout();
        }.bind(this),
        250
      );
    },
    setUIWebViewResetPositionTimeout: function () {
      if (
        this.settings.enableUIWebViewRepositionTimeout &&
        a.Browser.iOS &&
        !a.Browser.safari
      )
        a.isNothing(this._uiWebViewResetPositionTimeout) ||
          e.clearTimeout(this._uiWebViewResetPositionTimeout),
          (this._uiWebViewResetPositionTimeout = e.setTimeout(
            function () {
              this.resetPosition();
              this.setUIWebViewResetPositionTimeout();
            }.bind(this),
            this.settings.uiWebViewResetPositionDelay
          ));
    },
    clearUIWebViewResetPositionTimeout: function () {
      a.isNothing(this._uiWebViewResetPositionTimeout) ||
        e.clearTimeout(this._uiWebViewResetPositionTimeout);
    },
    onWindowScroll: function () {
      this.resetPosition();
    },
    onWindowOrientationChange: function () {
      this.resetPosition();
    },
    onWindowHashChange: function () {
      if (
        e.location.hash !==
        "#" +
          (this.settings.jQueryMobile
            ? this.settings.jQueryMobileDialogHash
            : this.currentHistoryHashValue)
      )
        (this.backButtonClicked = !0), this.hide();
    },
    onKeyDown: function (a) {
      a.keyCode === 37
        ? (a.preventDefault(), this.previous())
        : a.keyCode === 39
        ? (a.preventDefault(), this.next())
        : a.keyCode === 38 || a.keyCode === 40
        ? a.preventDefault()
        : a.keyCode === 27
        ? (a.preventDefault(), this.hide())
        : a.keyCode === 32
        ? (this.settings.hideToolbar ? this.hide() : this.toggleToolbar(),
          a.preventDefault())
        : a.keyCode === 13 && (a.preventDefault(), this.play());
    },
    onUILayerTouch: function (b) {
      if (this.isZoomActive())
        switch (b.action) {
          case a.TouchElement.ActionTypes.gestureChange:
            this.zoomPanRotate.zoomRotate(
              b.scale,
              this.settings.allowRotationOnUserZoom ? b.rotation : 0
            );
            break;
          case a.TouchElement.ActionTypes.gestureEnd:
            this.zoomPanRotate.setStartingScaleAndRotation(
              b.scale,
              this.settings.allowRotationOnUserZoom ? b.rotation : 0
            );
            break;
          case a.TouchElement.ActionTypes.touchStart:
            this.zoomPanRotate.panStart(b.point);
            break;
          case a.TouchElement.ActionTypes.touchMove:
            this.zoomPanRotate.pan(b.point);
            break;
          case a.TouchElement.ActionTypes.doubleTap:
            this.destroyZoomPanRotate();
            this.toggleToolbar();
            break;
          case a.TouchElement.ActionTypes.swipeLeft:
            this.destroyZoomPanRotate();
            this.next();
            this.toggleToolbar();
            break;
          case a.TouchElement.ActionTypes.swipeRight:
            this.destroyZoomPanRotate(), this.previous(), this.toggleToolbar();
        }
      else
        switch (b.action) {
          case a.TouchElement.ActionTypes.touchMove:
          case a.TouchElement.ActionTypes.swipeLeft:
          case a.TouchElement.ActionTypes.swipeRight:
            this.fadeOutToolbarIfVisible();
            this.carousel.onTouch(b.action, b.point);
            break;
          case a.TouchElement.ActionTypes.touchStart:
          case a.TouchElement.ActionTypes.touchMoveEnd:
            this.carousel.onTouch(b.action, b.point);
            break;
          case a.TouchElement.ActionTypes.tap:
            this.toggleToolbar();
            break;
          case a.TouchElement.ActionTypes.doubleTap:
            this.settings.target === e &&
              ((b.point.x -= a.DOM.windowScrollLeft()),
              (b.point.y -= a.DOM.windowScrollTop()));
            var c = this.cache.images[this.currentIndex].imageEl,
              d = e.parseInt(a.DOM.getStyle(c, "top"), 10),
              f = e.parseInt(a.DOM.getStyle(c, "left"), 10),
              g = f + a.DOM.width(c),
              c = d + a.DOM.height(c);
            if (b.point.x < f) b.point.x = f;
            else if (b.point.x > g) b.point.x = g;
            if (b.point.y < d) b.point.y = d;
            else if (b.point.y > c) b.point.y = c;
            this.createZoomPanRotate();
            this.isZoomActive() &&
              this.zoomPanRotate.zoomAndPanToPoint(
                this.settings.doubleTapZoomLevel,
                b.point
              );
            break;
          case a.TouchElement.ActionTypes.gestureStart:
            this.createZoomPanRotate();
        }
      a.Events.fire(this, {
        type: i.EventTypes.onTouch,
        target: this,
        point: b.point,
        action: b.action,
      });
    },
    onCarouselSlideByEnd: function (b) {
      this.currentIndex = b.cacheIndex;
      a.isNothing(this.toolbar) ||
        (this.toolbar.setCaption(this.currentIndex),
        this.toolbar.setToolbarStatus(this.currentIndex));
      a.Events.fire(this, {
        type: i.EventTypes.onDisplayImage,
        target: this,
        action: b.action,
        index: b.cacheIndex,
      });
    },
    onToolbarTap: function (b) {
      switch (b.action) {
        case g.ToolbarAction.next:
          this.next();
          break;
        case g.ToolbarAction.previous:
          this.previous();
          break;
        case g.ToolbarAction.close:
          this.hide();
          break;
        case g.ToolbarAction.play:
          this.play();
      }
      a.Events.fire(this, {
        type: i.EventTypes.onToolbarTap,
        target: this,
        toolbarAction: b.action,
        tapTarget: b.tapTarget,
      });
    },
    onMouseWheel: function (b) {
      var c = a.Events.getWheelDelta(b);
      if (
        !(
          b.timeStamp - (this.mouseWheelStartTime || 0) <
          this.settings.mouseWheelSpeed
        )
      )
        (this.mouseWheelStartTime = b.timeStamp),
          this.settings.invertMouseWheel && (c *= -1),
          c < 0 ? this.next() : c > 0 && this.previous();
    },
    onCarouselSlideshowStart: function () {
      a.Events.fire(this, {
        type: i.EventTypes.onSlideshowStart,
        target: this,
      });
    },
    onCarouselSlideshowStop: function () {
      a.Events.fire(this, { type: i.EventTypes.onSlideshowStop, target: this });
    },
    onToolbarBeforeShow: function () {
      a.Events.fire(this, {
        type: i.EventTypes.onBeforeCaptionAndToolbarShow,
        target: this,
      });
    },
    onToolbarShow: function () {
      a.Events.fire(this, {
        type: i.EventTypes.onCaptionAndToolbarShow,
        target: this,
      });
    },
    onToolbarBeforeHide: function () {
      a.Events.fire(this, {
        type: i.EventTypes.onBeforeCaptionAndToolbarHide,
        target: this,
      });
    },
    onToolbarHide: function () {
      a.Events.fire(this, {
        type: i.EventTypes.onCaptionAndToolbarHide,
        target: this,
      });
    },
    onZoomPanRotateTransform: function (b) {
      a.Events.fire(this, {
        target: this,
        type: i.EventTypes.onZoomPanRotateTransform,
        scale: b.scale,
        rotation: b.rotation,
        rotationDegs: b.rotationDegs,
        translateX: b.translateX,
        translateY: b.translateY,
      });
    },
  });
})(
  window,
  window.klass,
  window.Code.Util,
  window.Code.PhotoSwipe.Cache,
  window.Code.PhotoSwipe.DocumentOverlay,
  window.Code.PhotoSwipe.Carousel,
  window.Code.PhotoSwipe.Toolbar,
  window.Code.PhotoSwipe.UILayer,
  window.Code.PhotoSwipe.ZoomPanRotate
);
/**
 * Isotope v1.5.25
 * An exquisite jQuery plugin for magical layouts
 * http://isotope.metafizzy.co
 *
 * Commercial use requires one-time purchase of a commercial license
 * http://isotope.metafizzy.co/docs/license.html
 *
 * Non-commercial use is licensed under the MIT License
 *
 * Copyright 2013 Metafizzy
 */
(function (a, b, c) {
  "use strict";
  var d = a.document,
    e = a.Modernizr,
    f = function (a) {
      return a.charAt(0).toUpperCase() + a.slice(1);
    },
    g = "Moz Webkit O Ms".split(" "),
    h = function (a) {
      var b = d.documentElement.style,
        c;
      if (typeof b[a] == "string") return a;
      a = f(a);
      for (var e = 0, h = g.length; e < h; e++) {
        c = g[e] + a;
        if (typeof b[c] == "string") return c;
      }
    },
    i = h("transform"),
    j = h("transitionProperty"),
    k = {
      csstransforms: function () {
        return !!i;
      },
      csstransforms3d: function () {
        var a = !!h("perspective");
        if (a) {
          var c = " -o- -moz- -ms- -webkit- -khtml- ".split(" "),
            d = "@media (" + c.join("transform-3d),(") + "modernizr)",
            e = b(
              "<style>" + d + "{#modernizr{height:3px}}" + "</style>"
            ).appendTo("head"),
            f = b('<div id="modernizr" />').appendTo("html");
          (a = f.height() === 3), f.remove(), e.remove();
        }
        return a;
      },
      csstransitions: function () {
        return !!j;
      },
    },
    l;
  if (e) for (l in k) e.hasOwnProperty(l) || e.addTest(l, k[l]);
  else {
    e = a.Modernizr = { _version: "1.6ish: miniModernizr for Isotope" };
    var m = " ",
      n;
    for (l in k) (n = k[l]()), (e[l] = n), (m += " " + (n ? "" : "no-") + l);
    b("html").addClass(m);
  }
  if (e.csstransforms) {
    var o = e.csstransforms3d
        ? {
            translate: function (a) {
              return "translate3d(" + a[0] + "px, " + a[1] + "px, 0) ";
            },
            scale: function (a) {
              return "scale3d(" + a + ", " + a + ", 1) ";
            },
          }
        : {
            translate: function (a) {
              return "translate(" + a[0] + "px, " + a[1] + "px) ";
            },
            scale: function (a) {
              return "scale(" + a + ") ";
            },
          },
      p = function (a, c, d) {
        var e = b.data(a, "isoTransform") || {},
          f = {},
          g,
          h = {},
          j;
        (f[c] = d), b.extend(e, f);
        for (g in e) (j = e[g]), (h[g] = o[g](j));
        var k = h.translate || "",
          l = h.scale || "",
          m = k + l;
        b.data(a, "isoTransform", e), (a.style[i] = m);
      };
    (b.cssNumber.scale = !0),
      (b.cssHooks.scale = {
        set: function (a, b) {
          p(a, "scale", b);
        },
        get: function (a, c) {
          var d = b.data(a, "isoTransform");
          return d && d.scale ? d.scale : 1;
        },
      }),
      (b.fx.step.scale = function (a) {
        b.cssHooks.scale.set(a.elem, a.now + a.unit);
      }),
      (b.cssNumber.translate = !0),
      (b.cssHooks.translate = {
        set: function (a, b) {
          p(a, "translate", b);
        },
        get: function (a, c) {
          var d = b.data(a, "isoTransform");
          return d && d.translate ? d.translate : [0, 0];
        },
      });
  }
  var q, r;
  e.csstransitions &&
    ((q = {
      WebkitTransitionProperty: "webkitTransitionEnd",
      MozTransitionProperty: "transitionend",
      OTransitionProperty: "oTransitionEnd otransitionend",
      transitionProperty: "transitionend",
    }[j]),
    (r = h("transitionDuration")));
  var s = b.event,
    t = b.event.handle ? "handle" : "dispatch",
    u;
  (s.special.smartresize = {
    setup: function () {
      b(this).bind("resize", s.special.smartresize.handler);
    },
    teardown: function () {
      b(this).unbind("resize", s.special.smartresize.handler);
    },
    handler: function (a, b) {
      var c = this,
        d = arguments;
      (a.type = "smartresize"),
        u && clearTimeout(u),
        (u = setTimeout(
          function () {
            s[t].apply(c, d);
          },
          b === "execAsap" ? 0 : 100
        ));
    },
  }),
    (b.fn.smartresize = function (a) {
      return a
        ? this.bind("smartresize", a)
        : this.trigger("smartresize", ["execAsap"]);
    }),
    (b.Isotope = function (a, c, d) {
      (this.element = b(c)), this._create(a), this._init(d);
    });
  var v = ["width", "height"],
    w = b(a);
  (b.Isotope.settings = {
    resizable: !0,
    layoutMode: "masonry",
    containerClass: "isotope",
    itemClass: "isotope-item",
    hiddenClass: "isotope-hidden",
    hiddenStyle: { opacity: 0, scale: 0.001 },
    visibleStyle: { opacity: 1, scale: 1 },
    containerStyle: { position: "relative", overflow: "hidden" },
    animationEngine: "best-available",
    animationOptions: { queue: !1, duration: 800 },
    sortBy: "original-order",
    sortAscending: !0,
    resizesContainer: !0,
    transformsEnabled: !0,
    itemPositionDataEnabled: !1,
  }),
    (b.Isotope.prototype = {
      _create: function (a) {
        (this.options = b.extend({}, b.Isotope.settings, a)),
          (this.styleQueue = []),
          (this.elemCount = 0);
        var c = this.element[0].style;
        this.originalStyle = {};
        var d = v.slice(0);
        for (var e in this.options.containerStyle) d.push(e);
        for (var f = 0, g = d.length; f < g; f++)
          (e = d[f]), (this.originalStyle[e] = c[e] || "");
        this.element.css(this.options.containerStyle),
          this._updateAnimationEngine(),
          this._updateUsingTransforms();
        var h = {
          "original-order": function (a, b) {
            return b.elemCount++, b.elemCount;
          },
          random: function () {
            return Math.random();
          },
        };
        (this.options.getSortData = b.extend(this.options.getSortData, h)),
          this.reloadItems(),
          (this.offset = {
            left: parseInt(this.element.css("padding-left") || 0, 10),
            top: parseInt(this.element.css("padding-top") || 0, 10),
          });
        var i = this;
        setTimeout(function () {
          i.element.addClass(i.options.containerClass);
        }, 0),
          this.options.resizable &&
            w.bind("smartresize.isotope", function () {
              i.resize();
            }),
          this.element.delegate(
            "." + this.options.hiddenClass,
            "click",
            function () {
              return !1;
            }
          );
      },
      _getAtoms: function (a) {
        var b = this.options.itemSelector,
          c = b ? a.filter(b).add(a.find(b)) : a,
          d = { position: "absolute" };
        return (
          (c = c.filter(function (a, b) {
            return b.nodeType === 1;
          })),
          this.usingTransforms && ((d.left = 0), (d.top = 0)),
          c.css(d).addClass(this.options.itemClass),
          this.updateSortData(c, !0),
          c
        );
      },
      _init: function (a) {
        (this.$filteredAtoms = this._filter(this.$allAtoms)),
          this._sort(),
          this.reLayout(a);
      },
      option: function (a) {
        if (b.isPlainObject(a)) {
          this.options = b.extend(!0, this.options, a);
          var c;
          for (var d in a) (c = "_update" + f(d)), this[c] && this[c]();
        }
      },
      _updateAnimationEngine: function () {
        var a = this.options.animationEngine
            .toLowerCase()
            .replace(/[ _\-]/g, ""),
          b;
        switch (a) {
          case "css":
          case "none":
            b = !1;
            break;
          case "jquery":
            b = !0;
            break;
          default:
            b = !e.csstransitions;
        }
        (this.isUsingJQueryAnimation = b), this._updateUsingTransforms();
      },
      _updateTransformsEnabled: function () {
        this._updateUsingTransforms();
      },
      _updateUsingTransforms: function () {
        var a = (this.usingTransforms =
          this.options.transformsEnabled &&
          e.csstransforms &&
          e.csstransitions &&
          !this.isUsingJQueryAnimation);
        a ||
          (delete this.options.hiddenStyle.scale,
          delete this.options.visibleStyle.scale),
          (this.getPositionStyles = a ? this._translate : this._positionAbs);
      },
      _filter: function (a) {
        var b = this.options.filter === "" ? "*" : this.options.filter;
        if (!b) return a;
        var c = this.options.hiddenClass,
          d = "." + c,
          e = a.filter(d),
          f = e;
        if (b !== "*") {
          f = e.filter(b);
          var g = a.not(d).not(b).addClass(c);
          this.styleQueue.push({ $el: g, style: this.options.hiddenStyle });
        }
        return (
          this.styleQueue.push({ $el: f, style: this.options.visibleStyle }),
          f.removeClass(c),
          a.filter(b)
        );
      },
      updateSortData: function (a, c) {
        var d = this,
          e = this.options.getSortData,
          f,
          g;
        a.each(function () {
          (f = b(this)), (g = {});
          for (var a in e)
            !c && a === "original-order"
              ? (g[a] = b.data(this, "isotope-sort-data")[a])
              : (g[a] = e[a](f, d));
          b.data(this, "isotope-sort-data", g);
        });
      },
      _sort: function () {
        var a = this.options.sortBy,
          b = this._getSorter,
          c = this.options.sortAscending ? 1 : -1,
          d = function (d, e) {
            var f = b(d, a),
              g = b(e, a);
            return (
              f === g &&
                a !== "original-order" &&
                ((f = b(d, "original-order")), (g = b(e, "original-order"))),
              (f > g ? 1 : f < g ? -1 : 0) * c
            );
          };
        this.$filteredAtoms.sort(d);
      },
      _getSorter: function (a, c) {
        return b.data(a, "isotope-sort-data")[c];
      },
      _translate: function (a, b) {
        return { translate: [a, b] };
      },
      _positionAbs: function (a, b) {
        return { left: a, top: b };
      },
      _pushPosition: function (a, b, c) {
        (b = Math.round(b + this.offset.left)),
          (c = Math.round(c + this.offset.top));
        var d = this.getPositionStyles(b, c);
        this.styleQueue.push({ $el: a, style: d }),
          this.options.itemPositionDataEnabled &&
            a.data("isotope-item-position", { x: b, y: c });
      },
      layout: function (a, b) {
        var c = this.options.layoutMode;
        this["_" + c + "Layout"](a);
        if (this.options.resizesContainer) {
          var d = this["_" + c + "GetContainerSize"]();
          this.styleQueue.push({ $el: this.element, style: d });
        }
        this._processStyleQueue(a, b), (this.isLaidOut = !0);
      },
      _processStyleQueue: function (a, c) {
        var d = this.isLaidOut
            ? this.isUsingJQueryAnimation
              ? "animate"
              : "css"
            : "css",
          f = this.options.animationOptions,
          g = this.options.onLayout,
          h,
          i,
          j,
          k;
        i = function (a, b) {
          b.$el[d](b.style, f);
        };
        if (this._isInserting && this.isUsingJQueryAnimation)
          i = function (a, b) {
            (h = b.$el.hasClass("no-transition") ? "css" : d),
              b.$el[h](b.style, f);
          };
        else if (c || g || f.complete) {
          var l = !1,
            m = [c, g, f.complete],
            n = this;
          (j = !0),
            (k = function () {
              if (l) return;
              var b;
              for (var c = 0, d = m.length; c < d; c++)
                (b = m[c]), typeof b == "function" && b.call(n.element, a, n);
              l = !0;
            });
          if (this.isUsingJQueryAnimation && d === "animate")
            (f.complete = k), (j = !1);
          else if (e.csstransitions) {
            var o = 0,
              p = this.styleQueue[0],
              s = p && p.$el,
              t;
            while (!s || !s.length) {
              t = this.styleQueue[o++];
              if (!t) return;
              s = t.$el;
            }
            var u = parseFloat(getComputedStyle(s[0])[r]);
            u > 0 &&
              ((i = function (a, b) {
                b.$el[d](b.style, f).one(q, k);
              }),
              (j = !1));
          }
        }
        b.each(this.styleQueue, i), j && k(), (this.styleQueue = []);
      },
      resize: function () {
        this["_" + this.options.layoutMode + "ResizeChanged"]() &&
          this.reLayout();
      },
      reLayout: function (a) {
        this["_" + this.options.layoutMode + "Reset"](),
          this.layout(this.$filteredAtoms, a);
      },
      addItems: function (a, b) {
        var c = this._getAtoms(a);
        (this.$allAtoms = this.$allAtoms.add(c)), b && b(c);
      },
      insert: function (a, b) {
        this.element.append(a);
        var c = this;
        this.addItems(a, function (a) {
          var d = c._filter(a);
          c._addHideAppended(d),
            c._sort(),
            c.reLayout(),
            c._revealAppended(d, b);
        });
      },
      appended: function (a, b) {
        var c = this;
        this.addItems(a, function (a) {
          c._addHideAppended(a), c.layout(a), c._revealAppended(a, b);
        });
      },
      _addHideAppended: function (a) {
        (this.$filteredAtoms = this.$filteredAtoms.add(a)),
          a.addClass("no-transition"),
          (this._isInserting = !0),
          this.styleQueue.push({ $el: a, style: this.options.hiddenStyle });
      },
      _revealAppended: function (a, b) {
        var c = this;
        setTimeout(function () {
          a.removeClass("no-transition"),
            c.styleQueue.push({ $el: a, style: c.options.visibleStyle }),
            (c._isInserting = !1),
            c._processStyleQueue(a, b);
        }, 10);
      },
      reloadItems: function () {
        this.$allAtoms = this._getAtoms(this.element.children());
      },
      remove: function (a, b) {
        (this.$allAtoms = this.$allAtoms.not(a)),
          (this.$filteredAtoms = this.$filteredAtoms.not(a));
        var c = this,
          d = function () {
            a.remove(), b && b.call(c.element);
          };
        a.filter(":not(." + this.options.hiddenClass + ")").length
          ? (this.styleQueue.push({ $el: a, style: this.options.hiddenStyle }),
            this._sort(),
            this.reLayout(d))
          : d();
      },
      shuffle: function (a) {
        this.updateSortData(this.$allAtoms),
          (this.options.sortBy = "random"),
          this._sort(),
          this.reLayout(a);
      },
      destroy: function () {
        var a = this.usingTransforms,
          b = this.options;
        this.$allAtoms
          .removeClass(b.hiddenClass + " " + b.itemClass)
          .each(function () {
            var b = this.style;
            (b.position = ""),
              (b.top = ""),
              (b.left = ""),
              (b.opacity = ""),
              a && (b[i] = "");
          });
        var c = this.element[0].style;
        for (var d in this.originalStyle) c[d] = this.originalStyle[d];
        this.element
          .unbind(".isotope")
          .undelegate("." + b.hiddenClass, "click")
          .removeClass(b.containerClass)
          .removeData("isotope"),
          w.unbind(".isotope");
      },
      _getSegments: function (a) {
        var b = this.options.layoutMode,
          c = a ? "rowHeight" : "columnWidth",
          d = a ? "height" : "width",
          e = a ? "rows" : "cols",
          g = this.element[d](),
          h,
          i =
            (this.options[b] && this.options[b][c]) ||
            this.$filteredAtoms["outer" + f(d)](!0) ||
            g;
        (h = Math.floor(g / i)),
          (h = Math.max(h, 1)),
          (this[b][e] = h),
          (this[b][c] = i);
      },
      _checkIfSegmentsChanged: function (a) {
        var b = this.options.layoutMode,
          c = a ? "rows" : "cols",
          d = this[b][c];
        return this._getSegments(a), this[b][c] !== d;
      },
      _masonryReset: function () {
        (this.masonry = {}), this._getSegments();
        var a = this.masonry.cols;
        this.masonry.colYs = [];
        while (a--) this.masonry.colYs.push(0);
      },
      _masonryLayout: function (a) {
        var c = this,
          d = c.masonry;
        a.each(function () {
          var a = b(this),
            e = Math.ceil(a.outerWidth(!0) / d.columnWidth);
          e = Math.min(e, d.cols);
          if (e === 1) c._masonryPlaceBrick(a, d.colYs);
          else {
            var f = d.cols + 1 - e,
              g = [],
              h,
              i;
            for (i = 0; i < f; i++)
              (h = d.colYs.slice(i, i + e)), (g[i] = Math.max.apply(Math, h));
            c._masonryPlaceBrick(a, g);
          }
        });
      },
      _masonryPlaceBrick: function (a, b) {
        var c = Math.min.apply(Math, b),
          d = 0;
        for (var e = 0, f = b.length; e < f; e++)
          if (b[e] === c) {
            d = e;
            break;
          }
        var g = this.masonry.columnWidth * d,
          h = c;
        this._pushPosition(a, g, h);
        var i = c + a.outerHeight(!0),
          j = this.masonry.cols + 1 - f;
        for (e = 0; e < j; e++) this.masonry.colYs[d + e] = i;
      },
      _masonryGetContainerSize: function () {
        var a = Math.max.apply(Math, this.masonry.colYs);
        return { height: a };
      },
      _masonryResizeChanged: function () {
        return this._checkIfSegmentsChanged();
      },
      _fitRowsReset: function () {
        this.fitRows = { x: 0, y: 0, height: 0 };
      },
      _fitRowsLayout: function (a) {
        var c = this,
          d = this.element.width(),
          e = this.fitRows;
        a.each(function () {
          var a = b(this),
            f = a.outerWidth(!0),
            g = a.outerHeight(!0);
          e.x !== 0 && f + e.x > d && ((e.x = 0), (e.y = e.height)),
            c._pushPosition(a, e.x, e.y),
            (e.height = Math.max(e.y + g, e.height)),
            (e.x += f);
        });
      },
      _fitRowsGetContainerSize: function () {
        return { height: this.fitRows.height };
      },
      _fitRowsResizeChanged: function () {
        return !0;
      },
      _cellsByRowReset: function () {
        (this.cellsByRow = { index: 0 }),
          this._getSegments(),
          this._getSegments(!0);
      },
      _cellsByRowLayout: function (a) {
        var c = this,
          d = this.cellsByRow;
        a.each(function () {
          var a = b(this),
            e = d.index % d.cols,
            f = Math.floor(d.index / d.cols),
            g = (e + 0.5) * d.columnWidth - a.outerWidth(!0) / 2,
            h = (f + 0.5) * d.rowHeight - a.outerHeight(!0) / 2;
          c._pushPosition(a, g, h), d.index++;
        });
      },
      _cellsByRowGetContainerSize: function () {
        return {
          height:
            Math.ceil(this.$filteredAtoms.length / this.cellsByRow.cols) *
              this.cellsByRow.rowHeight +
            this.offset.top,
        };
      },
      _cellsByRowResizeChanged: function () {
        return this._checkIfSegmentsChanged();
      },
      _straightDownReset: function () {
        this.straightDown = { y: 0 };
      },
      _straightDownLayout: function (a) {
        var c = this;
        a.each(function (a) {
          var d = b(this);
          c._pushPosition(d, 0, c.straightDown.y),
            (c.straightDown.y += d.outerHeight(!0));
        });
      },
      _straightDownGetContainerSize: function () {
        return { height: this.straightDown.y };
      },
      _straightDownResizeChanged: function () {
        return !0;
      },
      _masonryHorizontalReset: function () {
        (this.masonryHorizontal = {}), this._getSegments(!0);
        var a = this.masonryHorizontal.rows;
        this.masonryHorizontal.rowXs = [];
        while (a--) this.masonryHorizontal.rowXs.push(0);
      },
      _masonryHorizontalLayout: function (a) {
        var c = this,
          d = c.masonryHorizontal;
        a.each(function () {
          var a = b(this),
            e = Math.ceil(a.outerHeight(!0) / d.rowHeight);
          e = Math.min(e, d.rows);
          if (e === 1) c._masonryHorizontalPlaceBrick(a, d.rowXs);
          else {
            var f = d.rows + 1 - e,
              g = [],
              h,
              i;
            for (i = 0; i < f; i++)
              (h = d.rowXs.slice(i, i + e)), (g[i] = Math.max.apply(Math, h));
            c._masonryHorizontalPlaceBrick(a, g);
          }
        });
      },
      _masonryHorizontalPlaceBrick: function (a, b) {
        var c = Math.min.apply(Math, b),
          d = 0;
        for (var e = 0, f = b.length; e < f; e++)
          if (b[e] === c) {
            d = e;
            break;
          }
        var g = c,
          h = this.masonryHorizontal.rowHeight * d;
        this._pushPosition(a, g, h);
        var i = c + a.outerWidth(!0),
          j = this.masonryHorizontal.rows + 1 - f;
        for (e = 0; e < j; e++) this.masonryHorizontal.rowXs[d + e] = i;
      },
      _masonryHorizontalGetContainerSize: function () {
        var a = Math.max.apply(Math, this.masonryHorizontal.rowXs);
        return { width: a };
      },
      _masonryHorizontalResizeChanged: function () {
        return this._checkIfSegmentsChanged(!0);
      },
      _fitColumnsReset: function () {
        this.fitColumns = { x: 0, y: 0, width: 0 };
      },
      _fitColumnsLayout: function (a) {
        var c = this,
          d = this.element.height(),
          e = this.fitColumns;
        a.each(function () {
          var a = b(this),
            f = a.outerWidth(!0),
            g = a.outerHeight(!0);
          e.y !== 0 && g + e.y > d && ((e.x = e.width), (e.y = 0)),
            c._pushPosition(a, e.x, e.y),
            (e.width = Math.max(e.x + f, e.width)),
            (e.y += g);
        });
      },
      _fitColumnsGetContainerSize: function () {
        return { width: this.fitColumns.width };
      },
      _fitColumnsResizeChanged: function () {
        return !0;
      },
      _cellsByColumnReset: function () {
        (this.cellsByColumn = { index: 0 }),
          this._getSegments(),
          this._getSegments(!0);
      },
      _cellsByColumnLayout: function (a) {
        var c = this,
          d = this.cellsByColumn;
        a.each(function () {
          var a = b(this),
            e = Math.floor(d.index / d.rows),
            f = d.index % d.rows,
            g = (e + 0.5) * d.columnWidth - a.outerWidth(!0) / 2,
            h = (f + 0.5) * d.rowHeight - a.outerHeight(!0) / 2;
          c._pushPosition(a, g, h), d.index++;
        });
      },
      _cellsByColumnGetContainerSize: function () {
        return {
          width:
            Math.ceil(this.$filteredAtoms.length / this.cellsByColumn.rows) *
            this.cellsByColumn.columnWidth,
        };
      },
      _cellsByColumnResizeChanged: function () {
        return this._checkIfSegmentsChanged(!0);
      },
      _straightAcrossReset: function () {
        this.straightAcross = { x: 0 };
      },
      _straightAcrossLayout: function (a) {
        var c = this;
        a.each(function (a) {
          var d = b(this);
          c._pushPosition(d, c.straightAcross.x, 0),
            (c.straightAcross.x += d.outerWidth(!0));
        });
      },
      _straightAcrossGetContainerSize: function () {
        return { width: this.straightAcross.x };
      },
      _straightAcrossResizeChanged: function () {
        return !0;
      },
    }),
    (b.fn.imagesLoaded = function (a) {
      function h() {
        a.call(c, d);
      }
      function i(a) {
        var c = a.target;
        c.src !== f &&
          b.inArray(c, g) === -1 &&
          (g.push(c),
          --e <= 0 && (setTimeout(h), d.unbind(".imagesLoaded", i)));
      }
      var c = this,
        d = c.find("img").add(c.filter("img")),
        e = d.length,
        f =
          "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",
        g = [];
      return (
        e || h(),
        d.bind("load.imagesLoaded error.imagesLoaded", i).each(function () {
          var a = this.src;
          (this.src = f), (this.src = a);
        }),
        c
      );
    });
  var x = function (b) {
    a.console && a.console.error(b);
  };
  b.fn.isotope = function (a, c) {
    if (typeof a == "string") {
      var d = Array.prototype.slice.call(arguments, 1);
      this.each(function () {
        var c = b.data(this, "isotope");
        if (!c) {
          x(
            "cannot call methods on isotope prior to initialization; attempted to call method '" +
              a +
              "'"
          );
          return;
        }
        if (!b.isFunction(c[a]) || a.charAt(0) === "_") {
          x("no such method '" + a + "' for isotope instance");
          return;
        }
        c[a].apply(c, d);
      });
    } else
      this.each(function () {
        var d = b.data(this, "isotope");
        d
          ? (d.option(a), d._init(c))
          : b.data(this, "isotope", new b.Isotope(a, this, c));
      });
    return this;
  };
})(window, $jq18);
/********************************************/
/*Revisions*/
/*#27717 to change image button onto css */
/********************************************/

//
jQuery(document).ready(function () {
  jQuery(".comment-wrapper #edit-submit").val("POST COMMENT");
});

jQuery(document).ready(function () {
  jQuery(".merchBuyLink").text("BUY NOW");
});

//

/************************************************************************/
/******** ===[ NAMESPACE PATTERN - STOYAN'S PATTERN ]=== *************************/

var WMG = WMG || {};

WMG.namespace = function (ns_string) {
  var parts = ns_string.split(".");
  var parent = WMG;
  if (parts[0] === "WMG") {
    parts = parts.slice(1);
  }
  for (var i = 0, pLen = parts.length; i < pLen; i += 1) {
    if (typeof parent[parts[i]] === "undefined") {
      parent[parts[i]] = {};
    }
    parent = parent[parts[i]];
  }
  return parent;
};

/****** ===[ BRIGHTCOVE PLAYER INSTATIATOR ]=== ***************/
/*
 * dependencies - The brightcove experiences code
 * */
var BCL = (function () {
  var player;
  var videoPlayer;
  //a reference to the videoPlayer module
  var modCon;
  var modExp;
  var config = {
    data: {
      playerID: "1654994504001",
      playerKey: "AQ~~,AAAAABRLSKk~,dbvviZzv6JWE9Hl85aCvh931v2fJvJJb",
      width: "100%",
      height: "100%",
    },
    template:
      '<div style="display:none"></div><object id="myExperience" class="BrightcoveExperience"><param name="bgcolor" value="#000000" /><param name="wmode" value="transparent" /><param name="width" value="{{width}}" /><param name="height" value="{{height}}" /><param name="playerID" value="{{playerID}}" /><param name="playerKey" value="{{playerKey}}" /><param name="isVid" value="true" /><param name="isUI" value="true" /><param name="dynamicStreaming" value="true" /><param name="@videoPlayer" value="{{videoID}}"; /><param name="templateLoadHandler" value="BCL.onTemplateLoaded"</object>',
    isPlayerAdded: false,
    container: "#block-views-video-block-1 .media-embed-wrapper",
  };

  var markup = function (html, data) {
    var m;
    var i = 0;
    var match =
      html.match(data instanceof Array ? /{{\d+}}/g : /{{\w+}}/g) || [];
    while ((m = match[i++])) {
      html = html.replace(m, data[m.substr(2, m.length - 4)]);
    }
    return html;
  };
  var loadbCovePlayer = function (myExperience) {
    //Making sure that video ID is unique, that way.
    if (typeof myExperience === "undefined") {
      return;
    }

    if (jQuery("body.msie9").length > 0) {
      var bodyelementht = jQuery(window).height();
      var bodyelementwd = jQuery(window).width();
      config.data.height = bodyelementht;
      config.data.width = bodyelementwd;
    }

    if (!config.isPlayerAdded) {
      var playerHTML = "";
      config.isPlayerAdded = true;
      config.data.videoID = myExperience;

      // populate the player object template
      playerHTML = markup(config.template, config.data);

      jQuery(config.container).html(playerHTML);
      // instantiate the player
      brightcove.createExperiences();
    } else {
      BCL.videoPlayer.loadVideo(myExperience);
    }
  };
  var onTemplateLoaded = function (experienceId) {
    player = brightcove.getExperience(experienceId);
    videoPlayer = player.getModule(APIModules.VIDEO_PLAYER);

    modExp = player.getModule(APIModules.EXPERIENCE);
    modCon = player.getModule(APIModules.CONTENT);

    modExp.addEventListener(BCExperienceEvent.CONTENT_LOAD, onContentLoad);
    modCon.addEventListener(BCContentEvent.VIDEO_LOAD, onVideoLoad);
  };
  var init = function (options) {
    options = options || {};
    jQuery.extend(true, config, options);
  };
  // event listener for the player being ready
  window.onPlayerReady = function (event) {
    BCL.videoPlayer.play(true);
  };
  return {
    init: init,
    player: player,
    videoPlayer: videoPlayer,
    onTemplateLoaded: onTemplateLoaded,
    loadbCovePlayer: loadbCovePlayer,
  };
})();
/************************************************************************/

/****** ===[ USER AGENT ]=== ***************/
WMG.namespace("userAgent");
WMG.userAgent = (function () {
  var os = "other";
  var isMobile = false;
  if (/iPhone|iPod|iPad/i.test(navigator.userAgent)) {
    os = "iOS";
    isMobile = true;
  }
  if (/Android/i.test(navigator.userAgent)) {
    os = "Android";
    isMobile = true;
  }
  return {
    os: os,
    isMobile: isMobile,
  };
})();
/************************************************************************/ /*
 *
 * Global Header, Helper and Utility functions
 * version 1
 */

var comment_char_limit = 2000;
var comment_blur_text = "";
var comment_submit_hint_text = "Please enter text to post comment";
var can_post_comment = false;

var wmgConditions = {
  hasBodyClass: function (__class) {
    return jQuery("body").hasClass(__class);
  },
};

function get_relative_path() {
  var loc = document.location.href;
  var tmp = loc.substring(loc.indexOf("//") + 2);
  tmp = tmp.substring(tmp.indexOf("/") + 1);

  return tmp.split("?")[0];
}

function get_url_args(url) {
  var path = url || get_relative_path();

  return path.split("/");
}

function get_url_regexp_val(mapper) {
  var regexpMap = {
    // Sections
    blogSection: "(blog|news|updates)(/.*)?",
    videoSection: "video(/.*)?",
    photoSection: "photo(/.*)?",
    musicSection: "music(/.*)?",
    albumSection: "album(/.*)?",
    discussionSection: "forum(/.*)?",
    tourSection: "tour(/.*)?",

    // Unique Pages
    blogLanding: "(blog|news|updates)",
    blogDetail: "(blog|news|updates)/[sS]*",
    blogCategory: "(blog|news|updates)/category/[sS]*",
    videoLanding: "video",
    videoDetail: "video/[sS]*",
    videoCategory: "video/category/[sS]*",
    photoLanding: "photo",
    photoDetail: "photo/[sS]*",
    photoCategory: "photo/category/[sS]*",
    musicLanding: "album",
    trackDetail: "music/[sS]*",
    albumDetail: "album/[sS]*",
    toursUpcomingLanding: "tour",
    toursUpcomingDetail: "tour/[sS]*",
    toursArchiveLanding: "tour-archives",
    toursArchiveDetail: "tour-archives/[sS]*",
    communityLanding: "(community|community-landing)",
    discussionsLanding: "(forum|discussion|forums|discussions|talk)",
    discussionDetail: "(forum|discussion|forums|discussions|talk)/[sS]*",
    discussionCategory:
      "(forum|discussion|forums|discussions|talk)/category/[sS]*",
    memberLanding: "member",
    memberDetail: "(member|user)(/|)[sS]*",
    editProfile: "user/[sS]*/edit-profile",
    editAccount: "user/[sS]*/edit",
    upload: "upload",
    login: "user/login",
    resetPassword: "user/(reset|password)[sS]*",
    about: "about",
    contactUs: "contact-us",
    searchSection: "search-landing",
    pageNotFound: {
      func: wmgConditions.hasBodyClass,
      pars: ["page-node-1191"],
    },
    twitterSection: "twitter",
  };

  var path = url_q || get_relative_path();
  path = path || "home";

  for (var pattern in mapper) {
    if (typeof regexpMap[pattern] == "object") {
      if (regexpMap[pattern].func.apply({}, regexpMap[pattern].pars)) {
        return mapper[pattern];
      }
    } else {
      var re = new RegExp("^" + regexpMap[pattern] + "$", "ig");
      if (re.test(path)) {
        return mapper[pattern];
      }
    }
  }

  return null;
}

function set_active_parent_link() {
  var defaultLinksMap = {
    blogSection: "blog",
    videoSection: "video",
    photoSection: "photo",
    musicSection: "music",
    albumSection: "music",
    memberLanding: "community",
    discussionSection: "forum",
  };

  WMG.parentLinksMap = WMG.parentLinksMap || {};
  var parentLinks = jQuery.extend(defaultLinksMap, WMG.parentLinksMap);

  var parentLink = get_url_regexp_val(parentLinks);

  if (parentLink) {
    var active_link = jQuery(
      '#block-system-main-menu ul li a[href="/' + parentLink + '"]'
    );
    active_link.addClass("active").parents("li").find("> a").addClass("active");
  }
}

function set_section_title() {
  var defaultTitlesMap = {
    blogSection: "Blog",
    videoSection: "Videos",
    photoSection: "Photos",
    musicSection: "Music",
    albumSection: "Albums",
    tourSection: "Tour Dates",
    about: "Bio",
    communityLanding: "Community",
    discussionSection: "Discussion",
    searchSection: "Search Results",
    contactUs: "Contact Us",
    memberLanding: "Fans",
    pageNotFound: "- Page Not Found",
    twitterSection: "Twitter",
  };

  WMG.sectionTitlesMap = WMG.sectionTitlesMap || {};
  var sectionTitles = jQuery.extend(defaultTitlesMap, WMG.sectionTitlesMap);

  var sectionTitle = get_url_regexp_val(sectionTitles);

  if (sectionTitle) {
    var section_title = "";

    if (typeof sectionTitle == "object") {
      section_title =
        (sectionTitle.use_artist ? WMG.artistname : "") +
        " " +
        sectionTitle.title;
    } else {
      section_title = WMG.artistname + " " + sectionTitle;
    }

    jQuery("#page-section-title h2").html(section_title);
  }
}

/* Utility functions */
function _includeJS(path) {
  var headID = document.getElementsByTagName("head")[0];
  var newJs = document.createElement("script");
  newJs.src = path;
  newJs.type = "text/javascript";
  headID.appendChild(newJs);
}

function countChar(val) {
  //dont check for blur text
  //if (val.value == comment_blur_text) return;

  var len = val.value.length;

  if (len > comment_char_limit) {
    val.value = val.value.substring(0, comment_char_limit);
  } else {
    jQuery("#charNum span").text(comment_char_limit - len);
  }
  if (len < 1 || val.value.replace(/\s+/g, "").length < 1) {
    can_post_comment = false;
    /*changed for including profile page*/
    jQuery(".comment-form input[id^=edit-submit]").attr("disabled", "disabled");
    jQuery(".comment-form input[id^=edit-submit]").css("opacity", "0.5");
    jQuery(".comment-form input[id^=edit-submit]").attr(
      "title",
      comment_submit_hint_text
    );
  } else {
    can_post_comment = true;
    jQuery(".comment-form input[id^=edit-submit]").attr("title", "");
    jQuery(".comment-form input[id^=edit-submit]").removeAttr("disabled");
    jQuery(".comment-form input[id^=edit-submit]").css("opacity", "1.0");
  }
}

var googleCSEWatermark = function ($id) {
  var f = document.getElementById($id);
  if (f && (f.query || f.q || f["edit-keys"])) {
    var q = f.query ? f.query : f.q ? f.q : f["edit-keys"];
    var n = navigator;
    var l = location;
    if (n.platform == "Win32") {
      q.style.cssText = "border: 1px solid #7e9db9; padding: 2px;";
    }
    var b = function () {
      if (q.value == "") {
        q.style.background =
          "#FFFFFF url(http://www.google.com/coop/intl/en/images/google_custom_search_watermark.gif) left no-repeat";
      }
    };
    var f = function () {
      q.style.background = "#ffffff";
    };
    q.onfocus = f;
    q.onblur = b;
    if (!/[&?]query=[^&]/.test(l.search)) {
      b();
    }
  }
};

/*jQuery.fn.scrollToViewPort = function(options) {
  var options = options || {};
  var animTimeInterval = (typeof options.interval == "undefined")?"slow":animTimeInterval;
  return this.each(function(){
    var offSet = (typeof options.offset == "undefined")? jQuery(this).offset().top : options.offset;
    //if( jQuery(this).offset().top <= jQuery(window).scrollTop() || ( jQuery(this).offset().top + jQuery(this).height() ) >= ( jQuery(window).scrollTop() + jQuery(window).height() ) ){
      jQuery('html,body').animate( { scrollTop: offSet }, animTimeInterval );
    //}
  });
}*/

jQuery.fn.scrollToViewPort = function (animTimeInterval) {
  animTimeInterval =
    typeof animTimeInterval == "undefined" ? "slow" : animTimeInterval;
  return this.each(function () {
    jQuery("html,body").animate(
      { scrollTop: jQuery(this).offset().top },
      animTimeInterval
    );
  });
};

jQuery.urlParam = function (name) {
  var results = new RegExp("[\\?&]" + name + "=([^&#]*)").exec(
    window.location.href
  );
  if (results == null) {
    return 0;
  } else {
    return results[1];
  }
};

// Script out of doc ready block, so we can do something facter or before events attachment
// define global vars
var url_q = get_relative_path();
var url_args = get_url_args(url_q);
var page_section_title = "Site";
/* Modernizr 2.6.2 (Custom Build) | MIT & BSD
 * Build: http://modernizr.com/download/#-touch-shiv-mq-cssclasses-teststyles-prefixes-load
 */
(window.Modernizr = (function (a, b, c) {
  function x(a) {
    j.cssText = a;
  }
  function y(a, b) {
    return x(m.join(a + ";") + (b || ""));
  }
  function z(a, b) {
    return typeof a === b;
  }
  function A(a, b) {
    return !!~("" + a).indexOf(b);
  }
  function B(a, b, d) {
    for (var e in a) {
      var f = b[a[e]];
      if (f !== c)
        return d === !1 ? a[e] : z(f, "function") ? f.bind(d || b) : f;
    }
    return !1;
  }
  var d = "2.6.2",
    e = {},
    f = !0,
    g = b.documentElement,
    h = "modernizr",
    i = b.createElement(h),
    j = i.style,
    k,
    l = {}.toString,
    m = " -webkit- -moz- -o- -ms- ".split(" "),
    n = {},
    o = {},
    p = {},
    q = [],
    r = q.slice,
    s,
    t = function (a, c, d, e) {
      var f,
        i,
        j,
        k,
        l = b.createElement("div"),
        m = b.body,
        n = m || b.createElement("body");
      if (parseInt(d, 10))
        while (d--)
          (j = b.createElement("div")),
            (j.id = e ? e[d] : h + (d + 1)),
            l.appendChild(j);
      return (
        (f = ["&#173;", '<style id="s', h, '">', a, "</style>"].join("")),
        (l.id = h),
        ((m ? l : n).innerHTML += f),
        n.appendChild(l),
        m ||
          ((n.style.background = ""),
          (n.style.overflow = "hidden"),
          (k = g.style.overflow),
          (g.style.overflow = "hidden"),
          g.appendChild(n)),
        (i = c(l, a)),
        m
          ? l.parentNode.removeChild(l)
          : (n.parentNode.removeChild(n), (g.style.overflow = k)),
        !!i
      );
    },
    u = function (b) {
      var c = a.matchMedia || a.msMatchMedia;
      if (c) return c(b).matches;
      var d;
      return (
        t("@media " + b + " { #" + h + " { position: absolute; } }", function (
          b
        ) {
          d =
            (a.getComputedStyle ? getComputedStyle(b, null) : b.currentStyle)[
              "position"
            ] == "absolute";
        }),
        d
      );
    },
    v = {}.hasOwnProperty,
    w;
  !z(v, "undefined") && !z(v.call, "undefined")
    ? (w = function (a, b) {
        return v.call(a, b);
      })
    : (w = function (a, b) {
        return b in a && z(a.constructor.prototype[b], "undefined");
      }),
    Function.prototype.bind ||
      (Function.prototype.bind = function (b) {
        var c = this;
        if (typeof c != "function") throw new TypeError();
        var d = r.call(arguments, 1),
          e = function () {
            if (this instanceof e) {
              var a = function () {};
              a.prototype = c.prototype;
              var f = new a(),
                g = c.apply(f, d.concat(r.call(arguments)));
              return Object(g) === g ? g : f;
            }
            return c.apply(b, d.concat(r.call(arguments)));
          };
        return e;
      }),
    (n.touch = function () {
      var c;
      return (
        "ontouchstart" in a || (a.DocumentTouch && b instanceof DocumentTouch)
          ? (c = !0)
          : t(
              [
                "@media (",
                m.join("touch-enabled),("),
                h,
                ")",
                "{#modernizr{top:9px;position:absolute}}",
              ].join(""),
              function (a) {
                c = a.offsetTop === 9;
              }
            ),
        c
      );
    });
  for (var C in n)
    w(n, C) &&
      ((s = C.toLowerCase()), (e[s] = n[C]()), q.push((e[s] ? "" : "no-") + s));
  return (
    (e.addTest = function (a, b) {
      if (typeof a == "object") for (var d in a) w(a, d) && e.addTest(d, a[d]);
      else {
        a = a.toLowerCase();
        if (e[a] !== c) return e;
        (b = typeof b == "function" ? b() : b),
          typeof f != "undefined" &&
            f &&
            (g.className += " " + (b ? "" : "no-") + a),
          (e[a] = b);
      }
      return e;
    }),
    x(""),
    (i = k = null),
    (function (a, b) {
      function k(a, b) {
        var c = a.createElement("p"),
          d = a.getElementsByTagName("head")[0] || a.documentElement;
        return (
          (c.innerHTML = "x<style>" + b + "</style>"),
          d.insertBefore(c.lastChild, d.firstChild)
        );
      }
      function l() {
        var a = r.elements;
        return typeof a == "string" ? a.split(" ") : a;
      }
      function m(a) {
        var b = i[a[g]];
        return b || ((b = {}), h++, (a[g] = h), (i[h] = b)), b;
      }
      function n(a, c, f) {
        c || (c = b);
        if (j) return c.createElement(a);
        f || (f = m(c));
        var g;
        return (
          f.cache[a]
            ? (g = f.cache[a].cloneNode())
            : e.test(a)
            ? (g = (f.cache[a] = f.createElem(a)).cloneNode())
            : (g = f.createElem(a)),
          g.canHaveChildren && !d.test(a) ? f.frag.appendChild(g) : g
        );
      }
      function o(a, c) {
        a || (a = b);
        if (j) return a.createDocumentFragment();
        c = c || m(a);
        var d = c.frag.cloneNode(),
          e = 0,
          f = l(),
          g = f.length;
        for (; e < g; e++) d.createElement(f[e]);
        return d;
      }
      function p(a, b) {
        b.cache ||
          ((b.cache = {}),
          (b.createElem = a.createElement),
          (b.createFrag = a.createDocumentFragment),
          (b.frag = b.createFrag())),
          (a.createElement = function (c) {
            return r.shivMethods ? n(c, a, b) : b.createElem(c);
          }),
          (a.createDocumentFragment = Function(
            "h,f",
            "return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&(" +
              l()
                .join()
                .replace(/\w+/g, function (a) {
                  return (
                    b.createElem(a), b.frag.createElement(a), 'c("' + a + '")'
                  );
                }) +
              ");return n}"
          )(r, b.frag));
      }
      function q(a) {
        a || (a = b);
        var c = m(a);
        return (
          r.shivCSS &&
            !f &&
            !c.hasCSS &&
            (c.hasCSS = !!k(
              a,
              "article,aside,figcaption,figure,footer,header,hgroup,nav,section{display:block}mark{background:#FF0;color:#000}"
            )),
          j || p(a, c),
          a
        );
      }
      var c = a.html5 || {},
        d = /^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,
        e = /^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,
        f,
        g = "_html5shiv",
        h = 0,
        i = {},
        j;
      (function () {
        try {
          var a = b.createElement("a");
          (a.innerHTML = "<xyz></xyz>"),
            (f = "hidden" in a),
            (j =
              a.childNodes.length == 1 ||
              (function () {
                b.createElement("a");
                var a = b.createDocumentFragment();
                return (
                  typeof a.cloneNode == "undefined" ||
                  typeof a.createDocumentFragment == "undefined" ||
                  typeof a.createElement == "undefined"
                );
              })());
        } catch (c) {
          (f = !0), (j = !0);
        }
      })();
      var r = {
        elements:
          c.elements ||
          "abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video",
        shivCSS: c.shivCSS !== !1,
        supportsUnknownElements: j,
        shivMethods: c.shivMethods !== !1,
        type: "default",
        shivDocument: q,
        createElement: n,
        createDocumentFragment: o,
      };
      (a.html5 = r), q(b);
    })(this, b),
    (e._version = d),
    (e._prefixes = m),
    (e.mq = u),
    (e.testStyles = t),
    (g.className =
      g.className.replace(/(^|\s)no-js(\s|$)/, "$1$2") +
      (f ? " js " + q.join(" ") : "")),
    e
  );
})(this, this.document)),
  (function (a, b, c) {
    function d(a) {
      return "[object Function]" == o.call(a);
    }
    function e(a) {
      return "string" == typeof a;
    }
    function f() {}
    function g(a) {
      return !a || "loaded" == a || "complete" == a || "uninitialized" == a;
    }
    function h() {
      var a = p.shift();
      (q = 1),
        a
          ? a.t
            ? m(function () {
                ("c" == a.t
                  ? B.injectCss
                  : B.injectJs)(a.s, 0, a.a, a.x, a.e, 1);
              }, 0)
            : (a(), h())
          : (q = 0);
    }
    function i(a, c, d, e, f, i, j) {
      function k(b) {
        if (
          !o &&
          g(l.readyState) &&
          ((u.r = o = 1),
          !q && h(),
          (l.onload = l.onreadystatechange = null),
          b)
        ) {
          "img" != a &&
            m(function () {
              t.removeChild(l);
            }, 50);
          for (var d in y[c]) y[c].hasOwnProperty(d) && y[c][d].onload();
        }
      }
      var j = j || B.errorTimeout,
        l = b.createElement(a),
        o = 0,
        r = 0,
        u = { t: d, s: c, e: f, a: i, x: j };
      1 === y[c] && ((r = 1), (y[c] = [])),
        "object" == a ? (l.data = c) : ((l.src = c), (l.type = a)),
        (l.width = l.height = "0"),
        (l.onerror = l.onload = l.onreadystatechange = function () {
          k.call(this, r);
        }),
        p.splice(e, 0, u),
        "img" != a &&
          (r || 2 === y[c]
            ? (t.insertBefore(l, s ? null : n), m(k, j))
            : y[c].push(l));
    }
    function j(a, b, c, d, f) {
      return (
        (q = 0),
        (b = b || "j"),
        e(a)
          ? i("c" == b ? v : u, a, b, this.i++, c, d, f)
          : (p.splice(this.i++, 0, a), 1 == p.length && h()),
        this
      );
    }
    function k() {
      var a = B;
      return (a.loader = { load: j, i: 0 }), a;
    }
    var l = b.documentElement,
      m = a.setTimeout,
      n = b.getElementsByTagName("script")[0],
      o = {}.toString,
      p = [],
      q = 0,
      r = "MozAppearance" in l.style,
      s = r && !!b.createRange().compareNode,
      t = s ? l : n.parentNode,
      l = a.opera && "[object Opera]" == o.call(a.opera),
      l = !!b.attachEvent && !l,
      u = r ? "object" : l ? "script" : "img",
      v = l ? "script" : u,
      w =
        Array.isArray ||
        function (a) {
          return "[object Array]" == o.call(a);
        },
      x = [],
      y = {},
      z = {
        timeout: function (a, b) {
          return b.length && (a.timeout = b[0]), a;
        },
      },
      A,
      B;
    (B = function (a) {
      function b(a) {
        var a = a.split("!"),
          b = x.length,
          c = a.pop(),
          d = a.length,
          c = { url: c, origUrl: c, prefixes: a },
          e,
          f,
          g;
        for (f = 0; f < d; f++)
          (g = a[f].split("=")), (e = z[g.shift()]) && (c = e(c, g));
        for (f = 0; f < b; f++) c = x[f](c);
        return c;
      }
      function g(a, e, f, g, h) {
        var i = b(a),
          j = i.autoCallback;
        i.url.split(".").pop().split("?").shift(),
          i.bypass ||
            (e &&
              (e = d(e)
                ? e
                : e[a] || e[g] || e[a.split("/").pop().split("?")[0]]),
            i.instead
              ? i.instead(a, e, f, g, h)
              : (y[i.url] ? (i.noexec = !0) : (y[i.url] = 1),
                f.load(
                  i.url,
                  i.forceCSS ||
                    (!i.forceJS &&
                      "css" == i.url.split(".").pop().split("?").shift())
                    ? "c"
                    : c,
                  i.noexec,
                  i.attrs,
                  i.timeout
                ),
                (d(e) || d(j)) &&
                  f.load(function () {
                    k(),
                      e && e(i.origUrl, h, g),
                      j && j(i.origUrl, h, g),
                      (y[i.url] = 2);
                  })));
      }
      function h(a, b) {
        function c(a, c) {
          if (a) {
            if (e(a))
              c ||
                (j = function () {
                  var a = [].slice.call(arguments);
                  k.apply(this, a), l();
                }),
                g(a, j, b, 0, h);
            else if (Object(a) === a)
              for (n in ((m = (function () {
                var b = 0,
                  c;
                for (c in a) a.hasOwnProperty(c) && b++;
                return b;
              })()),
              a))
                a.hasOwnProperty(n) &&
                  (!c &&
                    !--m &&
                    (d(j)
                      ? (j = function () {
                          var a = [].slice.call(arguments);
                          k.apply(this, a), l();
                        })
                      : (j[n] = (function (a) {
                          return function () {
                            var b = [].slice.call(arguments);
                            a && a.apply(this, b), l();
                          };
                        })(k[n]))),
                  g(a[n], j, b, n, h));
          } else !c && l();
        }
        var h = !!a.test,
          i = a.load || a.both,
          j = a.callback || f,
          k = j,
          l = a.complete || f,
          m,
          n;
        c(h ? a.yep : a.nope, !!i), i && c(i);
      }
      var i,
        j,
        l = this.yepnope.loader;
      if (e(a)) g(a, 0, l, 0);
      else if (w(a))
        for (i = 0; i < a.length; i++)
          (j = a[i]),
            e(j) ? g(j, 0, l, 0) : w(j) ? B(j) : Object(j) === j && h(j, l);
      else Object(a) === a && h(a, l);
    }),
      (B.addPrefix = function (a, b) {
        z[a] = b;
      }),
      (B.addFilter = function (a) {
        x.push(a);
      }),
      (B.errorTimeout = 1e4),
      null == b.readyState &&
        b.addEventListener &&
        ((b.readyState = "loading"),
        b.addEventListener(
          "DOMContentLoaded",
          (A = function () {
            b.removeEventListener("DOMContentLoaded", A, 0),
              (b.readyState = "complete");
          }),
          0
        )),
      (a.yepnope = k()),
      (a.yepnope.executeStack = h),
      (a.yepnope.injectJs = function (a, c, d, e, i, j) {
        var k = b.createElement("script"),
          l,
          o,
          e = e || B.errorTimeout;
        k.src = a;
        for (o in d) k.setAttribute(o, d[o]);
        (c = j ? h : c || f),
          (k.onreadystatechange = k.onload = function () {
            !l &&
              g(k.readyState) &&
              ((l = 1), c(), (k.onload = k.onreadystatechange = null));
          }),
          m(function () {
            l || ((l = 1), c(1));
          }, e),
          i ? k.onload() : n.parentNode.insertBefore(k, n);
      }),
      (a.yepnope.injectCss = function (a, c, d, e, g, i) {
        var e = b.createElement("link"),
          j,
          c = i ? h : c || f;
        (e.href = a), (e.rel = "stylesheet"), (e.type = "text/css");
        for (j in d) e.setAttribute(j, d[j]);
        g || (n.parentNode.insertBefore(e, n), m(c, 0));
      });
  })(this, document),
  (Modernizr.load = function () {
    yepnope.apply(window, [].slice.call(arguments, 0));
  });
if (typeof Object.create !== "function") {
  Object.create = function (obj) {
    function F() {}
    F.prototype = obj;
    return new F();
  };
}

(function ($, window, document, undefined) {
  var ImageCacheChange = {
    init: function (options, elem) {
      var self = this;
      self.elem = elem;
      self.$elem = $(elem);
      self.imageURL = self.$elem.attr("src");

      /* Merge custom options with defaults */
      self.options = $.extend({}, $.fn.imgReplace.options, options);

      self.modifyURL();
    },

    modifyURL: function () {
      var self = this;
      var modifiedURL = "",
        imageStyleString = "",
        filesPos = "",
        lastSlashPos = "";
      var stylePattern = /\/styles\/([^\/]*)\//i;
      var stylePattArr = self.imageURL.match(stylePattern) || [];

      if (self.options.original) {
        /* Restore original images */
        filesPos = self.imageURL.indexOf("/styles");
        if (filesPos > 0) {
          imageStyleString = "/styles/" + stylePattArr[1] + "/public";
          lastSlashPos = filesPos + imageStyleString.length;
          modifiedURL =
            self.imageURL.substr(0, filesPos) +
            self.imageURL.substring(lastSlashPos);
        }
      } else if (
        stylePattArr === null ||
        typeof stylePattArr[1] === "undefined"
      ) {
        /* Replace with image cache */
        lastSlashPos = self.imageURL.indexOf("/files") + 6;
        modifiedURL =
          self.imageURL.substr(0, lastSlashPos) +
          "/styles/" +
          self.options.imageStyle +
          "/public" +
          self.imageURL.substring(lastSlashPos);
      } else {
        /* edge case */
        modifiedURL = self.imageURL.replace(
          stylePattArr[1],
          self.options.imageStyle
        );
      }

      if (modifiedURL != "") {
        if (self.imageURL.indexOf("?") > 0) {
          self.$elem.attr("src", modifiedURL);
        }
      }
    },
  };

  $.fn.imgReplace = function (options) {
    return this.each(function () {
      var imageCacheChange = Object.create(ImageCacheChange);
      imageCacheChange.init(options, this);

      $.data(this, "imgReplace", imageCacheChange);
    });
  };

  $.fn.imgReplace.options = {
    original: false,
    imageStyle: "onepage_photo_320",
  };
})(jQuery, window, document);
(function (e) {
  e.flexslider = function (t, n) {
    var r = e(t);
    r.vars = e.extend({}, e.flexslider.defaults, n);
    var i = r.vars.namespace,
      s =
        window.navigator &&
        window.navigator.msPointerEnabled &&
        window.MSGesture,
      o =
        ("ontouchstart" in window ||
          s ||
          (window.DocumentTouch && document instanceof DocumentTouch)) &&
        r.vars.touch,
      u = "click touchend MSPointerUp keyup",
      a = "",
      f,
      l = r.vars.direction === "vertical",
      c = r.vars.reverse,
      h = r.vars.itemWidth > 0,
      p = r.vars.animation === "fade",
      d = r.vars.asNavFor !== "",
      v = {},
      m = true;
    e.data(t, "flexslider", r);
    v = {
      init: function () {
        r.animating = false;
        r.currentSlide = parseInt(r.vars.startAt ? r.vars.startAt : 0, 10);
        if (isNaN(r.currentSlide)) r.currentSlide = 0;
        r.animatingTo = r.currentSlide;
        r.atEnd = r.currentSlide === 0 || r.currentSlide === r.last;
        r.containerSelector = r.vars.selector.substr(
          0,
          r.vars.selector.search(" ")
        );
        r.slides = e(r.vars.selector, r);
        r.container = e(r.containerSelector, r);
        r.count = r.slides.length;
        r.syncExists = e(r.vars.sync).length > 0;
        if (r.vars.animation === "slide") r.vars.animation = "swing";
        r.prop = l ? "top" : "marginLeft";
        r.args = {};
        r.manualPause = false;
        r.stopped = false;
        r.started = false;
        r.startTimeout = null;
        r.transitions =
          !r.vars.video &&
          !p &&
          r.vars.useCSS &&
          (function () {
            var e = document.createElement("div"),
              t = [
                "perspectiveProperty",
                "WebkitPerspective",
                "MozPerspective",
                "OPerspective",
                "msPerspective",
              ];
            for (var n in t) {
              if (e.style[t[n]] !== undefined) {
                r.pfx = t[n].replace("Perspective", "").toLowerCase();
                r.prop = "-" + r.pfx + "-transform";
                return true;
              }
            }
            return false;
          })();
        r.ensureAnimationEnd = "";
        if (r.vars.controlsContainer !== "")
          r.controlsContainer =
            e(r.vars.controlsContainer).length > 0 &&
            e(r.vars.controlsContainer);
        if (r.vars.manualControls !== "")
          r.manualControls =
            e(r.vars.manualControls).length > 0 && e(r.vars.manualControls);
        if (r.vars.randomize) {
          r.slides.sort(function () {
            return Math.round(Math.random()) - 0.5;
          });
          r.container.empty().append(r.slides);
        }
        r.doMath();
        r.setup("init");
        if (r.vars.controlNav) v.controlNav.setup();
        if (r.vars.directionNav) v.directionNav.setup();
        if (
          r.vars.keyboard &&
          (e(r.containerSelector).length === 1 || r.vars.multipleKeyboard)
        ) {
          e(document).bind("keyup", function (e) {
            var t = e.keyCode;
            if (!r.animating && (t === 39 || t === 37)) {
              var n =
                t === 39
                  ? r.getTarget("next")
                  : t === 37
                  ? r.getTarget("prev")
                  : false;
              r.flexAnimate(n, r.vars.pauseOnAction);
            }
          });
        }
        if (r.vars.mousewheel) {
          r.bind("mousewheel", function (e, t, n, i) {
            e.preventDefault();
            var s = t < 0 ? r.getTarget("next") : r.getTarget("prev");
            r.flexAnimate(s, r.vars.pauseOnAction);
          });
        }
        if (r.vars.pausePlay) v.pausePlay.setup();
        if (r.vars.slideshow && r.vars.pauseInvisible) v.pauseInvisible.init();
        if (r.vars.slideshow) {
          if (r.vars.pauseOnHover) {
            r.hover(
              function () {
                if (!r.manualPlay && !r.manualPause) r.pause();
              },
              function () {
                if (!r.manualPause && !r.manualPlay && !r.stopped) r.play();
              }
            );
          }
          if (!r.vars.pauseInvisible || !v.pauseInvisible.isHidden()) {
            r.vars.initDelay > 0
              ? (r.startTimeout = setTimeout(r.play, r.vars.initDelay))
              : r.play();
          }
        }
        if (d) v.asNav.setup();
        if (o && r.vars.touch) v.touch();
        if (!p || (p && r.vars.smoothHeight))
          e(window).bind("resize orientationchange focus", v.resize);
        r.find("img").attr("draggable", "false");
        setTimeout(function () {
          r.vars.start(r);
        }, 200);
      },
      asNav: {
        setup: function () {
          r.asNav = true;
          r.animatingTo = Math.floor(r.currentSlide / r.move);
          r.currentItem = r.currentSlide;
          r.slides
            .removeClass(i + "active-slide")
            .eq(r.currentItem)
            .addClass(i + "active-slide");
          if (!s) {
            r.slides.on(u, function (t) {
              t.preventDefault();
              var n = e(this),
                s = n.index();
              var o = n.offset().left - e(r).scrollLeft();
              if (o <= 0 && n.hasClass(i + "active-slide")) {
                r.flexAnimate(r.getTarget("prev"), true);
              } else if (
                !e(r.vars.asNavFor).data("flexslider").animating &&
                !n.hasClass(i + "active-slide")
              ) {
                r.direction = r.currentItem < s ? "next" : "prev";
                r.flexAnimate(s, r.vars.pauseOnAction, false, true, true);
              }
            });
          } else {
            t._slider = r;
            r.slides.each(function () {
              var t = this;
              t._gesture = new MSGesture();
              t._gesture.target = t;
              t.addEventListener(
                "MSPointerDown",
                function (e) {
                  e.preventDefault();
                  if (e.currentTarget._gesture)
                    e.currentTarget._gesture.addPointer(e.pointerId);
                },
                false
              );
              t.addEventListener("MSGestureTap", function (t) {
                t.preventDefault();
                var n = e(this),
                  i = n.index();
                if (
                  !e(r.vars.asNavFor).data("flexslider").animating &&
                  !n.hasClass("active")
                ) {
                  r.direction = r.currentItem < i ? "next" : "prev";
                  r.flexAnimate(i, r.vars.pauseOnAction, false, true, true);
                }
              });
            });
          }
        },
      },
      controlNav: {
        setup: function () {
          if (!r.manualControls) {
            v.controlNav.setupPaging();
          } else {
            v.controlNav.setupManual();
          }
        },
        setupPaging: function () {
          var t =
              r.vars.controlNav === "thumbnails"
                ? "control-thumbs"
                : "control-paging",
            n = 1,
            s,
            o;
          r.controlNavScaffold = e(
            '<ol class="' + i + "control-nav " + i + t + '"></ol>'
          );
          if (r.pagingCount > 1) {
            for (var f = 0; f < r.pagingCount; f++) {
              o = r.slides.eq(f);
              s =
                r.vars.controlNav === "thumbnails"
                  ? '<img src="' + o.attr("data-thumb") + '"/>'
                  : "<a>" + n + "</a>";
              if (
                "thumbnails" === r.vars.controlNav &&
                true === r.vars.thumbCaptions
              ) {
                var l = o.attr("data-thumbcaption");
                if ("" != l && undefined != l)
                  s += '<span class="' + i + 'caption">' + l + "</span>";
              }
              r.controlNavScaffold.append("<li>" + s + "</li>");
              n++;
            }
          }
          r.controlsContainer
            ? e(r.controlsContainer).append(r.controlNavScaffold)
            : r.append(r.controlNavScaffold);
          v.controlNav.set();
          v.controlNav.active();
          r.controlNavScaffold.delegate("a, img", u, function (t) {
            t.preventDefault();
            if (a === "" || a === t.type) {
              var n = e(this),
                s = r.controlNav.index(n);
              if (!n.hasClass(i + "active")) {
                r.direction = s > r.currentSlide ? "next" : "prev";
                r.flexAnimate(s, r.vars.pauseOnAction);
              }
            }
            if (a === "") {
              a = t.type;
            }
            v.setToClearWatchedEvent();
          });
        },
        setupManual: function () {
          r.controlNav = r.manualControls;
          v.controlNav.active();
          r.controlNav.bind(u, function (t) {
            t.preventDefault();
            if (a === "" || a === t.type) {
              var n = e(this),
                s = r.controlNav.index(n);
              if (!n.hasClass(i + "active")) {
                s > r.currentSlide
                  ? (r.direction = "next")
                  : (r.direction = "prev");
                r.flexAnimate(s, r.vars.pauseOnAction);
              }
            }
            if (a === "") {
              a = t.type;
            }
            v.setToClearWatchedEvent();
          });
        },
        set: function () {
          var t = r.vars.controlNav === "thumbnails" ? "img" : "a";
          r.controlNav = e(
            "." + i + "control-nav li " + t,
            r.controlsContainer ? r.controlsContainer : r
          );
        },
        active: function () {
          r.controlNav
            .removeClass(i + "active")
            .eq(r.animatingTo)
            .addClass(i + "active");
        },
        update: function (t, n) {
          if (r.pagingCount > 1 && t === "add") {
            r.controlNavScaffold.append(e("<li><a>" + r.count + "</a></li>"));
          } else if (r.pagingCount === 1) {
            r.controlNavScaffold.find("li").remove();
          } else {
            r.controlNav.eq(n).closest("li").remove();
          }
          v.controlNav.set();
          r.pagingCount > 1 && r.pagingCount !== r.controlNav.length
            ? r.update(n, t)
            : v.controlNav.active();
        },
      },
      directionNav: {
        setup: function () {
          var t = e(
            '<ul class="' +
              i +
              'direction-nav"><li><a class="' +
              i +
              'prev" href="#">' +
              r.vars.prevText +
              '</a></li><li><a class="' +
              i +
              'next" href="#">' +
              r.vars.nextText +
              "</a></li></ul>"
          );
          if (r.controlsContainer) {
            e(r.controlsContainer).append(t);
            r.directionNav = e(
              "." + i + "direction-nav li a",
              r.controlsContainer
            );
          } else {
            r.append(t);
            r.directionNav = e("." + i + "direction-nav li a", r);
          }
          v.directionNav.update();
          r.directionNav.bind(u, function (t) {
            t.preventDefault();
            var n;
            if (a === "" || a === t.type) {
              n = e(this).hasClass(i + "next")
                ? r.getTarget("next")
                : r.getTarget("prev");
              r.flexAnimate(n, r.vars.pauseOnAction);
            }
            if (a === "") {
              a = t.type;
            }
            v.setToClearWatchedEvent();
          });
        },
        update: function () {
          var e = i + "disabled";
          if (r.pagingCount === 1) {
            r.directionNav.addClass(e).attr("tabindex", "-1");
          } else if (!r.vars.animationLoop) {
            if (r.animatingTo === 0) {
              r.directionNav
                .removeClass(e)
                .filter("." + i + "prev")
                .addClass(e)
                .attr("tabindex", "-1");
            } else if (r.animatingTo === r.last) {
              r.directionNav
                .removeClass(e)
                .filter("." + i + "next")
                .addClass(e)
                .attr("tabindex", "-1");
            } else {
              r.directionNav.removeClass(e).removeAttr("tabindex");
            }
          } else {
            r.directionNav.removeClass(e).removeAttr("tabindex");
          }
        },
      },
      pausePlay: {
        setup: function () {
          var t = e('<div class="' + i + 'pauseplay"><a></a></div>');
          if (r.controlsContainer) {
            r.controlsContainer.append(t);
            r.pausePlay = e("." + i + "pauseplay a", r.controlsContainer);
          } else {
            r.append(t);
            r.pausePlay = e("." + i + "pauseplay a", r);
          }
          v.pausePlay.update(r.vars.slideshow ? i + "pause" : i + "play");
          r.pausePlay.bind(u, function (t) {
            t.preventDefault();
            if (a === "" || a === t.type) {
              if (e(this).hasClass(i + "pause")) {
                r.manualPause = true;
                r.manualPlay = false;
                r.pause();
              } else {
                r.manualPause = false;
                r.manualPlay = true;
                r.play();
              }
            }
            if (a === "") {
              a = t.type;
            }
            v.setToClearWatchedEvent();
          });
        },
        update: function (e) {
          e === "play"
            ? r.pausePlay
                .removeClass(i + "pause")
                .addClass(i + "play")
                .html(r.vars.playText)
            : r.pausePlay
                .removeClass(i + "play")
                .addClass(i + "pause")
                .html(r.vars.pauseText);
        },
      },
      touch: function () {
        var e,
          n,
          i,
          o,
          u,
          a,
          f = false,
          d = 0,
          v = 0,
          m = 0;
        if (!s) {
          t.addEventListener("touchstart", g, false);
          function g(s) {
            if (r.animating) {
              s.preventDefault();
            } else if (
              window.navigator.msPointerEnabled ||
              s.touches.length === 1
            ) {
              r.pause();
              o = l ? r.h : r.w;
              a = Number(new Date());
              d = s.touches[0].pageX;
              v = s.touches[0].pageY;
              i =
                h && c && r.animatingTo === r.last
                  ? 0
                  : h && c
                  ? r.limit -
                    (r.itemW + r.vars.itemMargin) * r.move * r.animatingTo
                  : h && r.currentSlide === r.last
                  ? r.limit
                  : h
                  ? (r.itemW + r.vars.itemMargin) * r.move * r.currentSlide
                  : c
                  ? (r.last - r.currentSlide + r.cloneOffset) * o
                  : (r.currentSlide + r.cloneOffset) * o;
              e = l ? v : d;
              n = l ? d : v;
              t.addEventListener("touchmove", y, false);
              t.addEventListener("touchend", b, false);
            }
          }
          function y(t) {
            d = t.touches[0].pageX;
            v = t.touches[0].pageY;
            u = l ? e - v : e - d;
            f = l
              ? Math.abs(u) < Math.abs(d - n)
              : Math.abs(u) < Math.abs(v - n);
            var s = 500;
            if (!f || Number(new Date()) - a > s) {
              t.preventDefault();
              if (!p && r.transitions) {
                if (!r.vars.animationLoop) {
                  u =
                    u /
                    ((r.currentSlide === 0 && u < 0) ||
                    (r.currentSlide === r.last && u > 0)
                      ? Math.abs(u) / o + 2
                      : 1);
                }
                r.setProps(i + u, "setTouch");
              }
            }
          }
          function b(s) {
            t.removeEventListener("touchmove", y, false);
            if (r.animatingTo === r.currentSlide && !f && !(u === null)) {
              var l = c ? -u : u,
                h = l > 0 ? r.getTarget("next") : r.getTarget("prev");
              if (
                r.canAdvance(h) &&
                ((Number(new Date()) - a < 550 && Math.abs(l) > 50) ||
                  Math.abs(l) > o / 2)
              ) {
                r.flexAnimate(h, r.vars.pauseOnAction);
              } else {
                if (!p)
                  r.flexAnimate(r.currentSlide, r.vars.pauseOnAction, true);
              }
            }
            t.removeEventListener("touchend", b, false);
            e = null;
            n = null;
            u = null;
            i = null;
          }
        } else {
          t.style.msTouchAction = "none";
          t._gesture = new MSGesture();
          t._gesture.target = t;
          t.addEventListener("MSPointerDown", w, false);
          t._slider = r;
          t.addEventListener("MSGestureChange", E, false);
          t.addEventListener("MSGestureEnd", S, false);
          function w(e) {
            e.stopPropagation();
            if (r.animating) {
              e.preventDefault();
            } else {
              r.pause();
              t._gesture.addPointer(e.pointerId);
              m = 0;
              o = l ? r.h : r.w;
              a = Number(new Date());
              i =
                h && c && r.animatingTo === r.last
                  ? 0
                  : h && c
                  ? r.limit -
                    (r.itemW + r.vars.itemMargin) * r.move * r.animatingTo
                  : h && r.currentSlide === r.last
                  ? r.limit
                  : h
                  ? (r.itemW + r.vars.itemMargin) * r.move * r.currentSlide
                  : c
                  ? (r.last - r.currentSlide + r.cloneOffset) * o
                  : (r.currentSlide + r.cloneOffset) * o;
            }
          }
          function E(e) {
            e.stopPropagation();
            var n = e.target._slider;
            if (!n) {
              return;
            }
            var r = -e.translationX,
              s = -e.translationY;
            m = m + (l ? s : r);
            u = m;
            f = l ? Math.abs(m) < Math.abs(-r) : Math.abs(m) < Math.abs(-s);
            if (e.detail === e.MSGESTURE_FLAG_INERTIA) {
              setImmediate(function () {
                t._gesture.stop();
              });
              return;
            }
            if (!f || Number(new Date()) - a > 500) {
              e.preventDefault();
              if (!p && n.transitions) {
                if (!n.vars.animationLoop) {
                  u =
                    m /
                    ((n.currentSlide === 0 && m < 0) ||
                    (n.currentSlide === n.last && m > 0)
                      ? Math.abs(m) / o + 2
                      : 1);
                }
                n.setProps(i + u, "setTouch");
              }
            }
          }
          function S(t) {
            t.stopPropagation();
            var r = t.target._slider;
            if (!r) {
              return;
            }
            if (r.animatingTo === r.currentSlide && !f && !(u === null)) {
              var s = c ? -u : u,
                l = s > 0 ? r.getTarget("next") : r.getTarget("prev");
              if (
                r.canAdvance(l) &&
                ((Number(new Date()) - a < 550 && Math.abs(s) > 50) ||
                  Math.abs(s) > o / 2)
              ) {
                r.flexAnimate(l, r.vars.pauseOnAction);
              } else {
                if (!p)
                  r.flexAnimate(r.currentSlide, r.vars.pauseOnAction, true);
              }
            }
            e = null;
            n = null;
            u = null;
            i = null;
            m = 0;
          }
        }
      },
      resize: function () {
        if (!r.animating && r.is(":visible")) {
          if (!h) r.doMath();
          if (p) {
            v.smoothHeight();
          } else if (h) {
            r.slides.width(r.computedW);
            r.update(r.pagingCount);
            r.setProps();
          } else if (l) {
            r.viewport.height(r.h);
            r.setProps(r.h, "setTotal");
          } else {
            if (r.vars.smoothHeight) v.smoothHeight();
            r.newSlides.width(r.computedW);
            r.setProps(r.computedW, "setTotal");
          }
        }
      },
      smoothHeight: function (e) {
        if (!l || p) {
          var t = p ? r : r.viewport;
          e
            ? t.animate({ height: r.slides.eq(r.animatingTo).height() }, e)
            : t.height(r.slides.eq(r.animatingTo).height());
        }
      },
      sync: function (t) {
        var n = e(r.vars.sync).data("flexslider"),
          i = r.animatingTo;
        switch (t) {
          case "animate":
            n.flexAnimate(i, r.vars.pauseOnAction, false, true);
            break;
          case "play":
            if (!n.playing && !n.asNav) {
              n.play();
            }
            break;
          case "pause":
            n.pause();
            break;
        }
      },
      uniqueID: function (t) {
        t.filter("[id]")
          .add(t.find("[id]"))
          .each(function () {
            var t = e(this);
            t.attr("id", t.attr("id") + "_clone");
          });
        return t;
      },
      pauseInvisible: {
        visProp: null,
        init: function () {
          var e = ["webkit", "moz", "ms", "o"];
          if ("hidden" in document) return "hidden";
          for (var t = 0; t < e.length; t++) {
            if (e[t] + "Hidden" in document)
              v.pauseInvisible.visProp = e[t] + "Hidden";
          }
          if (v.pauseInvisible.visProp) {
            var n =
              v.pauseInvisible.visProp.replace(/[H|h]idden/, "") +
              "visibilitychange";
            document.addEventListener(n, function () {
              if (v.pauseInvisible.isHidden()) {
                if (r.startTimeout) clearTimeout(r.startTimeout);
                else r.pause();
              } else {
                if (r.started) r.play();
                else
                  r.vars.initDelay > 0
                    ? setTimeout(r.play, r.vars.initDelay)
                    : r.play();
              }
            });
          }
        },
        isHidden: function () {
          return document[v.pauseInvisible.visProp] || false;
        },
      },
      setToClearWatchedEvent: function () {
        clearTimeout(f);
        f = setTimeout(function () {
          a = "";
        }, 3e3);
      },
    };
    r.flexAnimate = function (t, n, s, u, a) {
      if (!r.vars.animationLoop && t !== r.currentSlide) {
        r.direction = t > r.currentSlide ? "next" : "prev";
      }
      if (d && r.pagingCount === 1)
        r.direction = r.currentItem < t ? "next" : "prev";
      if (!r.animating && (r.canAdvance(t, a) || s) && r.is(":visible")) {
        if (d && u) {
          var f = e(r.vars.asNavFor).data("flexslider");
          r.atEnd = t === 0 || t === r.count - 1;
          f.flexAnimate(t, true, false, true, a);
          r.direction = r.currentItem < t ? "next" : "prev";
          f.direction = r.direction;
          if (
            Math.ceil((t + 1) / r.visible) - 1 !== r.currentSlide &&
            t !== 0
          ) {
            r.currentItem = t;
            r.slides
              .removeClass(i + "active-slide")
              .eq(t)
              .addClass(i + "active-slide");
            t = Math.floor(t / r.visible);
          } else {
            r.currentItem = t;
            r.slides
              .removeClass(i + "active-slide")
              .eq(t)
              .addClass(i + "active-slide");
            return false;
          }
        }
        r.animating = true;
        r.animatingTo = t;
        if (n) r.pause();
        r.vars.before(r);
        if (r.syncExists && !a) v.sync("animate");
        if (r.vars.controlNav) v.controlNav.active();
        if (!h)
          r.slides
            .removeClass(i + "active-slide")
            .eq(t)
            .addClass(i + "active-slide");
        r.atEnd = t === 0 || t === r.last;
        if (r.vars.directionNav) v.directionNav.update();
        if (t === r.last) {
          r.vars.end(r);
          if (!r.vars.animationLoop) r.pause();
        }
        if (!p) {
          var m = l ? r.slides.filter(":first").height() : r.computedW,
            g,
            y,
            b;
          if (h) {
            g = r.vars.itemMargin;
            b = (r.itemW + g) * r.move * r.animatingTo;
            y = b > r.limit && r.visible !== 1 ? r.limit : b;
          } else if (
            r.currentSlide === 0 &&
            t === r.count - 1 &&
            r.vars.animationLoop &&
            r.direction !== "next"
          ) {
            y = c ? (r.count + r.cloneOffset) * m : 0;
          } else if (
            r.currentSlide === r.last &&
            t === 0 &&
            r.vars.animationLoop &&
            r.direction !== "prev"
          ) {
            y = c ? 0 : (r.count + 1) * m;
          } else {
            y = c
              ? (r.count - 1 - t + r.cloneOffset) * m
              : (t + r.cloneOffset) * m;
          }
          r.setProps(y, "", r.vars.animationSpeed);
          if (r.transitions) {
            if (!r.vars.animationLoop || !r.atEnd) {
              r.animating = false;
              r.currentSlide = r.animatingTo;
            }
            r.container.unbind("webkitTransitionEnd transitionend");
            r.container.bind("webkitTransitionEnd transitionend", function () {
              clearTimeout(r.ensureAnimationEnd);
              r.wrapup(m);
            });
            clearTimeout(r.ensureAnimationEnd);
            r.ensureAnimationEnd = setTimeout(function () {
              r.wrapup(m);
            }, r.vars.animationSpeed + 100);
          } else {
            r.container.animate(
              r.args,
              r.vars.animationSpeed,
              r.vars.easing,
              function () {
                r.wrapup(m);
              }
            );
          }
        } else {
          if (!o) {
            r.slides
              .eq(r.currentSlide)
              .css({ zIndex: 1 })
              .animate({ opacity: 0 }, r.vars.animationSpeed, r.vars.easing);
            r.slides
              .eq(t)
              .css({ zIndex: 2 })
              .animate(
                { opacity: 1 },
                r.vars.animationSpeed,
                r.vars.easing,
                r.wrapup
              );
          } else {
            r.slides.eq(r.currentSlide).css({ opacity: 0, zIndex: 1 });
            r.slides.eq(t).css({ opacity: 1, zIndex: 2 });
            r.wrapup(m);
          }
        }
        if (r.vars.smoothHeight) v.smoothHeight(r.vars.animationSpeed);
      }
    };
    r.wrapup = function (e) {
      if (!p && !h) {
        if (
          r.currentSlide === 0 &&
          r.animatingTo === r.last &&
          r.vars.animationLoop
        ) {
          r.setProps(e, "jumpEnd");
        } else if (
          r.currentSlide === r.last &&
          r.animatingTo === 0 &&
          r.vars.animationLoop
        ) {
          r.setProps(e, "jumpStart");
        }
      }
      r.animating = false;
      r.currentSlide = r.animatingTo;
      r.vars.after(r);
    };
    r.animateSlides = function () {
      if (!r.animating && m) r.flexAnimate(r.getTarget("next"));
    };
    r.pause = function () {
      clearInterval(r.animatedSlides);
      r.animatedSlides = null;
      r.playing = false;
      if (r.vars.pausePlay) v.pausePlay.update("play");
      if (r.syncExists) v.sync("pause");
    };
    r.play = function () {
      if (r.playing) clearInterval(r.animatedSlides);
      r.animatedSlides =
        r.animatedSlides || setInterval(r.animateSlides, r.vars.slideshowSpeed);
      r.started = r.playing = true;
      if (r.vars.pausePlay) v.pausePlay.update("pause");
      if (r.syncExists) v.sync("play");
    };
    r.stop = function () {
      r.pause();
      r.stopped = true;
    };
    r.canAdvance = function (e, t) {
      var n = d ? r.pagingCount - 1 : r.last;
      return t
        ? true
        : d &&
          r.currentItem === r.count - 1 &&
          e === 0 &&
          r.direction === "prev"
        ? true
        : d &&
          r.currentItem === 0 &&
          e === r.pagingCount - 1 &&
          r.direction !== "next"
        ? false
        : e === r.currentSlide && !d
        ? false
        : r.vars.animationLoop
        ? true
        : r.atEnd && r.currentSlide === 0 && e === n && r.direction !== "next"
        ? false
        : r.atEnd && r.currentSlide === n && e === 0 && r.direction === "next"
        ? false
        : true;
    };
    r.getTarget = function (e) {
      r.direction = e;
      if (e === "next") {
        return r.currentSlide === r.last ? 0 : r.currentSlide + 1;
      } else {
        return r.currentSlide === 0 ? r.last : r.currentSlide - 1;
      }
    };
    r.setProps = function (e, t, n) {
      var i = (function () {
        var n = e ? e : (r.itemW + r.vars.itemMargin) * r.move * r.animatingTo,
          i = (function () {
            if (h) {
              return t === "setTouch"
                ? e
                : c && r.animatingTo === r.last
                ? 0
                : c
                ? r.limit -
                  (r.itemW + r.vars.itemMargin) * r.move * r.animatingTo
                : r.animatingTo === r.last
                ? r.limit
                : n;
            } else {
              switch (t) {
                case "setTotal":
                  return c
                    ? (r.count - 1 - r.currentSlide + r.cloneOffset) * e
                    : (r.currentSlide + r.cloneOffset) * e;
                case "setTouch":
                  return c ? e : e;
                case "jumpEnd":
                  return c ? e : r.count * e;
                case "jumpStart":
                  return c ? r.count * e : e;
                default:
                  return e;
              }
            }
          })();
        return i * -1 + "px";
      })();
      if (r.transitions) {
        i = l ? "translate3d(0," + i + ",0)" : "translate3d(" + i + ",0,0)";
        n = n !== undefined ? n / 1e3 + "s" : "0s";
        r.container.css("-" + r.pfx + "-transition-duration", n);
        r.container.css("transition-duration", n);
      }
      r.args[r.prop] = i;
      if (r.transitions || n === undefined) r.container.css(r.args);
      r.container.css("transform", i);
    };
    r.setup = function (t) {
      if (!p) {
        var n, s;
        if (t === "init") {
          r.viewport = e('<div class="' + i + 'viewport"></div>')
            .css({ overflow: "hidden", position: "relative" })
            .appendTo(r)
            .append(r.container);
          r.cloneCount = 0;
          r.cloneOffset = 0;
          if (c) {
            s = e.makeArray(r.slides).reverse();
            r.slides = e(s);
            r.container.empty().append(r.slides);
          }
        }
        if (r.vars.animationLoop && !h) {
          r.cloneCount = 2;
          r.cloneOffset = 1;
          if (t !== "init") r.container.find(".clone").remove();
          r.container
            .append(
              v
                .uniqueID(r.slides.first().clone().addClass("clone"))
                .attr("aria-hidden", "true")
            )
            .prepend(
              v
                .uniqueID(r.slides.last().clone().addClass("clone"))
                .attr("aria-hidden", "true")
            );
        }
        r.newSlides = e(r.vars.selector, r);
        n = c
          ? r.count - 1 - r.currentSlide + r.cloneOffset
          : r.currentSlide + r.cloneOffset;
        if (l && !h) {
          r.container
            .height((r.count + r.cloneCount) * 200 + "%")
            .css("position", "absolute")
            .width("100%");
          setTimeout(
            function () {
              r.newSlides.css({ display: "block" });
              r.doMath();
              r.viewport.height(r.h);
              r.setProps(n * r.h, "init");
            },
            t === "init" ? 100 : 0
          );
        } else {
          r.newSlides.css({
            width: r.computedW,
            float: "left",
            display: "block",
          });
          r.container.width((r.count + r.cloneCount) * 200 + "%");
          r.setProps(n * r.computedW, "init");
          setTimeout(
            function () {
              r.doMath();
              r.newSlides.css({
                width: r.computedW,
                float: "left",
                display: "block",
              });
              if (r.vars.smoothHeight) v.smoothHeight();
            },
            t === "init" ? 100 : 0
          );
        }
      } else {
        r.slides.css({
          width: "100%",
          float: "left",
          marginRight: "-100%",
          position: "relative",
        });
        if (t === "init") {
          if (!o) {
            if (r.vars.fadeFirstSlide == false) {
              r.slides
                .css({ opacity: 0, display: "block", zIndex: 1 })
                .eq(r.currentSlide)
                .css({ zIndex: 2 })
                .css({ opacity: 1 });
            } else {
              r.slides
                .css({ opacity: 0, display: "block", zIndex: 1 })
                .eq(r.currentSlide)
                .css({ zIndex: 2 })
                .animate({ opacity: 1 }, r.vars.animationSpeed, r.vars.easing);
            }
          } else {
            r.slides
              .css({
                opacity: 0,
                display: "block",
                webkitTransition:
                  "opacity " + r.vars.animationSpeed / 1e3 + "s ease",
                zIndex: 1,
              })
              .eq(r.currentSlide)
              .css({ opacity: 1, zIndex: 2 });
          }
        }
        if (r.vars.smoothHeight) v.smoothHeight();
      }
      if (!h)
        r.slides
          .removeClass(i + "active-slide")
          .eq(r.currentSlide)
          .addClass(i + "active-slide");
      r.vars.init(r);
    };
    r.doMath = function () {
      var e = r.slides.first(),
        t = r.vars.itemMargin,
        n = r.vars.minItems,
        i = r.vars.maxItems;
      r.w = r.viewport === undefined ? r.width() : r.viewport.width();
      r.h = e.height();
      r.boxPadding = e.outerWidth() - e.width();
      if (h) {
        r.itemT = r.vars.itemWidth + t;
        r.minW = n ? n * r.itemT : r.w;
        r.maxW = i ? i * r.itemT - t : r.w;
        r.itemW =
          r.minW > r.w
            ? (r.w - t * (n - 1)) / n
            : r.maxW < r.w
            ? (r.w - t * (i - 1)) / i
            : r.vars.itemWidth > r.w
            ? r.w
            : r.vars.itemWidth;
        r.visible = Math.floor(r.w / r.itemW);
        r.move =
          r.vars.move > 0 && r.vars.move < r.visible ? r.vars.move : r.visible;
        r.pagingCount = Math.ceil((r.count - r.visible) / r.move + 1);
        r.last = r.pagingCount - 1;
        r.limit =
          r.pagingCount === 1
            ? 0
            : r.vars.itemWidth > r.w
            ? r.itemW * (r.count - 1) + t * (r.count - 1)
            : (r.itemW + t) * r.count - r.w - t;
      } else {
        r.itemW = r.w;
        r.pagingCount = r.count;
        r.last = r.count - 1;
      }
      r.computedW = r.itemW - r.boxPadding;
    };
    r.update = function (e, t) {
      r.doMath();
      if (!h) {
        if (e < r.currentSlide) {
          r.currentSlide += 1;
        } else if (e <= r.currentSlide && e !== 0) {
          r.currentSlide -= 1;
        }
        r.animatingTo = r.currentSlide;
      }
      if (r.vars.controlNav && !r.manualControls) {
        if ((t === "add" && !h) || r.pagingCount > r.controlNav.length) {
          v.controlNav.update("add");
        } else if (
          (t === "remove" && !h) ||
          r.pagingCount < r.controlNav.length
        ) {
          if (h && r.currentSlide > r.last) {
            r.currentSlide -= 1;
            r.animatingTo -= 1;
          }
          v.controlNav.update("remove", r.last);
        }
      }
      if (r.vars.directionNav) v.directionNav.update();
    };
    r.addSlide = function (t, n) {
      var i = e(t);
      r.count += 1;
      r.last = r.count - 1;
      if (l && c) {
        n !== undefined
          ? r.slides.eq(r.count - n).after(i)
          : r.container.prepend(i);
      } else {
        n !== undefined ? r.slides.eq(n).before(i) : r.container.append(i);
      }
      r.update(n, "add");
      r.slides = e(r.vars.selector + ":not(.clone)", r);
      r.setup();
      r.vars.added(r);
    };
    r.removeSlide = function (t) {
      var n = isNaN(t) ? r.slides.index(e(t)) : t;
      r.count -= 1;
      r.last = r.count - 1;
      if (isNaN(t)) {
        e(t, r.slides).remove();
      } else {
        l && c ? r.slides.eq(r.last).remove() : r.slides.eq(t).remove();
      }
      r.doMath();
      r.update(n, "remove");
      r.slides = e(r.vars.selector + ":not(.clone)", r);
      r.setup();
      r.vars.removed(r);
    };
    v.init();
  };
  e(window)
    .blur(function (e) {
      focused = false;
    })
    .focus(function (e) {
      focused = true;
    });
  e.flexslider.defaults = {
    namespace: "flex-",
    selector: ".slides > li",
    animation: "fade",
    easing: "swing",
    direction: "horizontal",
    reverse: false,
    animationLoop: true,
    smoothHeight: false,
    startAt: 0,
    slideshow: true,
    slideshowSpeed: 7e3,
    animationSpeed: 600,
    initDelay: 0,
    randomize: false,
    fadeFirstSlide: true,
    thumbCaptions: false,
    pauseOnAction: true,
    pauseOnHover: false,
    pauseInvisible: true,
    useCSS: true,
    touch: true,
    video: false,
    controlNav: true,
    directionNav: true,
    prevText: "Previous",
    nextText: "Next",
    keyboard: true,
    multipleKeyboard: false,
    mousewheel: false,
    pausePlay: false,
    pauseText: "Pause",
    playText: "Play",
    controlsContainer: "",
    manualControls: "",
    sync: "",
    asNavFor: "",
    itemWidth: 0,
    itemMargin: 0,
    minItems: 1,
    maxItems: 0,
    move: 0,
    allowOneSlide: true,
    start: function () {},
    before: function () {},
    after: function () {},
    end: function () {},
    added: function () {},
    removed: function () {},
    init: function () {},
  };
  e.fn.flexslider = function (t) {
    if (t === undefined) t = {};
    if (typeof t === "object") {
      return this.each(function () {
        var n = e(this),
          r = t.selector ? t.selector : ".slides > li",
          i = n.find(r);
        if ((i.length === 1 && t.allowOneSlide === true) || i.length === 0) {
          i.fadeIn(400);
          if (t.start) t.start(n);
        } else if (n.data("flexslider") === undefined) {
          new e.flexslider(this, t);
        }
      });
    } else {
      var n = e(this).data("flexslider");
      switch (t) {
        case "play":
          n.play();
          break;
        case "pause":
          n.pause();
          break;
        case "stop":
          n.stop();
          break;
        case "next":
          n.flexAnimate(n.getTarget("next"), true);
          break;
        case "prev":
        case "previous":
          n.flexAnimate(n.getTarget("prev"), true);
          break;
        default:
          if (typeof t === "number") n.flexAnimate(t, true);
      }
    }
  };
})(jQuery);
/*!
 * imagesLoaded PACKAGED v3.1.8
 * JavaScript is all like "You images are done yet or what?"
 * MIT License
 */

/*!
 * EventEmitter v4.2.6 - git.io/ee
 * Oliver Caldwell
 * MIT license
 * @preserve
 */

(function () {
  /**
   * Class for managing events.
   * Can be extended to provide event functionality in other classes.
   *
   * @class EventEmitter Manages event registering and emitting.
   */
  function EventEmitter() {}

  // Shortcuts to improve speed and size
  var proto = EventEmitter.prototype;
  var exports = this;
  var originalGlobalValue = exports.EventEmitter;

  /**
   * Finds the index of the listener for the event in it's storage array.
   *
   * @param {Function[]} listeners Array of listeners to search through.
   * @param {Function} listener Method to look for.
   * @return {Number} Index of the specified listener, -1 if not found
   * @api private
   */
  function indexOfListener(listeners, listener) {
    var i = listeners.length;
    while (i--) {
      if (listeners[i].listener === listener) {
        return i;
      }
    }

    return -1;
  }

  /**
   * Alias a method while keeping the context correct, to allow for overwriting of target method.
   *
   * @param {String} name The name of the target method.
   * @return {Function} The aliased method
   * @api private
   */
  function alias(name) {
    return function aliasClosure() {
      return this[name].apply(this, arguments);
    };
  }

  /**
   * Returns the listener array for the specified event.
   * Will initialise the event object and listener arrays if required.
   * Will return an object if you use a regex search. The object contains keys for each matched event. So /ba[rz]/ might return an object containing bar and baz. But only if you have either defined them with defineEvent or added some listeners to them.
   * Each property in the object response is an array of listener functions.
   *
   * @param {String|RegExp} evt Name of the event to return the listeners from.
   * @return {Function[]|Object} All listener functions for the event.
   */
  proto.getListeners = function getListeners(evt) {
    var events = this._getEvents();
    var response;
    var key;

    // Return a concatenated array of all matching events if
    // the selector is a regular expression.
    if (typeof evt === "object") {
      response = {};
      for (key in events) {
        if (events.hasOwnProperty(key) && evt.test(key)) {
          response[key] = events[key];
        }
      }
    } else {
      response = events[evt] || (events[evt] = []);
    }

    return response;
  };

  /**
   * Takes a list of listener objects and flattens it into a list of listener functions.
   *
   * @param {Object[]} listeners Raw listener objects.
   * @return {Function[]} Just the listener functions.
   */
  proto.flattenListeners = function flattenListeners(listeners) {
    var flatListeners = [];
    var i;

    for (i = 0; i < listeners.length; i += 1) {
      flatListeners.push(listeners[i].listener);
    }

    return flatListeners;
  };

  /**
   * Fetches the requested listeners via getListeners but will always return the results inside an object. This is mainly for internal use but others may find it useful.
   *
   * @param {String|RegExp} evt Name of the event to return the listeners from.
   * @return {Object} All listener functions for an event in an object.
   */
  proto.getListenersAsObject = function getListenersAsObject(evt) {
    var listeners = this.getListeners(evt);
    var response;

    if (listeners instanceof Array) {
      response = {};
      response[evt] = listeners;
    }

    return response || listeners;
  };

  /**
   * Adds a listener function to the specified event.
   * The listener will not be added if it is a duplicate.
   * If the listener returns true then it will be removed after it is called.
   * If you pass a regular expression as the event name then the listener will be added to all events that match it.
   *
   * @param {String|RegExp} evt Name of the event to attach the listener to.
   * @param {Function} listener Method to be called when the event is emitted. If the function returns true then it will be removed after calling.
   * @return {Object} Current instance of EventEmitter for chaining.
   */
  proto.addListener = function addListener(evt, listener) {
    var listeners = this.getListenersAsObject(evt);
    var listenerIsWrapped = typeof listener === "object";
    var key;

    for (key in listeners) {
      if (
        listeners.hasOwnProperty(key) &&
        indexOfListener(listeners[key], listener) === -1
      ) {
        listeners[key].push(
          listenerIsWrapped
            ? listener
            : {
                listener: listener,
                once: false,
              }
        );
      }
    }

    return this;
  };

  /**
   * Alias of addListener
   */
  proto.on = alias("addListener");

  /**
   * Semi-alias of addListener. It will add a listener that will be
   * automatically removed after it's first execution.
   *
   * @param {String|RegExp} evt Name of the event to attach the listener to.
   * @param {Function} listener Method to be called when the event is emitted. If the function returns true then it will be removed after calling.
   * @return {Object} Current instance of EventEmitter for chaining.
   */
  proto.addOnceListener = function addOnceListener(evt, listener) {
    return this.addListener(evt, {
      listener: listener,
      once: true,
    });
  };

  /**
   * Alias of addOnceListener.
   */
  proto.once = alias("addOnceListener");

  /**
   * Defines an event name. This is required if you want to use a regex to add a listener to multiple events at once. If you don't do this then how do you expect it to know what event to add to? Should it just add to every possible match for a regex? No. That is scary and bad.
   * You need to tell it what event names should be matched by a regex.
   *
   * @param {String} evt Name of the event to create.
   * @return {Object} Current instance of EventEmitter for chaining.
   */
  proto.defineEvent = function defineEvent(evt) {
    this.getListeners(evt);
    return this;
  };

  /**
   * Uses defineEvent to define multiple events.
   *
   * @param {String[]} evts An array of event names to define.
   * @return {Object} Current instance of EventEmitter for chaining.
   */
  proto.defineEvents = function defineEvents(evts) {
    for (var i = 0; i < evts.length; i += 1) {
      this.defineEvent(evts[i]);
    }
    return this;
  };

  /**
   * Removes a listener function from the specified event.
   * When passed a regular expression as the event name, it will remove the listener from all events that match it.
   *
   * @param {String|RegExp} evt Name of the event to remove the listener from.
   * @param {Function} listener Method to remove from the event.
   * @return {Object} Current instance of EventEmitter for chaining.
   */
  proto.removeListener = function removeListener(evt, listener) {
    var listeners = this.getListenersAsObject(evt);
    var index;
    var key;

    for (key in listeners) {
      if (listeners.hasOwnProperty(key)) {
        index = indexOfListener(listeners[key], listener);

        if (index !== -1) {
          listeners[key].splice(index, 1);
        }
      }
    }

    return this;
  };

  /**
   * Alias of removeListener
   */
  proto.off = alias("removeListener");

  /**
   * Adds listeners in bulk using the manipulateListeners method.
   * If you pass an object as the second argument you can add to multiple events at once. The object should contain key value pairs of events and listeners or listener arrays. You can also pass it an event name and an array of listeners to be added.
   * You can also pass it a regular expression to add the array of listeners to all events that match it.
   * Yeah, this function does quite a bit. That's probably a bad thing.
   *
   * @param {String|Object|RegExp} evt An event name if you will pass an array of listeners next. An object if you wish to add to multiple events at once.
   * @param {Function[]} [listeners] An optional array of listener functions to add.
   * @return {Object} Current instance of EventEmitter for chaining.
   */
  proto.addListeners = function addListeners(evt, listeners) {
    // Pass through to manipulateListeners
    return this.manipulateListeners(false, evt, listeners);
  };

  /**
   * Removes listeners in bulk using the manipulateListeners method.
   * If you pass an object as the second argument you can remove from multiple events at once. The object should contain key value pairs of events and listeners or listener arrays.
   * You can also pass it an event name and an array of listeners to be removed.
   * You can also pass it a regular expression to remove the listeners from all events that match it.
   *
   * @param {String|Object|RegExp} evt An event name if you will pass an array of listeners next. An object if you wish to remove from multiple events at once.
   * @param {Function[]} [listeners] An optional array of listener functions to remove.
   * @return {Object} Current instance of EventEmitter for chaining.
   */
  proto.removeListeners = function removeListeners(evt, listeners) {
    // Pass through to manipulateListeners
    return this.manipulateListeners(true, evt, listeners);
  };

  /**
   * Edits listeners in bulk. The addListeners and removeListeners methods both use this to do their job. You should really use those instead, this is a little lower level.
   * The first argument will determine if the listeners are removed (true) or added (false).
   * If you pass an object as the second argument you can add/remove from multiple events at once. The object should contain key value pairs of events and listeners or listener arrays.
   * You can also pass it an event name and an array of listeners to be added/removed.
   * You can also pass it a regular expression to manipulate the listeners of all events that match it.
   *
   * @param {Boolean} remove True if you want to remove listeners, false if you want to add.
   * @param {String|Object|RegExp} evt An event name if you will pass an array of listeners next. An object if you wish to add/remove from multiple events at once.
   * @param {Function[]} [listeners] An optional array of listener functions to add/remove.
   * @return {Object} Current instance of EventEmitter for chaining.
   */
  proto.manipulateListeners = function manipulateListeners(
    remove,
    evt,
    listeners
  ) {
    var i;
    var value;
    var single = remove ? this.removeListener : this.addListener;
    var multiple = remove ? this.removeListeners : this.addListeners;

    // If evt is an object then pass each of it's properties to this method
    if (typeof evt === "object" && !(evt instanceof RegExp)) {
      for (i in evt) {
        if (evt.hasOwnProperty(i) && (value = evt[i])) {
          // Pass the single listener straight through to the singular method
          if (typeof value === "function") {
            single.call(this, i, value);
          } else {
            // Otherwise pass back to the multiple function
            multiple.call(this, i, value);
          }
        }
      }
    } else {
      // So evt must be a string
      // And listeners must be an array of listeners
      // Loop over it and pass each one to the multiple method
      i = listeners.length;
      while (i--) {
        single.call(this, evt, listeners[i]);
      }
    }

    return this;
  };

  /**
   * Removes all listeners from a specified event.
   * If you do not specify an event then all listeners will be removed.
   * That means every event will be emptied.
   * You can also pass a regex to remove all events that match it.
   *
   * @param {String|RegExp} [evt] Optional name of the event to remove all listeners for. Will remove from every event if not passed.
   * @return {Object} Current instance of EventEmitter for chaining.
   */
  proto.removeEvent = function removeEvent(evt) {
    var type = typeof evt;
    var events = this._getEvents();
    var key;

    // Remove different things depending on the state of evt
    if (type === "string") {
      // Remove all listeners for the specified event
      delete events[evt];
    } else if (type === "object") {
      // Remove all events matching the regex.
      for (key in events) {
        if (events.hasOwnProperty(key) && evt.test(key)) {
          delete events[key];
        }
      }
    } else {
      // Remove all listeners in all events
      delete this._events;
    }

    return this;
  };

  /**
   * Alias of removeEvent.
   *
   * Added to mirror the node API.
   */
  proto.removeAllListeners = alias("removeEvent");

  /**
   * Emits an event of your choice.
   * When emitted, every listener attached to that event will be executed.
   * If you pass the optional argument array then those arguments will be passed to every listener upon execution.
   * Because it uses `apply`, your array of arguments will be passed as if you wrote them out separately.
   * So they will not arrive within the array on the other side, they will be separate.
   * You can also pass a regular expression to emit to all events that match it.
   *
   * @param {String|RegExp} evt Name of the event to emit and execute listeners for.
   * @param {Array} [args] Optional array of arguments to be passed to each listener.
   * @return {Object} Current instance of EventEmitter for chaining.
   */
  proto.emitEvent = function emitEvent(evt, args) {
    var listeners = this.getListenersAsObject(evt);
    var listener;
    var i;
    var key;
    var response;

    for (key in listeners) {
      if (listeners.hasOwnProperty(key)) {
        i = listeners[key].length;

        while (i--) {
          // If the listener returns true then it shall be removed from the event
          // The function is executed either with a basic call or an apply if there is an args array
          listener = listeners[key][i];

          if (listener.once === true) {
            this.removeListener(evt, listener.listener);
          }

          response = listener.listener.apply(this, args || []);

          if (response === this._getOnceReturnValue()) {
            this.removeListener(evt, listener.listener);
          }
        }
      }
    }

    return this;
  };

  /**
   * Alias of emitEvent
   */
  proto.trigger = alias("emitEvent");

  /**
   * Subtly different from emitEvent in that it will pass its arguments on to the listeners, as opposed to taking a single array of arguments to pass on.
   * As with emitEvent, you can pass a regex in place of the event name to emit to all events that match it.
   *
   * @param {String|RegExp} evt Name of the event to emit and execute listeners for.
   * @param {...*} Optional additional arguments to be passed to each listener.
   * @return {Object} Current instance of EventEmitter for chaining.
   */
  proto.emit = function emit(evt) {
    var args = Array.prototype.slice.call(arguments, 1);
    return this.emitEvent(evt, args);
  };

  /**
   * Sets the current value to check against when executing listeners. If a
   * listeners return value matches the one set here then it will be removed
   * after execution. This value defaults to true.
   *
   * @param {*} value The new value to check for when executing listeners.
   * @return {Object} Current instance of EventEmitter for chaining.
   */
  proto.setOnceReturnValue = function setOnceReturnValue(value) {
    this._onceReturnValue = value;
    return this;
  };

  /**
   * Fetches the current value to check against when executing listeners. If
   * the listeners return value matches this one then it should be removed
   * automatically. It will return true by default.
   *
   * @return {*|Boolean} The current value to check for or the default, true.
   * @api private
   */
  proto._getOnceReturnValue = function _getOnceReturnValue() {
    if (this.hasOwnProperty("_onceReturnValue")) {
      return this._onceReturnValue;
    } else {
      return true;
    }
  };

  /**
   * Fetches the events object and creates one if required.
   *
   * @return {Object} The events storage object.
   * @api private
   */
  proto._getEvents = function _getEvents() {
    return this._events || (this._events = {});
  };

  /**
   * Reverts the global {@link EventEmitter} to its previous value and returns a reference to this version.
   *
   * @return {Function} Non conflicting EventEmitter class.
   */
  EventEmitter.noConflict = function noConflict() {
    exports.EventEmitter = originalGlobalValue;
    return EventEmitter;
  };

  // Expose the class either via AMD, CommonJS or the global object
  if (typeof define === "function" && define.amd) {
    define("eventEmitter/EventEmitter", [], function () {
      return EventEmitter;
    });
  } else if (typeof module === "object" && module.exports) {
    module.exports = EventEmitter;
  } else {
    this.EventEmitter = EventEmitter;
  }
}.call(this));

/*!
 * eventie v1.0.4
 * event binding helper
 *   eventie.bind( elem, 'click', myFn )
 *   eventie.unbind( elem, 'click', myFn )
 */

/*jshint browser: true, undef: true, unused: true */
/*global define: false */

(function (window) {
  var docElem = document.documentElement;

  var bind = function () {};

  function getIEEvent(obj) {
    var event = window.event;
    // add event.target
    event.target = event.target || event.srcElement || obj;
    return event;
  }

  if (docElem.addEventListener) {
    bind = function (obj, type, fn) {
      obj.addEventListener(type, fn, false);
    };
  } else if (docElem.attachEvent) {
    bind = function (obj, type, fn) {
      obj[type + fn] = fn.handleEvent
        ? function () {
            var event = getIEEvent(obj);
            fn.handleEvent.call(fn, event);
          }
        : function () {
            var event = getIEEvent(obj);
            fn.call(obj, event);
          };
      obj.attachEvent("on" + type, obj[type + fn]);
    };
  }

  var unbind = function () {};

  if (docElem.removeEventListener) {
    unbind = function (obj, type, fn) {
      obj.removeEventListener(type, fn, false);
    };
  } else if (docElem.detachEvent) {
    unbind = function (obj, type, fn) {
      obj.detachEvent("on" + type, obj[type + fn]);
      try {
        delete obj[type + fn];
      } catch (err) {
        // can't delete window object properties
        obj[type + fn] = undefined;
      }
    };
  }

  var eventie = {
    bind: bind,
    unbind: unbind,
  };

  // transport
  if (typeof define === "function" && define.amd) {
    // AMD
    define("eventie/eventie", eventie);
  } else {
    // browser global
    window.eventie = eventie;
  }
})(this);

/*!
 * imagesLoaded v3.1.8
 * JavaScript is all like "You images are done yet or what?"
 * MIT License
 */

(function (window, factory) {
  // universal module definition

  /*global define: false, module: false, require: false */

  if (typeof define === "function" && define.amd) {
    // AMD
    define(["eventEmitter/EventEmitter", "eventie/eventie"], function (
      EventEmitter,
      eventie
    ) {
      return factory(window, EventEmitter, eventie);
    });
  } else if (typeof exports === "object") {
    // CommonJS
    module.exports = factory(
      window,
      require("wolfy87-eventemitter"),
      require("eventie")
    );
  } else {
    // browser global
    window.imagesLoaded = factory(window, window.EventEmitter, window.eventie);
  }
})(
  window,

  // --------------------------  factory -------------------------- //

  function factory(window, EventEmitter, eventie) {
    var $ = window.$jq18;
    var console = window.console;
    var hasConsole = typeof console !== "undefined";

    // -------------------------- helpers -------------------------- //

    // extend objects
    function extend(a, b) {
      for (var prop in b) {
        a[prop] = b[prop];
      }
      return a;
    }

    var objToString = Object.prototype.toString;
    function isArray(obj) {
      return objToString.call(obj) === "[object Array]";
    }

    // turn element or nodeList into an array
    function makeArray(obj) {
      var ary = [];
      if (isArray(obj)) {
        // use object if already an array
        ary = obj;
      } else if (typeof obj.length === "number") {
        // convert nodeList to array
        for (var i = 0, len = obj.length; i < len; i++) {
          ary.push(obj[i]);
        }
      } else {
        // array of single index
        ary.push(obj);
      }
      return ary;
    }

    // -------------------------- imagesLoaded -------------------------- //

    /**
     * @param {Array, Element, NodeList, String} elem
     * @param {Object or Function} options - if function, use as callback
     * @param {Function} onAlways - callback function
     */
    function ImagesLoaded(elem, options, onAlways) {
      // coerce ImagesLoaded() without new, to be new ImagesLoaded()
      if (!(this instanceof ImagesLoaded)) {
        return new ImagesLoaded(elem, options);
      }
      // use elem as selector string
      if (typeof elem === "string") {
        elem = document.querySelectorAll(elem);
      }

      this.elements = makeArray(elem);
      this.options = extend({}, this.options);

      if (typeof options === "function") {
        onAlways = options;
      } else {
        extend(this.options, options);
      }

      if (onAlways) {
        this.on("always", onAlways);
      }

      this.getImages();

      if ($) {
        // add jQuery Deferred object
        this.jqDeferred = new $.Deferred();
      }

      // HACK check async to allow time to bind listeners
      var _this = this;
      setTimeout(function () {
        _this.check();
      });
    }

    ImagesLoaded.prototype = new EventEmitter();

    ImagesLoaded.prototype.options = {};

    ImagesLoaded.prototype.getImages = function () {
      this.images = [];

      // filter & find items if we have an item selector
      for (var i = 0, len = this.elements.length; i < len; i++) {
        var elem = this.elements[i];
        // filter siblings
        if (elem.nodeName === "IMG") {
          this.addImage(elem);
        }
        // find children
        // no non-element nodes, #143
        var nodeType = elem.nodeType;
        if (
          !nodeType ||
          !(nodeType === 1 || nodeType === 9 || nodeType === 11)
        ) {
          continue;
        }
        var childElems = elem.querySelectorAll("img");
        // concat childElems to filterFound array
        for (var j = 0, jLen = childElems.length; j < jLen; j++) {
          var img = childElems[j];
          this.addImage(img);
        }
      }
    };

    /**
     * @param {Image} img
     */
    ImagesLoaded.prototype.addImage = function (img) {
      var loadingImage = new LoadingImage(img);
      this.images.push(loadingImage);
    };

    ImagesLoaded.prototype.check = function () {
      var _this = this;
      var checkedCount = 0;
      var length = this.images.length;
      this.hasAnyBroken = false;
      // complete if no images
      if (!length) {
        this.complete();
        return;
      }

      function onConfirm(image, message) {
        if (_this.options.debug && hasConsole) {
          console.log("confirm", image, message);
        }

        _this.progress(image);
        checkedCount++;
        if (checkedCount === length) {
          _this.complete();
        }
        return true; // bind once
      }

      for (var i = 0; i < length; i++) {
        var loadingImage = this.images[i];
        loadingImage.on("confirm", onConfirm);
        loadingImage.check();
      }
    };

    ImagesLoaded.prototype.progress = function (image) {
      this.hasAnyBroken = this.hasAnyBroken || !image.isLoaded;
      // HACK - Chrome triggers event before object properties have changed. #83
      var _this = this;
      setTimeout(function () {
        _this.emit("progress", _this, image);
        if (_this.jqDeferred && _this.jqDeferred.notify) {
          _this.jqDeferred.notify(_this, image);
        }
      });
    };

    ImagesLoaded.prototype.complete = function () {
      var eventName = this.hasAnyBroken ? "fail" : "done";
      this.isComplete = true;
      var _this = this;
      // HACK - another setTimeout so that confirm happens after progress
      setTimeout(function () {
        _this.emit(eventName, _this);
        _this.emit("always", _this);
        if (_this.jqDeferred) {
          var jqMethod = _this.hasAnyBroken ? "reject" : "resolve";
          _this.jqDeferred[jqMethod](_this);
        }
      });
    };

    // -------------------------- jquery -------------------------- //

    if ($) {
      $.fn.imagesLoaded = function (options, callback) {
        var instance = new ImagesLoaded(this, options, callback);
        return instance.jqDeferred.promise($(this));
      };
    }

    // --------------------------  -------------------------- //

    function LoadingImage(img) {
      this.img = img;
    }

    LoadingImage.prototype = new EventEmitter();

    LoadingImage.prototype.check = function () {
      // first check cached any previous images that have same src
      var resource = cache[this.img.src] || new Resource(this.img.src);
      if (resource.isConfirmed) {
        this.confirm(resource.isLoaded, "cached was confirmed");
        return;
      }

      // If complete is true and browser supports natural sizes,
      // try to check for image status manually.
      if (this.img.complete && this.img.naturalWidth !== undefined) {
        // report based on naturalWidth
        this.confirm(this.img.naturalWidth !== 0, "naturalWidth");
        return;
      }

      // If none of the checks above matched, simulate loading on detached element.
      var _this = this;
      resource.on("confirm", function (resrc, message) {
        _this.confirm(resrc.isLoaded, message);
        return true;
      });

      resource.check();
    };

    LoadingImage.prototype.confirm = function (isLoaded, message) {
      this.isLoaded = isLoaded;
      this.emit("confirm", this, message);
    };

    // -------------------------- Resource -------------------------- //

    // Resource checks each src, only once
    // separate class from LoadingImage to prevent memory leaks. See #115

    var cache = {};

    function Resource(src) {
      this.src = src;
      // add to cache
      cache[src] = this;
    }

    Resource.prototype = new EventEmitter();

    Resource.prototype.check = function () {
      // only trigger checking once
      if (this.isChecked) {
        return;
      }
      // simulate loading on detached element
      var proxyImage = new Image();
      eventie.bind(proxyImage, "load", this);
      eventie.bind(proxyImage, "error", this);
      proxyImage.src = this.src;
      // set flag
      this.isChecked = true;
    };

    // ----- events ----- //

    // trigger specified handler for event type
    Resource.prototype.handleEvent = function (event) {
      var method = "on" + event.type;
      if (this[method]) {
        this[method](event);
      }
    };

    Resource.prototype.onload = function (event) {
      this.confirm(true, "onload");
      this.unbindProxyEvents(event);
    };

    Resource.prototype.onerror = function (event) {
      this.confirm(false, "onerror");
      this.unbindProxyEvents(event);
    };

    // ----- confirm ----- //

    Resource.prototype.confirm = function (isLoaded, message) {
      this.isConfirmed = true;
      this.isLoaded = isLoaded;
      this.emit("confirm", this, message);
    };

    Resource.prototype.unbindProxyEvents = function (event) {
      eventie.unbind(event.target, "load", this);
      eventie.unbind(event.target, "error", this);
    };

    // -----  ----- //

    return ImagesLoaded;
  }
);
/**
 * This is the class that will implement the Splash Page or the light box content type.
 *
 * Use init() method to instantiate it. Pass the options object while invoking init.
 *
 * */

SplashLightbox = (function () {
  var config = {};
  var setCookies = function () {
    /* Set The Cookie */
    var cookieObj = {
      path: "/",
    };
    if (jQuery.cookie(config.cookieName) == null) {
      var milliSeconds;
      if (config.displayRate === "0") {
        cookieObj.expires = new Date();
      } else if (config.displayRate == "-1") {
        cookieObj.expires = null;
      } else {
        milliSeconds = getMilliSeconds(config.displayRate);
        var date = new Date();
        date.setTime(date.getTime() + milliSeconds);
        cookieObj.expires = date;
      }
      jQuery.cookie(config.cookieName, 1, cookieObj);
    }
  };
  var showLightbox = function () {
    /*If it is mobile, insert it as the first child of body. */
    if (window.matchMedia("only screen and (max-width : 767px)").matches) {
      /*mobile*/
      showLightboxMobile();
    } else {
      showLightboxDesktop();
    }
  };

  var showLightboxMobile = function () {
    var lbParent = config.blockSelector;
    var $lightBoxContent = jQuery(lbParent + " " + ".lightBoxContent");
    $lightBoxContent.prependTo("body").show();
    jQuery(".lightBoxContent .lightBoxClose a").click(function () {
      $lbParent = jQuery(this).parents(".lightBoxContent");
      if ($lbParent.hasClass("tkt")) {
        jQuery("#lightBoxContent.lightBoxContent.tkt")
          .removeClass("show_toaster")
          .addClass("hide_toaster");
      } else {
        $lbParent.hide();
        jQuery("#page").show();
      }
    });
  };

  var showLightboxDesktop = function () {
    /*Check if there is a front page*/
    var lbParent = config.blockSelector;
    var $lightBoxContent = jQuery(lbParent + " " + ".lightBoxContent");
    var $frontPage = jQuery("body.front #page");
    if (!jQuery("body").hasClass("toaster")) {
      jQuery("body").append("<div class='splash_overall'></div>");
      jQuery(".splash_overall").fadeIn();
      jQuery(".splash_overall").click(function () {
        hideSplashPage();
      });
    }
    jQuery("body.front #page").css("overflow", "visible");
    jQuery(lbParent + " " + ".lightBox").fadeIn();
    jQuery(lbParent + " " + ".lightBoxWrapper").fadeIn();
    $lightBoxContent.fadeIn();
    var win_height = document.documentElement.clientHeight;
    var set_height = (win_height - config.lboxHeight) / 2;
    var win_width = document.documentElement.clientWidth;
    var set_width = (win_width - config.lboxWidth) / 2;
    $lightBoxContent.css("top", set_height + "px");
    $lightBoxContent.css("left", set_width + "px");
    $lightBoxContent.css("width", config.lboxWidth + "px");
    $lightBoxContent.css("height", config.lboxHeight + "px");
    jQuery(".lightBoxClose a").click(function () {
      $lbParent = jQuery(this).parents(".lightBoxContent");
      if ($lbParent.hasClass("tkt")) {
        $lbParent.removeClass("show_toaster").addClass("hide_toaster");
      } else {
        hideSplashPage();
      }
    });

    if (jQuery(window).height() < 600) {
      jQuery("body.front .view-splash .lightBoxContent iframe").css(
        "height",
        "600px"
      );
    }
    if (!lbParent === "#tktContainer" || !lbParent === "#tklbContainer") {
      jQuery(window).load(function () {
        customLBTracking();
      });
    }
  };

  var hideSplashPage = function () {
    var $frontPage = jQuery("body.front #page");
    jQuery(".splash_overall").fadeOut();
    jQuery(".lightBoxContent:not(.tkt)").fadeOut();
    $frontPage.css("overflow", "hidden");
  };

  var showNoShow = function () {
    var yn = true;
    var inital_cookie = jQuery.cookie(config.cookieName);
    if (inital_cookie !== null && typeof inital_cookie !== "undefined") {
      yn = false;
    }
    return yn;
  };

  var redirect = function () {
    /*Check if you can extract the url from the nodeLink*/
    //location.href = config.nodeLink;
    var nodeLink = config.nodeLink;
    window.location.replace(nodeLink);
  };
  var getMilliSeconds = function (dateString) {
    var minPattern = /([\d\.]+)m/;
    var hourPattern = /([\d\.]+)h/;
    var dayPattern = /([\d\.]+)d/;
    var milliSeconds = 0;
    var resultArray;
    if ((resultArray = minPattern.exec(dateString)) !== null) {
      milliSeconds = resultArray[1] * 60 * 1000;
    }
    if ((resultArray = hourPattern.exec(dateString)) !== null) {
      milliSeconds += resultArray[1] * 60 * 60 * 1000;
    }
    if ((resultArray = dayPattern.exec(dateString)) !== null) {
      milliSeconds += resultArray[1] * 24 * 60 * 60 * 1000;
    }
    return milliSeconds;
  };
  var customLBTracking = function () {
    var omniVars = {};
    omniVars.prop1 = s_dtm.prop1;
    omniVars.eVar4 = s_dtm.eVar4;
    omniVars.events = "event16";
    omniVars.linkTrackEvents = "event16";
    var _campaignName = jQuery(config.blockSelector)
      .find(".views-field-title .field-content")
      .text()
      .trim();

    if (_campaignName !== "") {
      var description = s_dtm.pageName + ":Lightbox:" + _campaignName;
    } else {
      var description = s_dtm.pageName + ":Lightbox:" + turnkeyLighboxTitle;
    }
    function OmniPrep(omniVars, description) {
      if (typeof omniVars === "string") {
        s_dtm.linkTrackVars = "events";
        s_dtm.linkTrackEvents = omniVars;
        s_dtm.events = omniVars;
      } else {
        s_dtm.linkTrackVars = Object.keys(omniVars);
        s_dtm = jQuery.extend(s_dtm, omniVars);
      }
      s_dtm.tl(this, "o", description);
    }
    OmniPrep(omniVars, description);

    //linktrack
    jQuery(config.blockSelector).find(".eventtrack-link").unbind("click");
    jQuery(config.blockSelector)
      .find(".eventtrack-link")
      .click(function (event) {
        event.preventDefault();
        omniVars = {};
        omniVars.prop1 = s_dtm.prop1;
        omniVars.eVar4 = s_dtm.eVar4;
        var elementID = jQuery(this).attr("id");
        var _description =
          s_dtm.pageName +
          ":" +
          _campaignName +
          ":" +
          "Lightbox" +
          ":" +
          WMG.OmnitureConfig.customOmniConfig.EventDescription[elementID];
        s_dtm.linkTrackVars = Object.keys(omniVars);
        s_dtm = jQuery.extend(s_dtm, omniVars);
        s_dtm.tl(this, "o", _description);
      });
  };
  var getParameterByName = function (name) {
    name = name.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
    var regexS = "[\\?&]" + name + "=([^&#]*)";
    var regex = new RegExp(regexS);
    var results = regex.exec(window.location.search);
    if (results == null) return "";
    else return decodeURIComponent(results[1].replace(/\+/g, " "));
  };
  var init = function (options) {
    /*Algorithm
     * 1. Get the config file for this page.
     * 3. Set the cookie.
     * 2. If it is lightbox then call it.
     * 3. If it is splash call redirect it.
     * */
    if (typeof options !== "undefined") {
      options = jQuery.parseJSON(options);
      if (options !== null) {
        jQuery.extend(true, config, options);
      } else {
        return;
      }
    } else {
      return;
    }

    var show = showNoShow();
    setCookies();

    if (show) {
      if (config.isLightBox === "splash") {
        if (getParameterByName("frontpage") != "true") {
          if (getParameterByName("force") != "show") {
            redirect();
          }
        }
      } else {
        showLightbox();
      }
    }
  };
  return {
    init: init,
  };
})();
jQuery.fn.outerHTML = function () {
  return jQuery("<div>").append(this.eq(0).clone()).html();
};

jQuery.fn.isAfter = function (sel) {
  return this.prevAll(sel).length !== 0;
};

jQuery.fn.isBefore = function (sel) {
  return this.nextAll(sel).length !== 0;
};

//Make external links to open in a new tab
jQuery.fn.makeLinksExternal = function () {
  return this.each(function () {
    var a = jQuery(this).attr("href");
    if (a.indexOf(location.host) == -1 && a.indexOf("/") !== 0) {
      jQuery(this).attr("target", "_blank");
    }
  });
};

(function ($) {
  jQuery.fn.hoverIntent = function (f, g) {
    // default configuration options
    var cfg = {
      sensitivity: 2,
      interval: 300,
      timeout: 500,
    };
    // override configuration options with user supplied object
    cfg = $.extend(
      cfg,
      g
        ? {
            over: f,
            out: g,
          }
        : f
    );

    // instantiate variables
    // cX, cY = current X and Y position of mouse, updated by mousemove event
    // pX, pY = previous X and Y position of mouse, set by mouseover and polling interval
    var cX, cY, pX, pY;

    // A private function for getting mouse position
    var track = function (ev) {
      cX = ev.pageX;
      cY = ev.pageY;
    };

    // A private function for comparing current and previous mouse position
    var compare = function (ev, ob) {
      ob.hoverIntent_t = clearTimeout(ob.hoverIntent_t);
      // compare mouse positions to see if they've crossed the threshold
      if (Math.abs(pX - cX) + Math.abs(pY - cY) < cfg.sensitivity) {
        $(ob).unbind("mousemove", track);
        // set hoverIntent state to true (so mouseOut can be called)
        ob.hoverIntent_s = 1;
        return cfg.over.apply(ob, [ev]);
      } else {
        // set previous coordinates for next time
        pX = cX;
        pY = cY;
        // use self-calling timeout, guarantees intervals are spaced out properly (avoids JavaScript timer bugs)
        ob.hoverIntent_t = setTimeout(function () {
          compare(ev, ob);
        }, cfg.interval);
      }
    };

    // A private function for delaying the mouseOut function
    var delay = function (ev, ob) {
      ob.hoverIntent_t = clearTimeout(ob.hoverIntent_t);
      ob.hoverIntent_s = 0;
      return cfg.out.apply(ob, [ev]);
    };

    // A private function for handling mouse 'hovering'
    var handleHover = function (e) {
      // next three lines copied from jQuery.hover, ignore children onMouseOver/onMouseOut
      var p =
        (e.type == "mouseover" ? e.fromElement : e.toElement) ||
        e.relatedTarget;
      while (p && p != this) {
        try {
          p = p.parentNode;
        } catch (e) {
          p = this;
        }
      }
      if (p == this) {
        return false;
      }

      // copy objects to be passed into t (required for event object to be passed in IE)
      var ev = jQuery.extend({}, e);
      var ob = this;

      // cancel hoverIntent timer if it exists
      if (ob.hoverIntent_t) {
        ob.hoverIntent_t = clearTimeout(ob.hoverIntent_t);
      }

      // else e.type == "onmouseover"
      if (e.type == "mouseover") {
        // set "previous" X and Y position based on initial entry point
        pX = ev.pageX;
        pY = ev.pageY;
        // update "current" X and Y position based on mousemove
        $(ob).bind("mousemove", track);
        // start polling interval (self-calling timeout) to compare mouse coordinates over time
        if (ob.hoverIntent_s != 1) {
          ob.hoverIntent_t = setTimeout(function () {
            compare(ev, ob);
          }, cfg.interval);
        }

        // else e.type == "onmouseout"
      } else {
        // unbind expensive mousemove event
        $(ob).unbind("mousemove", track);
        // if hoverIntent state is true, then call the mouseOut function after the specified delay
        if (ob.hoverIntent_s == 1) {
          ob.hoverIntent_t = setTimeout(function () {
            delay(ev, ob);
          }, cfg.timeout);
        }
      }
    };

    // bind the function to the two event listeners
    return this.mouseover(handleHover).mouseout(handleHover);
  };
})(jQuery);

WMG.namespace("Utils");
WMG.Utils.isUser = function (userRole) {
  var $userRoleObj = Drupal.settings.server_variables.user_roles;
  if (typeof $userRoleObj !== "undefined") {
    if (jQuery.isArray($userRoleObj)) {
      if ($userRoleObj.indexOf(userRole) >= 0) {
        return true;
      } else {
        return false;
      }
    } else {
      for (role in $userRoleObj) {
        var flag;
        if ($userRoleObj[role] === userRole) {
          flag = 1;
          break;
        }
      }
      if (flag === 1) {
        return true;
      } else {
        return false;
      }
    }
  } else {
    return false;
  }
};
var ONEPAGE = {
  theme: "onepage-isotope", // onepage, onepage-a, onepage-b, onepage-isotope
  fancyboxSelector: ".view-home-one-page-photos .views-row a.fresco",
  menu:
    "#block-menu-menu-home-one-page-menu, #block-menu-menu-home-one-page-linked, #block-menu-menu-menu-fixed, #block-menu-menu-one-page-anchored",
  categoryBlocks:
    "#block-views-categories-block-1, #block-views-categories-block, #block-views-categories-block-8",
  newsList:
    ".view-home-one-page-news.view-id-home_one_page_news.view-display-id-home_onepage",
  activityBlock: "#block-views-forum-block-3",
  mlist: {
    sidebar: "",
    footer: "#block-block-466",
  },
  homepageBlocks: {
    news: "#block-views-home-one-page-news-block-4",
    photo: "#block-views-home-one-page-photos-block",
    about: "#block-block-426",
    tour: "#block-block-321",
    carousel: "#block-views-home-one-page-carousel-block-1",
  },
  view: {
    photo: ".view-home-one-page-photos",
  },
  landing: {
    news: ".view-home-one-page-news.view-display-id-page_2",
  },
  isotope: {
    news: ".view-home-one-page-masonry .view-content ul",
  },
  mq: {
    mobileNarrower: Modernizr.mq("only screen and (max-width : 320px)"),
    mobileWider: Modernizr.mq("only screen and (min-width : 320px)"),
    tabletNarrower: Modernizr.mq("only screen and (max-width : 767px)"),
    tabletWider: Modernizr.mq("only screen and (min-width : 768px)"),
    desktopNarrower: Modernizr.mq("only screen and (max-width : 1023px)"),
    desktopWider: Modernizr.mq("only screen and (min-width : 1024px)"),
    largeDesktopNarrower: Modernizr.mq("only screen and (max-width : 1402px)"),
    largeDesktopWider: Modernizr.mq("only screen and (min-width : 1403px)"),
  },
  topnavhighlight: {
    "node-type-blog": ".menu-link-24791",
    "node-type-photo": ".menu-link-27981",
    "node-type-video": ".menu-link-27976",
    "node-type-album": ".menu-link-24836",
    "node-type-forum": ".menu-link-24846",
    "node-type-audio": ".menu-link-24836",
    "page-news-v1-category": ".menu-link-24791",
    "page-photo-v1-category": ".menu-link-27981",
    "page-video-v1-category": ".menu-link-27976",
    "page-video-category": ".menu-link-27976",
    "page-forum-": ".menu-link-24846",
  },
  merchConfig: {
    merchBlockSelector: "#merchContainer",
    merchDataSelector: "#merchData",
    merchCartSelector: "#block-views-merch-block-1",
  },
  bidWidgets: {
    wideLayout: "#block-block-516",
    narrowLayout: "#block-block-521",
  },
};
var detailSidebarConfig = {
  "node-type-blog": "#block-views-home-one-page-news-block-1",
  "node-type-photo": "#block-views-home-one-page-photos-block-2",
  "node-type-video": "#block-views-home-one-page-video-block",
  "node-type-album": "#block-views-albums-block",
};

function detailSidebar() {
  // console.log("sidebar to page content");
  var _hasOwn = Object.prototype.hasOwnProperty;
  for (var i in detailSidebarConfig) {
    if (_hasOwn.call(detailSidebarConfig, i)) {
      var moreBlock = detailSidebarConfig[i];
      if (
        jQuery("body").hasClass(i) &&
        jQuery("body").hasClass("body-layout-fixed-ca") &&
        jQuery("#sidebar-a").find(moreBlock).length > 0
      ) {
        if (i == "node-type-album") {
          jQuery("#content-area #block-views-music-block-2").after(
            jQuery(moreBlock)
          );
        } else {
          jQuery("#content-area .block-views:first-child").after(
            jQuery(moreBlock)
          );
        }
        return;
      }
    }
  }
}

function revertSidebar() {
  // console.log("page content to sidebar");
  var _hasOwn = Object.prototype.hasOwnProperty;
  for (var i in detailSidebarConfig) {
    if (_hasOwn.call(detailSidebarConfig, i)) {
      var moreBlock = detailSidebarConfig[i];
      if (
        jQuery("body").hasClass(i) &&
        jQuery("body").hasClass("body-layout-fixed-ca") &&
        jQuery("#sidebar-a").find(moreBlock).length <= 0
      ) {
        if (jQuery("body").hasClass("not-logged-in")) {
          jQuery("#sidebar-a").find("#block-block-26").after(jQuery(moreBlock));
        } else {
          jQuery("#sidebar-a")
            .find(".region.region-sidebar-a")
            .prepend(jQuery(moreBlock));
        }
        return;
      }
    }
  }
}

function responsivise() {
  if (jQuery("body").hasClass("body-layout-fixed-ca")) {
    if (Modernizr.mq("only screen and (max-width : 1023px)")) {
      if (jQuery("#main").isAfter(jQuery("#sidebar-a"))) {
        jQuery("#sidebar-a").before(jQuery("#main"));
      }
    } else {
      if (jQuery("#sidebar-a").isAfter(jQuery("#main"))) {
        jQuery("#sidebar-a").after(jQuery("#main"));
      }
    }
  }
}

/* ************************[=== CATEGORY FORMATTERS ===]***************************/

function categoryFormatterLR() {
  jQuery(".tags-dropdown").show();
  var viewToAppend = jQuery(".view-categories");
  var activeCategory = viewToAppend.find("a.active span.category").text();
  activeCategory = "filter by <span>" + activeCategory + "  </span>";
  jQuery("#block-system-main .tags-dropdown").html(activeCategory);
  viewToAppend.insertAfter("#block-system-main .tags-dropdown");
  viewToAppend.hide();
  jQuery(ONEPAGE.categoryBlocks).hide();
}

function categoryFormatterHR() {
  jQuery(".tags-dropdown").hide();
  var viewToAppend = jQuery(".view-categories");
  jQuery(ONEPAGE.categoryBlocks).find(".content").append(viewToAppend);
  jQuery(ONEPAGE.categoryBlocks).show();
  viewToAppend.show();
}

function categoryDropdownToggle() {
  jQuery(".tags-dropdown").live("click", function () {
    jQuery(this).parent().find("> .view-categories").slideToggle();
  });
}

/* ************************[=== PROFILE LAYOUTING ===]***************************/

var profilePage = {
  avatarBlock: "#block-views-user-profile-block-5",
  aboutMeBlock: "#block-views-user-profile-block-2",
  commentWallBlock: "#block-views-user-profile-block-6",
};

var $showMoreField = jQuery(profilePage.aboutMeBlock).find(".view-footer");

function profileAboutMeToggler() {
  var $showMoreField = jQuery(profilePage.aboutMeBlock).find(".view-footer");
  /* Bind click to show more for resolutions less than 1024 */
  $showMoreField.find("a").live("click", function (event) {
    jQuery(this).toggleClass("expanded");
    $showMoreField.siblings(".view-content").find(".views-field").toggle();
    $showMoreField
      .siblings(".view-content")
      .find(".views-field-field-about-me")
      .show();
    event.preventDefault();
  });
}

function profileLayoutingLR() {
  var $showMoreField = jQuery(profilePage.aboutMeBlock).find(".view-footer");
  jQuery(profilePage.avatarBlock).insertBefore(profilePage.commentWallBlock);
  jQuery(profilePage.aboutMeBlock).insertBefore(profilePage.commentWallBlock);

  jQuery(profilePage.aboutMeBlock).find(".views-field").hide();
  jQuery(profilePage.aboutMeBlock).find(".views-field-field-about-me").show();

  $showMoreField.show();
}

function profileLayoutingHR() {
  var $showMoreField = jQuery(profilePage.aboutMeBlock).find(".view-footer");
  var $avatarBlock = jQuery(profilePage.avatarBlock);
  var $aboutMeBlock = jQuery(profilePage.aboutMeBlock);

  jQuery(".region-sidebar-a").prepend($aboutMeBlock);
  jQuery(".region-sidebar-a").prepend($avatarBlock);
  $aboutMeBlock.find(".views-field").show();

  $showMoreField.hide();
}
/* ************************[=== ATTACH PHOTO SWIPE ===]**************************
 */
attachPhotoSwipe = function () {
  var instance, options;

  options = {};
  instance = window.Code.PhotoSwipe.attach(
    window.document.querySelectorAll(ONEPAGE.fancyboxSelector),
    options
  );
};

/* ************************[=== CLOSE DETAIL WHEN SHOW-MORE/CLOSE-BUTTON/DETAIL-REGION IS CLICKED ===]**************************
 */

function newsDetailClose() {
  var $newsView, $showMore;

  $newsView = jQuery(ONEPAGE.homepageBlocks.news);
  $showMore = $newsView.find(".item-list .pager .pager-next.first.last a");
  $showMore.bind("click", function () {
    if (ONEPAGE.mq.tabletWider) {
      $newsView.find(".views-rows-detail").remove();
    } else {
      jQuery(
        ".view-home-one-page-news .views-row .views-field-nothing.open"
      ).hide();
    }
  });
  if (ONEPAGE.mq.tabletWider) {
    jQuery(".news-detail-close span").live("click", function () {
      jQuery(this).parent().parent().parent().parent().parent().remove();
    });
  } else if (ONEPAGE.mq.tabletNarrower) {
    jQuery(".news-detail-close span").live("click", function () {
      jQuery(this).parent().parent().parent().parent().hide();
    });
  }
}

/* ************************[=== TOGGLING NEWS DETAIL ===]**************************
 */

function arrangeNewsDetail() {
  var $newsView, $newsViewRow, $pager;

  $newsView = jQuery(ONEPAGE.homepageBlocks.news);
  $newsViewRow = $newsView.find(".views-row");
  $pager = $newsView.find(".item-list .pager");
  numberOfLI = $newsViewRow.length;

  $newsViewRow
    .find(".views-field-title a, .media-postDate")
    .live("click", function (event) {
      var $activeDetail, $activeViewRow, $newsDetail, activeHTML, endLIoffset;

      $activeViewRow = jQuery(this).parent().parent().parent();
      $activeDetail = $activeViewRow.find(".views-field-nothing-2");

      if (ONEPAGE.mq.tabletWider) {
        $newsView.find(".views-rows-detail").remove();
        /* Calculating where to append. If there are 3 items/row, appending at last. If less than 3, appending after the last item in a row.
         */
        endLIoffset = $activeViewRow.index() + 1;
        // endLIoffset = ( $newsViewRow.length % 3 === 0 ? Math.ceil(endLIoffset / 3) * 3 : 1 );
        endLIoffset =
          $newsViewRow.length % numberOfLI === 0
            ? Math.ceil(endLIoffset / numberOfLI) * numberOfLI
            : 1;
        console.log("appending to " + endLIoffset);
        activeHTML = $activeDetail.outerHTML();
        $newsDetail = jQuery(
          "<li class='views-rows-detail'>" + activeHTML + "</li>"
        );
        $newsView
          .find(".views-row:nth-of-type(" + endLIoffset + ")")
          .addClass("current")
          .after($newsDetail);
      } else {
        $activeDetail.toggleClass("open").slideToggle();
      }
      event.preventDefault();
    });

  // READ MORE LINK
  var $trimmedBody;
  if (ONEPAGE.mq.tabletWider) {
    $trimmedBody = $newsView.find(
      ".views-rows-detail .field-news-detail.trimmed .views-more-link"
    );
  } else {
    $trimmedBody = $newsView.find(
      ".news-detail .field-news-detail.trimmed .views-more-link"
    );
  }

  $trimmedBody.live("click", function (event) {
    var $this = jQuery(this);

    $this.parents(".field-news-detail").hide();
    $this.parents(".field-news-detail").next().show();

    event.preventDefault();
  });
}

/* ************************[=== FANCYBOX ===]**************************
 */
function photosFBox() {
  if (ONEPAGE.mq.tabletWider) {
    $jq18(ONEPAGE.fancyboxSelector).fancybox({
      openEffect: "none",
      closeEffect: "none",
      helpers: {
        title: {
          type: "inside",
        },
      },
      afterLoad: function () {
        var href = $jq18(this.element).next().attr("href");
        this.title = "<a href='" + href + "'>" + this.title + "</a>";
      },
    });
  }
}

/* ************************[=== ONEPAGE ISOTOPE ===]**************************
 */
function onepageIsotope() {
  var columnWidth;
  if (ONEPAGE.mq.largeDesktopWider) {
    columnWidth = $jq18(ONEPAGE.isotope.news).width() / 4;
  } else if (ONEPAGE.mq.tabletWider) {
    columnWidth = $jq18(ONEPAGE.isotope.news).width() / 3;
  }

  if (!ONEPAGE.mq.tabletNarrower) {
    $jq18(ONEPAGE.isotope.news).isotope({
      itemSelector: ".views-row",
      masonry: {
        columnWidth: columnWidth,
        gutterWidth: 25,
      },
    });
  }
}

/* ************************[=== Relayout using Isotope when READ MORE is clicked ===]**************************
 */
function onepageIsotopeRelayout() {
  var columnWidth = $jq18(ONEPAGE.isotope.news).width(),
    columnWidth_twothird = Math.floor((columnWidth * 2) / 3) - 42,
    columnWidth_half = Math.floor(columnWidth / 2) - 75,
    columnWidth_third = Math.floor(columnWidth / 3) - 10;

  $jq18(ONEPAGE.isotope.news).delegate(
    ".views-more-link, .views-field-title a",
    "click",
    function (event) {
      var $trimmedBody, $currentRow, $siblingRows, $blogMedia;

      if ($jq18(this).hasClass("views-more-link")) {
        $trimmedBody = $jq18(this).parent().parent();
      } else {
        $trimmedBody = $jq18(this)
          .parent()
          .parent()
          .siblings(".views-field-body");
      }

      ($currentRow = $trimmedBody.parent()),
        ($siblingRows = $currentRow.siblings()),
        ($blogMedia = $trimmedBody.prev(".views-field-field-blog-media"));

      // Hide and show stuff around
      $trimmedBody.hide();
      $currentRow.siblings().find(".views-field-body").show();

      $trimmedBody.next().show();
      $currentRow.siblings().find(".views-field-nothing-1").hide();

      if ($blogMedia) {
        $blogMedia.hide();
        $currentRow.siblings().find(".views-field-field-blog-media").show();
      }

      if (ONEPAGE.mq.largeDesktopWider) {
        $siblingRows.css("width", "24.5%");
        $currentRow.width(columnWidth_half);
      } else if (ONEPAGE.mq.tabletWider) {
        $siblingRows.css("width", "31%");
        $currentRow.width(columnWidth_twothird);
      }

      if (!ONEPAGE.mq.tabletNarrower) {
        $siblingRows.removeClass("highlighted");
        $currentRow.addClass("highlighted");
        $jq18(ONEPAGE.isotope.news).isotope("reLayout");
      }

      event.preventDefault();
    }
  );
}

/* ************************[=== ISOTOPE AFTER AJAX COMPLETE ===]**************************
 */
function onepageIsotopeAJAX() {
  jQuery(".view-home-one-page-masonry").ajaxComplete(function () {
    $jq18(".view-home-one-page-masonry .view-content ul")
      .isotope("reloadItems")
      .isotope({
        sortBy: "original-order",
      });
    $jq18(".view-home-one-page-masonry .view-content ul").isotope("reLayout");
  });
}

/* ************************[=== COMMENTS FORMATTING ===]**************************
 */
function commentsFormatting() {
  // REMOVE HYPHEN IN COMMENTS
  jQuery(".comment .submitted").each(function () {
    jQuery(this)
      .contents()
      .filter(function () {
        return this.nodeType == 3;
      })[1].nodeValue = "";
  });

  // REMOVE HYPHEN IN COMMENTS TIME FORMAT
  jQuery(".comment .submitted .date span").each(function () {
    jQuery(this)
      .contents()
      .filter(function () {
        return this.nodeType == 3;
      })[0].nodeValue = jQuery(this).text().replace(/-/g, " ");
  });
}

function commentsFormattingAjax() {
  commentsFormatting();

  jQuery(".view-music .views-field-nothing-2").ajaxComplete(function () {
    commentsFormatting();
  });
}
function musicLanding() {
  var $music = jQuery(".view-music");

  var musicDOMObj = {
    title: ".views-field-title a",
    lyrics: {
      link: ".lyricsoftracks",
      data: ".views-field-field-lyrics",
    },
    comment: {
      link: ".reactionsoftracks",
      data: ".views-field-nothing-2",
    },
    video: {
      link: ".videooftracks",
      data: ".views-field-field-video-asset",
    },
  };

  var soundCloud = {
    pause: ".sc-player.playing a.sc-pause",
  };

  /*
   * Title click => play/$pause SC player
   * */
  $music.find(musicDOMObj.title).live("click", function (event) {
    var $this = jQuery(this);
    var $pause = $this.parents(".views-row").find(soundCloud.pause);

    if ($pause.length) {
      $pause.click();
    } else {
      $this.parents(".views-row").find(".sc-player a.sc-play:first").click();
    }
    event.preventDefault();
  });

  /*
   * Lyrics click => toggle lyrics
   * */
  $music.find(musicDOMObj.lyrics.link).live("click", function (event) {
    var $this = jQuery(this);

    $this.parents(".views-row").find(musicDOMObj.lyrics.data).toggle();
    $this.parents(".views-row").find(musicDOMObj.comment.data).hide();
    $this.parents(".views-row").find(musicDOMObj.video.data).hide();

    event.preventDefault();
  });

  /*
   * Comments click => toggle comments data
   * */
  $music.find(musicDOMObj.comment.link).live("click", function (event) {
    var $this = jQuery(this);
    var nid = $this.attr("name");

    if (
      $this
        .parents(".views-row")
        .find(musicDOMObj.comment.data + " .reactions-content span")
        .html().length == 0
    ) {
      jQuery.get(
        "/views/ajax",
        {
          page: 0,
          view_name: "_album_track_comment_",
          view_display_id: "default",
          view_args: nid,
        },
        function (result) {
          $this
            .parents(".views-row")
            .find("div.reactions-content span." + nid)
            .html(result[1].data);
        }
      );

      $this.parents(".views-row").find(musicDOMObj.comment.data).toggle();
      $this.parents(".views-row").find(musicDOMObj.lyrics.data).hide();
      $this.parents(".views-row").find(musicDOMObj.video.data).hide();
    } else {
      $this.parents(".views-row").find(musicDOMObj.comment.data).toggle();
      $this.parents(".views-row").find(musicDOMObj.lyrics.data).hide();
      $this.parents(".views-row").find(musicDOMObj.video.data).hide();
    }

    event.preventDefault();
  });

  /*
   * Disable videos link if track has no video
   * Videos click => toggle video
   * */
  $music.find(musicDOMObj.video.link).each(function (event) {
    var $this = jQuery(this);
    var $video = $this.parents(".views-row").find(musicDOMObj.video.data);
    if ($video.length > 0) {
      $this.click(function (event) {
        var $self = jQuery(this);

        $video.toggle();

        $self.parents(".views-row").find(musicDOMObj.lyrics.data).hide();
        $self.parents(".views-row").find(musicDOMObj.comment.data).hide();

        event.preventDefault();
      });
    } else {
      $this.removeAttr("href");
    }
  });

  jQuery(".views-field-field-services").hover(
    function () {
      jQuery(this).find(".field-content .item-list ul").show();
    },
    function () {
      jQuery(this).find(".field-content .item-list ul").hide();
    }
  );

  // Override default show more page for AJAX fetched comments view in the reactions section

  jQuery(".reactions-content .pager-next.first.last a").live("click", function (
    event
  ) {
    var data_href = jQuery(this).attr("href");
    jQuery(this).attr("data-href", data_href);
    jQuery(this).attr("href", "javascript:void(0);");
    var nid = jQuery(this).parents("span").attr("class");
    var par = data_href.substr(data_href.length - 1);
    jQuery(this).hide();

    jQuery.get(
      "/views/ajax",
      {
        page: par,
        view_name: "_album_track_comment_",
        view_display_id: "default",
        view_args: nid,
      },
      function (result) {
        jQuery("div.reactions-content span." + nid).append(result[1].data);
      }
    );

    event.preventDefault();
  });
}

function musicDisableEmpty() {
  var $liElement = jQuery(".view-music .view-content .views-row");

  $liElement.each(function () {
    var $this = jQuery(this);

    if (
      $this.find(".views-field-field-lyrics .field-content .lyrics-content")
        .length == 0
    ) {
      $this.find("a.lyricsoftracks").addClass("disabled");
    }
    if (
      $this.find(".views-field-field-video-asset .field-content object")
        .length == 0
    ) {
      $this.find("a.videooftracks").addClass("disabled");
    }
    if (
      $this.find(".views-field-field-mp3-player .field-content").text() == 0
    ) {
      $this.find(".views-field-field-mp3-player").addClass("disabled");
    }
  });
}
function forum_created_latest() {
  var $forumCategoryLanding = jQuery(".page-forum.page-forum-");

  if ($forumCategoryLanding.length > 0) {
    // Expand created info on click
    var $forumTable = jQuery(
      "#block-views-be97a62486938aae0230cdbd8af78a79 .view-home-one-page-forum-category-landing table"
    );
    var $createdLink = $forumTable.find(".views-field-nothing a");

    $createdLink.click(function () {
      var $viewRow = jQuery(this).parent().parent();
      var $createdInfo = $viewRow.find(".views-field-nothing-2");

      $createdInfo.slideToggle();
    });

    // page title for forum landing and forum category landing
    var title = $forumCategoryLanding.find("#page-title").text();
    var titleCnt = "<div class='tax-term-name'>" + title + "</div>";

    $forumCategoryLanding.find("#page-title").text("Forums");
    jQuery("#block-system-main .top .top-inset-2.tb-terminal").append(titleCnt);

    // add class for sticky content for forum category landing
    jQuery($forumTable.find("tr")).each(function () {
      var isSticky = jQuery.trim(jQuery(this).find("td.is-sticky").text());
      isSticky = isSticky === "True" ? true : false;
      if (isSticky) {
        jQuery(this).addClass("sticky");
      }
    });
  }
}

/* ************************[=== CHANGING PAGE TITLES TO SIGN IN/UP PAGES ===]**************************
 */
function userPagesTitles() {
  if (jQuery("body").hasClass("page-user")) {
    if (jQuery("#user-login").length > 0) {
      jQuery("#page-title").text("Sign In");
    }
    if (jQuery("#user-register-form").length > 0) {
      jQuery("#page-title").text("Sign Up");
    }
    if (jQuery("#user-pass").length > 0) {
      jQuery("#page-title").text("Forgot your password?");
    }
  }
}
/* ************************[=== SET IDs FOR MENU ITEMS ===]**************************
 */

function setNavigation() {
  jQuery(ONEPAGE.homepageBlocks.photo).find("h2").attr("id", "photos");
  jQuery(ONEPAGE.homepageBlocks.about).find("h2").attr("id", "about");
  jQuery(ONEPAGE.homepageBlocks.tour).find("h2").attr("id", "tour");
}

function hideGlobalHat() {
  jQuery("#block-views-user-profile-block-3").hide();
}

/* ************************[=== IMAGE REPLACE ===]**************************
 */

function IR_org_true(selector, ajax) {
  ajax = typeof ajax === "boolean" ? ajax : false;
  jQuery(selector).find("img").imgReplace({
    original: true,
  });
  if (ajax) {
    jQuery(selector).ajaxComplete(function () {
      IR_org_true(selector);
    });
  }
}

/* ************************[=== HEADER NAV ===]**************************
 */
function headerNavigation() {
  var $menu;

  $menu = jQuery(ONEPAGE.menu).find(".content");
  if ($menu.length > 0) {
    $menu.click(function () {
      jQuery("ul.menu", this).slideToggle();
    });
  }
}

/* ***** ===[ MOBILE UNBIND FUNCTION ]=== **************
 */

function unBindFunction() {
  jQuery(".not-logged-in .no_overlay").unbind("click");
  jQuery(".not-logged-in .no_overlay").attr("href", "/user/login");

  jQuery(
    "body.page-user-register.not-logged-in .form-navigation-wrapper a.user-dialog-processed "
  ).unbind("click");
  jQuery(
    "body.page-user-register.not-logged-in .form-navigation-wrapper a.user-dialog-processed "
  ).attr("href", "/user/login");

  jQuery(
    "#dialog-form-wrapper #user-register-form-dialog .form-navigation-wrapper a"
  ).unbind("click");
  jQuery(
    "#user-register-form #edit-actions .submit-button-wrapper .form-navigation-wrapper a"
  ).unbind("click");

  jQuery("#block-block-126 li a").attr("class", "");
  jQuery(".not-logged-in #block-block-126 li a").unbind("click");
  jQuery(".not-logged-in #block-block-126 li a").attr("href", "/user/login");
  jQuery(".not-logged-in #block-block-126 li.subscribe-hat a").attr(
    "href",
    "/mailing-list"
  );
  jQuery(".not-logged-in #block-block-126 li.join-link a").attr(
    "href",
    "/user/register"
  );

  jQuery(".not-logged-in #block-block-691 li:first-child a").attr(
    "href",
    "/user/login"
  );
  jQuery("#block-block-691 li:first-child a").attr("class", "");
  jQuery(".not-logged-in #block-block-691 li:first-child a").unbind("click");
}

function unbindLogin() {
  var unbinder = function (sel, href) {
    var $sel = jQuery(sel);
    $sel.attr("href", href);
    $sel.removeClass(
      "use-ajax use-dialog ajax-processed use-dialog-processed user-dialog-processed"
    );
    $sel.unbind("click");
  };

  unBindFunction();

  unbinder("#block-block-26 .signinCommLink", "/user/login");

  unbinder("#block-block-26 .joinCommLink", "/user/register");

  unbinder(
    ".view-login-or-register-to-post-commen .field-content a",
    "/user/register"
  );

  unbinder(
    ".view-login-or-register-to-post-commen .field-content a:first-child",
    "/user/login"
  );

  unbinder(
    "body.page-user #page #main #block-system-main #user-login .form-item .description a",
    "/user/password"
  );

  unbinder(
    "body.page-user #page #main #block-system-main #user-login .form-item .description a",
    "/user/password"
  );

  unbinder(
    "body.page-user-register #user-register-form .submit-button-wrapper .form-navigation-wrapper.form-control a",
    "/user/login"
  );

  unbinder(
    "body #main #block-system-main #user-login .submit-button-wrapper .form-navigation-wrapper.form-control a",
    "/user/register"
  );

  unbinder(".filter-help a", "/user/register");

  jQuery(
    "#dialog-form-wrapper #user-register-form-dialog .form-navigation-wrapper a"
  ).unbind("click");
  jQuery(
    "#user-register-form #edit-actions .submit-button-wrapper .form-navigation-wrapper a"
  ).unbind("click");

  jQuery("body").ajaxComplete(function () {
    unBindFunction();

    var $sign_commlink = jQuery(".signinCommLink");
    $sign_commlink.attr("href", "/user/login");
    $sign_commlink.removeClass(
      "use-ajax use-dialog ajax-processed use-dialog-processed user-dialog-processed"
    );
    $sign_commlink.unbind("click");
  });
}

function appendNodeAdd() {
  if (jQuery("#block-menu-menu-user-menu ul.menu li").length > 0) {
    jQuery("#block-views-user-profile-block-3 .hover-user-menu").append(
      jQuery("#block-menu-menu-user-menu ul.menu li")
    );
  }
}

/* ************************[=== ACTIVE CLASS ADDER FOR DETAIL PAGES ===]***************************/

function addActiveClass() {
  for (i in ONEPAGE.topnavhighlight) {
    var linkTOBeActive = ONEPAGE.topnavhighlight[i];
    if (jQuery("body").hasClass(i)) {
      jQuery(linkTOBeActive).find("a").addClass("active");
    }
  }
}

function memberFeedList() {
  var $feedListBlock = jQuery(ONEPAGE.activityBlock);
  $feedListBlock.find(".views-row").each(function () {
    var $this = jQuery(this);
    var classtoAdd = "forum-entry";
    if ($this.find(".views-field-video-asset").html().length > 0) {
      classtoAdd = "video-entry";
    } else if ($this.find(".views-field-photo-asset").html().length > 0) {
      classtoAdd = "photo-entry";
    }
    $this.addClass(classtoAdd);
  });
}

function userNameReplace() {
  var meRegex = /\b(ME)\b/gi;
  var myRegex = /\b(MY)\b/gi;
  var loggedInUser = Drupal.settings.server_variables.user_name;
  var whichUserProfile = jQuery(".page-user #page-title").text().trim();

  if (loggedInUser !== whichUserProfile) {
    jQuery(".page-user .block").each(function () {
      var activeHeading = jQuery(this).find(".middle >  h2");
      var textToReplace = activeHeading.text();
      if (meRegex.test(textToReplace)) {
        textToReplace = textToReplace.replace("Me", whichUserProfile);
        activeHeading.text(textToReplace);
      } else if (myRegex.test(textToReplace)) {
        textToReplace = textToReplace.replace("My", whichUserProfile + "'s");
        activeHeading.text(textToReplace);
      }
    });
  }
}

function blogSnShare() {
  jQuery("div.fb-like-box").each(function () {
    jQuery(this).html(
      '<iframe src="http://www.facebook.com/plugins/like.php?href=' +
        jQuery(this).attr("data-href") +
        '&amp;send=false&amp;layout=box_count&amp;width=450&amp;show_faces=true&amp;action=like&amp;colorscheme=light&amp;font=verdana&amp;height=65" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:450px; height:65px;" allowTransparency="true"></iframe>'
    );
  });

  jQuery(".share_button").live("click", function () {
    jQuery(this).find(".toggler").toggle();
  });
}

function merchInit() {
  /* Initializing Merch 
	var sidebarMerch = new WMG.Merch({
		"dataSel" : ONEPAGE.merchConfig.merchDataSelector,
		"targetSel" : ONEPAGE.merchConfig.merchBlockSelector
	});

	sidebarMerch.populateDOM();*/

  var $merchContainer = jQuery(ONEPAGE.merchConfig.merchBlockSelector);
  if ($merchContainer.length > 0) {
    var merchLayout = $merchContainer.attr("class");
    if (merchLayout.indexOf("Carousel") > -1) {
      $merchContainer.flexslider({
        selector: "ul.merchItems li.merch",
        animation: "slide",
        useCss: false,
        controlNav: true,
        namespace: "merchflex-",
      });
    }
  }

  var $merchCartContainer = jQuery(ONEPAGE.merchConfig.merchCartSelector);
  if ($merchCartContainer.length > 0) {
    var merchclass = jQuery(
      "#block-views-merch-block-1 .view-merch .view-content > ul >li"
    ).attr("class");
    if (merchclass.indexOf("Carousel") > -1) {
      jQuery(
        "#block-views-merch-block-1 .view-merch .view-content > ul li .view"
      ).flexslider({
        selector: "ul.merchitems li.merch",
        animation: "slide",
        useCss: false,
        controlNav: true,
        namespace: "merchclass-",
      });
    }
  }
}

function setFlippyDefaultImage(defaultImage) {
  jQuery("body .region-content ul.flippy li").each(function () {
    var imgSrc = jQuery(this).find("img").attr("src");
    if (typeof imgSrc === "undefined" || imgSrc.indexOf("http") == -1) {
      jQuery(this).find("img").attr("src", defaultImage);
    }
  });
}

/* ************************[=== Tour Widget based on devices===]***************************/

displayTourWidget = function () {
  if (Modernizr.mq("only screen and (max-width : 767px)")) {
    jQuery(ONEPAGE.bidWidgets.wideLayout).hide();
    jQuery(ONEPAGE.bidWidgets.narrowLayout).show();
  } else {
    jQuery(ONEPAGE.bidWidgets.wideLayout).show();
    jQuery(ONEPAGE.bidWidgets.narrowLayout).hide();
  }
};
WMG.namespace("WMG.Constants.Pages");
WMG.Constants.Pages = {
  isHomePage: jQuery("body").hasClass("front"),
  isNewsPage: jQuery("body").hasClass("page-news"),
  isNewsDetail: jQuery("body").hasClass("node-type-blog"),
  isUser: jQuery("body").hasClass("page-user"),
};

/* Flex Essentials */
var $flexPhotoContent, flexAutoRotate, flexOpts, flexRoleArray;
var flexDirectionNav = true;
//flexRoleArray = Drupal.settings.server_variables.user_roles;
var $flexPhotoContent = jQuery(
  "#block-views-home-one-page-carousel-block-2 .view-content"
);
//flexAutoRotate = (jQuery.trim($flexPhotoContent.find(".views-field-field-auto-rotate .field-content").text()) === "TRUE" ? true : false );
flexOpts = {
  selector: "ul > li",
  animation: "slide",
  directionNav: false,
  useCSS: false,
  slideshow: true,
  start: function (slider) {
    $flexPhotoContent.find(".item-list").resize();
  },
};

$jq18(document).ready(function () {
  WMG.namespace("WMG.Constants.Pages");
  WMG.Constants.Pages = {
    isHomePage: jQuery("body").hasClass("front"),
    isNewsPage: jQuery("body").hasClass("page-news"),
    isNewsDetail: jQuery("body").hasClass("node-type-blog"),
    isUser: jQuery("body").hasClass("page-user"),
  };
  switch (ONEPAGE.theme) {
    case "onepage":
      // photo
      photosFBox();
      break;
    case "onepage-a":
      break;
    case "onepage-b":
      break;
    case "onepage-isotope":
      // blog
      onepageIsotopeRelayout();
      // photo
      photosFBox();
      // video
      break;
  }
  if (jQuery("body").hasClass("page-node-17751")) {
    // To-do
    ONEPAGE.theme = "onepage";
  } else if (jQuery("body").hasClass("page-node-17746")) {
    ONEPAGE.theme = "onepage-a";
  } else if (jQuery("body").hasClass("page-node-17741")) {
    ONEPAGE.theme = "onepage-b";
  } else if (jQuery("body").hasClass("page-node-17756")) {
    ONEPAGE.theme = "onepage-isotope";
  }

  /* Tour narrow or Wide layout based on devices*/
  displayTourWidget();
  switch (ONEPAGE.theme) {
    case "onepage":
      // blog
      arrangeNewsDetail();
      newsDetailClose();
      jQuery(ONEPAGE.newsList).ajaxComplete(newsDetailClose);
      hideGlobalHat();
      break;

    case "onepage-a":
      commentsFormattingAjax();
      userPagesTitles();
      responsivise();
      if (ONEPAGE.mq.desktopNarrower) {
        detailSidebar();
        categoryFormatterLR();
        profileLayoutingLR();
      }
      forum_created_latest();
      musicLanding();
      musicDisableEmpty();
      appendNodeAdd();
      break;

    case "onepage-b":
      commentsFormattingAjax();
      userPagesTitles();
      responsivise();
      if (ONEPAGE.mq.desktopNarrower) {
        detailSidebar();
        categoryFormatterLR();
        profileLayoutingLR();
      }
      forum_created_latest();
      musicLanding();
      musicDisableEmpty();
      appendNodeAdd();
      break;

    case "onepage-isotope":
      onepageIsotopeAJAX();
      userPagesTitles();
      commentsFormattingAjax();
      responsivise();
      if (ONEPAGE.mq.desktopNarrower) {
        detailSidebar();
        categoryFormatterLR();
        profileLayoutingLR();
      }
      forum_created_latest();
      musicLanding();
      musicDisableEmpty();
      appendNodeAdd();
      break;
  }
  /*Setting News detail page flippy pager default Image*/
  if (WMG.Constants.Pages.isNewsDetail) {
    var defaultImage =
      "http://sandbox.wmg-gardens.com/sites/g/files/g2000003636/f/201307/rise.jpg";
    setFlippyDefaultImage(defaultImage);
  }
  if (WMG.Constants.Pages.isUser) {
    if (jQuery(profilePage.aboutMeBlock).find(".views-row").length > 0) {
      if (
        jQuery(profilePage.aboutMeBlock).find(".views-row").html().trim()
          .length == 0
      ) {
        jQuery(profilePage.aboutMeBlock).hide();
      }
    }
    profileAboutMeToggler();
    /* user activity feed */
    memberFeedList();
    jQuery(ONEPAGE.activityBlock).ajaxComplete(memberFeedList);
    /* user name replace */
    userNameReplace();
  }

  if (WMG.Constants.Pages.isHomePage) {
    setNavigation();
  }
  if (ONEPAGE.mq.tabletNarrower) {
    _docReady_min_320();
  }
  if (ONEPAGE.mq.tabletWider) {
    _docReady_min_768();
  }

  jQuery(window).bind("orientationchange", _orientationHandler);
  addActiveClass();
  categoryDropdownToggle();
  blogSnShare();

  /* blog Social share */
  (function () {
    var po = document.createElement("g:plusone");
    var po = document.createElement("script");
    po.type = "text/javascript";
    po.async = true;
    po.src = "https://apis.google.com/js/plusone.js";
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(po, s);
  })();
  if (ONEPAGE.mq.tabletNarrower) {
    unbindLogin();
  }

  /*To add active class to category based pages */
  var pathArray = window.location.pathname.split("/");
  var currCategory = pathArray[3];
  if (typeof currCategory !== "undefined" && currCategory !== undefined) {
    jQuery(".view-categories .view-content ul li").each(function () {
      if (
        currCategory ===
        jQuery(this).find(".views-field-name a > span").html().trim()
      ) {
        jQuery(this).find(".views-field-name a").addClass("active");
      }
    });
  }

  /*To make Menu Links external if the URL is External Page URL */
  jQuery(".menu a").makeLinksExternal();

  /* click events for show more pager */
  jQuery(".pager-next.first.last a").click(function () {
    var omniVars = {};
    omniVars.prop1 = s_dtm.prop1;
    omniVars.eVar4 = s_dtm.eVar4;
    omniVars.events = "event16";
    omniVars.linkTrackEvents = "event16";
    var description = s_dtm.pageName + ":Show More Click";

    s_dtm.linkTrackVars = Object.keys(omniVars);
    s_dtm = jQuery.extend(s_dtm, omniVars);

    s_dtm.tl(this, "o", description);
  });

  /* Fixed Nav */
  var colSecond = jQuery(".stack-preheader .col-second");
  //var colSecondOffset = colSecond.offset().top;

  if (WMG.fixedNavigation) {
    jQuery(window).scroll(function () {
      fixNav(colSecond, colSecondOffset);
    });
  }
});

$jq18(window).load(function () {
  switch (ONEPAGE.theme) {
    case "onepage":
      break;
    case "onepage-a":
      break;
    case "onepage-b":
      break;
    case "onepage-isotope":
      // blog
      onepageIsotope();
      break;
  }
  /* ************************[=== FLEXSLIDER ===]**************************/
  /* ************************[=== MerchSLIDER ===]**************************/
  /* Initializing Merch */
  merchInit();
  /*For Merch Carousel Edit content*/
  var $merchBlockConfigure = jQuery(
    "#block-views-merch-block-1 .contextual-links-wrapper.contextual-flyout-links-processed"
  );
  if (typeof $merchBlockConfigure !== "undefined") {
    $merchBlockConfigure
      .find(".contextual-links")
      .prepend(
        '<li class="editContent"><a href="/node/18286/edit">Edit Content</a></li>'
      );
  }

  /* Post detail gallery carousel - need optimization*/

  /*jQuery('.view-home-one-page-news-detail .view-galleries li.views-row > .item-list ul > li').each(function() {
	 var imgSrc = jQuery(this).find('img').attr('src');
	 jQuery(this).attr('data-thumb', imgSrc)
	 });

	 jQuery('.view-home-one-page-news-detail .view-galleries li.views-row > .item-list').flexslider({
	 selector : "ul > li",
	 animation : "slide",
	 controlNav : "thumbnails",
	 useCSS : false
	 });*/
});

jQuery(window).resize(function () {
  jQuery("#block-views-home-one-page-carousel-block-2").css(
    "width",
    jQuery(window).width() + "px"
  );

  responsivise();
  $menuResize = jQuery(ONEPAGE.menu).find(".content");
  jQuery($menuResize).unbind("click");
  if (Modernizr.mq("only screen and (max-width : 1023px)")) {
    detailSidebar();
    categoryFormatterLR();
    profileLayoutingLR();
  } else {
    revertSidebar();
    categoryFormatterHR();
    profileLayoutingHR();
  }
  /**if (Modernizr.mq("only screen and (max-width : 768px)")) {
		jQuery($menuResize).bind('click', function () {
			jQuery("ul.menu", this).slideToggle();
		});
	}*/
  displayTourWidget();

  /* Fixed Nav */
  var colSecond = jQuery(".stack-preheader .col-second");
  var colSecondOffset = colSecond.offset().top;
  if (WMG.fixedNavigation) {
    fixNav(colSecond, colSecondOffset);
  }
});

_orientationHandler = function () {};

_docReady_min_320 = function () {
  //headerNavigation();
  if (jQuery(ONEPAGE.homepageBlocks.photo).length) {
    attachPhotoSwipe();
    jQuery(ONEPAGE.homepageBlocks.photo).ajaxComplete(attachPhotoSwipe);
  }

  initiateHomeCarousel();
};
_docReady_min_768 = function () {
  // IR_org_true(ONEPAGE.view.photo, true);
  IR_org_true(".view-field-collection-view-carousel-slides");
  //IR_org_true(".view-home-one-page-news", true);
  IR_org_true(".view-home-one-page-masonry", true);

  /* Images loaded tryout */
  initiateHomeCarousel();
};

function initiateHomeCarousel() {
  imagesLoaded(
    "#block-views-home-one-page-carousel-block-2 .view-content",
    function () {
      jQuery("#block-views-home-one-page-carousel-block-2").css(
        "width",
        jQuery(window).width() + "px"
      );
      jQuery("#block-views-home-one-page-carousel-block-2 .view-content")
        .find(".item-list")
        .flexslider(flexOpts);

      jQuery(".flex-prev").live("click", function () {
        jQuery("#block-views-home-one-page-carousel-block-2 .view-content")
          .find(".item-list")
          .flexslider("prev");
        return false;
      });

      jQuery(".flex-next").live("click", function () {
        jQuery("#block-views-home-one-page-carousel-block-2 .view-content")
          .find(".item-list")
          .flexslider("next");
        return false;
      });

      jQuery(".flex-direction-nav").removeClass("disabled");
    }
  );
}

function fixNav(fixedElement, colSecondOffset) {
  var scrollTop = jQuery(window).scrollTop();
  if (scrollTop >= colSecondOffset) {
    fixedElement.addClass("sticky");
    jQuery("body").css(
      "margin-top",
      jQuery(".stack-width .col-second").height()
    ); // 50px - some random no to fix the content jumping
  } else {
    fixedElement.removeClass("sticky");
    jQuery("body").css("margin-top", "0px");
  }
}
(function () {
  var global = this;

  global.WMGTourWidget = function (options) {
    var styling =
        "#wmg-events{display:table;width:100%;} .wmg-events-header { display: table-header-group; } .wmg-event-row{display:table-row;} .wmg-event-row > div, .wmg-events-header > div {display:table-cell;}",
      events,
      date,
      ticket,
      ticket_markup,
      vip_ticket,
      vip_ticket_markup,
      shows = new Array(),
      limit,
      output;

    var Artist = options.Artist;
    limit = options.Limit;
    var NoDatesText = options.NoDatesText;
    var Exclude = options.Exclude;
    var container = document.getElementById("wmg-widget");
    var TourFilter = options.TourFilter;
    var LoadingGif = options.LoadingGif;

    if (typeof Exclude == "undefined") {
      Exclude = new Array();
    }
    if (typeof limit == "undefined" || limit == "" || limit < 1) {
      limit = false;
    }
    if (typeof NoDatesText == "undefined" || NoDatesText == "") {
      NoDatesText = "No dates to display";
    }
    if (typeof TourFilter == "undefined" || TourFilter == "") {
      TourFilter = false;
    }
    if (typeof LoadingGif == "undefined" || LoadingGif == "") {
      LoadingGif = "loader.gif";
    }

    // Dynamic script tag injection
    function jsonp(url) {
      var head = document.head;
      var script = document.createElement("script");

      script.setAttribute("src", url);
      head.appendChild(script);
      head.removeChild(script);
    }

    // Add loading GIF to container
    function addLoader() {
      container.insertAdjacentHTML(
        "beforeend",
        '<div id="wmg-widget-loader" style="text-align:center;"><img src="' +
          LoadingGif +
          '" style="width:30px;margin: 0 auto;"/></div>'
      );
    }

    // Remove loading GIF from container
    function removeLoader() {
      var l = document.getElementById("wmg-widget-loader");
      container.removeChild(l);
    }

    // Add remaining shows to container, if limit being used
    function viewAllEvents(events) {
      var events_output = buildEventsHeader();
      events_output += buildEventRows(events, 0);
      document.getElementById("wmg-events").innerHTML = events_output;
      container.removeChild(document.getElementById("wmg-events-view-all"));
    }

    // Returns regular ticket from tickets array
    function getTicket(tickets) {
      for (var i = 0; i < tickets.length; i++) {
        if (tickets[i].title.indexOf("VIP") == -1) {
          return tickets[i];
        }
      }
    }

    // Returns VIP ticket from tickets array
    function getVIPTicket(tickets) {
      for (var i = 0; i < tickets.length; i++) {
        if (tickets[i].title.indexOf("VIP") > -1) {
          return tickets[i];
        }
      }
      return false;
    }

    // Checks if date is labeled as Sold Out
    function isSoldOut(ticket) {
      if (ticket.title.indexOf("Sold") > -1) {
        return true;
      } else {
        return false;
      }
    }

    function buildEventRows(events, limit) {
      var i = 0;
      var events_output = "";
      var events_length = events.length;
      if (limit != 0) {
        events_length = limit;
      }

      for (i; i < events_length; i++) {
        theEvent = events[i];
        ticket_markup = "";
        vip_ticket_markup = "";

        shows[i] = "";

        var date = new Date(theEvent.the_date);

        var monthNames = [
          "Jan",
          "Feb",
          "Mar",
          "Apr",
          "May",
          "Jun",
          "Jul",
          "Aug",
          "Sep",
          "Oct",
          "Nov",
          "Dec",
        ];

        var formattedDate =
          monthNames[date.getMonth()] +
          " " +
          date.getDate() +
          ", " +
          date.getFullYear();

        if (theEvent.buyonline != null) {
          ticket = getTicket(theEvent.buyonline);

          var ticketText;
          if (isSoldOut(ticket)) {
            ticketText = "Sold Out";
          } else {
            ticketText = "Tickets";
          }
          ticket_markup =
            '<a href="' +
            ticket.url +
            '" target="_blank" itemprop="url">' +
            ticketText +
            "</a>";

          vip_ticket = getVIPTicket(theEvent.buyonline);

          if (vip_ticket) {
            if (isSoldOut(vip_ticket)) {
              ticketText = "Sold Out";
            } else {
              ticketText = "VIP";
            }
            vip_ticket_markup =
              '<a href="' +
              vip_ticket.url +
              '" target="_blank" >' +
              ticketText +
              "</a>";
          } else {
            vip_ticket_markup = "";
          }
        }

        if ((i + 1) % 2 === 0) {
          shows[i] +=
            '<div class="wmg-event-row even" itemscope itemtype="http://schema.org/MusicEvent">';
        } else {
          shows[i] +=
            '<div class="wmg-event-row odd" itemscope itemtype="http://schema.org/MusicEvent">';
        }

        shows[i] += '<meta content="' + theEvent.tour + '" itemprop="name"/>';
        shows[i] +=
          '<div class="wmg-event-date">' +
          '<meta content="' +
          date.getFullYear() +
          "-" +
          ("0" + (date.getMonth() + 1)).slice(-2) +
          "-" +
          ("0" + date.getDate()).slice(-2) +
          '" itemprop="startDate">' +
          formattedDate +
          "</div>";

        shows[i] +=
          '<div class="wmg-event-artist" itemtype="http://schema.org/MusicGroup">' +
          '<meta content="' +
          theEvent.artist +
          '" itemprop="name">' +
          theEvent.artist +
          "</div>";

        shows[i] +=
          '<div class="wmg-event-location"><div class="wmg-event-venue">' +
          theEvent.venue +
          "</div>";

        shows[i] +=
          '<div class="wmg-event-city" itemscope itemprop="location" itemtype="http://schema.org/PostalAddress">' +
          '<meta itemprop="addressLocality" content="' +
          theEvent.city +
          '">' +
          '<meta itemprop="addressRegion" content="' +
          theEvent.state +
          '">' +
          theEvent.city +
          ", " +
          theEvent.country_name +
          "</div></div>";

        shows[i] +=
          '<div class="wmg-event-ticket-link" itemprop="offers" itemtype="http://schema.org/Offer">' +
          '<link href="http://schema.org/InStock" itemprop="availability">' +
          ticket_markup +
          "</div>";

        shows[i] +=
          '<div class="wmg-event-vip-ticket-link" itemprop="offers" itemtype="http://schema.org/Offer">' +
          '<link href="http://schema.org/InStock" itemprop="availability">' +
          vip_ticket_markup +
          "</div>";

        shows[i] += "</div>";

        if (TourFilter) {
          if (
            theEvent.tour &&
            TourFilter.toUpperCase() == theEvent.tour.toUpperCase()
          ) {
            events_output += shows[i];
          }
        } else {
          events_output += shows[i];
        }
      }
      return events_output;
    }

    function buildEventsHeader() {
      var func_output = "";
      func_output += '<div class="wmg-events-header">';

      func_output += '<div class="wmg-event-date">Date</div>';

      if (Exclude.indexOf("Date") != -1) {
        styling +=
          ".wmg-events-header .wmg-event-date, .wmg-event-row .wmg-event-date{display:none;}";
      }

      func_output += '<div class="wmg-event-artist">Artist</div>';

      if (Exclude.indexOf("Artist") != -1) {
        styling +=
          ".wmg-events-header .wmg-event-artist, .wmg-event-row .wmg-event-artist {display:none;}";
      }

      func_output +=
        '<div class="wmg-event-location"><div class="wmg-event-venue">Venue</div>';

      if (Exclude.indexOf("Venue") != -1) {
        styling +=
          ".wmg-events-header .wmg-event-venue, .wmg-event-row .wmg-event-venue {display:none;}";
      }

      func_output += '<div class="wmg-event-city">Location</div></div>';
      if (Exclude.indexOf("City") != -1) {
        styling +=
          ".wmg-events-header .wmg-event-city, .wmg-event-row .wmg-event-city {display:none;}";
      }

      if (Exclude.indexOf("Country") != -1) {
        styling +=
          ".wmg-events-header .wmg-event-country, .wmg-event-row .wmg-event-country{display:none;}";
      }

      func_output += '<div class="wmg-event-ticket-link">Tickets</div>';
      if (Exclude.indexOf("Tickets") != -1) {
        styling +=
          ".wmg-events-header .wmg-event-ticket-link, .wmg-event-row .wmg-event-ticket-link {display:none;}";
      }
      func_output += '<div class="wmg-event-vip-ticket-link">VIP</div>';
      if (Exclude.indexOf("VIPTickets") != -1) {
        styling +=
          ".wmg-events-header .wmg-event-vip-ticket-link, .wmg-event-row .wmg-event-vip-ticket-link {display:none;}";
      }
      func_output += "</div>";

      return func_output;
    }

    // Building out HTML with data
    function buildWidget(events, callback) {
      if (limit > events.length) {
        limit = 0;
      }

      var eventRows = buildEventRows(events, limit);

      if (events.length != 0 && eventRows != "") {
        output = '<div id="wmg-events">';

        output += buildEventsHeader();

        output += eventRows;

        output += "</div>";
      } else {
        output = NoDatesText;
      }

      container.innerHTML = "<style>" + styling + "</style>" + output;

      if (limit && eventRows != "") {
        document
          .getElementById("wmg-events")
          .insertAdjacentHTML(
            "afterend",
            '<button id="wmg-events-view-all">View All</button>'
          );
      }

      callback();
    }

    window.wmg_jsonp_handler = function (data) {
      events = data.shows;
      console.log(events);

      buildWidget(events, function () {
        var button = document.getElementById("wmg-events-view-all");
        if (button) {
          button.onclick = function () {
            viewAllEvents(events);
          };
        }
      });
    };

    var run = function () {
      addLoader();
      jsonp(
        "http://tours-api.dsp.wmg.com/shows.json?callback=wmg_jsonp_handler&artist=" +
          encodeURIComponent(Artist)
      );
    };

    // Public Functions
    return {
      run: run,
    };
  };
})();
/*! Magnific Popup - v0.9.9 - 2013-12-27
 * http://dimsemenov.com/plugins/magnific-popup/
 * Copyright (c) 2013 Dmitry Semenov; */
(function (e) {
  var t,
    n,
    i,
    o,
    r,
    a,
    s,
    l = "Close",
    c = "BeforeClose",
    d = "AfterClose",
    u = "BeforeAppend",
    p = "MarkupParse",
    f = "Open",
    m = "Change",
    g = "mfp",
    h = "." + g,
    v = "mfp-ready",
    C = "mfp-removing",
    y = "mfp-prevent-close",
    w = function () {},
    b = !!window.$jq18,
    I = e(window),
    x = function (e, n) {
      t.ev.on(g + e + h, n);
    },
    k = function (t, n, i, o) {
      var r = document.createElement("div");
      return (
        (r.className = "mfp-" + t),
        i && (r.innerHTML = i),
        o ? n && n.appendChild(r) : ((r = e(r)), n && r.appendTo(n)),
        r
      );
    },
    T = function (n, i) {
      t.ev.triggerHandler(g + n, i),
        t.st.callbacks &&
          ((n = n.charAt(0).toLowerCase() + n.slice(1)),
          t.st.callbacks[n] &&
            t.st.callbacks[n].apply(t, e.isArray(i) ? i : [i]));
    },
    E = function (n) {
      return (
        (n === s && t.currTemplate.closeBtn) ||
          ((t.currTemplate.closeBtn = e(
            t.st.closeMarkup.replace("%title%", t.st.tClose)
          )),
          (s = n)),
        t.currTemplate.closeBtn
      );
    },
    _ = function () {
      e.magnificPopup.instance ||
        ((t = new w()), t.init(), (e.magnificPopup.instance = t));
    },
    S = function () {
      var e = document.createElement("p").style,
        t = ["ms", "O", "Moz", "Webkit"];
      if (void 0 !== e.transition) return !0;
      for (; t.length; ) if (t.pop() + "Transition" in e) return !0;
      return !1;
    };
  (w.prototype = {
    constructor: w,
    init: function () {
      var n = navigator.appVersion;
      (t.isIE7 = -1 !== n.indexOf("MSIE 7.")),
        (t.isIE8 = -1 !== n.indexOf("MSIE 8.")),
        (t.isLowIE = t.isIE7 || t.isIE8),
        (t.isAndroid = /android/gi.test(n)),
        (t.isIOS = /iphone|ipad|ipod/gi.test(n)),
        (t.supportsTransition = S()),
        (t.probablyMobile =
          t.isAndroid ||
          t.isIOS ||
          /(Opera Mini)|Kindle|webOS|BlackBerry|(Opera Mobi)|(Windows Phone)|IEMobile/i.test(
            navigator.userAgent
          )),
        (o = e(document)),
        (t.popupsCache = {});
    },
    open: function (n) {
      i || (i = e(document.body));
      var r;
      if (n.isObj === !1) {
        (t.items = n.items.toArray()), (t.index = 0);
        var s,
          l = n.items;
        for (r = 0; l.length > r; r++)
          if (((s = l[r]), s.parsed && (s = s.el[0]), s === n.el[0])) {
            t.index = r;
            break;
          }
      } else
        (t.items = e.isArray(n.items) ? n.items : [n.items]),
          (t.index = n.index || 0);
      if (t.isOpen) return t.updateItemHTML(), void 0;
      (t.types = []),
        (a = ""),
        (t.ev = n.mainEl && n.mainEl.length ? n.mainEl.eq(0) : o),
        n.key
          ? (t.popupsCache[n.key] || (t.popupsCache[n.key] = {}),
            (t.currTemplate = t.popupsCache[n.key]))
          : (t.currTemplate = {}),
        (t.st = e.extend(!0, {}, e.magnificPopup.defaults, n)),
        (t.fixedContentPos =
          "auto" === t.st.fixedContentPos
            ? !t.probablyMobile
            : t.st.fixedContentPos),
        t.st.modal &&
          ((t.st.closeOnContentClick = !1),
          (t.st.closeOnBgClick = !1),
          (t.st.showCloseBtn = !1),
          (t.st.enableEscapeKey = !1)),
        t.bgOverlay ||
          ((t.bgOverlay = k("bg").on("click" + h, function () {
            t.close();
          })),
          (t.wrap = k("wrap")
            .attr("tabindex", -1)
            .on("click" + h, function (e) {
              t._checkIfClose(e.target) && t.close();
            })),
          (t.container = k("container", t.wrap))),
        (t.contentContainer = k("content")),
        t.st.preloader &&
          (t.preloader = k("preloader", t.container, t.st.tLoading));
      var c = e.magnificPopup.modules;
      for (r = 0; c.length > r; r++) {
        var d = c[r];
        (d = d.charAt(0).toUpperCase() + d.slice(1)), t["init" + d].call(t);
      }
      T("BeforeOpen"),
        t.st.showCloseBtn &&
          (t.st.closeBtnInside
            ? (x(p, function (e, t, n, i) {
                n.close_replaceWith = E(i.type);
              }),
              (a += " mfp-close-btn-in"))
            : t.wrap.append(E())),
        t.st.alignTop && (a += " mfp-align-top"),
        t.fixedContentPos
          ? t.wrap.css({
              overflow: t.st.overflowY,
              overflowX: "hidden",
              overflowY: t.st.overflowY,
            })
          : t.wrap.css({
              top: I.scrollTop(),
              position: "absolute",
            }),
        (t.st.fixedBgPos === !1 ||
          ("auto" === t.st.fixedBgPos && !t.fixedContentPos)) &&
          t.bgOverlay.css({
            height: o.height(),
            position: "absolute",
          }),
        t.st.enableEscapeKey &&
          o.on("keyup" + h, function (e) {
            27 === e.keyCode && t.close();
          }),
        I.on("resize" + h, function () {
          t.updateSize();
        }),
        t.st.closeOnContentClick || (a += " mfp-auto-cursor"),
        a && t.wrap.addClass(a);
      var u = (t.wH = I.height()),
        m = {};
      if (t.fixedContentPos && t._hasScrollBar(u)) {
        var g = t._getScrollbarSize();
        g && (m.marginRight = g);
      }
      t.fixedContentPos &&
        (t.isIE7
          ? e("body, html").css("overflow", "hidden")
          : (m.overflow = "hidden"));
      var C = t.st.mainClass;
      return (
        t.isIE7 && (C += " mfp-ie7"),
        C && t._addClassToMFP(C),
        t.updateItemHTML(),
        T("BuildControls"),
        e("html").css(m),
        t.bgOverlay.add(t.wrap).prependTo(t.st.prependTo || i),
        (t._lastFocusedEl = document.activeElement),
        setTimeout(function () {
          t.content
            ? (t._addClassToMFP(v), t._setFocus())
            : t.bgOverlay.addClass(v),
            o.on("focusin" + h, t._onFocusIn);
        }, 16),
        (t.isOpen = !0),
        t.updateSize(u),
        T(f),
        n
      );
    },
    close: function () {
      t.isOpen &&
        (T(c),
        (t.isOpen = !1),
        t.st.removalDelay && !t.isLowIE && t.supportsTransition
          ? (t._addClassToMFP(C),
            setTimeout(function () {
              t._close();
            }, t.st.removalDelay))
          : t._close());
    },
    _close: function () {
      T(l);
      var n = C + " " + v + " ";
      if (
        (t.bgOverlay.detach(),
        t.wrap.detach(),
        t.container.empty(),
        t.st.mainClass && (n += t.st.mainClass + " "),
        t._removeClassFromMFP(n),
        t.fixedContentPos)
      ) {
        var i = {
          marginRight: "",
        };
        t.isIE7 ? e("body, html").css("overflow", "") : (i.overflow = ""),
          e("html").css(i);
      }
      o.off("keyup" + h + " focusin" + h),
        t.ev.off(h),
        t.wrap.attr("class", "mfp-wrap").removeAttr("style"),
        t.bgOverlay.attr("class", "mfp-bg"),
        t.container.attr("class", "mfp-container"),
        !t.st.showCloseBtn ||
          (t.st.closeBtnInside && t.currTemplate[t.currItem.type] !== !0) ||
          (t.currTemplate.closeBtn && t.currTemplate.closeBtn.detach()),
        t._lastFocusedEl && e(t._lastFocusedEl).focus(),
        (t.currItem = null),
        (t.content = null),
        (t.currTemplate = null),
        (t.prevHeight = 0),
        T(d);
    },
    updateSize: function (e) {
      if (t.isIOS) {
        var n = document.documentElement.clientWidth / window.innerWidth,
          i = window.innerHeight * n;
        t.wrap.css("height", i), (t.wH = i);
      } else t.wH = e || I.height();
      t.fixedContentPos || t.wrap.css("height", t.wH), T("Resize");
    },
    updateItemHTML: function () {
      var n = t.items[t.index];
      t.contentContainer.detach(),
        t.content && t.content.detach(),
        n.parsed || (n = t.parseEl(t.index));
      var i = n.type;
      if (
        (T("BeforeChange", [t.currItem ? t.currItem.type : "", i]),
        (t.currItem = n),
        !t.currTemplate[i])
      ) {
        var o = t.st[i] ? t.st[i].markup : !1;
        T("FirstMarkupParse", o), (t.currTemplate[i] = o ? e(o) : !0);
      }
      r && r !== n.type && t.container.removeClass("mfp-" + r + "-holder");
      var a = t["get" + i.charAt(0).toUpperCase() + i.slice(1)](
        n,
        t.currTemplate[i]
      );
      t.appendContent(a, i),
        (n.preloaded = !0),
        T(m, n),
        (r = n.type),
        t.container.prepend(t.contentContainer),
        T("AfterChange");
    },
    appendContent: function (e, n) {
      (t.content = e),
        e
          ? t.st.showCloseBtn && t.st.closeBtnInside && t.currTemplate[n] === !0
            ? t.content.find(".mfp-close").length || t.content.append(E())
            : (t.content = e)
          : (t.content = ""),
        T(u),
        t.container.addClass("mfp-" + n + "-holder"),
        t.contentContainer.append(t.content);
    },
    parseEl: function (n) {
      var i,
        o = t.items[n];
      if (
        (o.tagName
          ? (o = {
              el: e(o),
            })
          : ((i = o.type),
            (o = {
              data: o,
              src: o.src,
            })),
        o.el)
      ) {
        for (var r = t.types, a = 0; r.length > a; a++)
          if (o.el.hasClass("mfp-" + r[a])) {
            i = r[a];
            break;
          }
        (o.src = o.el.attr("data-mfp-src")),
          o.src || (o.src = o.el.attr("href"));
      }
      return (
        (o.type = i || t.st.type || "inline"),
        (o.index = n),
        (o.parsed = !0),
        (t.items[n] = o),
        T("ElementParse", o),
        t.items[n]
      );
    },
    addGroup: function (e, n) {
      var i = function (i) {
        (i.mfpEl = this), t._openClick(i, e, n);
      };
      n || (n = {});
      var o = "click.magnificPopup";
      (n.mainEl = e),
        n.items
          ? ((n.isObj = !0), e.off(o).on(o, i))
          : ((n.isObj = !1),
            n.delegate
              ? e.off(o).on(o, n.delegate, i)
              : ((n.items = e), e.off(o).on(o, i)));
    },
    _openClick: function (n, i, o) {
      var r =
        void 0 !== o.midClick ? o.midClick : e.magnificPopup.defaults.midClick;
      if (r || (2 !== n.which && !n.ctrlKey && !n.metaKey)) {
        var a =
          void 0 !== o.disableOn
            ? o.disableOn
            : e.magnificPopup.defaults.disableOn;
        if (a)
          if (e.isFunction(a)) {
            if (!a.call(t)) return !0;
          } else if (a > I.width()) return !0;
        n.type && (n.preventDefault(), t.isOpen && n.stopPropagation()),
          (o.el = e(n.mfpEl)),
          o.delegate && (o.items = i.find(o.delegate)),
          t.open(o);
      }
    },
    updateStatus: function (e, i) {
      if (t.preloader) {
        n !== e && t.container.removeClass("mfp-s-" + n),
          i || "loading" !== e || (i = t.st.tLoading);
        var o = {
          status: e,
          text: i,
        };
        T("UpdateStatus", o),
          (e = o.status),
          (i = o.text),
          t.preloader.html(i),
          t.preloader.find("a").on("click", function (e) {
            e.stopImmediatePropagation();
          }),
          t.container.addClass("mfp-s-" + e),
          (n = e);
      }
    },
    _checkIfClose: function (n) {
      if (!e(n).hasClass(y)) {
        var i = t.st.closeOnContentClick,
          o = t.st.closeOnBgClick;
        if (i && o) return !0;
        if (
          !t.content ||
          e(n).hasClass("mfp-close") ||
          (t.preloader && n === t.preloader[0])
        )
          return !0;
        if (n === t.content[0] || e.contains(t.content[0], n)) {
          if (i) return !0;
        } else if (o && e.contains(document, n)) return !0;
        return !1;
      }
    },
    _addClassToMFP: function (e) {
      t.bgOverlay.addClass(e), t.wrap.addClass(e);
    },
    _removeClassFromMFP: function (e) {
      this.bgOverlay.removeClass(e), t.wrap.removeClass(e);
    },
    _hasScrollBar: function (e) {
      return (
        (t.isIE7 ? o.height() : document.body.scrollHeight) > (e || I.height())
      );
    },
    _setFocus: function () {
      (t.st.focus ? t.content.find(t.st.focus).eq(0) : t.wrap).focus();
    },
    _onFocusIn: function (n) {
      return n.target === t.wrap[0] || e.contains(t.wrap[0], n.target)
        ? void 0
        : (t._setFocus(), !1);
    },
    _parseMarkup: function (t, n, i) {
      var o;
      i.data && (n = e.extend(i.data, n)),
        T(p, [t, n, i]),
        e.each(n, function (e, n) {
          if (void 0 === n || n === !1) return !0;
          if (((o = e.split("_")), o.length > 1)) {
            var i = t.find(h + "-" + o[0]);
            if (i.length > 0) {
              var r = o[1];
              "replaceWith" === r
                ? i[0] !== n[0] && i.replaceWith(n)
                : "img" === r
                ? i.is("img")
                  ? i.attr("src", n)
                  : i.replaceWith(
                      '<img src="' + n + '" class="' + i.attr("class") + '" />'
                    )
                : i.attr(o[1], n);
            }
          } else t.find(h + "-" + e).html(n);
        });
    },
    _getScrollbarSize: function () {
      if (void 0 === t.scrollbarSize) {
        var e = document.createElement("div");
        (e.id = "mfp-sbm"),
          (e.style.cssText =
            "width: 99px; height: 99px; overflow: scroll; position: absolute; top: -9999px;"),
          document.body.appendChild(e),
          (t.scrollbarSize = e.offsetWidth - e.clientWidth),
          document.body.removeChild(e);
      }
      return t.scrollbarSize;
    },
  }),
    (e.magnificPopup = {
      instance: null,
      proto: w.prototype,
      modules: [],
      open: function (t, n) {
        return (
          _(),
          (t = t ? e.extend(!0, {}, t) : {}),
          (t.isObj = !0),
          (t.index = n || 0),
          this.instance.open(t)
        );
      },
      close: function () {
        return e.magnificPopup.instance && e.magnificPopup.instance.close();
      },
      registerModule: function (t, n) {
        n.options && (e.magnificPopup.defaults[t] = n.options),
          e.extend(this.proto, n.proto),
          this.modules.push(t);
      },
      defaults: {
        disableOn: 0,
        key: null,
        midClick: !1,
        mainClass: "",
        preloader: !0,
        focus: "",
        closeOnContentClick: !1,
        closeOnBgClick: !0,
        closeBtnInside: !0,
        showCloseBtn: !0,
        enableEscapeKey: !0,
        modal: !1,
        alignTop: !1,
        removalDelay: 0,
        prependTo: null,
        fixedContentPos: "auto",
        fixedBgPos: "auto",
        overflowY: "auto",
        closeMarkup:
          '<button title="%title%" type="button" class="mfp-close">&times;</button>',
        tClose: "Close (Esc)",
        tLoading: "Loading...",
      },
    }),
    (e.fn.magnificPopup = function (n) {
      _();
      var i = e(this);
      if ("string" == typeof n)
        if ("open" === n) {
          var o,
            r = b ? i.data("magnificPopup") : i[0].magnificPopup,
            a = parseInt(arguments[1], 10) || 0;
          r.items
            ? (o = r.items[a])
            : ((o = i), r.delegate && (o = o.find(r.delegate)), (o = o.eq(a))),
            t._openClick(
              {
                mfpEl: o,
              },
              i,
              r
            );
        } else
          t.isOpen && t[n].apply(t, Array.prototype.slice.call(arguments, 1));
      else
        (n = e.extend(!0, {}, n)),
          b ? i.data("magnificPopup", n) : (i[0].magnificPopup = n),
          t.addGroup(i, n);
      return i;
    });
  var P,
    O,
    z,
    M = "inline",
    B = function () {
      z && (O.after(z.addClass(P)).detach(), (z = null));
    };
  e.magnificPopup.registerModule(M, {
    options: {
      hiddenClass: "hide",
      markup: "",
      tNotFound: "Content not found",
    },
    proto: {
      initInline: function () {
        t.types.push(M),
          x(l + "." + M, function () {
            B();
          });
      },
      getInline: function (n, i) {
        if ((B(), n.src)) {
          var o = t.st.inline,
            r = e(n.src);
          if (r.length) {
            var a = r[0].parentNode;
            a &&
              a.tagName &&
              (O || ((P = o.hiddenClass), (O = k(P)), (P = "mfp-" + P)),
              (z = r.after(O).detach().removeClass(P))),
              t.updateStatus("ready");
          } else t.updateStatus("error", o.tNotFound), (r = e("<div>"));
          return (n.inlineElement = r), r;
        }
        return t.updateStatus("ready"), t._parseMarkup(i, {}, n), i;
      },
    },
  });
  var F,
    H = "ajax",
    L = function () {
      F && i.removeClass(F);
    },
    A = function () {
      L(), t.req && t.req.abort();
    };
  e.magnificPopup.registerModule(H, {
    options: {
      settings: null,
      cursor: "mfp-ajax-cur",
      tError: '<a href="%url%">The content</a> could not be loaded.',
    },
    proto: {
      initAjax: function () {
        t.types.push(H),
          (F = t.st.ajax.cursor),
          x(l + "." + H, A),
          x("BeforeChange." + H, A);
      },
      getAjax: function (n) {
        F && i.addClass(F), t.updateStatus("loading");
        var o = e.extend(
          {
            url: n.src,
            success: function (i, o, r) {
              var a = {
                data: i,
                xhr: r,
              };
              T("ParseAjax", a),
                t.appendContent(e(a.data), H),
                (n.finished = !0),
                L(),
                t._setFocus(),
                setTimeout(function () {
                  t.wrap.addClass(v);
                }, 16),
                t.updateStatus("ready"),
                T("AjaxContentAdded");
            },
            error: function () {
              L(),
                (n.finished = n.loadError = !0),
                t.updateStatus(
                  "error",
                  t.st.ajax.tError.replace("%url%", n.src)
                );
            },
          },
          t.st.ajax.settings
        );
        return (t.req = e.ajax(o)), "";
      },
    },
  });
  var j,
    N = function (n) {
      if (n.data && void 0 !== n.data.title) return n.data.title;
      var i = t.st.image.titleSrc;
      if (i) {
        if (e.isFunction(i)) return i.call(t, n);
        if (n.el) return n.el.attr(i) || "";
      }
      return "";
    };
  e.magnificPopup.registerModule("image", {
    options: {
      markup:
        '<div class="mfp-figure"><div class="mfp-close"></div><figure><div class="mfp-img"></div><figcaption><div class="mfp-bottom-bar"><div class="mfp-title"></div><div class="mfp-counter"></div></div></figcaption></figure></div>',
      cursor: "mfp-zoom-out-cur",
      titleSrc: "title",
      verticalFit: !0,
      tError: '<a href="%url%">The image</a> could not be loaded.',
    },
    proto: {
      initImage: function () {
        var e = t.st.image,
          n = ".image";
        t.types.push("image"),
          x(f + n, function () {
            "image" === t.currItem.type && e.cursor && i.addClass(e.cursor);
          }),
          x(l + n, function () {
            e.cursor && i.removeClass(e.cursor), I.off("resize" + h);
          }),
          x("Resize" + n, t.resizeImage),
          t.isLowIE && x("AfterChange", t.resizeImage);
      },
      resizeImage: function () {
        var e = t.currItem;
        if (e && e.img && t.st.image.verticalFit) {
          var n = 0;
          t.isLowIE &&
            (n =
              parseInt(e.img.css("padding-top"), 10) +
              parseInt(e.img.css("padding-bottom"), 10)),
            e.img.css("max-height", t.wH - n);
        }
      },
      _onImageHasSize: function (e) {
        e.img &&
          ((e.hasSize = !0),
          j && clearInterval(j),
          (e.isCheckingImgSize = !1),
          T("ImageHasSize", e),
          e.imgHidden &&
            (t.content && t.content.removeClass("mfp-loading"),
            (e.imgHidden = !1)));
      },
      findImageSize: function (e) {
        var n = 0,
          i = e.img[0],
          o = function (r) {
            j && clearInterval(j),
              (j = setInterval(function () {
                return i.naturalWidth > 0
                  ? (t._onImageHasSize(e), void 0)
                  : (n > 200 && clearInterval(j),
                    n++,
                    3 === n ? o(10) : 40 === n ? o(50) : 100 === n && o(500),
                    void 0);
              }, r));
          };
        o(1);
      },
      getImage: function (n, i) {
        var o = 0,
          r = function () {
            n &&
              (n.img[0].complete
                ? (n.img.off(".mfploader"),
                  n === t.currItem &&
                    (t._onImageHasSize(n), t.updateStatus("ready")),
                  (n.hasSize = !0),
                  (n.loaded = !0),
                  T("ImageLoadComplete"))
                : (o++, 200 > o ? setTimeout(r, 100) : a()));
          },
          a = function () {
            n &&
              (n.img.off(".mfploader"),
              n === t.currItem &&
                (t._onImageHasSize(n),
                t.updateStatus("error", s.tError.replace("%url%", n.src))),
              (n.hasSize = !0),
              (n.loaded = !0),
              (n.loadError = !0));
          },
          s = t.st.image,
          l = i.find(".mfp-img");
        if (l.length) {
          var c = document.createElement("img");
          (c.className = "mfp-img"),
            (n.img = e(c).on("load.mfploader", r).on("error.mfploader", a)),
            (c.src = n.src),
            l.is("img") && (n.img = n.img.clone()),
            (c = n.img[0]),
            c.naturalWidth > 0 ? (n.hasSize = !0) : c.width || (n.hasSize = !1);
        }
        return (
          t._parseMarkup(
            i,
            {
              title: N(n),
              img_replaceWith: n.img,
            },
            n
          ),
          t.resizeImage(),
          n.hasSize
            ? (j && clearInterval(j),
              n.loadError
                ? (i.addClass("mfp-loading"),
                  t.updateStatus("error", s.tError.replace("%url%", n.src)))
                : (i.removeClass("mfp-loading"), t.updateStatus("ready")),
              i)
            : (t.updateStatus("loading"),
              (n.loading = !0),
              n.hasSize ||
                ((n.imgHidden = !0),
                i.addClass("mfp-loading"),
                t.findImageSize(n)),
              i)
        );
      },
    },
  });
  var W,
    R = function () {
      return;
      void 0 === W &&
        (W = void 0 !== document.createElement("p").style.MozTransform),
        W;
    };
  e.magnificPopup.registerModule("zoom", {
    options: {
      enabled: !1,
      easing: "ease-in-out",
      duration: 300,
      opener: function (e) {
        return e.is("img") ? e : e.find("img");
      },
    },
    proto: {
      initZoom: function () {
        var e,
          n = t.st.zoom,
          i = ".zoom";
        if (n.enabled && t.supportsTransition) {
          var o,
            r,
            a = n.duration,
            s = function (e) {
              var t = e
                  .clone()
                  .removeAttr("style")
                  .removeAttr("class")
                  .addClass("mfp-animated-image"),
                i = "all " + n.duration / 1e3 + "s " + n.easing,
                o = {
                  position: "fixed",
                  zIndex: 9999,
                  left: 0,
                  top: 0,
                  "-webkit-backface-visibility": "hidden",
                },
                r = "transition";
              return (
                (o["-webkit-" + r] = o["-moz-" + r] = o["-o-" + r] = o[r] = i),
                t.css(o),
                t
              );
            },
            d = function () {
              t.content.css("visibility", "visible");
            };
          x("BuildControls" + i, function () {
            if (t._allowZoom()) {
              if (
                (clearTimeout(o),
                t.content.css("visibility", "hidden"),
                (e = t._getItemToZoom()),
                !e)
              )
                return d(), void 0;
              (r = s(e)),
                r.css(t._getOffset()),
                t.wrap.append(r),
                (o = setTimeout(function () {
                  r.css(t._getOffset(!0)),
                    (o = setTimeout(function () {
                      d(),
                        setTimeout(function () {
                          r.remove(), (e = r = null), T("ZoomAnimationEnded");
                        }, 16);
                    }, a));
                }, 16));
            }
          }),
            x(c + i, function () {
              if (t._allowZoom()) {
                if ((clearTimeout(o), (t.st.removalDelay = a), !e)) {
                  if (((e = t._getItemToZoom()), !e)) return;
                  r = s(e);
                }
                r.css(t._getOffset(!0)),
                  t.wrap.append(r),
                  t.content.css("visibility", "hidden"),
                  setTimeout(function () {
                    r.css(t._getOffset());
                  }, 16);
              }
            }),
            x(l + i, function () {
              t._allowZoom() && (d(), r && r.remove(), (e = null));
            });
        }
      },
      _allowZoom: function () {
        return "image" === t.currItem.type;
      },
      _getItemToZoom: function () {
        return t.currItem.hasSize ? t.currItem.img : !1;
      },
      _getOffset: function (n) {
        var i;
        i = n ? t.currItem.img : t.st.zoom.opener(t.currItem.el || t.currItem);
        var o = i.offset(),
          r = parseInt(i.css("padding-top"), 10),
          a = parseInt(i.css("padding-bottom"), 10);
        o.top -= e(window).scrollTop() - r;
        var s = {
          width: i.width(),
          height: (b ? i.innerHeight() : i[0].offsetHeight) - a - r,
        };
        return (
          R()
            ? (s["-moz-transform"] = s.transform =
                "translate(" + o.left + "px," + o.top + "px)")
            : ((s.left = o.left), (s.top = o.top)),
          s
        );
      },
    },
  });
  var Z = "iframe",
    q = "//about:blank",
    D = function (e) {
      if (t.currTemplate[Z]) {
        var n = t.currTemplate[Z].find("iframe");
        n.length &&
          (e || (n[0].src = q),
          t.isIE8 && n.css("display", e ? "block" : "none"));
      }
    };
  e.magnificPopup.registerModule(Z, {
    options: {
      markup:
        '<div class="mfp-iframe-scaler"><div class="mfp-close"></div><iframe class="mfp-iframe" src="//about:blank" frameborder="0" allowfullscreen></iframe></div>',
      srcAction: "iframe_src",
      patterns: {
        youtube: {
          index: "youtube.com",
          id: "v=",
          src: "//www.youtube-nocookie.com/embed/%id%?autoplay=1",
        },
        vimeo: {
          index: "vimeo.com/",
          id: "/",
          src: "//player.vimeo.com/video/%id%?autoplay=1",
        },
        gmaps: {
          index: "//maps.google.",
          src: "%id%&output=embed",
        },
      },
    },
    proto: {
      initIframe: function () {
        t.types.push(Z),
          x("BeforeChange", function (e, t, n) {
            t !== n && (t === Z ? D() : n === Z && D(!0));
          }),
          x(l + "." + Z, function () {
            D();
          });
      },
      getIframe: function (n, i) {
        var o = n.src,
          r = t.st.iframe;
        e.each(r.patterns, function () {
          return o.indexOf(this.index) > -1
            ? (this.id &&
                (o =
                  "string" == typeof this.id
                    ? o.substr(
                        o.lastIndexOf(this.id) + this.id.length,
                        o.length
                      )
                    : this.id.call(this, o)),
              (o = this.src.replace("%id%", o)),
              !1)
            : void 0;
        });
        var a = {};
        return (
          r.srcAction && (a[r.srcAction] = o),
          t._parseMarkup(i, a, n),
          t.updateStatus("ready"),
          i
        );
      },
    },
  });
  var K = function (e) {
      var n = t.items.length;
      return e > n - 1 ? e - n : 0 > e ? n + e : e;
    },
    Y = function (e, t, n) {
      return e.replace(/%curr%/gi, t + 1).replace(/%total%/gi, n);
    };
  e.magnificPopup.registerModule("gallery", {
    options: {
      enabled: !1,
      arrowMarkup:
        '<button title="%title%" type="button" class="mfp-arrow mfp-arrow-%dir%"></button>',
      preload: [0, 2],
      navigateByImgClick: !0,
      arrows: !0,
      tPrev: "Previous (Left arrow key)",
      tNext: "Next (Right arrow key)",
      tCounter: "%curr% of %total%",
    },
    proto: {
      initGallery: function () {
        var n = t.st.gallery,
          i = ".mfp-gallery",
          r = Boolean(e.fn.mfpFastClick);
        return (
          (t.direction = !0),
          n && n.enabled
            ? ((a += " mfp-gallery"),
              x(f + i, function () {
                n.navigateByImgClick &&
                  t.wrap.on("click" + i, ".mfp-img", function () {
                    return t.items.length > 1 ? (t.next(), !1) : void 0;
                  }),
                  o.on("keydown" + i, function (e) {
                    37 === e.keyCode ? t.prev() : 39 === e.keyCode && t.next();
                  });
              }),
              x("UpdateStatus" + i, function (e, n) {
                n.text &&
                  (n.text = Y(n.text, t.currItem.index, t.items.length));
              }),
              x(p + i, function (e, i, o, r) {
                var a = t.items.length;
                o.counter = a > 1 ? Y(n.tCounter, r.index, a) : "";
              }),
              x("BuildControls" + i, function () {
                if (t.items.length > 1 && n.arrows && !t.arrowLeft) {
                  var i = n.arrowMarkup,
                    o = (t.arrowLeft = e(
                      i.replace(/%title%/gi, n.tPrev).replace(/%dir%/gi, "left")
                    ).addClass(y)),
                    a = (t.arrowRight = e(
                      i
                        .replace(/%title%/gi, n.tNext)
                        .replace(/%dir%/gi, "right")
                    ).addClass(y)),
                    s = r ? "mfpFastClick" : "click";
                  o[s](function () {
                    t.prev();
                  }),
                    a[s](function () {
                      t.next();
                    }),
                    t.isIE7 &&
                      (k("b", o[0], !1, !0),
                      k("a", o[0], !1, !0),
                      k("b", a[0], !1, !0),
                      k("a", a[0], !1, !0)),
                    t.container.append(o.add(a));
                }
              }),
              x(m + i, function () {
                t._preloadTimeout && clearTimeout(t._preloadTimeout),
                  (t._preloadTimeout = setTimeout(function () {
                    t.preloadNearbyImages(), (t._preloadTimeout = null);
                  }, 16));
              }),
              x(l + i, function () {
                o.off(i),
                  t.wrap.off("click" + i),
                  t.arrowLeft &&
                    r &&
                    t.arrowLeft.add(t.arrowRight).destroyMfpFastClick(),
                  (t.arrowRight = t.arrowLeft = null);
              }),
              void 0)
            : !1
        );
      },
      next: function () {
        (t.direction = !0), (t.index = K(t.index + 1)), t.updateItemHTML();
      },
      prev: function () {
        (t.direction = !1), (t.index = K(t.index - 1)), t.updateItemHTML();
      },
      goTo: function (e) {
        (t.direction = e >= t.index), (t.index = e), t.updateItemHTML();
      },
      preloadNearbyImages: function () {
        var e,
          n = t.st.gallery.preload,
          i = Math.min(n[0], t.items.length),
          o = Math.min(n[1], t.items.length);
        for (e = 1; (t.direction ? o : i) >= e; e++)
          t._preloadItem(t.index + e);
        for (e = 1; (t.direction ? i : o) >= e; e++)
          t._preloadItem(t.index - e);
      },
      _preloadItem: function (n) {
        if (((n = K(n)), !t.items[n].preloaded)) {
          var i = t.items[n];
          i.parsed || (i = t.parseEl(n)),
            T("LazyLoad", i),
            "image" === i.type &&
              (i.img = e('<img class="mfp-img" />')
                .on("load.mfploader", function () {
                  i.hasSize = !0;
                })
                .on("error.mfploader", function () {
                  (i.hasSize = !0), (i.loadError = !0), T("LazyLoadError", i);
                })
                .attr("src", i.src)),
            (i.preloaded = !0);
        }
      },
    },
  });
  var U = "retina";
  e.magnificPopup.registerModule(U, {
    options: {
      replaceSrc: function (e) {
        return e.src.replace(/\.\w+$/, function (e) {
          return "@2x" + e;
        });
      },
      ratio: 1,
    },
    proto: {
      initRetina: function () {
        if (window.devicePixelRatio > 1) {
          var e = t.st.retina,
            n = e.ratio;
          (n = isNaN(n) ? n() : n),
            n > 1 &&
              (x("ImageHasSize." + U, function (e, t) {
                t.img.css({
                  "max-width": t.img[0].naturalWidth / n,
                  width: "100%",
                });
              }),
              x("ElementParse." + U, function (t, i) {
                i.src = e.replaceSrc(i, n);
              }));
        }
      },
    },
  }),
    (function () {
      var t = 1e3,
        n = "ontouchstart" in window,
        i = function () {
          I.off("touchmove" + r + " touchend" + r);
        },
        o = "mfpFastClick",
        r = "." + o;
      (e.fn.mfpFastClick = function (o) {
        return e(this).each(function () {
          var a,
            s = e(this);
          if (n) {
            var l, c, d, u, p, f;
            s.on("touchstart" + r, function (e) {
              (u = !1),
                (f = 1),
                (p = e.originalEvent
                  ? e.originalEvent.touches[0]
                  : e.touches[0]),
                (c = p.clientX),
                (d = p.clientY),
                I.on("touchmove" + r, function (e) {
                  (p = e.originalEvent ? e.originalEvent.touches : e.touches),
                    (f = p.length),
                    (p = p[0]),
                    (Math.abs(p.clientX - c) > 10 ||
                      Math.abs(p.clientY - d) > 10) &&
                      ((u = !0), i());
                }).on("touchend" + r, function (e) {
                  i(),
                    u ||
                      f > 1 ||
                      ((a = !0),
                      e.preventDefault(),
                      clearTimeout(l),
                      (l = setTimeout(function () {
                        a = !1;
                      }, t)),
                      o());
                });
            });
          }
          s.on("click" + r, function () {
            a || o();
          });
        });
      }),
        (e.fn.destroyMfpFastClick = function () {
          e(this).off("touchstart" + r + " click" + r),
            n && I.off("touchmove" + r + " touchend" + r);
        });
    })(),
    _();
})(window.$jq18 || window.Zepto);
jQuery(document).ready(function () {
  var bannerCountryCode = jQuery.cookie("CountryCode");
  if (bannerCountryCode !== null && typeof bannerCountryCode !== "undefined") {
    jQuery(".form-select").val(bannerCountryCode).change();
  } else {
    jQuery(".form-select").val("GLOBAL").change();
  }
});

Drupal.behaviors.bannerChange = {
  attach: function (context, settings) {
    if (jQuery(context).hasClass("view-banners")) {
      jQuery(context).find(".view-footer").css("display", "block");
    }
  },
};
/*
 * @author  Mudit Ameta
 * @license https://github.com/zeusdeux/isInViewport/blob/master/license.md MIT
 */ !(function (a, b) {
  function c(b) {
    var c,
      d = a("<div>").css({
        width: "100%",
      });
    return b.append(d), (c = b.width() - d.width()), d.remove(), c;
  }

  function d(e, f) {
    var g = e.getBoundingClientRect(),
      h = g.top,
      i = g.bottom,
      j = g.left,
      k = g.right,
      l = a.extend(
        {
          tolerance: 0,
          viewport: b,
        },
        f
      ),
      m = !1,
      n = l.viewport.jquery ? l.viewport : a(l.viewport);
    n.length ||
      (console.warn(
        "isInViewport: The viewport selector you have provided matches no element on page."
      ),
      console.warn("isInViewport: Defaulting to viewport as window"),
      (n = a(b)));
    var o = n.height(),
      p = n.width(),
      q = n.get(0).toString();
    if (n[0] !== b && "[object Window]" !== q && "[object DOMWindow]" !== q) {
      var r = n.get(0).getBoundingClientRect();
      (h -= r.top),
        (i -= r.top),
        (j -= r.left),
        (k -= r.left),
        (d.scrollBarWidth = d.scrollBarWidth || c(n)),
        (p -= d.scrollBarWidth);
    }
    return (
      (l.tolerance = ~~Math.round(parseFloat(l.tolerance))),
      l.tolerance < 0 && (l.tolerance = o + l.tolerance),
      0 >= k || j >= p
        ? m
        : (m = l.tolerance
            ? !!(h <= l.tolerance && i >= l.tolerance)
            : !!(i > 0 && o >= h))
    );
  }

  String.prototype.hasOwnProperty("trim") ||
    (String.prototype.trim = function () {
      return this.replace(/^\s*(.*?)\s*$/, "$1");
    });
  var e = function (b) {
    if (
      (1 === arguments.length && "function" == typeof b && (b = [b]),
      !(b instanceof Array))
    )
      throw new SyntaxError(
        "isInViewport: Argument(s) passed to .do/.run should be a function or an array of functions"
      );
    for (var c = 0; c < b.length; c++)
      if ("function" == typeof b[c])
        for (var d = 0; d < this.length; d++) b[c].call(a(this[d]));
      else
        console.warn(
          "isInViewport: Argument(s) passed to .do/.run should be a function or an array of functions"
        ),
          console.warn(
            "isInViewport: Ignoring non-function values in array and moving on"
          );
    return this;
  };
  (a.fn["do"] = function (a) {
    return (
      console.warn(
        "isInViewport: .do causes issues in IE and some browsers since its a reserved. Use $.fn.run instead i.e., $(el).run(fn)."
      ),
      e(a)
    );
  }),
    (a.fn.run = e),
    a.extend(a.expr[":"], {
      "in-viewport": function (a, b, c) {
        if (c[3]) {
          var e = c[3].split(",");
          return (
            1 === e.length && isNaN(e[0]) && ((e[1] = e[0]), (e[0] = void 0)),
            d(a, {
              tolerance: e[0] ? e[0].trim() : void 0,
              viewport: e[1] ? e[1].trim() : void 0,
            })
          );
        }
        return d(a);
      },
    });
})(jQuery, window);
/* Supplant for templates and data filling */

if (typeof String.prototype.supplant !== "function") {
  String.prototype.supplant = function (o) {
    return this.replace(/{([^{}]*)}/g, function (a, b) {
      var r = o[b];
      return typeof r === "string" ? r : a;
    });
  };
}
/* global module */
("use strict");
var SpotifyWebApi = (function () {
  var _baseUri = "https://api.spotify.com/v1";
  var _accessToken = null;
  var _promiseImplementation = null;

  var WrapPromiseWithAbort = function (promise, onAbort) {
    promise.abort = onAbort;
    return promise;
  };

  var _promiseProvider = function (promiseFunction, onAbort) {
    var returnedPromise;
    if (_promiseImplementation !== null) {
      var deferred = _promiseImplementation.defer();
      promiseFunction(
        function (resolvedResult) {
          deferred.resolve(resolvedResult);
        },
        function (rejectedResult) {
          deferred.reject(rejectedResult);
        }
      );
      returnedPromise = deferred.promise;
    } else {
      if (window.Promise) {
        returnedPromise = new window.Promise(promiseFunction);
      }
    }

    if (returnedPromise) {
      return new WrapPromiseWithAbort(returnedPromise, onAbort);
    } else {
      return null;
    }
  };

  var _extend = function () {
    var args = Array.prototype.slice.call(arguments);
    var target = args[0];
    var objects = args.slice(1);
    target = target || {};
    objects.forEach(function (object) {
      for (var j in object) {
        if (object.hasOwnProperty(j)) {
          target[j] = object[j];
        }
      }
    });
    return target;
  };

  var _buildUrl = function (url, parameters) {
    var qs = "";
    for (var key in parameters) {
      if (parameters.hasOwnProperty(key)) {
        var value = parameters[key];
        qs += encodeURIComponent(key) + "=" + encodeURIComponent(value) + "&";
      }
    }
    if (qs.length > 0) {
      // chop off last '&'
      qs = qs.substring(0, qs.length - 1);
      url = url + "?" + qs;
    }
    return url;
  };

  var _performRequest = function (requestData, callback) {
    var req = new XMLHttpRequest();

    var promiseFunction = function (resolve, reject) {
      function success(data) {
        if (resolve) {
          resolve(data);
        }
        if (callback) {
          callback(null, data);
        }
      }

      function failure() {
        if (reject) {
          reject(req);
        }
        if (callback) {
          callback(req, null);
        }
      }

      var type = requestData.type || "GET";
      req.open(type, _buildUrl(requestData.url, requestData.params));
      if (_accessToken) {
        req.setRequestHeader("Authorization", "Bearer " + _accessToken);
      }

      req.onreadystatechange = function () {
        if (req.readyState === 4) {
          var data = null;
          try {
            data = req.responseText ? JSON.parse(req.responseText) : "";
          } catch (e) {
            console.error(e);
          }

          if (req.status >= 200 && req.status < 300) {
            success(data);
          } else {
            failure();
          }
        }
      };

      if (type === "GET") {
        req.send(null);
      } else {
        req.send(
          requestData.postData ? JSON.stringify(requestData.postData) : null
        );
      }
    };

    if (callback) {
      promiseFunction();
      return null;
    } else {
      return _promiseProvider(promiseFunction, function () {
        req.abort();
      });
    }
  };

  var _checkParamsAndPerformRequest = function (
    requestData,
    options,
    callback
  ) {
    var opt = {};
    var cb = null;

    if (typeof options === "object") {
      opt = options;
      cb = callback;
    } else if (typeof options === "function") {
      cb = options;
    }

    // options extend postData, if any. Otherwise they extend parameters sent in the url
    var type = requestData.type || "GET";
    if (type !== "GET" && requestData.postData) {
      requestData.postData = _extend(requestData.postData, opt);
    } else {
      requestData.params = _extend(requestData.params, opt);
    }
    return _performRequest(requestData, cb);
  };

  var Constr = function () {};

  Constr.prototype = {
    constructor: SpotifyWebApi,
  };

  /**
   * Fetches a resource through a generic GET request.
   * @param {string} url The URL to be fetched
   * @param {function(Object,Object)} callback An optional callback
   * @return {Object} Null if a callback is provided, a `Promise` object otherwise
   */
  Constr.prototype.getGeneric = function (url, callback) {
    var requestData = {
      url: url,
    };
    return _checkParamsAndPerformRequest(requestData, callback);
  };

  /**
   * Fetches information about the current user.
   * See [Get Current User's Profile](https://developer.spotify.com/web-api/get-current-users-profile/) on
   * the Spotify Developer site for more information about the endpoint.
   * @param {Object} options A JSON object with options that can be passed
   * @param {function(Object,Object)} callback An optional callback that receives 2 parameters. The first
   * one is the error object (null if no error), and the second is the value if the request succeeded.
   * @return {Object} Null if a callback is provided, a `Promise` object otherwise
   */
  Constr.prototype.getMe = function (options, callback) {
    var requestData = {
      url: _baseUri + "/me",
    };
    return _checkParamsAndPerformRequest(requestData, options, callback);
  };

  /**
   * Fetches current user's saved tracks.
   * See [Get Current User's Saved Tracks](https://developer.spotify.com/web-api/get-users-saved-tracks/) on
   * the Spotify Developer site for more information about the endpoint.
   * @param {Object} options A JSON object with options that can be passed
   * @param {function(Object,Object)} callback An optional callback that receives 2 parameters. The first
   * one is the error object (null if no error), and the second is the value if the request succeeded.
   * @return {Object} Null if a callback is provided, a `Promise` object otherwise
   */
  Constr.prototype.getMySavedTracks = function (options, callback) {
    var requestData = {
      url: _baseUri + "/me/tracks",
    };
    return _checkParamsAndPerformRequest(requestData, options, callback);
  };

  /**
   * Adds a list of tracks to the current user's saved tracks.
   * See [Save Tracks for Current User](https://developer.spotify.com/web-api/save-tracks-user/) on
   * the Spotify Developer site for more information about the endpoint.
   * @param {Array<string>} trackIds The ids of the tracks. If you know their Spotify URI it is easy
   * to find their track id (e.g. spotify:track:<here_is_the_track_id>)
   * @param {Object} options A JSON object with options that can be passed
   * @param {function(Object,Object)} callback An optional callback that receives 2 parameters. The first
   * one is the error object (null if no error), and the second is the value if the request succeeded.
   * @return {Object} Null if a callback is provided, a `Promise` object otherwise
   */
  Constr.prototype.addToMySavedTracks = function (trackIds, options, callback) {
    var requestData = {
      url: _baseUri + "/me/tracks",
      type: "PUT",
      postData: trackIds,
    };
    return _checkParamsAndPerformRequest(requestData, options, callback);
  };

  /**
   * Remove a list of tracks from the current user's saved tracks.
   * See [Remove Tracks for Current User](https://developer.spotify.com/web-api/remove-tracks-user/) on
   * the Spotify Developer site for more information about the endpoint.
   * @param {Array<string>} trackIds The ids of the tracks. If you know their Spotify URI it is easy
   * to find their track id (e.g. spotify:track:<here_is_the_track_id>)
   * @param {Object} options A JSON object with options that can be passed
   * @param {function(Object,Object)} callback An optional callback that receives 2 parameters. The first
   * one is the error object (null if no error), and the second is the value if the request succeeded.
   * @return {Object} Null if a callback is provided, a `Promise` object otherwise
   */
  Constr.prototype.removeFromMySavedTracks = function (
    trackIds,
    options,
    callback
  ) {
    var requestData = {
      url: _baseUri + "/me/tracks",
      type: "DELETE",
      postData: trackIds,
    };
    return _checkParamsAndPerformRequest(requestData, options, callback);
  };

  /**
   * Checks if the current user's saved tracks contains a certain list of tracks.
   * See [Check Current User's Saved Tracks](https://developer.spotify.com/web-api/check-users-saved-tracks/) on
   * the Spotify Developer site for more information about the endpoint.
   * @param {Array<string>} trackIds The ids of the tracks. If you know their Spotify URI it is easy
   * to find their track id (e.g. spotify:track:<here_is_the_track_id>)
   * @param {Object} options A JSON object with options that can be passed
   * @param {function(Object,Object)} callback An optional callback that receives 2 parameters. The first
   * one is the error object (null if no error), and the second is the value if the request succeeded.
   * @return {Object} Null if a callback is provided, a `Promise` object otherwise
   */
  Constr.prototype.containsMySavedTracks = function (
    trackIds,
    options,
    callback
  ) {
    var requestData = {
      url: _baseUri + "/me/tracks/contains",
      params: { ids: trackIds.join(",") },
    };
    return _checkParamsAndPerformRequest(requestData, options, callback);
  };

  /**
   * Get a list of the albums saved in the current Spotify user's "Your Music" library.
   * See [Get Current User's Saved Albums](https://developer.spotify.com/web-api/get-users-saved-albums/) on
   * the Spotify Developer site for more information about the endpoint.
   * @param {Object} options A JSON object with options that can be passed
   * @param {function(Object,Object)} callback An optional callback that receives 2 parameters. The first
   * one is the error object (null if no error), and the second is the value if the request succeeded.
   * @return {Object} Null if a callback is provided, a `Promise` object otherwise
   */
  Constr.prototype.getMySavedAlbums = function (options, callback) {
    var requestData = {
      url: _baseUri + "/me/albums",
    };
    return _checkParamsAndPerformRequest(requestData, options, callback);
  };

  /**
   * Save one or more albums to the current user's "Your Music" library.
   * See [Save Albums for Current User](https://developer.spotify.com/web-api/save-albums-user/) on
   * the Spotify Developer site for more information about the endpoint.
   * @param {Array<string>} albumIds The ids of the albums. If you know their Spotify URI, it is easy
   * to find their album id (e.g. spotify:album:<here_is_the_album_id>)
   * @param {Object} options A JSON object with options that can be passed
   * @param {function(Object,Object)} callback An optional callback that receives 2 parameters. The first
   * one is the error object (null if no error), and the second is the value if the request succeeded.
   * @return {Object} Null if a callback is provided, a `Promise` object otherwise
   */
  Constr.prototype.addToMySavedAlbums = function (albumIds, options, callback) {
    var requestData = {
      url: _baseUri + "/me/albums",
      type: "PUT",
      postData: albumIds,
    };
    return _checkParamsAndPerformRequest(requestData, options, callback);
  };

  /**
   * Remove one or more albums from the current user's "Your Music" library.
   * See [Remove Albums for Current User](https://developer.spotify.com/web-api/remove-albums-user/) on
   * the Spotify Developer site for more information about the endpoint.
   * @param {Array<string>} albumIds The ids of the albums. If you know their Spotify URI, it is easy
   * to find their album id (e.g. spotify:album:<here_is_the_album_id>)
   * @param {Object} options A JSON object with options that can be passed
   * @param {function(Object,Object)} callback An optional callback that receives 2 parameters. The first
   * one is the error object (null if no error), and the second is the value if the request succeeded.
   * @return {Object} Null if a callback is provided, a `Promise` object otherwise
   */
  Constr.prototype.removeFromMySavedAlbums = function (
    albumIds,
    options,
    callback
  ) {
    var requestData = {
      url: _baseUri + "/me/albums",
      type: "DELETE",
      postData: albumIds,
    };
    return _checkParamsAndPerformRequest(requestData, options, callback);
  };

  /**
   * Check if one or more albums is already saved in the current Spotify user's "Your Music" library.
   * See [Check User's Saved Albums](https://developer.spotify.com/web-api/check-users-saved-albums/) on
   * the Spotify Developer site for more information about the endpoint.
   * @param {Array<string>} albumIds The ids of the albums. If you know their Spotify URI, it is easy
   * to find their album id (e.g. spotify:album:<here_is_the_album_id>)
   * @param {Object} options A JSON object with options that can be passed
   * @param {function(Object,Object)} callback An optional callback that receives 2 parameters. The first
   * one is the error object (null if no error), and the second is the value if the request succeeded.
   * @return {Object} Null if a callback is provided, a `Promise` object otherwise
   */
  Constr.prototype.containsMySavedAlbums = function (
    albumIds,
    options,
    callback
  ) {
    var requestData = {
      url: _baseUri + "/me/albums/contains",
      params: { ids: albumIds.join(",") },
    };
    return _checkParamsAndPerformRequest(requestData, options, callback);
  };

  /**
   * Adds the current user as a follower of one or more other Spotify users.
   * See [Follow Artists or Users](https://developer.spotify.com/web-api/follow-artists-users/) on
   * the Spotify Developer site for more information about the endpoint.
   * @param {Array<string>} userIds The ids of the users. If you know their Spotify URI it is easy
   * to find their user id (e.g. spotify:user:<here_is_the_user_id>)
   * @param {function(Object,Object)} callback An optional callback that receives 2 parameters. The first
   * one is the error object (null if no error), and the second is an empty value if the request succeeded.
   * @return {Object} Null if a callback is provided, a `Promise` object otherwise
   */
  Constr.prototype.followUsers = function (userIds, callback) {
    var requestData = {
      url: _baseUri + "/me/following/",
      type: "PUT",
      params: {
        ids: userIds.join(","),
        type: "user",
      },
    };
    return _checkParamsAndPerformRequest(requestData, callback);
  };

  /**
   * Adds the current user as a follower of one or more artists.
   * See [Follow Artists or Users](https://developer.spotify.com/web-api/follow-artists-users/) on
   * the Spotify Developer site for more information about the endpoint.
   * @param {Array<string>} artistIds The ids of the artists. If you know their Spotify URI it is easy
   * to find their artist id (e.g. spotify:artist:<here_is_the_artist_id>)
   * @param {function(Object,Object)} callback An optional callback that receives 2 parameters. The first
   * one is the error object (null if no error), and the second is an empty value if the request succeeded.
   * @return {Object} Null if a callback is provided, a `Promise` object otherwise
   */
  Constr.prototype.followArtists = function (artistIds, callback) {
    var requestData = {
      url: _baseUri + "/me/following/",
      type: "PUT",
      params: {
        ids: artistIds.join(","),
        type: "artist",
      },
    };
    return _checkParamsAndPerformRequest(requestData, callback);
  };

  /**
   * Add the current user as a follower of one playlist.
   * See [Follow a Playlist](https://developer.spotify.com/web-api/follow-playlist/) on
   * the Spotify Developer site for more information about the endpoint.
   * @param {string} ownerId The id of the playlist owner. If you know the Spotify URI of
   * the playlist, it is easy to find the owner's user id
   * (e.g. spotify:user:<here_is_the_owner_id>:playlist:xxxx)
   * @param {string} playlistId The id of the playlist. If you know the Spotify URI it is easy
   * to find the playlist id (e.g. spotify:user:xxxx:playlist:<here_is_the_playlist_id>)
   * @param {Object} options A JSON object with options that can be passed. For instance,
   * whether you want the playlist to be followed privately ({public: false})
   * @param {function(Object,Object)} callback An optional callback that receives 2 parameters. The first
   * one is the error object (null if no error), and the second is an empty value if the request succeeded.
   * @return {Object} Null if a callback is provided, a `Promise` object otherwise
   */
  Constr.prototype.followPlaylist = function (
    ownerId,
    playlistId,
    options,
    callback
  ) {
    var requestData = {
      url:
        _baseUri +
        "/users/" +
        ownerId +
        "/playlists/" +
        playlistId +
        "/followers",
      type: "PUT",
      postData: {},
    };

    return _checkParamsAndPerformRequest(requestData, options, callback);
  };

  /**
   * Removes the current user as a follower of one or more other Spotify users.
   * See [Unfollow Artists or Users](https://developer.spotify.com/web-api/unfollow-artists-users/) on
   * the Spotify Developer site for more information about the endpoint.
   * @param {Array<string>} userIds The ids of the users. If you know their Spotify URI it is easy
   * to find their user id (e.g. spotify:user:<here_is_the_user_id>)
   * @param {function(Object,Object)} callback An optional callback that receives 2 parameters. The first
   * one is the error object (null if no error), and the second is an empty value if the request succeeded.
   * @return {Object} Null if a callback is provided, a `Promise` object otherwise
   */
  Constr.prototype.unfollowUsers = function (userIds, callback) {
    var requestData = {
      url: _baseUri + "/me/following/",
      type: "DELETE",
      params: {
        ids: userIds.join(","),
        type: "user",
      },
    };
    return _checkParamsAndPerformRequest(requestData, callback);
  };

  /**
   * Removes the current user as a follower of one or more artists.
   * See [Unfollow Artists or Users](https://developer.spotify.com/web-api/unfollow-artists-users/) on
   * the Spotify Developer site for more information about the endpoint.
   * @param {Array<string>} artistIds The ids of the artists. If you know their Spotify URI it is easy
   * to find their artist id (e.g. spotify:artist:<here_is_the_artist_id>)
   * @param {function(Object,Object)} callback An optional callback that receives 2 parameters. The first
   * one is the error object (null if no error), and the second is an empty value if the request succeeded.
   * @return {Object} Null if a callback is provided, a `Promise` object otherwise
   */
  Constr.prototype.unfollowArtists = function (artistIds, callback) {
    var requestData = {
      url: _baseUri + "/me/following/",
      type: "DELETE",
      params: {
        ids: artistIds.join(","),
        type: "artist",
      },
    };
    return _checkParamsAndPerformRequest(requestData, callback);
  };

  /**
   * Remove the current user as a follower of one playlist.
   * See [Unfollow a Playlist](https://developer.spotify.com/web-api/unfollow-playlist/) on
   * the Spotify Developer site for more information about the endpoint.
   * @param {string} ownerId The id of the playlist owner. If you know the Spotify URI of
   * the playlist, it is easy to find the owner's user id
   * (e.g. spotify:user:<here_is_the_owner_id>:playlist:xxxx)
   * @param {string} playlistId The id of the playlist. If you know the Spotify URI it is easy
   * to find the playlist id (e.g. spotify:user:xxxx:playlist:<here_is_the_playlist_id>)
   * @param {function(Object,Object)} callback An optional callback that receives 2 parameters. The first
   * one is the error object (null if no error), and the second is an empty value if the request succeeded.
   * @return {Object} Null if a callback is provided, a `Promise` object otherwise
   */
  Constr.prototype.unfollowPlaylist = function (ownerId, playlistId, callback) {
    var requestData = {
      url:
        _baseUri +
        "/users/" +
        ownerId +
        "/playlists/" +
        playlistId +
        "/followers",
      type: "DELETE",
    };
    return _checkParamsAndPerformRequest(requestData, callback);
  };

  /**
   * Checks to see if the current user is following one or more other Spotify users.
   * See [Check if Current User Follows Users or Artists](https://developer.spotify.com/web-api/check-current-user-follows/) on
   * the Spotify Developer site for more information about the endpoint.
   * @param {Array<string>} userIds The ids of the users. If you know their Spotify URI it is easy
   * to find their user id (e.g. spotify:user:<here_is_the_user_id>)
   * @param {function(Object,Object)} callback An optional callback that receives 2 parameters. The first
   * one is the error object (null if no error), and the second is an array of boolean values that indicate
   * whether the user is following the users sent in the request.
   * @return {Object} Null if a callback is provided, a `Promise` object otherwise
   */
  Constr.prototype.isFollowingUsers = function (userIds, callback) {
    var requestData = {
      url: _baseUri + "/me/following/contains",
      type: "GET",
      params: {
        ids: userIds.join(","),
        type: "user",
      },
    };
    return _checkParamsAndPerformRequest(requestData, callback);
  };

  /**
   * Checks to see if the current user is following one or more artists.
   * See [Check if Current User Follows](https://developer.spotify.com/web-api/check-current-user-follows/) on
   * the Spotify Developer site for more information about the endpoint.
   * @param {Array<string>} artistIds The ids of the artists. If you know their Spotify URI it is easy
   * to find their artist id (e.g. spotify:artist:<here_is_the_artist_id>)
   * @param {function(Object,Object)} callback An optional callback that receives 2 parameters. The first
   * one is the error object (null if no error), and the second is an array of boolean values that indicate
   * whether the user is following the artists sent in the request.
   * @return {Object} Null if a callback is provided, a `Promise` object otherwise
   */
  Constr.prototype.isFollowingArtists = function (artistIds, callback) {
    var requestData = {
      url: _baseUri + "/me/following/contains",
      type: "GET",
      params: {
        ids: artistIds.join(","),
        type: "artist",
      },
    };
    return _checkParamsAndPerformRequest(requestData, callback);
  };

  /**
   * Check to see if one or more Spotify users are following a specified playlist.
   * See [Check if Users Follow a Playlist](https://developer.spotify.com/web-api/check-user-following-playlist/) on
   * the Spotify Developer site for more information about the endpoint.
   * @param {string} ownerId The id of the playlist owner. If you know the Spotify URI of
   * the playlist, it is easy to find the owner's user id
   * (e.g. spotify:user:<here_is_the_owner_id>:playlist:xxxx)
   * @param {string} playlistId The id of the playlist. If you know the Spotify URI it is easy
   * to find the playlist id (e.g. spotify:user:xxxx:playlist:<here_is_the_playlist_id>)
   * @param {Array<string>} userIds The ids of the users. If you know their Spotify URI it is easy
   * to find their user id (e.g. spotify:user:<here_is_the_user_id>)
   * @param {function(Object,Object)} callback An optional callback that receives 2 parameters. The first
   * one is the error object (null if no error), and the second is an array of boolean values that indicate
   * whether the users are following the playlist sent in the request.
   * @return {Object} Null if a callback is provided, a `Promise` object otherwise
   */
  Constr.prototype.areFollowingPlaylist = function (
    ownerId,
    playlistId,
    userIds,
    callback
  ) {
    var requestData = {
      url:
        _baseUri +
        "/users/" +
        ownerId +
        "/playlists/" +
        playlistId +
        "/followers/contains",
      type: "GET",
      params: {
        ids: userIds.join(","),
      },
    };
    return _checkParamsAndPerformRequest(requestData, callback);
  };

  /**
   * Get the current user's followed artists.
   * See [Get User's Followed Artists](https://developer.spotify.com/web-api/get-followed-artists/) on
   * the Spotify Developer site for more information about the endpoint.
   * @param {Object} [options] Options, being after and limit.
   * @param {function(Object,Object)} callback An optional callback that receives 2 parameters. The first
   * one is the error object (null if no error), and the second is an object with a paged object containing
   * artists.
   * @returns {Promise|undefined} A promise that if successful, resolves to an object containing a paging object which contains
   * artists objects. Not returned if a callback is given.
   */
  Constr.prototype.getFollowedArtists = function (options, callback) {
    var requestData = {
      url: _baseUri + "/me/following",
      type: "GET",
      params: {
        type: "artist",
      },
    };
    return _checkParamsAndPerformRequest(requestData, options, callback);
  };

  /**
   * Fetches information about a specific user.
   * See [Get a User's Profile](https://developer.spotify.com/web-api/get-users-profile/) on
   * the Spotify Developer site for more information about the endpoint.
   * @param {string} userId The id of the user. If you know the Spotify URI it is easy
   * to find the id (e.g. spotify:user:<here_is_the_id>)
   * @param {Object} options A JSON object with options that can be passed
   * @param {function(Object,Object)} callback An optional callback that receives 2 parameters. The first
   * one is the error object (null if no error), and the second is the value if the request succeeded.
   * @return {Object} Null if a callback is provided, a `Promise` object otherwise
   */
  Constr.prototype.getUser = function (userId, options, callback) {
    var requestData = {
      url: _baseUri + "/users/" + userId,
    };
    return _checkParamsAndPerformRequest(requestData, options, callback);
  };

  /**
   * Fetches a list of the current user's playlists.
   * See [Get a List of a User's Playlists](https://developer.spotify.com/web-api/get-list-users-playlists/) on
   * the Spotify Developer site for more information about the endpoint.
   * @param {string} userId An optional id of the user. If you know the Spotify URI it is easy
   * to find the id (e.g. spotify:user:<here_is_the_id>). If not provided, the id of the user that granted
   * the permissions will be used.
   * @param {Object} options A JSON object with options that can be passed
   * @param {function(Object,Object)} callback An optional callback that receives 2 parameters. The first
   * one is the error object (null if no error), and the second is the value if the request succeeded.
   * @return {Object} Null if a callback is provided, a `Promise` object otherwise
   */
  Constr.prototype.getUserPlaylists = function (userId, options, callback) {
    var requestData;
    if (typeof userId === "string") {
      requestData = {
        url: _baseUri + "/users/" + userId + "/playlists",
      };
    } else {
      requestData = {
        url: _baseUri + "/me/playlists",
      };
      options = userId;
      callback = options;
    }
    return _checkParamsAndPerformRequest(requestData, options, callback);
  };

  /**
   * Fetches a specific playlist.
   * See [Get a Playlist](https://developer.spotify.com/web-api/get-playlist/) on
   * the Spotify Developer site for more information about the endpoint.
   * @param {string} userId The id of the user. If you know the Spotify URI it is easy
   * to find the user id (e.g. spotify:user:<here_is_the_user_id>:playlist:xxxx)
   * @param {string} playlistId The id of the playlist. If you know the Spotify URI it is easy
   * to find the playlist id (e.g. spotify:user:xxxx:playlist:<here_is_the_playlist_id>)
   * @param {Object} options A JSON object with options that can be passed
   * @param {function(Object,Object)} callback An optional callback that receives 2 parameters. The first
   * one is the error object (null if no error), and the second is the value if the request succeeded.
   * @return {Object} Null if a callback is provided, a `Promise` object otherwise
   */
  Constr.prototype.getPlaylist = function (
    userId,
    playlistId,
    options,
    callback
  ) {
    var requestData = {
      url: _baseUri + "/users/" + userId + "/playlists/" + playlistId,
    };
    return _checkParamsAndPerformRequest(requestData, options, callback);
  };

  /**
   * Fetches the tracks from a specific playlist.
   * See [Get a Playlist's Tracks](https://developer.spotify.com/web-api/get-playlists-tracks/) on
   * the Spotify Developer site for more information about the endpoint.
   * @param {string} userId The id of the user. If you know the Spotify URI it is easy
   * to find the user id (e.g. spotify:user:<here_is_the_user_id>:playlist:xxxx)
   * @param {string} playlistId The id of the playlist. If you know the Spotify URI it is easy
   * to find the playlist id (e.g. spotify:user:xxxx:playlist:<here_is_the_playlist_id>)
   * @param {Object} options A JSON object with options that can be passed
   * @param {function(Object,Object)} callback An optional callback that receives 2 parameters. The first
   * one is the error object (null if no error), and the second is the value if the request succeeded.
   * @return {Object} Null if a callback is provided, a `Promise` object otherwise
   */
  Constr.prototype.getPlaylistTracks = function (
    userId,
    playlistId,
    options,
    callback
  ) {
    var requestData = {
      url:
        _baseUri + "/users/" + userId + "/playlists/" + playlistId + "/tracks",
    };
    return _checkParamsAndPerformRequest(requestData, options, callback);
  };

  /**
   * Creates a playlist and stores it in the current user's library.
   * See [Create a Playlist](https://developer.spotify.com/web-api/create-playlist/) on
   * the Spotify Developer site for more information about the endpoint.
   * @param {string} userId The id of the user. You may want to user the "getMe" function to
   * find out the id of the current logged in user
   * @param {Object} options A JSON object with options that can be passed
   * @param {function(Object,Object)} callback An optional callback that receives 2 parameters. The first
   * one is the error object (null if no error), and the second is the value if the request succeeded.
   * @return {Object} Null if a callback is provided, a `Promise` object otherwise
   */
  Constr.prototype.createPlaylist = function (userId, options, callback) {
    var requestData = {
      url: _baseUri + "/users/" + userId + "/playlists",
      type: "POST",
      postData: options,
    };
    return _checkParamsAndPerformRequest(requestData, options, callback);
  };

  /**
   * Change a playlist's name and public/private state
   * See [Change a Playlist's Details](https://developer.spotify.com/web-api/change-playlist-details/) on
   * the Spotify Developer site for more information about the endpoint.
   * @param {string} userId The id of the user. You may want to user the "getMe" function to
   * find out the id of the current logged in user
   * @param {string} playlistId The id of the playlist. If you know the Spotify URI it is easy
   * to find the playlist id (e.g. spotify:user:xxxx:playlist:<here_is_the_playlist_id>)
   * @param {Object} data A JSON object with the data to update. E.g. {name: 'A new name', public: true}
   * @param {function(Object,Object)} callback An optional callback that receives 2 parameters. The first
   * one is the error object (null if no error), and the second is the value if the request succeeded.
   * @return {Object} Null if a callback is provided, a `Promise` object otherwise
   */
  Constr.prototype.changePlaylistDetails = function (
    userId,
    playlistId,
    data,
    callback
  ) {
    var requestData = {
      url: _baseUri + "/users/" + userId + "/playlists/" + playlistId,
      type: "PUT",
      postData: data,
    };
    return _checkParamsAndPerformRequest(requestData, data, callback);
  };

  /**
   * Add tracks to a playlist.
   * See [Add Tracks to a Playlist](https://developer.spotify.com/web-api/add-tracks-to-playlist/) on
   * the Spotify Developer site for more information about the endpoint.
   * @param {string} userId The id of the user. If you know the Spotify URI it is easy
   * to find the user id (e.g. spotify:user:<here_is_the_user_id>:playlist:xxxx)
   * @param {string} playlistId The id of the playlist. If you know the Spotify URI it is easy
   * to find the playlist id (e.g. spotify:user:xxxx:playlist:<here_is_the_playlist_id>)
   * @param {Array<string>} uris An array of Spotify URIs for the tracks
   * @param {Object} options A JSON object with options that can be passed
   * @param {function(Object,Object)} callback An optional callback that receives 2 parameters. The first
   * one is the error object (null if no error), and the second is the value if the request succeeded.
   * @return {Object} Null if a callback is provided, a `Promise` object otherwise
   */
  Constr.prototype.addTracksToPlaylist = function (
    userId,
    playlistId,
    uris,
    options,
    callback
  ) {
    var requestData = {
      url:
        _baseUri + "/users/" + userId + "/playlists/" + playlistId + "/tracks",
      type: "POST",
      params: {
        uris: uris,
      },
    };
    return _checkParamsAndPerformRequest(requestData, options, callback);
  };

  /**
   * Replace the tracks of a playlist
   * See [Replace a Playlist's Tracks](https://developer.spotify.com/web-api/replace-playlists-tracks/) on
   * the Spotify Developer site for more information about the endpoint.
   * @param {string} userId The id of the user. If you know the Spotify URI it is easy
   * to find the user id (e.g. spotify:user:<here_is_the_user_id>:playlist:xxxx)
   * @param {string} playlistId The id of the playlist. If you know the Spotify URI it is easy
   * to find the playlist id (e.g. spotify:user:xxxx:playlist:<here_is_the_playlist_id>)
   * @param {Array<string>} uris An array of Spotify URIs for the tracks
   * @param {function(Object,Object)} callback An optional callback that receives 2 parameters. The first
   * one is the error object (null if no error), and the second is the value if the request succeeded.
   * @return {Object} Null if a callback is provided, a `Promise` object otherwise
   */
  Constr.prototype.replaceTracksInPlaylist = function (
    userId,
    playlistId,
    uris,
    callback
  ) {
    var requestData = {
      url:
        _baseUri + "/users/" + userId + "/playlists/" + playlistId + "/tracks",
      type: "PUT",
      postData: { uris: uris },
    };
    return _checkParamsAndPerformRequest(requestData, {}, callback);
  };

  /**
   * Reorder tracks in a playlist
   * See [Reorder a Playlists Tracks](https://developer.spotify.com/web-api/reorder-playlists-tracks/) on
   * the Spotify Developer site for more information about the endpoint.
   * @param {string} userId The id of the user. If you know the Spotify URI it is easy
   * to find the user id (e.g. spotify:user:<here_is_the_user_id>:playlist:xxxx)
   * @param {string} playlistId The id of the playlist. If you know the Spotify URI it is easy
   * to find the playlist id (e.g. spotify:user:xxxx:playlist:<here_is_the_playlist_id>)
   * @param {number} rangeStart The position of the first track to be reordered.
   * @param {number} insertBefore The position where the tracks should be inserted. To reorder the tracks to
   * the end of the playlist, simply set insert_before to the position after the last track.
   * @param {Object} options An object with optional parameters (range_length, snapshot_id)
   * @param {function(Object,Object)} callback An optional callback that receives 2 parameters. The first
   * one is the error object (null if no error), and the second is the value if the request succeeded.
   * @return {Object} Null if a callback is provided, a `Promise` object otherwise
   */
  Constr.prototype.reorderTracksInPlaylist = function (
    userId,
    playlistId,
    rangeStart,
    insertBefore,
    options,
    callback
  ) {
    /*jshint camelcase: false */
    var requestData = {
      url:
        _baseUri + "/users/" + userId + "/playlists/" + playlistId + "/tracks",
      type: "PUT",
      postData: {
        range_start: rangeStart,
        insert_before: insertBefore,
      },
    };
    return _checkParamsAndPerformRequest(requestData, options, callback);
  };

  /**
   * Remove tracks from a playlist
   * See [Remove Tracks from a Playlist](https://developer.spotify.com/web-api/remove-tracks-playlist/) on
   * the Spotify Developer site for more information about the endpoint.
   * @param {string} userId The id of the user. If you know the Spotify URI it is easy
   * to find the user id (e.g. spotify:user:<here_is_the_user_id>:playlist:xxxx)
   * @param {string} playlistId The id of the playlist. If you know the Spotify URI it is easy
   * to find the playlist id (e.g. spotify:user:xxxx:playlist:<here_is_the_playlist_id>)
   * @param {Array<Object>} uris An array of tracks to be removed. Each element of the array can be either a
   * string, in which case it is treated as a URI, or an object containing the properties `uri` (which is a
   * string) and `positions` (which is an array of integers).
   * @param {function(Object,Object)} callback An optional callback that receives 2 parameters. The first
   * one is the error object (null if no error), and the second is the value if the request succeeded.
   * @return {Object} Null if a callback is provided, a `Promise` object otherwise
   */
  Constr.prototype.removeTracksFromPlaylist = function (
    userId,
    playlistId,
    uris,
    callback
  ) {
    var dataToBeSent = uris.map(function (uri) {
      if (typeof uri === "string") {
        return { uri: uri };
      } else {
        return uri;
      }
    });

    var requestData = {
      url:
        _baseUri + "/users/" + userId + "/playlists/" + playlistId + "/tracks",
      type: "DELETE",
      postData: { tracks: dataToBeSent },
    };
    return _checkParamsAndPerformRequest(requestData, {}, callback);
  };

  /**
   * Remove tracks from a playlist, specifying a snapshot id.
   * See [Remove Tracks from a Playlist](https://developer.spotify.com/web-api/remove-tracks-playlist/) on
   * the Spotify Developer site for more information about the endpoint.
   * @param {string} userId The id of the user. If you know the Spotify URI it is easy
   * to find the user id (e.g. spotify:user:<here_is_the_user_id>:playlist:xxxx)
   * @param {string} playlistId The id of the playlist. If you know the Spotify URI it is easy
   * to find the playlist id (e.g. spotify:user:xxxx:playlist:<here_is_the_playlist_id>)
   * @param {Array<Object>} uris An array of tracks to be removed. Each element of the array can be either a
   * string, in which case it is treated as a URI, or an object containing the properties `uri` (which is a
   * string) and `positions` (which is an array of integers).
   * @param {string} snapshotId The playlist's snapshot ID against which you want to make the changes
   * @param {function(Object,Object)} callback An optional callback that receives 2 parameters. The first
   * one is the error object (null if no error), and the second is the value if the request succeeded.
   * @return {Object} Null if a callback is provided, a `Promise` object otherwise
   */
  Constr.prototype.removeTracksFromPlaylistWithSnapshotId = function (
    userId,
    playlistId,
    uris,
    snapshotId,
    callback
  ) {
    /*jshint camelcase: false */
    var dataToBeSent = uris.map(function (uri) {
      if (typeof uri === "string") {
        return { uri: uri };
      } else {
        return uri;
      }
    });

    var requestData = {
      url:
        _baseUri + "/users/" + userId + "/playlists/" + playlistId + "/tracks",
      type: "DELETE",
      postData: {
        tracks: dataToBeSent,
        snapshot_id: snapshotId,
      },
    };
    return _checkParamsAndPerformRequest(requestData, {}, callback);
  };

  /**
   * Remove tracks from a playlist, specifying the positions of the tracks to be removed.
   * See [Remove Tracks from a Playlist](https://developer.spotify.com/web-api/remove-tracks-playlist/) on
   * the Spotify Developer site for more information about the endpoint.
   * @param {string} userId The id of the user. If you know the Spotify URI it is easy
   * to find the user id (e.g. spotify:user:<here_is_the_user_id>:playlist:xxxx)
   * @param {string} playlistId The id of the playlist. If you know the Spotify URI it is easy
   * to find the playlist id (e.g. spotify:user:xxxx:playlist:<here_is_the_playlist_id>)
   * @param {Array<number>} positions array of integers containing the positions of the tracks to remove
   * from the playlist.
   * @param {string} snapshotId The playlist's snapshot ID against which you want to make the changes
   * @param {function(Object,Object)} callback An optional callback that receives 2 parameters. The first
   * one is the error object (null if no error), and the second is the value if the request succeeded.
   * @return {Object} Null if a callback is provided, a `Promise` object otherwise
   */
  Constr.prototype.removeTracksFromPlaylistInPositions = function (
    userId,
    playlistId,
    positions,
    snapshotId,
    callback
  ) {
    /*jshint camelcase: false */
    var requestData = {
      url:
        _baseUri + "/users/" + userId + "/playlists/" + playlistId + "/tracks",
      type: "DELETE",
      postData: {
        positions: positions,
        snapshot_id: snapshotId,
      },
    };
    return _checkParamsAndPerformRequest(requestData, {}, callback);
  };

  /**
   * Fetches an album from the Spotify catalog.
   * See [Get an Album](https://developer.spotify.com/web-api/get-album/) on
   * the Spotify Developer site for more information about the endpoint.
   * @param {string} albumId The id of the album. If you know the Spotify URI it is easy
   * to find the album id (e.g. spotify:album:<here_is_the_album_id>)
   * @param {Object} options A JSON object with options that can be passed
   * @param {function(Object,Object)} callback An optional callback that receives 2 parameters. The first
   * one is the error object (null if no error), and the second is the value if the request succeeded.
   * @return {Object} Null if a callback is provided, a `Promise` object otherwise
   */
  Constr.prototype.getAlbum = function (albumId, options, callback) {
    var requestData = {
      url: _baseUri + "/albums/" + albumId,
    };
    return _checkParamsAndPerformRequest(requestData, options, callback);
  };

  /**
   * Fetches the tracks of an album from the Spotify catalog.
   * See [Get an Album's Tracks](https://developer.spotify.com/web-api/get-albums-tracks/) on
   * the Spotify Developer site for more information about the endpoint.
   * @param {string} albumId The id of the album. If you know the Spotify URI it is easy
   * to find the album id (e.g. spotify:album:<here_is_the_album_id>)
   * @param {Object} options A JSON object with options that can be passed
   * @param {function(Object,Object)} callback An optional callback that receives 2 parameters. The first
   * one is the error object (null if no error), and the second is the value if the request succeeded.
   * @return {Object} Null if a callback is provided, a `Promise` object otherwise
   */
  Constr.prototype.getAlbumTracks = function (albumId, options, callback) {
    var requestData = {
      url: _baseUri + "/albums/" + albumId + "/tracks",
    };
    return _checkParamsAndPerformRequest(requestData, options, callback);
  };

  /**
   * Fetches multiple albums from the Spotify catalog.
   * See [Get Several Albums](https://developer.spotify.com/web-api/get-several-albums/) on
   * the Spotify Developer site for more information about the endpoint.
   * @param {Array<string>} albumIds The ids of the albums. If you know their Spotify URI it is easy
   * to find their album id (e.g. spotify:album:<here_is_the_album_id>)
   * @param {Object} options A JSON object with options that can be passed
   * @param {function(Object,Object)} callback An optional callback that receives 2 parameters. The first
   * one is the error object (null if no error), and the second is the value if the request succeeded.
   * @return {Object} Null if a callback is provided, a `Promise` object otherwise
   */
  Constr.prototype.getAlbums = function (albumIds, options, callback) {
    var requestData = {
      url: _baseUri + "/albums/",
      params: { ids: albumIds.join(",") },
    };
    return _checkParamsAndPerformRequest(requestData, options, callback);
  };

  /**
   * Fetches a track from the Spotify catalog.
   * See [Get a Track](https://developer.spotify.com/web-api/get-track/) on
   * the Spotify Developer site for more information about the endpoint.
   * @param {string} trackId The id of the track. If you know the Spotify URI it is easy
   * to find the track id (e.g. spotify:track:<here_is_the_track_id>)
   * @param {Object} options A JSON object with options that can be passed
   * @param {function(Object,Object)} callback An optional callback that receives 2 parameters. The first
   * one is the error object (null if no error), and the second is the value if the request succeeded.
   * @return {Object} Null if a callback is provided, a `Promise` object otherwise
   */
  Constr.prototype.getTrack = function (trackId, options, callback) {
    var requestData = {};
    requestData.url = _baseUri + "/tracks/" + trackId;
    return _checkParamsAndPerformRequest(requestData, options, callback);
  };

  /**
   * Fetches multiple tracks from the Spotify catalog.
   * See [Get Several Tracks](https://developer.spotify.com/web-api/get-several-tracks/) on
   * the Spotify Developer site for more information about the endpoint.
   * @param {Array<string>} trackIds The ids of the tracks. If you know their Spotify URI it is easy
   * to find their track id (e.g. spotify:track:<here_is_the_track_id>)
   * @param {Object} options A JSON object with options that can be passed
   * @param {function(Object,Object)} callback An optional callback that receives 2 parameters. The first
   * one is the error object (null if no error), and the second is the value if the request succeeded.
   * @return {Object} Null if a callback is provided, a `Promise` object otherwise
   */
  Constr.prototype.getTracks = function (trackIds, options, callback) {
    var requestData = {
      url: _baseUri + "/tracks/",
      params: { ids: trackIds.join(",") },
    };
    return _checkParamsAndPerformRequest(requestData, options, callback);
  };

  /**
   * Fetches an artist from the Spotify catalog.
   * See [Get an Artist](https://developer.spotify.com/web-api/get-artist/) on
   * the Spotify Developer site for more information about the endpoint.
   * @param {string} artistId The id of the artist. If you know the Spotify URI it is easy
   * to find the artist id (e.g. spotify:artist:<here_is_the_artist_id>)
   * @param {Object} options A JSON object with options that can be passed
   * @param {function(Object,Object)} callback An optional callback that receives 2 parameters. The first
   * one is the error object (null if no error), and the second is the value if the request succeeded.
   * @return {Object} Null if a callback is provided, a `Promise` object otherwise
   */
  Constr.prototype.getArtist = function (artistId, options, callback) {
    var requestData = {
      url: _baseUri + "/artists/" + artistId,
    };
    return _checkParamsAndPerformRequest(requestData, options, callback);
  };

  /**
   * Fetches multiple artists from the Spotify catalog.
   * See [Get Several Artists](https://developer.spotify.com/web-api/get-several-artists/) on
   * the Spotify Developer site for more information about the endpoint.
   * @param {Array<string>} artistIds The ids of the artists. If you know their Spotify URI it is easy
   * to find their artist id (e.g. spotify:artist:<here_is_the_artist_id>)
   * @param {Object} options A JSON object with options that can be passed
   * @param {function(Object,Object)} callback An optional callback that receives 2 parameters. The first
   * one is the error object (null if no error), and the second is the value if the request succeeded.
   * @return {Object} Null if a callback is provided, a `Promise` object otherwise
   */
  Constr.prototype.getArtists = function (artistIds, options, callback) {
    var requestData = {
      url: _baseUri + "/artists/",
      params: { ids: artistIds.join(",") },
    };
    return _checkParamsAndPerformRequest(requestData, options, callback);
  };

  /**
   * Fetches the albums of an artist from the Spotify catalog.
   * See [Get an Artist's Albums](https://developer.spotify.com/web-api/get-artists-albums/) on
   * the Spotify Developer site for more information about the endpoint.
   * @param {string} artistId The id of the artist. If you know the Spotify URI it is easy
   * to find the artist id (e.g. spotify:artist:<here_is_the_artist_id>)
   * @param {Object} options A JSON object with options that can be passed
   * @param {function(Object,Object)} callback An optional callback that receives 2 parameters. The first
   * one is the error object (null if no error), and the second is the value if the request succeeded.
   * @return {Object} Null if a callback is provided, a `Promise` object otherwise
   */
  Constr.prototype.getArtistAlbums = function (artistId, options, callback) {
    var requestData = {
      url: _baseUri + "/artists/" + artistId + "/albums",
    };
    return _checkParamsAndPerformRequest(requestData, options, callback);
  };

  /**
   * Fetches a list of top tracks of an artist from the Spotify catalog, for a specific country.
   * See [Get an Artist's Top Tracks](https://developer.spotify.com/web-api/get-artists-top-tracks/) on
   * the Spotify Developer site for more information about the endpoint.
   * @param {string} artistId The id of the artist. If you know the Spotify URI it is easy
   * to find the artist id (e.g. spotify:artist:<here_is_the_artist_id>)
   * @param {string} countryId The id of the country (e.g. ES for Spain or US for United States)
   * @param {Object} options A JSON object with options that can be passed
   * @param {function(Object,Object)} callback An optional callback that receives 2 parameters. The first
   * one is the error object (null if no error), and the second is the value if the request succeeded.
   * @return {Object} Null if a callback is provided, a `Promise` object otherwise
   */
  Constr.prototype.getArtistTopTracks = function (
    artistId,
    countryId,
    options,
    callback
  ) {
    var requestData = {
      url: _baseUri + "/artists/" + artistId + "/top-tracks",
      params: { country: countryId },
    };
    return _checkParamsAndPerformRequest(requestData, options, callback);
  };

  /**
   * Fetches a list of artists related with a given one from the Spotify catalog.
   * See [Get an Artist's Related Artists](https://developer.spotify.com/web-api/get-related-artists/) on
   * the Spotify Developer site for more information about the endpoint.
   * @param {string} artistId The id of the artist. If you know the Spotify URI it is easy
   * to find the artist id (e.g. spotify:artist:<here_is_the_artist_id>)
   * @param {Object} options A JSON object with options that can be passed
   * @param {function(Object,Object)} callback An optional callback that receives 2 parameters. The first
   * one is the error object (null if no error), and the second is the value if the request succeeded.
   * @return {Object} Null if a callback is provided, a `Promise` object otherwise
   */
  Constr.prototype.getArtistRelatedArtists = function (
    artistId,
    options,
    callback
  ) {
    var requestData = {
      url: _baseUri + "/artists/" + artistId + "/related-artists",
    };
    return _checkParamsAndPerformRequest(requestData, options, callback);
  };

  /**
   * Fetches a list of Spotify featured playlists (shown, for example, on a Spotify player's "Browse" tab).
   * See [Get a List of Featured Playlists](https://developer.spotify.com/web-api/get-list-featured-playlists/) on
   * the Spotify Developer site for more information about the endpoint.
   * @param {Object} options A JSON object with options that can be passed
   * @param {function(Object,Object)} callback An optional callback that receives 2 parameters. The first
   * one is the error object (null if no error), and the second is the value if the request succeeded.
   * @return {Object} Null if a callback is provided, a `Promise` object otherwise
   */
  Constr.prototype.getFeaturedPlaylists = function (options, callback) {
    var requestData = {
      url: _baseUri + "/browse/featured-playlists",
    };
    return _checkParamsAndPerformRequest(requestData, options, callback);
  };

  /**
   * Fetches a list of new album releases featured in Spotify (shown, for example, on a Spotify player's "Browse" tab).
   * See [Get a List of New Releases](https://developer.spotify.com/web-api/get-list-new-releases/) on
   * the Spotify Developer site for more information about the endpoint.
   * @param {Object} options A JSON object with options that can be passed
   * @param {function(Object,Object)} callback An optional callback that receives 2 parameters. The first
   * one is the error object (null if no error), and the second is the value if the request succeeded.
   * @return {Object} Null if a callback is provided, a `Promise` object otherwise
   */
  Constr.prototype.getNewReleases = function (options, callback) {
    var requestData = {
      url: _baseUri + "/browse/new-releases",
    };
    return _checkParamsAndPerformRequest(requestData, options, callback);
  };

  /**
   * Get a list of categories used to tag items in Spotify (on, for example, the Spotify player's "Browse" tab).
   * See [Get a List of Categories](https://developer.spotify.com/web-api/get-list-categories/) on
   * the Spotify Developer site for more information about the endpoint.
   * @param {Object} options A JSON object with options that can be passed
   * @param {function(Object,Object)} callback An optional callback that receives 2 parameters. The first
   * one is the error object (null if no error), and the second is the value if the request succeeded.
   * @return {Object} Null if a callback is provided, a `Promise` object otherwise
   */
  Constr.prototype.getCategories = function (options, callback) {
    var requestData = {
      url: _baseUri + "/browse/categories",
    };
    return _checkParamsAndPerformRequest(requestData, options, callback);
  };

  /**
   * Get a single category used to tag items in Spotify (on, for example, the Spotify player's "Browse" tab).
   * See [Get a Category](https://developer.spotify.com/web-api/get-category/) on
   * the Spotify Developer site for more information about the endpoint.
   * @param {string} categoryId The id of the category. These can be found with the getCategories function
   * @param {Object} options A JSON object with options that can be passed
   * @param {function(Object,Object)} callback An optional callback that receives 2 parameters. The first
   * one is the error object (null if no error), and the second is the value if the request succeeded.
   * @return {Object} Null if a callback is provided, a `Promise` object otherwise
   */
  Constr.prototype.getCategory = function (categoryId, options, callback) {
    var requestData = {
      url: _baseUri + "/browse/categories/" + categoryId,
    };
    return _checkParamsAndPerformRequest(requestData, options, callback);
  };

  /**
   * Get a list of Spotify playlists tagged with a particular category.
   * See [Get a Category's Playlists](https://developer.spotify.com/web-api/get-categorys-playlists/) on
   * the Spotify Developer site for more information about the endpoint.
   * @param {string} categoryId The id of the category. These can be found with the getCategories function
   * @param {Object} options A JSON object with options that can be passed
   * @param {function(Object,Object)} callback An optional callback that receives 2 parameters. The first
   * one is the error object (null if no error), and the second is the value if the request succeeded.
   * @return {Object} Null if a callback is provided, a `Promise` object otherwise
   */
  Constr.prototype.getCategoryPlaylists = function (
    categoryId,
    options,
    callback
  ) {
    var requestData = {
      url: _baseUri + "/browse/categories/" + categoryId + "/playlists",
    };
    return _checkParamsAndPerformRequest(requestData, options, callback);
  };

  /**
   * Fetches albums from the Spotify catalog according to a query.
   * See [Search for an Item](https://developer.spotify.com/web-api/search-item/) on
   * the Spotify Developer site for more information about the endpoint.
   * @param {string} query The search query
   * @param {Object} options A JSON object with options that can be passed
   * @param {function(Object,Object)} callback An optional callback that receives 2 parameters. The first
   * one is the error object (null if no error), and the second is the value if the request succeeded.
   * @return {Object} Null if a callback is provided, a `Promise` object otherwise
   */
  Constr.prototype.searchAlbums = function (query, options, callback) {
    var requestData = {
      url: _baseUri + "/search/",
      params: {
        q: query,
        type: "album",
      },
    };
    return _checkParamsAndPerformRequest(requestData, options, callback);
  };

  /**
   * Fetches artists from the Spotify catalog according to a query.
   * See [Search for an Item](https://developer.spotify.com/web-api/search-item/) on
   * the Spotify Developer site for more information about the endpoint.
   * @param {string} query The search query
   * @param {Object} options A JSON object with options that can be passed
   * @param {function(Object,Object)} callback An optional callback that receives 2 parameters. The first
   * one is the error object (null if no error), and the second is the value if the request succeeded.
   * @return {Object} Null if a callback is provided, a `Promise` object otherwise
   */
  Constr.prototype.searchArtists = function (query, options, callback) {
    var requestData = {
      url: _baseUri + "/search/",
      params: {
        q: query,
        type: "artist",
      },
    };
    return _checkParamsAndPerformRequest(requestData, options, callback);
  };

  /**
   * Fetches tracks from the Spotify catalog according to a query.
   * See [Search for an Item](https://developer.spotify.com/web-api/search-item/) on
   * the Spotify Developer site for more information about the endpoint.
   * @param {string} query The search query
   * @param {Object} options A JSON object with options that can be passed
   * @param {function(Object,Object)} callback An optional callback that receives 2 parameters. The first
   * one is the error object (null if no error), and the second is the value if the request succeeded.
   * @return {Object} Null if a callback is provided, a `Promise` object otherwise
   */
  Constr.prototype.searchTracks = function (query, options, callback) {
    var requestData = {
      url: _baseUri + "/search/",
      params: {
        q: query,
        type: "track",
      },
    };
    return _checkParamsAndPerformRequest(requestData, options, callback);
  };

  /**
   * Fetches playlists from the Spotify catalog according to a query.
   * See [Search for an Item](https://developer.spotify.com/web-api/search-item/) on
   * the Spotify Developer site for more information about the endpoint.
   * @param {string} query The search query
   * @param {Object} options A JSON object with options that can be passed
   * @param {function(Object,Object)} callback An optional callback that receives 2 parameters. The first
   * one is the error object (null if no error), and the second is the value if the request succeeded.
   * @return {Object} Null if a callback is provided, a `Promise` object otherwise
   */
  Constr.prototype.searchPlaylists = function (query, options, callback) {
    var requestData = {
      url: _baseUri + "/search/",
      params: {
        q: query,
        type: "playlist",
      },
    };
    return _checkParamsAndPerformRequest(requestData, options, callback);
  };

  /**
   * Gets the access token in use.
   * @return {string} accessToken The access token
   */
  Constr.prototype.getAccessToken = function () {
    return _accessToken;
  };

  /**
   * Sets the access token to be used.
   * See [the Authorization Guide](https://developer.spotify.com/web-api/authorization-guide/) on
   * the Spotify Developer site for more information about obtaining an access token.
   * @param {string} accessToken The access token
   * @return {void}
   */
  Constr.prototype.setAccessToken = function (accessToken) {
    _accessToken = accessToken;
  };

  /**
   * Sets an implementation of Promises/A+ to be used. E.g. Q, when.
   * See [Conformant Implementations](https://github.com/promises-aplus/promises-spec/blob/master/implementations.md)
   * for a list of some available options
   * @param {Object} promiseImplementation A Promises/A+ valid implementation
   * @throws {Error} If the implementation being set doesn't conform with Promises/A+
   * @return {void}
   */
  Constr.prototype.setPromiseImplementation = function (promiseImplementation) {
    if (!("defer" in promiseImplementation)) {
      throw new Error("Unsupported implementation of Promises/A+");
    } else {
      _promiseImplementation = promiseImplementation;
    }
  };

  return Constr;
})();

if (typeof module === "object" && typeof module.exports === "object") {
  module.exports = SpotifyWebApi;
}
/*! jQuery v2.1.1 | (c) 2005, 2014 jQuery Foundation, Inc. | jquery.org/license */ !(function (
  a,
  b
) {
  "object" == typeof module && "object" == typeof module.exports
    ? (module.exports = a.document
        ? b(a, !0)
        : function (a) {
            if (!a.document)
              throw new Error("jQuery requires a window with a document");
            return b(a);
          })
    : b(a);
})("undefined" != typeof window ? window : this, function (a, b) {
  var c = [],
    d = c.slice,
    e = c.concat,
    f = c.push,
    g = c.indexOf,
    h = {},
    i = h.toString,
    j = h.hasOwnProperty,
    k = {},
    l = a.document,
    m = "2.1.1",
    n = function (a, b) {
      return new n.fn.init(a, b);
    },
    o = /^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,
    p = /^-ms-/,
    q = /-([\da-z])/gi,
    r = function (a, b) {
      return b.toUpperCase();
    };
  (n.fn = n.prototype = {
    jquery: m,
    constructor: n,
    selector: "",
    length: 0,
    toArray: function () {
      return d.call(this);
    },
    get: function (a) {
      return null != a
        ? 0 > a
          ? this[a + this.length]
          : this[a]
        : d.call(this);
    },
    pushStack: function (a) {
      var b = n.merge(this.constructor(), a);
      return (b.prevObject = this), (b.context = this.context), b;
    },
    each: function (a, b) {
      return n.each(this, a, b);
    },
    map: function (a) {
      return this.pushStack(
        n.map(this, function (b, c) {
          return a.call(b, c, b);
        })
      );
    },
    slice: function () {
      return this.pushStack(d.apply(this, arguments));
    },
    first: function () {
      return this.eq(0);
    },
    last: function () {
      return this.eq(-1);
    },
    eq: function (a) {
      var b = this.length,
        c = +a + (0 > a ? b : 0);
      return this.pushStack(c >= 0 && b > c ? [this[c]] : []);
    },
    end: function () {
      return this.prevObject || this.constructor(null);
    },
    push: f,
    sort: c.sort,
    splice: c.splice,
  }),
    (n.extend = n.fn.extend = function () {
      var a,
        b,
        c,
        d,
        e,
        f,
        g = arguments[0] || {},
        h = 1,
        i = arguments.length,
        j = !1;
      for (
        "boolean" == typeof g && ((j = g), (g = arguments[h] || {}), h++),
          "object" == typeof g || n.isFunction(g) || (g = {}),
          h === i && ((g = this), h--);
        i > h;
        h++
      )
        if (null != (a = arguments[h]))
          for (b in a)
            (c = g[b]),
              (d = a[b]),
              g !== d &&
                (j && d && (n.isPlainObject(d) || (e = n.isArray(d)))
                  ? (e
                      ? ((e = !1), (f = c && n.isArray(c) ? c : []))
                      : (f = c && n.isPlainObject(c) ? c : {}),
                    (g[b] = n.extend(j, f, d)))
                  : void 0 !== d && (g[b] = d));
      return g;
    }),
    n.extend({
      expando: "jQuery" + (m + Math.random()).replace(/\D/g, ""),
      isReady: !0,
      error: function (a) {
        throw new Error(a);
      },
      noop: function () {},
      isFunction: function (a) {
        return "function" === n.type(a);
      },
      isArray: Array.isArray,
      isWindow: function (a) {
        return null != a && a === a.window;
      },
      isNumeric: function (a) {
        return !n.isArray(a) && a - parseFloat(a) >= 0;
      },
      isPlainObject: function (a) {
        return "object" !== n.type(a) || a.nodeType || n.isWindow(a)
          ? !1
          : a.constructor && !j.call(a.constructor.prototype, "isPrototypeOf")
          ? !1
          : !0;
      },
      isEmptyObject: function (a) {
        var b;
        for (b in a) return !1;
        return !0;
      },
      type: function (a) {
        return null == a
          ? a + ""
          : "object" == typeof a || "function" == typeof a
          ? h[i.call(a)] || "object"
          : typeof a;
      },
      globalEval: function (a) {
        var b,
          c = eval;
        (a = n.trim(a)),
          a &&
            (1 === a.indexOf("use strict")
              ? ((b = l.createElement("script")),
                (b.text = a),
                l.head.appendChild(b).parentNode.removeChild(b))
              : c(a));
      },
      camelCase: function (a) {
        return a.replace(p, "ms-").replace(q, r);
      },
      nodeName: function (a, b) {
        return a.nodeName && a.nodeName.toLowerCase() === b.toLowerCase();
      },
      each: function (a, b, c) {
        var d,
          e = 0,
          f = a.length,
          g = s(a);
        if (c) {
          if (g) {
            for (; f > e; e++) if (((d = b.apply(a[e], c)), d === !1)) break;
          } else for (e in a) if (((d = b.apply(a[e], c)), d === !1)) break;
        } else if (g) {
          for (; f > e; e++) if (((d = b.call(a[e], e, a[e])), d === !1)) break;
        } else for (e in a) if (((d = b.call(a[e], e, a[e])), d === !1)) break;
        return a;
      },
      trim: function (a) {
        return null == a ? "" : (a + "").replace(o, "");
      },
      makeArray: function (a, b) {
        var c = b || [];
        return (
          null != a &&
            (s(Object(a))
              ? n.merge(c, "string" == typeof a ? [a] : a)
              : f.call(c, a)),
          c
        );
      },
      inArray: function (a, b, c) {
        return null == b ? -1 : g.call(b, a, c);
      },
      merge: function (a, b) {
        for (var c = +b.length, d = 0, e = a.length; c > d; d++) a[e++] = b[d];
        return (a.length = e), a;
      },
      grep: function (a, b, c) {
        for (var d, e = [], f = 0, g = a.length, h = !c; g > f; f++)
          (d = !b(a[f], f)), d !== h && e.push(a[f]);
        return e;
      },
      map: function (a, b, c) {
        var d,
          f = 0,
          g = a.length,
          h = s(a),
          i = [];
        if (h) for (; g > f; f++) (d = b(a[f], f, c)), null != d && i.push(d);
        else for (f in a) (d = b(a[f], f, c)), null != d && i.push(d);
        return e.apply([], i);
      },
      guid: 1,
      proxy: function (a, b) {
        var c, e, f;
        return (
          "string" == typeof b && ((c = a[b]), (b = a), (a = c)),
          n.isFunction(a)
            ? ((e = d.call(arguments, 2)),
              (f = function () {
                return a.apply(b || this, e.concat(d.call(arguments)));
              }),
              (f.guid = a.guid = a.guid || n.guid++),
              f)
            : void 0
        );
      },
      now: Date.now,
      support: k,
    }),
    n.each(
      "Boolean Number String Function Array Date RegExp Object Error".split(
        " "
      ),
      function (a, b) {
        h["[object " + b + "]"] = b.toLowerCase();
      }
    );
  function s(a) {
    var b = a.length,
      c = n.type(a);
    return "function" === c || n.isWindow(a)
      ? !1
      : 1 === a.nodeType && b
      ? !0
      : "array" === c ||
        0 === b ||
        ("number" == typeof b && b > 0 && b - 1 in a);
  }
  var t = (function (a) {
    var b,
      c,
      d,
      e,
      f,
      g,
      h,
      i,
      j,
      k,
      l,
      m,
      n,
      o,
      p,
      q,
      r,
      s,
      t,
      u = "sizzle" + -new Date(),
      v = a.document,
      w = 0,
      x = 0,
      y = gb(),
      z = gb(),
      A = gb(),
      B = function (a, b) {
        return a === b && (l = !0), 0;
      },
      C = "undefined",
      D = 1 << 31,
      E = {}.hasOwnProperty,
      F = [],
      G = F.pop,
      H = F.push,
      I = F.push,
      J = F.slice,
      K =
        F.indexOf ||
        function (a) {
          for (var b = 0, c = this.length; c > b; b++)
            if (this[b] === a) return b;
          return -1;
        },
      L =
        "checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",
      M = "[\\x20\\t\\r\\n\\f]",
      N = "(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",
      O = N.replace("w", "w#"),
      P =
        "\\[" +
        M +
        "*(" +
        N +
        ")(?:" +
        M +
        "*([*^$|!~]?=)" +
        M +
        "*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|(" +
        O +
        "))|)" +
        M +
        "*\\]",
      Q =
        ":(" +
        N +
        ")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|" +
        P +
        ")*)|.*)\\)|)",
      R = new RegExp("^" + M + "+|((?:^|[^\\\\])(?:\\\\.)*)" + M + "+$", "g"),
      S = new RegExp("^" + M + "*," + M + "*"),
      T = new RegExp("^" + M + "*([>+~]|" + M + ")" + M + "*"),
      U = new RegExp("=" + M + "*([^\\]'\"]*?)" + M + "*\\]", "g"),
      V = new RegExp(Q),
      W = new RegExp("^" + O + "$"),
      X = {
        ID: new RegExp("^#(" + N + ")"),
        CLASS: new RegExp("^\\.(" + N + ")"),
        TAG: new RegExp("^(" + N.replace("w", "w*") + ")"),
        ATTR: new RegExp("^" + P),
        PSEUDO: new RegExp("^" + Q),
        CHILD: new RegExp(
          "^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\(" +
            M +
            "*(even|odd|(([+-]|)(\\d*)n|)" +
            M +
            "*(?:([+-]|)" +
            M +
            "*(\\d+)|))" +
            M +
            "*\\)|)",
          "i"
        ),
        bool: new RegExp("^(?:" + L + ")$", "i"),
        needsContext: new RegExp(
          "^" +
            M +
            "*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\(" +
            M +
            "*((?:-\\d)?\\d*)" +
            M +
            "*\\)|)(?=[^-]|$)",
          "i"
        ),
      },
      Y = /^(?:input|select|textarea|button)$/i,
      Z = /^h\d$/i,
      $ = /^[^{]+\{\s*\[native \w/,
      _ = /^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,
      ab = /[+~]/,
      bb = /'|\\/g,
      cb = new RegExp("\\\\([\\da-f]{1,6}" + M + "?|(" + M + ")|.)", "ig"),
      db = function (a, b, c) {
        var d = "0x" + b - 65536;
        return d !== d || c
          ? b
          : 0 > d
          ? String.fromCharCode(d + 65536)
          : String.fromCharCode((d >> 10) | 55296, (1023 & d) | 56320);
      };
    try {
      I.apply((F = J.call(v.childNodes)), v.childNodes),
        F[v.childNodes.length].nodeType;
    } catch (eb) {
      I = {
        apply: F.length
          ? function (a, b) {
              H.apply(a, J.call(b));
            }
          : function (a, b) {
              var c = a.length,
                d = 0;
              while ((a[c++] = b[d++]));
              a.length = c - 1;
            },
      };
    }
    function fb(a, b, d, e) {
      var f, h, j, k, l, o, r, s, w, x;
      if (
        ((b ? b.ownerDocument || b : v) !== n && m(b),
        (b = b || n),
        (d = d || []),
        !a || "string" != typeof a)
      )
        return d;
      if (1 !== (k = b.nodeType) && 9 !== k) return [];
      if (p && !e) {
        if ((f = _.exec(a)))
          if ((j = f[1])) {
            if (9 === k) {
              if (((h = b.getElementById(j)), !h || !h.parentNode)) return d;
              if (h.id === j) return d.push(h), d;
            } else if (
              b.ownerDocument &&
              (h = b.ownerDocument.getElementById(j)) &&
              t(b, h) &&
              h.id === j
            )
              return d.push(h), d;
          } else {
            if (f[2]) return I.apply(d, b.getElementsByTagName(a)), d;
            if (
              (j = f[3]) &&
              c.getElementsByClassName &&
              b.getElementsByClassName
            )
              return I.apply(d, b.getElementsByClassName(j)), d;
          }
        if (c.qsa && (!q || !q.test(a))) {
          if (
            ((s = r = u),
            (w = b),
            (x = 9 === k && a),
            1 === k && "object" !== b.nodeName.toLowerCase())
          ) {
            (o = g(a)),
              (r = b.getAttribute("id"))
                ? (s = r.replace(bb, "\\$&"))
                : b.setAttribute("id", s),
              (s = "[id='" + s + "'] "),
              (l = o.length);
            while (l--) o[l] = s + qb(o[l]);
            (w = (ab.test(a) && ob(b.parentNode)) || b), (x = o.join(","));
          }
          if (x)
            try {
              return I.apply(d, w.querySelectorAll(x)), d;
            } catch (y) {
            } finally {
              r || b.removeAttribute("id");
            }
        }
      }
      return i(a.replace(R, "$1"), b, d, e);
    }
    function gb() {
      var a = [];
      function b(c, e) {
        return (
          a.push(c + " ") > d.cacheLength && delete b[a.shift()],
          (b[c + " "] = e)
        );
      }
      return b;
    }
    function hb(a) {
      return (a[u] = !0), a;
    }
    function ib(a) {
      var b = n.createElement("div");
      try {
        return !!a(b);
      } catch (c) {
        return !1;
      } finally {
        b.parentNode && b.parentNode.removeChild(b), (b = null);
      }
    }
    function jb(a, b) {
      var c = a.split("|"),
        e = a.length;
      while (e--) d.attrHandle[c[e]] = b;
    }
    function kb(a, b) {
      var c = b && a,
        d =
          c &&
          1 === a.nodeType &&
          1 === b.nodeType &&
          (~b.sourceIndex || D) - (~a.sourceIndex || D);
      if (d) return d;
      if (c) while ((c = c.nextSibling)) if (c === b) return -1;
      return a ? 1 : -1;
    }
    function lb(a) {
      return function (b) {
        var c = b.nodeName.toLowerCase();
        return "input" === c && b.type === a;
      };
    }
    function mb(a) {
      return function (b) {
        var c = b.nodeName.toLowerCase();
        return ("input" === c || "button" === c) && b.type === a;
      };
    }
    function nb(a) {
      return hb(function (b) {
        return (
          (b = +b),
          hb(function (c, d) {
            var e,
              f = a([], c.length, b),
              g = f.length;
            while (g--) c[(e = f[g])] && (c[e] = !(d[e] = c[e]));
          })
        );
      });
    }
    function ob(a) {
      return a && typeof a.getElementsByTagName !== C && a;
    }
    (c = fb.support = {}),
      (f = fb.isXML = function (a) {
        var b = a && (a.ownerDocument || a).documentElement;
        return b ? "HTML" !== b.nodeName : !1;
      }),
      (m = fb.setDocument = function (a) {
        var b,
          e = a ? a.ownerDocument || a : v,
          g = e.defaultView;
        return e !== n && 9 === e.nodeType && e.documentElement
          ? ((n = e),
            (o = e.documentElement),
            (p = !f(e)),
            g &&
              g !== g.top &&
              (g.addEventListener
                ? g.addEventListener(
                    "unload",
                    function () {
                      m();
                    },
                    !1
                  )
                : g.attachEvent &&
                  g.attachEvent("onunload", function () {
                    m();
                  })),
            (c.attributes = ib(function (a) {
              return (a.className = "i"), !a.getAttribute("className");
            })),
            (c.getElementsByTagName = ib(function (a) {
              return (
                a.appendChild(e.createComment("")),
                !a.getElementsByTagName("*").length
              );
            })),
            (c.getElementsByClassName =
              $.test(e.getElementsByClassName) &&
              ib(function (a) {
                return (
                  (a.innerHTML =
                    "<div class='a'></div><div class='a i'></div>"),
                  (a.firstChild.className = "i"),
                  2 === a.getElementsByClassName("i").length
                );
              })),
            (c.getById = ib(function (a) {
              return (
                (o.appendChild(a).id = u),
                !e.getElementsByName || !e.getElementsByName(u).length
              );
            })),
            c.getById
              ? ((d.find.ID = function (a, b) {
                  if (typeof b.getElementById !== C && p) {
                    var c = b.getElementById(a);
                    return c && c.parentNode ? [c] : [];
                  }
                }),
                (d.filter.ID = function (a) {
                  var b = a.replace(cb, db);
                  return function (a) {
                    return a.getAttribute("id") === b;
                  };
                }))
              : (delete d.find.ID,
                (d.filter.ID = function (a) {
                  var b = a.replace(cb, db);
                  return function (a) {
                    var c =
                      typeof a.getAttributeNode !== C &&
                      a.getAttributeNode("id");
                    return c && c.value === b;
                  };
                })),
            (d.find.TAG = c.getElementsByTagName
              ? function (a, b) {
                  return typeof b.getElementsByTagName !== C
                    ? b.getElementsByTagName(a)
                    : void 0;
                }
              : function (a, b) {
                  var c,
                    d = [],
                    e = 0,
                    f = b.getElementsByTagName(a);
                  if ("*" === a) {
                    while ((c = f[e++])) 1 === c.nodeType && d.push(c);
                    return d;
                  }
                  return f;
                }),
            (d.find.CLASS =
              c.getElementsByClassName &&
              function (a, b) {
                return typeof b.getElementsByClassName !== C && p
                  ? b.getElementsByClassName(a)
                  : void 0;
              }),
            (r = []),
            (q = []),
            (c.qsa = $.test(e.querySelectorAll)) &&
              (ib(function (a) {
                (a.innerHTML =
                  "<select msallowclip=''><option selected=''></option></select>"),
                  a.querySelectorAll("[msallowclip^='']").length &&
                    q.push("[*^$]=" + M + "*(?:''|\"\")"),
                  a.querySelectorAll("[selected]").length ||
                    q.push("\\[" + M + "*(?:value|" + L + ")"),
                  a.querySelectorAll(":checked").length || q.push(":checked");
              }),
              ib(function (a) {
                var b = e.createElement("input");
                b.setAttribute("type", "hidden"),
                  a.appendChild(b).setAttribute("name", "D"),
                  a.querySelectorAll("[name=d]").length &&
                    q.push("name" + M + "*[*^$|!~]?="),
                  a.querySelectorAll(":enabled").length ||
                    q.push(":enabled", ":disabled"),
                  a.querySelectorAll("*,:x"),
                  q.push(",.*:");
              })),
            (c.matchesSelector = $.test(
              (s =
                o.matches ||
                o.webkitMatchesSelector ||
                o.mozMatchesSelector ||
                o.oMatchesSelector ||
                o.msMatchesSelector)
            )) &&
              ib(function (a) {
                (c.disconnectedMatch = s.call(a, "div")),
                  s.call(a, "[s!='']:x"),
                  r.push("!=", Q);
              }),
            (q = q.length && new RegExp(q.join("|"))),
            (r = r.length && new RegExp(r.join("|"))),
            (b = $.test(o.compareDocumentPosition)),
            (t =
              b || $.test(o.contains)
                ? function (a, b) {
                    var c = 9 === a.nodeType ? a.documentElement : a,
                      d = b && b.parentNode;
                    return (
                      a === d ||
                      !(
                        !d ||
                        1 !== d.nodeType ||
                        !(c.contains
                          ? c.contains(d)
                          : a.compareDocumentPosition &&
                            16 & a.compareDocumentPosition(d))
                      )
                    );
                  }
                : function (a, b) {
                    if (b) while ((b = b.parentNode)) if (b === a) return !0;
                    return !1;
                  }),
            (B = b
              ? function (a, b) {
                  if (a === b) return (l = !0), 0;
                  var d =
                    !a.compareDocumentPosition - !b.compareDocumentPosition;
                  return d
                    ? d
                    : ((d =
                        (a.ownerDocument || a) === (b.ownerDocument || b)
                          ? a.compareDocumentPosition(b)
                          : 1),
                      1 & d ||
                      (!c.sortDetached && b.compareDocumentPosition(a) === d)
                        ? a === e || (a.ownerDocument === v && t(v, a))
                          ? -1
                          : b === e || (b.ownerDocument === v && t(v, b))
                          ? 1
                          : k
                          ? K.call(k, a) - K.call(k, b)
                          : 0
                        : 4 & d
                        ? -1
                        : 1);
                }
              : function (a, b) {
                  if (a === b) return (l = !0), 0;
                  var c,
                    d = 0,
                    f = a.parentNode,
                    g = b.parentNode,
                    h = [a],
                    i = [b];
                  if (!f || !g)
                    return a === e
                      ? -1
                      : b === e
                      ? 1
                      : f
                      ? -1
                      : g
                      ? 1
                      : k
                      ? K.call(k, a) - K.call(k, b)
                      : 0;
                  if (f === g) return kb(a, b);
                  c = a;
                  while ((c = c.parentNode)) h.unshift(c);
                  c = b;
                  while ((c = c.parentNode)) i.unshift(c);
                  while (h[d] === i[d]) d++;
                  return d
                    ? kb(h[d], i[d])
                    : h[d] === v
                    ? -1
                    : i[d] === v
                    ? 1
                    : 0;
                }),
            e)
          : n;
      }),
      (fb.matches = function (a, b) {
        return fb(a, null, null, b);
      }),
      (fb.matchesSelector = function (a, b) {
        if (
          ((a.ownerDocument || a) !== n && m(a),
          (b = b.replace(U, "='$1']")),
          !(!c.matchesSelector || !p || (r && r.test(b)) || (q && q.test(b))))
        )
          try {
            var d = s.call(a, b);
            if (
              d ||
              c.disconnectedMatch ||
              (a.document && 11 !== a.document.nodeType)
            )
              return d;
          } catch (e) {}
        return fb(b, n, null, [a]).length > 0;
      }),
      (fb.contains = function (a, b) {
        return (a.ownerDocument || a) !== n && m(a), t(a, b);
      }),
      (fb.attr = function (a, b) {
        (a.ownerDocument || a) !== n && m(a);
        var e = d.attrHandle[b.toLowerCase()],
          f = e && E.call(d.attrHandle, b.toLowerCase()) ? e(a, b, !p) : void 0;
        return void 0 !== f
          ? f
          : c.attributes || !p
          ? a.getAttribute(b)
          : (f = a.getAttributeNode(b)) && f.specified
          ? f.value
          : null;
      }),
      (fb.error = function (a) {
        throw new Error("Syntax error, unrecognized expression: " + a);
      }),
      (fb.uniqueSort = function (a) {
        var b,
          d = [],
          e = 0,
          f = 0;
        if (
          ((l = !c.detectDuplicates),
          (k = !c.sortStable && a.slice(0)),
          a.sort(B),
          l)
        ) {
          while ((b = a[f++])) b === a[f] && (e = d.push(f));
          while (e--) a.splice(d[e], 1);
        }
        return (k = null), a;
      }),
      (e = fb.getText = function (a) {
        var b,
          c = "",
          d = 0,
          f = a.nodeType;
        if (f) {
          if (1 === f || 9 === f || 11 === f) {
            if ("string" == typeof a.textContent) return a.textContent;
            for (a = a.firstChild; a; a = a.nextSibling) c += e(a);
          } else if (3 === f || 4 === f) return a.nodeValue;
        } else while ((b = a[d++])) c += e(b);
        return c;
      }),
      (d = fb.selectors = {
        cacheLength: 50,
        createPseudo: hb,
        match: X,
        attrHandle: {},
        find: {},
        relative: {
          ">": {
            dir: "parentNode",
            first: !0,
          },
          " ": {
            dir: "parentNode",
          },
          "+": {
            dir: "previousSibling",
            first: !0,
          },
          "~": {
            dir: "previousSibling",
          },
        },
        preFilter: {
          ATTR: function (a) {
            return (
              (a[1] = a[1].replace(cb, db)),
              (a[3] = (a[3] || a[4] || a[5] || "").replace(cb, db)),
              "~=" === a[2] && (a[3] = " " + a[3] + " "),
              a.slice(0, 4)
            );
          },
          CHILD: function (a) {
            return (
              (a[1] = a[1].toLowerCase()),
              "nth" === a[1].slice(0, 3)
                ? (a[3] || fb.error(a[0]),
                  (a[4] = +(a[4]
                    ? a[5] + (a[6] || 1)
                    : 2 * ("even" === a[3] || "odd" === a[3]))),
                  (a[5] = +(a[7] + a[8] || "odd" === a[3])))
                : a[3] && fb.error(a[0]),
              a
            );
          },
          PSEUDO: function (a) {
            var b,
              c = !a[6] && a[2];
            return X.CHILD.test(a[0])
              ? null
              : (a[3]
                  ? (a[2] = a[4] || a[5] || "")
                  : c &&
                    V.test(c) &&
                    (b = g(c, !0)) &&
                    (b = c.indexOf(")", c.length - b) - c.length) &&
                    ((a[0] = a[0].slice(0, b)), (a[2] = c.slice(0, b))),
                a.slice(0, 3));
          },
        },
        filter: {
          TAG: function (a) {
            var b = a.replace(cb, db).toLowerCase();
            return "*" === a
              ? function () {
                  return !0;
                }
              : function (a) {
                  return a.nodeName && a.nodeName.toLowerCase() === b;
                };
          },
          CLASS: function (a) {
            var b = y[a + " "];
            return (
              b ||
              ((b = new RegExp("(^|" + M + ")" + a + "(" + M + "|$)")) &&
                y(a, function (a) {
                  return b.test(
                    ("string" == typeof a.className && a.className) ||
                      (typeof a.getAttribute !== C &&
                        a.getAttribute("class")) ||
                      ""
                  );
                }))
            );
          },
          ATTR: function (a, b, c) {
            return function (d) {
              var e = fb.attr(d, a);
              return null == e
                ? "!=" === b
                : b
                ? ((e += ""),
                  "=" === b
                    ? e === c
                    : "!=" === b
                    ? e !== c
                    : "^=" === b
                    ? c && 0 === e.indexOf(c)
                    : "*=" === b
                    ? c && e.indexOf(c) > -1
                    : "$=" === b
                    ? c && e.slice(-c.length) === c
                    : "~=" === b
                    ? (" " + e + " ").indexOf(c) > -1
                    : "|=" === b
                    ? e === c || e.slice(0, c.length + 1) === c + "-"
                    : !1)
                : !0;
            };
          },
          CHILD: function (a, b, c, d, e) {
            var f = "nth" !== a.slice(0, 3),
              g = "last" !== a.slice(-4),
              h = "of-type" === b;
            return 1 === d && 0 === e
              ? function (a) {
                  return !!a.parentNode;
                }
              : function (b, c, i) {
                  var j,
                    k,
                    l,
                    m,
                    n,
                    o,
                    p = f !== g ? "nextSibling" : "previousSibling",
                    q = b.parentNode,
                    r = h && b.nodeName.toLowerCase(),
                    s = !i && !h;
                  if (q) {
                    if (f) {
                      while (p) {
                        l = b;
                        while ((l = l[p]))
                          if (
                            h
                              ? l.nodeName.toLowerCase() === r
                              : 1 === l.nodeType
                          )
                            return !1;
                        o = p = "only" === a && !o && "nextSibling";
                      }
                      return !0;
                    }
                    if (((o = [g ? q.firstChild : q.lastChild]), g && s)) {
                      (k = q[u] || (q[u] = {})),
                        (j = k[a] || []),
                        (n = j[0] === w && j[1]),
                        (m = j[0] === w && j[2]),
                        (l = n && q.childNodes[n]);
                      while ((l = (++n && l && l[p]) || (m = n = 0) || o.pop()))
                        if (1 === l.nodeType && ++m && l === b) {
                          k[a] = [w, n, m];
                          break;
                        }
                    } else if (
                      s &&
                      (j = (b[u] || (b[u] = {}))[a]) &&
                      j[0] === w
                    )
                      m = j[1];
                    else
                      while ((l = (++n && l && l[p]) || (m = n = 0) || o.pop()))
                        if (
                          (h
                            ? l.nodeName.toLowerCase() === r
                            : 1 === l.nodeType) &&
                          ++m &&
                          (s && ((l[u] || (l[u] = {}))[a] = [w, m]), l === b)
                        )
                          break;
                    return (m -= e), m === d || (m % d === 0 && m / d >= 0);
                  }
                };
          },
          PSEUDO: function (a, b) {
            var c,
              e =
                d.pseudos[a] ||
                d.setFilters[a.toLowerCase()] ||
                fb.error("unsupported pseudo: " + a);
            return e[u]
              ? e(b)
              : e.length > 1
              ? ((c = [a, a, "", b]),
                d.setFilters.hasOwnProperty(a.toLowerCase())
                  ? hb(function (a, c) {
                      var d,
                        f = e(a, b),
                        g = f.length;
                      while (g--)
                        (d = K.call(a, f[g])), (a[d] = !(c[d] = f[g]));
                    })
                  : function (a) {
                      return e(a, 0, c);
                    })
              : e;
          },
        },
        pseudos: {
          not: hb(function (a) {
            var b = [],
              c = [],
              d = h(a.replace(R, "$1"));
            return d[u]
              ? hb(function (a, b, c, e) {
                  var f,
                    g = d(a, null, e, []),
                    h = a.length;
                  while (h--) (f = g[h]) && (a[h] = !(b[h] = f));
                })
              : function (a, e, f) {
                  return (b[0] = a), d(b, null, f, c), !c.pop();
                };
          }),
          has: hb(function (a) {
            return function (b) {
              return fb(a, b).length > 0;
            };
          }),
          contains: hb(function (a) {
            return function (b) {
              return (b.textContent || b.innerText || e(b)).indexOf(a) > -1;
            };
          }),
          lang: hb(function (a) {
            return (
              W.test(a || "") || fb.error("unsupported lang: " + a),
              (a = a.replace(cb, db).toLowerCase()),
              function (b) {
                var c;
                do
                  if (
                    (c = p
                      ? b.lang
                      : b.getAttribute("xml:lang") || b.getAttribute("lang"))
                  )
                    return (
                      (c = c.toLowerCase()), c === a || 0 === c.indexOf(a + "-")
                    );
                while ((b = b.parentNode) && 1 === b.nodeType);
                return !1;
              }
            );
          }),
          target: function (b) {
            var c = a.location && a.location.hash;
            return c && c.slice(1) === b.id;
          },
          root: function (a) {
            return a === o;
          },
          focus: function (a) {
            return (
              a === n.activeElement &&
              (!n.hasFocus || n.hasFocus()) &&
              !!(a.type || a.href || ~a.tabIndex)
            );
          },
          enabled: function (a) {
            return a.disabled === !1;
          },
          disabled: function (a) {
            return a.disabled === !0;
          },
          checked: function (a) {
            var b = a.nodeName.toLowerCase();
            return (
              ("input" === b && !!a.checked) || ("option" === b && !!a.selected)
            );
          },
          selected: function (a) {
            return (
              a.parentNode && a.parentNode.selectedIndex, a.selected === !0
            );
          },
          empty: function (a) {
            for (a = a.firstChild; a; a = a.nextSibling)
              if (a.nodeType < 6) return !1;
            return !0;
          },
          parent: function (a) {
            return !d.pseudos.empty(a);
          },
          header: function (a) {
            return Z.test(a.nodeName);
          },
          input: function (a) {
            return Y.test(a.nodeName);
          },
          button: function (a) {
            var b = a.nodeName.toLowerCase();
            return ("input" === b && "button" === a.type) || "button" === b;
          },
          text: function (a) {
            var b;
            return (
              "input" === a.nodeName.toLowerCase() &&
              "text" === a.type &&
              (null == (b = a.getAttribute("type")) ||
                "text" === b.toLowerCase())
            );
          },
          first: nb(function () {
            return [0];
          }),
          last: nb(function (a, b) {
            return [b - 1];
          }),
          eq: nb(function (a, b, c) {
            return [0 > c ? c + b : c];
          }),
          even: nb(function (a, b) {
            for (var c = 0; b > c; c += 2) a.push(c);
            return a;
          }),
          odd: nb(function (a, b) {
            for (var c = 1; b > c; c += 2) a.push(c);
            return a;
          }),
          lt: nb(function (a, b, c) {
            for (var d = 0 > c ? c + b : c; --d >= 0; ) a.push(d);
            return a;
          }),
          gt: nb(function (a, b, c) {
            for (var d = 0 > c ? c + b : c; ++d < b; ) a.push(d);
            return a;
          }),
        },
      }),
      (d.pseudos.nth = d.pseudos.eq);
    for (b in {
      radio: !0,
      checkbox: !0,
      file: !0,
      password: !0,
      image: !0,
    })
      d.pseudos[b] = lb(b);
    for (b in {
      submit: !0,
      reset: !0,
    })
      d.pseudos[b] = mb(b);
    function pb() {}
    (pb.prototype = d.filters = d.pseudos),
      (d.setFilters = new pb()),
      (g = fb.tokenize = function (a, b) {
        var c,
          e,
          f,
          g,
          h,
          i,
          j,
          k = z[a + " "];
        if (k) return b ? 0 : k.slice(0);
        (h = a), (i = []), (j = d.preFilter);
        while (h) {
          (!c || (e = S.exec(h))) &&
            (e && (h = h.slice(e[0].length) || h), i.push((f = []))),
            (c = !1),
            (e = T.exec(h)) &&
              ((c = e.shift()),
              f.push({
                value: c,
                type: e[0].replace(R, " "),
              }),
              (h = h.slice(c.length)));
          for (g in d.filter)
            !(e = X[g].exec(h)) ||
              (j[g] && !(e = j[g](e))) ||
              ((c = e.shift()),
              f.push({
                value: c,
                type: g,
                matches: e,
              }),
              (h = h.slice(c.length)));
          if (!c) break;
        }
        return b ? h.length : h ? fb.error(a) : z(a, i).slice(0);
      });
    function qb(a) {
      for (var b = 0, c = a.length, d = ""; c > b; b++) d += a[b].value;
      return d;
    }
    function rb(a, b, c) {
      var d = b.dir,
        e = c && "parentNode" === d,
        f = x++;
      return b.first
        ? function (b, c, f) {
            while ((b = b[d])) if (1 === b.nodeType || e) return a(b, c, f);
          }
        : function (b, c, g) {
            var h,
              i,
              j = [w, f];
            if (g) {
              while ((b = b[d]))
                if ((1 === b.nodeType || e) && a(b, c, g)) return !0;
            } else
              while ((b = b[d]))
                if (1 === b.nodeType || e) {
                  if (
                    ((i = b[u] || (b[u] = {})),
                    (h = i[d]) && h[0] === w && h[1] === f)
                  )
                    return (j[2] = h[2]);
                  if (((i[d] = j), (j[2] = a(b, c, g)))) return !0;
                }
          };
    }
    function sb(a) {
      return a.length > 1
        ? function (b, c, d) {
            var e = a.length;
            while (e--) if (!a[e](b, c, d)) return !1;
            return !0;
          }
        : a[0];
    }
    function tb(a, b, c) {
      for (var d = 0, e = b.length; e > d; d++) fb(a, b[d], c);
      return c;
    }
    function ub(a, b, c, d, e) {
      for (var f, g = [], h = 0, i = a.length, j = null != b; i > h; h++)
        (f = a[h]) && (!c || c(f, d, e)) && (g.push(f), j && b.push(h));
      return g;
    }
    function vb(a, b, c, d, e, f) {
      return (
        d && !d[u] && (d = vb(d)),
        e && !e[u] && (e = vb(e, f)),
        hb(function (f, g, h, i) {
          var j,
            k,
            l,
            m = [],
            n = [],
            o = g.length,
            p = f || tb(b || "*", h.nodeType ? [h] : h, []),
            q = !a || (!f && b) ? p : ub(p, m, a, h, i),
            r = c ? (e || (f ? a : o || d) ? [] : g) : q;
          if ((c && c(q, r, h, i), d)) {
            (j = ub(r, n)), d(j, [], h, i), (k = j.length);
            while (k--) (l = j[k]) && (r[n[k]] = !(q[n[k]] = l));
          }
          if (f) {
            if (e || a) {
              if (e) {
                (j = []), (k = r.length);
                while (k--) (l = r[k]) && j.push((q[k] = l));
                e(null, (r = []), j, i);
              }
              k = r.length;
              while (k--)
                (l = r[k]) &&
                  (j = e ? K.call(f, l) : m[k]) > -1 &&
                  (f[j] = !(g[j] = l));
            }
          } else (r = ub(r === g ? r.splice(o, r.length) : r)), e ? e(null, g, r, i) : I.apply(g, r);
        })
      );
    }
    function wb(a) {
      for (
        var b,
          c,
          e,
          f = a.length,
          g = d.relative[a[0].type],
          h = g || d.relative[" "],
          i = g ? 1 : 0,
          k = rb(
            function (a) {
              return a === b;
            },
            h,
            !0
          ),
          l = rb(
            function (a) {
              return K.call(b, a) > -1;
            },
            h,
            !0
          ),
          m = [
            function (a, c, d) {
              return (
                (!g && (d || c !== j)) ||
                ((b = c).nodeType ? k(a, c, d) : l(a, c, d))
              );
            },
          ];
        f > i;
        i++
      )
        if ((c = d.relative[a[i].type])) m = [rb(sb(m), c)];
        else {
          if (((c = d.filter[a[i].type].apply(null, a[i].matches)), c[u])) {
            for (e = ++i; f > e; e++) if (d.relative[a[e].type]) break;
            return vb(
              i > 1 && sb(m),
              i > 1 &&
                qb(
                  a.slice(0, i - 1).concat({
                    value: " " === a[i - 2].type ? "*" : "",
                  })
                ).replace(R, "$1"),
              c,
              e > i && wb(a.slice(i, e)),
              f > e && wb((a = a.slice(e))),
              f > e && qb(a)
            );
          }
          m.push(c);
        }
      return sb(m);
    }
    function xb(a, b) {
      var c = b.length > 0,
        e = a.length > 0,
        f = function (f, g, h, i, k) {
          var l,
            m,
            o,
            p = 0,
            q = "0",
            r = f && [],
            s = [],
            t = j,
            u = f || (e && d.find.TAG("*", k)),
            v = (w += null == t ? 1 : Math.random() || 0.1),
            x = u.length;
          for (k && (j = g !== n && g); q !== x && null != (l = u[q]); q++) {
            if (e && l) {
              m = 0;
              while ((o = a[m++]))
                if (o(l, g, h)) {
                  i.push(l);
                  break;
                }
              k && (w = v);
            }
            c && ((l = !o && l) && p--, f && r.push(l));
          }
          if (((p += q), c && q !== p)) {
            m = 0;
            while ((o = b[m++])) o(r, s, g, h);
            if (f) {
              if (p > 0) while (q--) r[q] || s[q] || (s[q] = G.call(i));
              s = ub(s);
            }
            I.apply(i, s),
              k && !f && s.length > 0 && p + b.length > 1 && fb.uniqueSort(i);
          }
          return k && ((w = v), (j = t)), r;
        };
      return c ? hb(f) : f;
    }
    return (
      (h = fb.compile = function (a, b) {
        var c,
          d = [],
          e = [],
          f = A[a + " "];
        if (!f) {
          b || (b = g(a)), (c = b.length);
          while (c--) (f = wb(b[c])), f[u] ? d.push(f) : e.push(f);
          (f = A(a, xb(e, d))), (f.selector = a);
        }
        return f;
      }),
      (i = fb.select = function (a, b, e, f) {
        var i,
          j,
          k,
          l,
          m,
          n = "function" == typeof a && a,
          o = !f && g((a = n.selector || a));
        if (((e = e || []), 1 === o.length)) {
          if (
            ((j = o[0] = o[0].slice(0)),
            j.length > 2 &&
              "ID" === (k = j[0]).type &&
              c.getById &&
              9 === b.nodeType &&
              p &&
              d.relative[j[1].type])
          ) {
            if (
              ((b = (d.find.ID(k.matches[0].replace(cb, db), b) || [])[0]), !b)
            )
              return e;
            n && (b = b.parentNode), (a = a.slice(j.shift().value.length));
          }
          i = X.needsContext.test(a) ? 0 : j.length;
          while (i--) {
            if (((k = j[i]), d.relative[(l = k.type)])) break;
            if (
              (m = d.find[l]) &&
              (f = m(
                k.matches[0].replace(cb, db),
                (ab.test(j[0].type) && ob(b.parentNode)) || b
              ))
            ) {
              if ((j.splice(i, 1), (a = f.length && qb(j)), !a))
                return I.apply(e, f), e;
              break;
            }
          }
        }
        return (
          (n || h(a, o))(f, b, !p, e, (ab.test(a) && ob(b.parentNode)) || b), e
        );
      }),
      (c.sortStable = u.split("").sort(B).join("") === u),
      (c.detectDuplicates = !!l),
      m(),
      (c.sortDetached = ib(function (a) {
        return 1 & a.compareDocumentPosition(n.createElement("div"));
      })),
      ib(function (a) {
        return (
          (a.innerHTML = "<a href='#'></a>"),
          "#" === a.firstChild.getAttribute("href")
        );
      }) ||
        jb("type|href|height|width", function (a, b, c) {
          return c
            ? void 0
            : a.getAttribute(b, "type" === b.toLowerCase() ? 1 : 2);
        }),
      (c.attributes &&
        ib(function (a) {
          return (
            (a.innerHTML = "<input/>"),
            a.firstChild.setAttribute("value", ""),
            "" === a.firstChild.getAttribute("value")
          );
        })) ||
        jb("value", function (a, b, c) {
          return c || "input" !== a.nodeName.toLowerCase()
            ? void 0
            : a.defaultValue;
        }),
      ib(function (a) {
        return null == a.getAttribute("disabled");
      }) ||
        jb(L, function (a, b, c) {
          var d;
          return c
            ? void 0
            : a[b] === !0
            ? b.toLowerCase()
            : (d = a.getAttributeNode(b)) && d.specified
            ? d.value
            : null;
        }),
      fb
    );
  })(a);
  (n.find = t),
    (n.expr = t.selectors),
    (n.expr[":"] = n.expr.pseudos),
    (n.unique = t.uniqueSort),
    (n.text = t.getText),
    (n.isXMLDoc = t.isXML),
    (n.contains = t.contains);
  var u = n.expr.match.needsContext,
    v = /^<(\w+)\s*\/?>(?:<\/\1>|)$/,
    w = /^.[^:#\[\.,]*$/;
  function x(a, b, c) {
    if (n.isFunction(b))
      return n.grep(a, function (a, d) {
        return !!b.call(a, d, a) !== c;
      });
    if (b.nodeType)
      return n.grep(a, function (a) {
        return (a === b) !== c;
      });
    if ("string" == typeof b) {
      if (w.test(b)) return n.filter(b, a, c);
      b = n.filter(b, a);
    }
    return n.grep(a, function (a) {
      return g.call(b, a) >= 0 !== c;
    });
  }
  (n.filter = function (a, b, c) {
    var d = b[0];
    return (
      c && (a = ":not(" + a + ")"),
      1 === b.length && 1 === d.nodeType
        ? n.find.matchesSelector(d, a)
          ? [d]
          : []
        : n.find.matches(
            a,
            n.grep(b, function (a) {
              return 1 === a.nodeType;
            })
          )
    );
  }),
    n.fn.extend({
      find: function (a) {
        var b,
          c = this.length,
          d = [],
          e = this;
        if ("string" != typeof a)
          return this.pushStack(
            n(a).filter(function () {
              for (b = 0; c > b; b++) if (n.contains(e[b], this)) return !0;
            })
          );
        for (b = 0; c > b; b++) n.find(a, e[b], d);
        return (
          (d = this.pushStack(c > 1 ? n.unique(d) : d)),
          (d.selector = this.selector ? this.selector + " " + a : a),
          d
        );
      },
      filter: function (a) {
        return this.pushStack(x(this, a || [], !1));
      },
      not: function (a) {
        return this.pushStack(x(this, a || [], !0));
      },
      is: function (a) {
        return !!x(this, "string" == typeof a && u.test(a) ? n(a) : a || [], !1)
          .length;
      },
    });
  var y,
    z = /^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,
    A = (n.fn.init = function (a, b) {
      var c, d;
      if (!a) return this;
      if ("string" == typeof a) {
        if (
          ((c =
            "<" === a[0] && ">" === a[a.length - 1] && a.length >= 3
              ? [null, a, null]
              : z.exec(a)),
          !c || (!c[1] && b))
        )
          return !b || b.jquery
            ? (b || y).find(a)
            : this.constructor(b).find(a);
        if (c[1]) {
          if (
            ((b = b instanceof n ? b[0] : b),
            n.merge(
              this,
              n.parseHTML(c[1], b && b.nodeType ? b.ownerDocument || b : l, !0)
            ),
            v.test(c[1]) && n.isPlainObject(b))
          )
            for (c in b)
              n.isFunction(this[c]) ? this[c](b[c]) : this.attr(c, b[c]);
          return this;
        }
        return (
          (d = l.getElementById(c[2])),
          d && d.parentNode && ((this.length = 1), (this[0] = d)),
          (this.context = l),
          (this.selector = a),
          this
        );
      }
      return a.nodeType
        ? ((this.context = this[0] = a), (this.length = 1), this)
        : n.isFunction(a)
        ? "undefined" != typeof y.ready
          ? y.ready(a)
          : a(n)
        : (void 0 !== a.selector &&
            ((this.selector = a.selector), (this.context = a.context)),
          n.makeArray(a, this));
    });
  (A.prototype = n.fn), (y = n(l));
  var B = /^(?:parents|prev(?:Until|All))/,
    C = {
      children: !0,
      contents: !0,
      next: !0,
      prev: !0,
    };
  n.extend({
    dir: function (a, b, c) {
      var d = [],
        e = void 0 !== c;
      while ((a = a[b]) && 9 !== a.nodeType)
        if (1 === a.nodeType) {
          if (e && n(a).is(c)) break;
          d.push(a);
        }
      return d;
    },
    sibling: function (a, b) {
      for (var c = []; a; a = a.nextSibling)
        1 === a.nodeType && a !== b && c.push(a);
      return c;
    },
  }),
    n.fn.extend({
      has: function (a) {
        var b = n(a, this),
          c = b.length;
        return this.filter(function () {
          for (var a = 0; c > a; a++) if (n.contains(this, b[a])) return !0;
        });
      },
      closest: function (a, b) {
        for (
          var c,
            d = 0,
            e = this.length,
            f = [],
            g = u.test(a) || "string" != typeof a ? n(a, b || this.context) : 0;
          e > d;
          d++
        )
          for (c = this[d]; c && c !== b; c = c.parentNode)
            if (
              c.nodeType < 11 &&
              (g
                ? g.index(c) > -1
                : 1 === c.nodeType && n.find.matchesSelector(c, a))
            ) {
              f.push(c);
              break;
            }
        return this.pushStack(f.length > 1 ? n.unique(f) : f);
      },
      index: function (a) {
        return a
          ? "string" == typeof a
            ? g.call(n(a), this[0])
            : g.call(this, a.jquery ? a[0] : a)
          : this[0] && this[0].parentNode
          ? this.first().prevAll().length
          : -1;
      },
      add: function (a, b) {
        return this.pushStack(n.unique(n.merge(this.get(), n(a, b))));
      },
      addBack: function (a) {
        return this.add(
          null == a ? this.prevObject : this.prevObject.filter(a)
        );
      },
    });
  function D(a, b) {
    while ((a = a[b]) && 1 !== a.nodeType);
    return a;
  }
  n.each(
    {
      parent: function (a) {
        var b = a.parentNode;
        return b && 11 !== b.nodeType ? b : null;
      },
      parents: function (a) {
        return n.dir(a, "parentNode");
      },
      parentsUntil: function (a, b, c) {
        return n.dir(a, "parentNode", c);
      },
      next: function (a) {
        return D(a, "nextSibling");
      },
      prev: function (a) {
        return D(a, "previousSibling");
      },
      nextAll: function (a) {
        return n.dir(a, "nextSibling");
      },
      prevAll: function (a) {
        return n.dir(a, "previousSibling");
      },
      nextUntil: function (a, b, c) {
        return n.dir(a, "nextSibling", c);
      },
      prevUntil: function (a, b, c) {
        return n.dir(a, "previousSibling", c);
      },
      siblings: function (a) {
        return n.sibling((a.parentNode || {}).firstChild, a);
      },
      children: function (a) {
        return n.sibling(a.firstChild);
      },
      contents: function (a) {
        return a.contentDocument || n.merge([], a.childNodes);
      },
    },
    function (a, b) {
      n.fn[a] = function (c, d) {
        var e = n.map(this, b, c);
        return (
          "Until" !== a.slice(-5) && (d = c),
          d && "string" == typeof d && (e = n.filter(d, e)),
          this.length > 1 && (C[a] || n.unique(e), B.test(a) && e.reverse()),
          this.pushStack(e)
        );
      };
    }
  );
  var E = /\S+/g,
    F = {};
  function G(a) {
    var b = (F[a] = {});
    return (
      n.each(a.match(E) || [], function (a, c) {
        b[c] = !0;
      }),
      b
    );
  }
  (n.Callbacks = function (a) {
    a = "string" == typeof a ? F[a] || G(a) : n.extend({}, a);
    var b,
      c,
      d,
      e,
      f,
      g,
      h = [],
      i = !a.once && [],
      j = function (l) {
        for (
          b = a.memory && l, c = !0, g = e || 0, e = 0, f = h.length, d = !0;
          h && f > g;
          g++
        )
          if (h[g].apply(l[0], l[1]) === !1 && a.stopOnFalse) {
            b = !1;
            break;
          }
        (d = !1),
          h && (i ? i.length && j(i.shift()) : b ? (h = []) : k.disable());
      },
      k = {
        add: function () {
          if (h) {
            var c = h.length;
            !(function g(b) {
              n.each(b, function (b, c) {
                var d = n.type(c);
                "function" === d
                  ? (a.unique && k.has(c)) || h.push(c)
                  : c && c.length && "string" !== d && g(c);
              });
            })(arguments),
              d ? (f = h.length) : b && ((e = c), j(b));
          }
          return this;
        },
        remove: function () {
          return (
            h &&
              n.each(arguments, function (a, b) {
                var c;
                while ((c = n.inArray(b, h, c)) > -1)
                  h.splice(c, 1), d && (f >= c && f--, g >= c && g--);
              }),
            this
          );
        },
        has: function (a) {
          return a ? n.inArray(a, h) > -1 : !(!h || !h.length);
        },
        empty: function () {
          return (h = []), (f = 0), this;
        },
        disable: function () {
          return (h = i = b = void 0), this;
        },
        disabled: function () {
          return !h;
        },
        lock: function () {
          return (i = void 0), b || k.disable(), this;
        },
        locked: function () {
          return !i;
        },
        fireWith: function (a, b) {
          return (
            !h ||
              (c && !i) ||
              ((b = b || []),
              (b = [a, b.slice ? b.slice() : b]),
              d ? i.push(b) : j(b)),
            this
          );
        },
        fire: function () {
          return k.fireWith(this, arguments), this;
        },
        fired: function () {
          return !!c;
        },
      };
    return k;
  }),
    n.extend({
      Deferred: function (a) {
        var b = [
            ["resolve", "done", n.Callbacks("once memory"), "resolved"],
            ["reject", "fail", n.Callbacks("once memory"), "rejected"],
            ["notify", "progress", n.Callbacks("memory")],
          ],
          c = "pending",
          d = {
            state: function () {
              return c;
            },
            always: function () {
              return e.done(arguments).fail(arguments), this;
            },
            then: function () {
              var a = arguments;
              return n
                .Deferred(function (c) {
                  n.each(b, function (b, f) {
                    var g = n.isFunction(a[b]) && a[b];
                    e[f[1]](function () {
                      var a = g && g.apply(this, arguments);
                      a && n.isFunction(a.promise)
                        ? a
                            .promise()
                            .done(c.resolve)
                            .fail(c.reject)
                            .progress(c.notify)
                        : c[f[0] + "With"](
                            this === d ? c.promise() : this,
                            g ? [a] : arguments
                          );
                    });
                  }),
                    (a = null);
                })
                .promise();
            },
            promise: function (a) {
              return null != a ? n.extend(a, d) : d;
            },
          },
          e = {};
        return (
          (d.pipe = d.then),
          n.each(b, function (a, f) {
            var g = f[2],
              h = f[3];
            (d[f[1]] = g.add),
              h &&
                g.add(
                  function () {
                    c = h;
                  },
                  b[1 ^ a][2].disable,
                  b[2][2].lock
                ),
              (e[f[0]] = function () {
                return e[f[0] + "With"](this === e ? d : this, arguments), this;
              }),
              (e[f[0] + "With"] = g.fireWith);
          }),
          d.promise(e),
          a && a.call(e, e),
          e
        );
      },
      when: function (a) {
        var b = 0,
          c = d.call(arguments),
          e = c.length,
          f = 1 !== e || (a && n.isFunction(a.promise)) ? e : 0,
          g = 1 === f ? a : n.Deferred(),
          h = function (a, b, c) {
            return function (e) {
              (b[a] = this),
                (c[a] = arguments.length > 1 ? d.call(arguments) : e),
                c === i ? g.notifyWith(b, c) : --f || g.resolveWith(b, c);
            };
          },
          i,
          j,
          k;
        if (e > 1)
          for (i = new Array(e), j = new Array(e), k = new Array(e); e > b; b++)
            c[b] && n.isFunction(c[b].promise)
              ? c[b]
                  .promise()
                  .done(h(b, k, c))
                  .fail(g.reject)
                  .progress(h(b, j, i))
              : --f;
        return f || g.resolveWith(k, c), g.promise();
      },
    });
  var H;
  (n.fn.ready = function (a) {
    return n.ready.promise().done(a), this;
  }),
    n.extend({
      isReady: !1,
      readyWait: 1,
      holdReady: function (a) {
        a ? n.readyWait++ : n.ready(!0);
      },
      ready: function (a) {
        (a === !0 ? --n.readyWait : n.isReady) ||
          ((n.isReady = !0),
          (a !== !0 && --n.readyWait > 0) ||
            (H.resolveWith(l, [n]),
            n.fn.triggerHandler &&
              (n(l).triggerHandler("ready"), n(l).off("ready"))));
      },
    });
  function I() {
    l.removeEventListener("DOMContentLoaded", I, !1),
      a.removeEventListener("load", I, !1),
      n.ready();
  }
  (n.ready.promise = function (b) {
    return (
      H ||
        ((H = n.Deferred()),
        "complete" === l.readyState
          ? setTimeout(n.ready)
          : (l.addEventListener("DOMContentLoaded", I, !1),
            a.addEventListener("load", I, !1))),
      H.promise(b)
    );
  }),
    n.ready.promise();
  var J = (n.access = function (a, b, c, d, e, f, g) {
    var h = 0,
      i = a.length,
      j = null == c;
    if ("object" === n.type(c)) {
      e = !0;
      for (h in c) n.access(a, b, h, c[h], !0, f, g);
    } else if (
      void 0 !== d &&
      ((e = !0),
      n.isFunction(d) || (g = !0),
      j &&
        (g
          ? (b.call(a, d), (b = null))
          : ((j = b),
            (b = function (a, b, c) {
              return j.call(n(a), c);
            }))),
      b)
    )
      for (; i > h; h++) b(a[h], c, g ? d : d.call(a[h], h, b(a[h], c)));
    return e ? a : j ? b.call(a) : i ? b(a[0], c) : f;
  });
  n.acceptData = function (a) {
    return 1 === a.nodeType || 9 === a.nodeType || !+a.nodeType;
  };
  function K() {
    Object.defineProperty((this.cache = {}), 0, {
      get: function () {
        return {};
      },
    }),
      (this.expando = n.expando + Math.random());
  }
  (K.uid = 1),
    (K.accepts = n.acceptData),
    (K.prototype = {
      key: function (a) {
        if (!K.accepts(a)) return 0;
        var b = {},
          c = a[this.expando];
        if (!c) {
          c = K.uid++;
          try {
            (b[this.expando] = {
              value: c,
            }),
              Object.defineProperties(a, b);
          } catch (d) {
            (b[this.expando] = c), n.extend(a, b);
          }
        }
        return this.cache[c] || (this.cache[c] = {}), c;
      },
      set: function (a, b, c) {
        var d,
          e = this.key(a),
          f = this.cache[e];
        if ("string" == typeof b) f[b] = c;
        else if (n.isEmptyObject(f)) n.extend(this.cache[e], b);
        else for (d in b) f[d] = b[d];
        return f;
      },
      get: function (a, b) {
        var c = this.cache[this.key(a)];
        return void 0 === b ? c : c[b];
      },
      access: function (a, b, c) {
        var d;
        return void 0 === b || (b && "string" == typeof b && void 0 === c)
          ? ((d = this.get(a, b)),
            void 0 !== d ? d : this.get(a, n.camelCase(b)))
          : (this.set(a, b, c), void 0 !== c ? c : b);
      },
      remove: function (a, b) {
        var c,
          d,
          e,
          f = this.key(a),
          g = this.cache[f];
        if (void 0 === b) this.cache[f] = {};
        else {
          n.isArray(b)
            ? (d = b.concat(b.map(n.camelCase)))
            : ((e = n.camelCase(b)),
              b in g
                ? (d = [b, e])
                : ((d = e), (d = d in g ? [d] : d.match(E) || []))),
            (c = d.length);
          while (c--) delete g[d[c]];
        }
      },
      hasData: function (a) {
        return !n.isEmptyObject(this.cache[a[this.expando]] || {});
      },
      discard: function (a) {
        a[this.expando] && delete this.cache[a[this.expando]];
      },
    });
  var L = new K(),
    M = new K(),
    N = /^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,
    O = /([A-Z])/g;
  function P(a, b, c) {
    var d;
    if (void 0 === c && 1 === a.nodeType)
      if (
        ((d = "data-" + b.replace(O, "-$1").toLowerCase()),
        (c = a.getAttribute(d)),
        "string" == typeof c)
      ) {
        try {
          c =
            "true" === c
              ? !0
              : "false" === c
              ? !1
              : "null" === c
              ? null
              : +c + "" === c
              ? +c
              : N.test(c)
              ? n.parseJSON(c)
              : c;
        } catch (e) {}
        M.set(a, b, c);
      } else c = void 0;
    return c;
  }
  n.extend({
    hasData: function (a) {
      return M.hasData(a) || L.hasData(a);
    },
    data: function (a, b, c) {
      return M.access(a, b, c);
    },
    removeData: function (a, b) {
      M.remove(a, b);
    },
    _data: function (a, b, c) {
      return L.access(a, b, c);
    },
    _removeData: function (a, b) {
      L.remove(a, b);
    },
  }),
    n.fn.extend({
      data: function (a, b) {
        var c,
          d,
          e,
          f = this[0],
          g = f && f.attributes;
        if (void 0 === a) {
          if (
            this.length &&
            ((e = M.get(f)), 1 === f.nodeType && !L.get(f, "hasDataAttrs"))
          ) {
            c = g.length;
            while (c--)
              g[c] &&
                ((d = g[c].name),
                0 === d.indexOf("data-") &&
                  ((d = n.camelCase(d.slice(5))), P(f, d, e[d])));
            L.set(f, "hasDataAttrs", !0);
          }
          return e;
        }
        return "object" == typeof a
          ? this.each(function () {
              M.set(this, a);
            })
          : J(
              this,
              function (b) {
                var c,
                  d = n.camelCase(a);
                if (f && void 0 === b) {
                  if (((c = M.get(f, a)), void 0 !== c)) return c;
                  if (((c = M.get(f, d)), void 0 !== c)) return c;
                  if (((c = P(f, d, void 0)), void 0 !== c)) return c;
                } else
                  this.each(function () {
                    var c = M.get(this, d);
                    M.set(this, d, b),
                      -1 !== a.indexOf("-") &&
                        void 0 !== c &&
                        M.set(this, a, b);
                  });
              },
              null,
              b,
              arguments.length > 1,
              null,
              !0
            );
      },
      removeData: function (a) {
        return this.each(function () {
          M.remove(this, a);
        });
      },
    }),
    n.extend({
      queue: function (a, b, c) {
        var d;
        return a
          ? ((b = (b || "fx") + "queue"),
            (d = L.get(a, b)),
            c &&
              (!d || n.isArray(c)
                ? (d = L.access(a, b, n.makeArray(c)))
                : d.push(c)),
            d || [])
          : void 0;
      },
      dequeue: function (a, b) {
        b = b || "fx";
        var c = n.queue(a, b),
          d = c.length,
          e = c.shift(),
          f = n._queueHooks(a, b),
          g = function () {
            n.dequeue(a, b);
          };
        "inprogress" === e && ((e = c.shift()), d--),
          e &&
            ("fx" === b && c.unshift("inprogress"),
            delete f.stop,
            e.call(a, g, f)),
          !d && f && f.empty.fire();
      },
      _queueHooks: function (a, b) {
        var c = b + "queueHooks";
        return (
          L.get(a, c) ||
          L.access(a, c, {
            empty: n.Callbacks("once memory").add(function () {
              L.remove(a, [b + "queue", c]);
            }),
          })
        );
      },
    }),
    n.fn.extend({
      queue: function (a, b) {
        var c = 2;
        return (
          "string" != typeof a && ((b = a), (a = "fx"), c--),
          arguments.length < c
            ? n.queue(this[0], a)
            : void 0 === b
            ? this
            : this.each(function () {
                var c = n.queue(this, a, b);
                n._queueHooks(this, a),
                  "fx" === a && "inprogress" !== c[0] && n.dequeue(this, a);
              })
        );
      },
      dequeue: function (a) {
        return this.each(function () {
          n.dequeue(this, a);
        });
      },
      clearQueue: function (a) {
        return this.queue(a || "fx", []);
      },
      promise: function (a, b) {
        var c,
          d = 1,
          e = n.Deferred(),
          f = this,
          g = this.length,
          h = function () {
            --d || e.resolveWith(f, [f]);
          };
        "string" != typeof a && ((b = a), (a = void 0)), (a = a || "fx");
        while (g--)
          (c = L.get(f[g], a + "queueHooks")),
            c && c.empty && (d++, c.empty.add(h));
        return h(), e.promise(b);
      },
    });
  var Q = /[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,
    R = ["Top", "Right", "Bottom", "Left"],
    S = function (a, b) {
      return (
        (a = b || a),
        "none" === n.css(a, "display") || !n.contains(a.ownerDocument, a)
      );
    },
    T = /^(?:checkbox|radio)$/i;
  !(function () {
    var a = l.createDocumentFragment(),
      b = a.appendChild(l.createElement("div")),
      c = l.createElement("input");
    c.setAttribute("type", "radio"),
      c.setAttribute("checked", "checked"),
      c.setAttribute("name", "t"),
      b.appendChild(c),
      (k.checkClone = b.cloneNode(!0).cloneNode(!0).lastChild.checked),
      (b.innerHTML = "<textarea>x</textarea>"),
      (k.noCloneChecked = !!b.cloneNode(!0).lastChild.defaultValue);
  })();
  var U = "undefined";
  k.focusinBubbles = "onfocusin" in a;
  var V = /^key/,
    W = /^(?:mouse|pointer|contextmenu)|click/,
    X = /^(?:focusinfocus|focusoutblur)$/,
    Y = /^([^.]*)(?:\.(.+)|)$/;
  function Z() {
    return !0;
  }
  function $() {
    return !1;
  }
  function _() {
    try {
      return l.activeElement;
    } catch (a) {}
  }
  (n.event = {
    global: {},
    add: function (a, b, c, d, e) {
      var f,
        g,
        h,
        i,
        j,
        k,
        l,
        m,
        o,
        p,
        q,
        r = L.get(a);
      if (r) {
        c.handler && ((f = c), (c = f.handler), (e = f.selector)),
          c.guid || (c.guid = n.guid++),
          (i = r.events) || (i = r.events = {}),
          (g = r.handle) ||
            (g = r.handle = function (b) {
              return typeof n !== U && n.event.triggered !== b.type
                ? n.event.dispatch.apply(a, arguments)
                : void 0;
            }),
          (b = (b || "").match(E) || [""]),
          (j = b.length);
        while (j--)
          (h = Y.exec(b[j]) || []),
            (o = q = h[1]),
            (p = (h[2] || "").split(".").sort()),
            o &&
              ((l = n.event.special[o] || {}),
              (o = (e ? l.delegateType : l.bindType) || o),
              (l = n.event.special[o] || {}),
              (k = n.extend(
                {
                  type: o,
                  origType: q,
                  data: d,
                  handler: c,
                  guid: c.guid,
                  selector: e,
                  needsContext: e && n.expr.match.needsContext.test(e),
                  namespace: p.join("."),
                },
                f
              )),
              (m = i[o]) ||
                ((m = i[o] = []),
                (m.delegateCount = 0),
                (l.setup && l.setup.call(a, d, p, g) !== !1) ||
                  (a.addEventListener && a.addEventListener(o, g, !1))),
              l.add &&
                (l.add.call(a, k), k.handler.guid || (k.handler.guid = c.guid)),
              e ? m.splice(m.delegateCount++, 0, k) : m.push(k),
              (n.event.global[o] = !0));
      }
    },
    remove: function (a, b, c, d, e) {
      var f,
        g,
        h,
        i,
        j,
        k,
        l,
        m,
        o,
        p,
        q,
        r = L.hasData(a) && L.get(a);
      if (r && (i = r.events)) {
        (b = (b || "").match(E) || [""]), (j = b.length);
        while (j--)
          if (
            ((h = Y.exec(b[j]) || []),
            (o = q = h[1]),
            (p = (h[2] || "").split(".").sort()),
            o)
          ) {
            (l = n.event.special[o] || {}),
              (o = (d ? l.delegateType : l.bindType) || o),
              (m = i[o] || []),
              (h =
                h[2] &&
                new RegExp("(^|\\.)" + p.join("\\.(?:.*\\.|)") + "(\\.|$)")),
              (g = f = m.length);
            while (f--)
              (k = m[f]),
                (!e && q !== k.origType) ||
                  (c && c.guid !== k.guid) ||
                  (h && !h.test(k.namespace)) ||
                  (d && d !== k.selector && ("**" !== d || !k.selector)) ||
                  (m.splice(f, 1),
                  k.selector && m.delegateCount--,
                  l.remove && l.remove.call(a, k));
            g &&
              !m.length &&
              ((l.teardown && l.teardown.call(a, p, r.handle) !== !1) ||
                n.removeEvent(a, o, r.handle),
              delete i[o]);
          } else for (o in i) n.event.remove(a, o + b[j], c, d, !0);
        n.isEmptyObject(i) && (delete r.handle, L.remove(a, "events"));
      }
    },
    trigger: function (b, c, d, e) {
      var f,
        g,
        h,
        i,
        k,
        m,
        o,
        p = [d || l],
        q = j.call(b, "type") ? b.type : b,
        r = j.call(b, "namespace") ? b.namespace.split(".") : [];
      if (
        ((g = h = d = d || l),
        3 !== d.nodeType &&
          8 !== d.nodeType &&
          !X.test(q + n.event.triggered) &&
          (q.indexOf(".") >= 0 &&
            ((r = q.split(".")), (q = r.shift()), r.sort()),
          (k = q.indexOf(":") < 0 && "on" + q),
          (b = b[n.expando] ? b : new n.Event(q, "object" == typeof b && b)),
          (b.isTrigger = e ? 2 : 3),
          (b.namespace = r.join(".")),
          (b.namespace_re = b.namespace
            ? new RegExp("(^|\\.)" + r.join("\\.(?:.*\\.|)") + "(\\.|$)")
            : null),
          (b.result = void 0),
          b.target || (b.target = d),
          (c = null == c ? [b] : n.makeArray(c, [b])),
          (o = n.event.special[q] || {}),
          e || !o.trigger || o.trigger.apply(d, c) !== !1))
      ) {
        if (!e && !o.noBubble && !n.isWindow(d)) {
          for (
            i = o.delegateType || q, X.test(i + q) || (g = g.parentNode);
            g;
            g = g.parentNode
          )
            p.push(g), (h = g);
          h === (d.ownerDocument || l) &&
            p.push(h.defaultView || h.parentWindow || a);
        }
        f = 0;
        while ((g = p[f++]) && !b.isPropagationStopped())
          (b.type = f > 1 ? i : o.bindType || q),
            (m = (L.get(g, "events") || {})[b.type] && L.get(g, "handle")),
            m && m.apply(g, c),
            (m = k && g[k]),
            m &&
              m.apply &&
              n.acceptData(g) &&
              ((b.result = m.apply(g, c)),
              b.result === !1 && b.preventDefault());
        return (
          (b.type = q),
          e ||
            b.isDefaultPrevented() ||
            (o._default && o._default.apply(p.pop(), c) !== !1) ||
            !n.acceptData(d) ||
            (k &&
              n.isFunction(d[q]) &&
              !n.isWindow(d) &&
              ((h = d[k]),
              h && (d[k] = null),
              (n.event.triggered = q),
              d[q](),
              (n.event.triggered = void 0),
              h && (d[k] = h))),
          b.result
        );
      }
    },
    dispatch: function (a) {
      a = n.event.fix(a);
      var b,
        c,
        e,
        f,
        g,
        h = [],
        i = d.call(arguments),
        j = (L.get(this, "events") || {})[a.type] || [],
        k = n.event.special[a.type] || {};
      if (
        ((i[0] = a),
        (a.delegateTarget = this),
        !k.preDispatch || k.preDispatch.call(this, a) !== !1)
      ) {
        (h = n.event.handlers.call(this, a, j)), (b = 0);
        while ((f = h[b++]) && !a.isPropagationStopped()) {
          (a.currentTarget = f.elem), (c = 0);
          while ((g = f.handlers[c++]) && !a.isImmediatePropagationStopped())
            (!a.namespace_re || a.namespace_re.test(g.namespace)) &&
              ((a.handleObj = g),
              (a.data = g.data),
              (e = (
                (n.event.special[g.origType] || {}).handle || g.handler
              ).apply(f.elem, i)),
              void 0 !== e &&
                (a.result = e) === !1 &&
                (a.preventDefault(), a.stopPropagation()));
        }
        return k.postDispatch && k.postDispatch.call(this, a), a.result;
      }
    },
    handlers: function (a, b) {
      var c,
        d,
        e,
        f,
        g = [],
        h = b.delegateCount,
        i = a.target;
      if (h && i.nodeType && (!a.button || "click" !== a.type))
        for (; i !== this; i = i.parentNode || this)
          if (i.disabled !== !0 || "click" !== a.type) {
            for (d = [], c = 0; h > c; c++)
              (f = b[c]),
                (e = f.selector + " "),
                void 0 === d[e] &&
                  (d[e] = f.needsContext
                    ? n(e, this).index(i) >= 0
                    : n.find(e, this, null, [i]).length),
                d[e] && d.push(f);
            d.length &&
              g.push({
                elem: i,
                handlers: d,
              });
          }
      return (
        h < b.length &&
          g.push({
            elem: this,
            handlers: b.slice(h),
          }),
        g
      );
    },
    props: "altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(
      " "
    ),
    fixHooks: {},
    keyHooks: {
      props: "char charCode key keyCode".split(" "),
      filter: function (a, b) {
        return (
          null == a.which &&
            (a.which = null != b.charCode ? b.charCode : b.keyCode),
          a
        );
      },
    },
    mouseHooks: {
      props: "button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(
        " "
      ),
      filter: function (a, b) {
        var c,
          d,
          e,
          f = b.button;
        return (
          null == a.pageX &&
            null != b.clientX &&
            ((c = a.target.ownerDocument || l),
            (d = c.documentElement),
            (e = c.body),
            (a.pageX =
              b.clientX +
              ((d && d.scrollLeft) || (e && e.scrollLeft) || 0) -
              ((d && d.clientLeft) || (e && e.clientLeft) || 0)),
            (a.pageY =
              b.clientY +
              ((d && d.scrollTop) || (e && e.scrollTop) || 0) -
              ((d && d.clientTop) || (e && e.clientTop) || 0))),
          a.which ||
            void 0 === f ||
            (a.which = 1 & f ? 1 : 2 & f ? 3 : 4 & f ? 2 : 0),
          a
        );
      },
    },
    fix: function (a) {
      if (a[n.expando]) return a;
      var b,
        c,
        d,
        e = a.type,
        f = a,
        g = this.fixHooks[e];
      g ||
        (this.fixHooks[e] = g = W.test(e)
          ? this.mouseHooks
          : V.test(e)
          ? this.keyHooks
          : {}),
        (d = g.props ? this.props.concat(g.props) : this.props),
        (a = new n.Event(f)),
        (b = d.length);
      while (b--) (c = d[b]), (a[c] = f[c]);
      return (
        a.target || (a.target = l),
        3 === a.target.nodeType && (a.target = a.target.parentNode),
        g.filter ? g.filter(a, f) : a
      );
    },
    special: {
      load: {
        noBubble: !0,
      },
      focus: {
        trigger: function () {
          return this !== _() && this.focus ? (this.focus(), !1) : void 0;
        },
        delegateType: "focusin",
      },
      blur: {
        trigger: function () {
          return this === _() && this.blur ? (this.blur(), !1) : void 0;
        },
        delegateType: "focusout",
      },
      click: {
        trigger: function () {
          return "checkbox" === this.type &&
            this.click &&
            n.nodeName(this, "input")
            ? (this.click(), !1)
            : void 0;
        },
        _default: function (a) {
          return n.nodeName(a.target, "a");
        },
      },
      beforeunload: {
        postDispatch: function (a) {
          void 0 !== a.result &&
            a.originalEvent &&
            (a.originalEvent.returnValue = a.result);
        },
      },
    },
    simulate: function (a, b, c, d) {
      var e = n.extend(new n.Event(), c, {
        type: a,
        isSimulated: !0,
        originalEvent: {},
      });
      d ? n.event.trigger(e, null, b) : n.event.dispatch.call(b, e),
        e.isDefaultPrevented() && c.preventDefault();
    },
  }),
    (n.removeEvent = function (a, b, c) {
      a.removeEventListener && a.removeEventListener(b, c, !1);
    }),
    (n.Event = function (a, b) {
      return this instanceof n.Event
        ? (a && a.type
            ? ((this.originalEvent = a),
              (this.type = a.type),
              (this.isDefaultPrevented =
                a.defaultPrevented ||
                (void 0 === a.defaultPrevented && a.returnValue === !1)
                  ? Z
                  : $))
            : (this.type = a),
          b && n.extend(this, b),
          (this.timeStamp = (a && a.timeStamp) || n.now()),
          void (this[n.expando] = !0))
        : new n.Event(a, b);
    }),
    (n.Event.prototype = {
      isDefaultPrevented: $,
      isPropagationStopped: $,
      isImmediatePropagationStopped: $,
      preventDefault: function () {
        var a = this.originalEvent;
        (this.isDefaultPrevented = Z),
          a && a.preventDefault && a.preventDefault();
      },
      stopPropagation: function () {
        var a = this.originalEvent;
        (this.isPropagationStopped = Z),
          a && a.stopPropagation && a.stopPropagation();
      },
      stopImmediatePropagation: function () {
        var a = this.originalEvent;
        (this.isImmediatePropagationStopped = Z),
          a && a.stopImmediatePropagation && a.stopImmediatePropagation(),
          this.stopPropagation();
      },
    }),
    n.each(
      {
        mouseenter: "mouseover",
        mouseleave: "mouseout",
        pointerenter: "pointerover",
        pointerleave: "pointerout",
      },
      function (a, b) {
        n.event.special[a] = {
          delegateType: b,
          bindType: b,
          handle: function (a) {
            var c,
              d = this,
              e = a.relatedTarget,
              f = a.handleObj;
            return (
              (!e || (e !== d && !n.contains(d, e))) &&
                ((a.type = f.origType),
                (c = f.handler.apply(this, arguments)),
                (a.type = b)),
              c
            );
          },
        };
      }
    ),
    k.focusinBubbles ||
      n.each(
        {
          focus: "focusin",
          blur: "focusout",
        },
        function (a, b) {
          var c = function (a) {
            n.event.simulate(b, a.target, n.event.fix(a), !0);
          };
          n.event.special[b] = {
            setup: function () {
              var d = this.ownerDocument || this,
                e = L.access(d, b);
              e || d.addEventListener(a, c, !0), L.access(d, b, (e || 0) + 1);
            },
            teardown: function () {
              var d = this.ownerDocument || this,
                e = L.access(d, b) - 1;
              e
                ? L.access(d, b, e)
                : (d.removeEventListener(a, c, !0), L.remove(d, b));
            },
          };
        }
      ),
    n.fn.extend({
      on: function (a, b, c, d, e) {
        var f, g;
        if ("object" == typeof a) {
          "string" != typeof b && ((c = c || b), (b = void 0));
          for (g in a) this.on(g, b, c, a[g], e);
          return this;
        }
        if (
          (null == c && null == d
            ? ((d = b), (c = b = void 0))
            : null == d &&
              ("string" == typeof b
                ? ((d = c), (c = void 0))
                : ((d = c), (c = b), (b = void 0))),
          d === !1)
        )
          d = $;
        else if (!d) return this;
        return (
          1 === e &&
            ((f = d),
            (d = function (a) {
              return n().off(a), f.apply(this, arguments);
            }),
            (d.guid = f.guid || (f.guid = n.guid++))),
          this.each(function () {
            n.event.add(this, a, d, c, b);
          })
        );
      },
      one: function (a, b, c, d) {
        return this.on(a, b, c, d, 1);
      },
      off: function (a, b, c) {
        var d, e;
        if (a && a.preventDefault && a.handleObj)
          return (
            (d = a.handleObj),
            n(a.delegateTarget).off(
              d.namespace ? d.origType + "." + d.namespace : d.origType,
              d.selector,
              d.handler
            ),
            this
          );
        if ("object" == typeof a) {
          for (e in a) this.off(e, b, a[e]);
          return this;
        }
        return (
          (b === !1 || "function" == typeof b) && ((c = b), (b = void 0)),
          c === !1 && (c = $),
          this.each(function () {
            n.event.remove(this, a, c, b);
          })
        );
      },
      trigger: function (a, b) {
        return this.each(function () {
          n.event.trigger(a, b, this);
        });
      },
      triggerHandler: function (a, b) {
        var c = this[0];
        return c ? n.event.trigger(a, b, c, !0) : void 0;
      },
    });
  var ab = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,
    bb = /<([\w:]+)/,
    cb = /<|&#?\w+;/,
    db = /<(?:script|style|link)/i,
    eb = /checked\s*(?:[^=]|=\s*.checked.)/i,
    fb = /^$|\/(?:java|ecma)script/i,
    gb = /^true\/(.*)/,
    hb = /^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,
    ib = {
      option: [1, "<select multiple='multiple'>", "</select>"],
      thead: [1, "<table>", "</table>"],
      col: [2, "<table><colgroup>", "</colgroup></table>"],
      tr: [2, "<table><tbody>", "</tbody></table>"],
      td: [3, "<table><tbody><tr>", "</tr></tbody></table>"],
      _default: [0, "", ""],
    };
  (ib.optgroup = ib.option),
    (ib.tbody = ib.tfoot = ib.colgroup = ib.caption = ib.thead),
    (ib.th = ib.td);
  function jb(a, b) {
    return n.nodeName(a, "table") &&
      n.nodeName(11 !== b.nodeType ? b : b.firstChild, "tr")
      ? a.getElementsByTagName("tbody")[0] ||
          a.appendChild(a.ownerDocument.createElement("tbody"))
      : a;
  }
  function kb(a) {
    return (a.type = (null !== a.getAttribute("type")) + "/" + a.type), a;
  }
  function lb(a) {
    var b = gb.exec(a.type);
    return b ? (a.type = b[1]) : a.removeAttribute("type"), a;
  }
  function mb(a, b) {
    for (var c = 0, d = a.length; d > c; c++)
      L.set(a[c], "globalEval", !b || L.get(b[c], "globalEval"));
  }
  function nb(a, b) {
    var c, d, e, f, g, h, i, j;
    if (1 === b.nodeType) {
      if (
        L.hasData(a) &&
        ((f = L.access(a)), (g = L.set(b, f)), (j = f.events))
      ) {
        delete g.handle, (g.events = {});
        for (e in j)
          for (c = 0, d = j[e].length; d > c; c++) n.event.add(b, e, j[e][c]);
      }
      M.hasData(a) && ((h = M.access(a)), (i = n.extend({}, h)), M.set(b, i));
    }
  }
  function ob(a, b) {
    var c = a.getElementsByTagName
      ? a.getElementsByTagName(b || "*")
      : a.querySelectorAll
      ? a.querySelectorAll(b || "*")
      : [];
    return void 0 === b || (b && n.nodeName(a, b)) ? n.merge([a], c) : c;
  }
  function pb(a, b) {
    var c = b.nodeName.toLowerCase();
    "input" === c && T.test(a.type)
      ? (b.checked = a.checked)
      : ("input" === c || "textarea" === c) &&
        (b.defaultValue = a.defaultValue);
  }
  n.extend({
    clone: function (a, b, c) {
      var d,
        e,
        f,
        g,
        h = a.cloneNode(!0),
        i = n.contains(a.ownerDocument, a);
      if (
        !(
          k.noCloneChecked ||
          (1 !== a.nodeType && 11 !== a.nodeType) ||
          n.isXMLDoc(a)
        )
      )
        for (g = ob(h), f = ob(a), d = 0, e = f.length; e > d; d++)
          pb(f[d], g[d]);
      if (b)
        if (c)
          for (f = f || ob(a), g = g || ob(h), d = 0, e = f.length; e > d; d++)
            nb(f[d], g[d]);
        else nb(a, h);
      return (
        (g = ob(h, "script")), g.length > 0 && mb(g, !i && ob(a, "script")), h
      );
    },
    buildFragment: function (a, b, c, d) {
      for (
        var e,
          f,
          g,
          h,
          i,
          j,
          k = b.createDocumentFragment(),
          l = [],
          m = 0,
          o = a.length;
        o > m;
        m++
      )
        if (((e = a[m]), e || 0 === e))
          if ("object" === n.type(e)) n.merge(l, e.nodeType ? [e] : e);
          else if (cb.test(e)) {
            (f = f || k.appendChild(b.createElement("div"))),
              (g = (bb.exec(e) || ["", ""])[1].toLowerCase()),
              (h = ib[g] || ib._default),
              (f.innerHTML = h[1] + e.replace(ab, "<$1></$2>") + h[2]),
              (j = h[0]);
            while (j--) f = f.lastChild;
            n.merge(l, f.childNodes), (f = k.firstChild), (f.textContent = "");
          } else l.push(b.createTextNode(e));
      (k.textContent = ""), (m = 0);
      while ((e = l[m++]))
        if (
          (!d || -1 === n.inArray(e, d)) &&
          ((i = n.contains(e.ownerDocument, e)),
          (f = ob(k.appendChild(e), "script")),
          i && mb(f),
          c)
        ) {
          j = 0;
          while ((e = f[j++])) fb.test(e.type || "") && c.push(e);
        }
      return k;
    },
    cleanData: function (a) {
      for (
        var b, c, d, e, f = n.event.special, g = 0;
        void 0 !== (c = a[g]);
        g++
      ) {
        if (n.acceptData(c) && ((e = c[L.expando]), e && (b = L.cache[e]))) {
          if (b.events)
            for (d in b.events)
              f[d] ? n.event.remove(c, d) : n.removeEvent(c, d, b.handle);
          L.cache[e] && delete L.cache[e];
        }
        delete M.cache[c[M.expando]];
      }
    },
  }),
    n.fn.extend({
      text: function (a) {
        return J(
          this,
          function (a) {
            return void 0 === a
              ? n.text(this)
              : this.empty().each(function () {
                  (1 === this.nodeType ||
                    11 === this.nodeType ||
                    9 === this.nodeType) &&
                    (this.textContent = a);
                });
          },
          null,
          a,
          arguments.length
        );
      },
      append: function () {
        return this.domManip(arguments, function (a) {
          if (
            1 === this.nodeType ||
            11 === this.nodeType ||
            9 === this.nodeType
          ) {
            var b = jb(this, a);
            b.appendChild(a);
          }
        });
      },
      prepend: function () {
        return this.domManip(arguments, function (a) {
          if (
            1 === this.nodeType ||
            11 === this.nodeType ||
            9 === this.nodeType
          ) {
            var b = jb(this, a);
            b.insertBefore(a, b.firstChild);
          }
        });
      },
      before: function () {
        return this.domManip(arguments, function (a) {
          this.parentNode && this.parentNode.insertBefore(a, this);
        });
      },
      after: function () {
        return this.domManip(arguments, function (a) {
          this.parentNode && this.parentNode.insertBefore(a, this.nextSibling);
        });
      },
      remove: function (a, b) {
        for (
          var c, d = a ? n.filter(a, this) : this, e = 0;
          null != (c = d[e]);
          e++
        )
          b || 1 !== c.nodeType || n.cleanData(ob(c)),
            c.parentNode &&
              (b && n.contains(c.ownerDocument, c) && mb(ob(c, "script")),
              c.parentNode.removeChild(c));
        return this;
      },
      empty: function () {
        for (var a, b = 0; null != (a = this[b]); b++)
          1 === a.nodeType && (n.cleanData(ob(a, !1)), (a.textContent = ""));
        return this;
      },
      clone: function (a, b) {
        return (
          (a = null == a ? !1 : a),
          (b = null == b ? a : b),
          this.map(function () {
            return n.clone(this, a, b);
          })
        );
      },
      html: function (a) {
        return J(
          this,
          function (a) {
            var b = this[0] || {},
              c = 0,
              d = this.length;
            if (void 0 === a && 1 === b.nodeType) return b.innerHTML;
            if (
              "string" == typeof a &&
              !db.test(a) &&
              !ib[(bb.exec(a) || ["", ""])[1].toLowerCase()]
            ) {
              a = a.replace(ab, "<$1></$2>");
              try {
                for (; d > c; c++)
                  (b = this[c] || {}),
                    1 === b.nodeType &&
                      (n.cleanData(ob(b, !1)), (b.innerHTML = a));
                b = 0;
              } catch (e) {}
            }
            b && this.empty().append(a);
          },
          null,
          a,
          arguments.length
        );
      },
      replaceWith: function () {
        var a = arguments[0];
        return (
          this.domManip(arguments, function (b) {
            (a = this.parentNode),
              n.cleanData(ob(this)),
              a && a.replaceChild(b, this);
          }),
          a && (a.length || a.nodeType) ? this : this.remove()
        );
      },
      detach: function (a) {
        return this.remove(a, !0);
      },
      domManip: function (a, b) {
        a = e.apply([], a);
        var c,
          d,
          f,
          g,
          h,
          i,
          j = 0,
          l = this.length,
          m = this,
          o = l - 1,
          p = a[0],
          q = n.isFunction(p);
        if (q || (l > 1 && "string" == typeof p && !k.checkClone && eb.test(p)))
          return this.each(function (c) {
            var d = m.eq(c);
            q && (a[0] = p.call(this, c, d.html())), d.domManip(a, b);
          });
        if (
          l &&
          ((c = n.buildFragment(a, this[0].ownerDocument, !1, this)),
          (d = c.firstChild),
          1 === c.childNodes.length && (c = d),
          d)
        ) {
          for (f = n.map(ob(c, "script"), kb), g = f.length; l > j; j++)
            (h = c),
              j !== o &&
                ((h = n.clone(h, !0, !0)), g && n.merge(f, ob(h, "script"))),
              b.call(this[j], h, j);
          if (g)
            for (
              i = f[f.length - 1].ownerDocument, n.map(f, lb), j = 0;
              g > j;
              j++
            )
              (h = f[j]),
                fb.test(h.type || "") &&
                  !L.access(h, "globalEval") &&
                  n.contains(i, h) &&
                  (h.src
                    ? n._evalUrl && n._evalUrl(h.src)
                    : n.globalEval(h.textContent.replace(hb, "")));
        }
        return this;
      },
    }),
    n.each(
      {
        appendTo: "append",
        prependTo: "prepend",
        insertBefore: "before",
        insertAfter: "after",
        replaceAll: "replaceWith",
      },
      function (a, b) {
        n.fn[a] = function (a) {
          for (var c, d = [], e = n(a), g = e.length - 1, h = 0; g >= h; h++)
            (c = h === g ? this : this.clone(!0)),
              n(e[h])[b](c),
              f.apply(d, c.get());
          return this.pushStack(d);
        };
      }
    );
  var qb,
    rb = {};
  function sb(b, c) {
    var d,
      e = n(c.createElement(b)).appendTo(c.body),
      f =
        a.getDefaultComputedStyle && (d = a.getDefaultComputedStyle(e[0]))
          ? d.display
          : n.css(e[0], "display");
    return e.detach(), f;
  }
  function tb(a) {
    var b = l,
      c = rb[a];
    return (
      c ||
        ((c = sb(a, b)),
        ("none" !== c && c) ||
          ((qb = (
            qb || n("<iframe frameborder='0' width='0' height='0'/>")
          ).appendTo(b.documentElement)),
          (b = qb[0].contentDocument),
          b.write(),
          b.close(),
          (c = sb(a, b)),
          qb.detach()),
        (rb[a] = c)),
      c
    );
  }
  var ub = /^margin/,
    vb = new RegExp("^(" + Q + ")(?!px)[a-z%]+$", "i"),
    wb = function (a) {
      return a.ownerDocument.defaultView.getComputedStyle(a, null);
    };
  function xb(a, b, c) {
    var d,
      e,
      f,
      g,
      h = a.style;
    return (
      (c = c || wb(a)),
      c && (g = c.getPropertyValue(b) || c[b]),
      c &&
        ("" !== g || n.contains(a.ownerDocument, a) || (g = n.style(a, b)),
        vb.test(g) &&
          ub.test(b) &&
          ((d = h.width),
          (e = h.minWidth),
          (f = h.maxWidth),
          (h.minWidth = h.maxWidth = h.width = g),
          (g = c.width),
          (h.width = d),
          (h.minWidth = e),
          (h.maxWidth = f))),
      void 0 !== g ? g + "" : g
    );
  }
  function yb(a, b) {
    return {
      get: function () {
        return a()
          ? void delete this.get
          : (this.get = b).apply(this, arguments);
      },
    };
  }
  !(function () {
    var b,
      c,
      d = l.documentElement,
      e = l.createElement("div"),
      f = l.createElement("div");
    if (f.style) {
      (f.style.backgroundClip = "content-box"),
        (f.cloneNode(!0).style.backgroundClip = ""),
        (k.clearCloneStyle = "content-box" === f.style.backgroundClip),
        (e.style.cssText =
          "border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute"),
        e.appendChild(f);
      function g() {
        (f.style.cssText =
          "-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute"),
          (f.innerHTML = ""),
          d.appendChild(e);
        var g = a.getComputedStyle(f, null);
        (b = "1%" !== g.top), (c = "4px" === g.width), d.removeChild(e);
      }
      a.getComputedStyle &&
        n.extend(k, {
          pixelPosition: function () {
            return g(), b;
          },
          boxSizingReliable: function () {
            return null == c && g(), c;
          },
          reliableMarginRight: function () {
            var b,
              c = f.appendChild(l.createElement("div"));
            return (
              (c.style.cssText = f.style.cssText =
                "-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0"),
              (c.style.marginRight = c.style.width = "0"),
              (f.style.width = "1px"),
              d.appendChild(e),
              (b = !parseFloat(a.getComputedStyle(c, null).marginRight)),
              d.removeChild(e),
              b
            );
          },
        });
    }
  })(),
    (n.swap = function (a, b, c, d) {
      var e,
        f,
        g = {};
      for (f in b) (g[f] = a.style[f]), (a.style[f] = b[f]);
      e = c.apply(a, d || []);
      for (f in b) a.style[f] = g[f];
      return e;
    });
  var zb = /^(none|table(?!-c[ea]).+)/,
    Ab = new RegExp("^(" + Q + ")(.*)$", "i"),
    Bb = new RegExp("^([+-])=(" + Q + ")", "i"),
    Cb = {
      position: "absolute",
      visibility: "hidden",
      display: "block",
    },
    Db = {
      letterSpacing: "0",
      fontWeight: "400",
    },
    Eb = ["Webkit", "O", "Moz", "ms"];
  function Fb(a, b) {
    if (b in a) return b;
    var c = b[0].toUpperCase() + b.slice(1),
      d = b,
      e = Eb.length;
    while (e--) if (((b = Eb[e] + c), b in a)) return b;
    return d;
  }
  function Gb(a, b, c) {
    var d = Ab.exec(b);
    return d ? Math.max(0, d[1] - (c || 0)) + (d[2] || "px") : b;
  }
  function Hb(a, b, c, d, e) {
    for (
      var f = c === (d ? "border" : "content") ? 4 : "width" === b ? 1 : 0,
        g = 0;
      4 > f;
      f += 2
    )
      "margin" === c && (g += n.css(a, c + R[f], !0, e)),
        d
          ? ("content" === c && (g -= n.css(a, "padding" + R[f], !0, e)),
            "margin" !== c && (g -= n.css(a, "border" + R[f] + "Width", !0, e)))
          : ((g += n.css(a, "padding" + R[f], !0, e)),
            "padding" !== c &&
              (g += n.css(a, "border" + R[f] + "Width", !0, e)));
    return g;
  }
  function Ib(a, b, c) {
    var d = !0,
      e = "width" === b ? a.offsetWidth : a.offsetHeight,
      f = wb(a),
      g = "border-box" === n.css(a, "boxSizing", !1, f);
    if (0 >= e || null == e) {
      if (
        ((e = xb(a, b, f)),
        (0 > e || null == e) && (e = a.style[b]),
        vb.test(e))
      )
        return e;
      (d = g && (k.boxSizingReliable() || e === a.style[b])),
        (e = parseFloat(e) || 0);
    }
    return e + Hb(a, b, c || (g ? "border" : "content"), d, f) + "px";
  }
  function Jb(a, b) {
    for (var c, d, e, f = [], g = 0, h = a.length; h > g; g++)
      (d = a[g]),
        d.style &&
          ((f[g] = L.get(d, "olddisplay")),
          (c = d.style.display),
          b
            ? (f[g] || "none" !== c || (d.style.display = ""),
              "" === d.style.display &&
                S(d) &&
                (f[g] = L.access(d, "olddisplay", tb(d.nodeName))))
            : ((e = S(d)),
              ("none" === c && e) ||
                L.set(d, "olddisplay", e ? c : n.css(d, "display"))));
    for (g = 0; h > g; g++)
      (d = a[g]),
        d.style &&
          ((b && "none" !== d.style.display && "" !== d.style.display) ||
            (d.style.display = b ? f[g] || "" : "none"));
    return a;
  }
  n.extend({
    cssHooks: {
      opacity: {
        get: function (a, b) {
          if (b) {
            var c = xb(a, "opacity");
            return "" === c ? "1" : c;
          }
        },
      },
    },
    cssNumber: {
      columnCount: !0,
      fillOpacity: !0,
      flexGrow: !0,
      flexShrink: !0,
      fontWeight: !0,
      lineHeight: !0,
      opacity: !0,
      order: !0,
      orphans: !0,
      widows: !0,
      zIndex: !0,
      zoom: !0,
    },
    cssProps: {
      float: "cssFloat",
    },
    style: function (a, b, c, d) {
      if (a && 3 !== a.nodeType && 8 !== a.nodeType && a.style) {
        var e,
          f,
          g,
          h = n.camelCase(b),
          i = a.style;
        return (
          (b = n.cssProps[h] || (n.cssProps[h] = Fb(i, h))),
          (g = n.cssHooks[b] || n.cssHooks[h]),
          void 0 === c
            ? g && "get" in g && void 0 !== (e = g.get(a, !1, d))
              ? e
              : i[b]
            : ((f = typeof c),
              "string" === f &&
                (e = Bb.exec(c)) &&
                ((c = (e[1] + 1) * e[2] + parseFloat(n.css(a, b))),
                (f = "number")),
              null != c &&
                c === c &&
                ("number" !== f || n.cssNumber[h] || (c += "px"),
                k.clearCloneStyle ||
                  "" !== c ||
                  0 !== b.indexOf("background") ||
                  (i[b] = "inherit"),
                (g && "set" in g && void 0 === (c = g.set(a, c, d))) ||
                  (i[b] = c)),
              void 0)
        );
      }
    },
    css: function (a, b, c, d) {
      var e,
        f,
        g,
        h = n.camelCase(b);
      return (
        (b = n.cssProps[h] || (n.cssProps[h] = Fb(a.style, h))),
        (g = n.cssHooks[b] || n.cssHooks[h]),
        g && "get" in g && (e = g.get(a, !0, c)),
        void 0 === e && (e = xb(a, b, d)),
        "normal" === e && b in Db && (e = Db[b]),
        "" === c || c
          ? ((f = parseFloat(e)), c === !0 || n.isNumeric(f) ? f || 0 : e)
          : e
      );
    },
  }),
    n.each(["height", "width"], function (a, b) {
      n.cssHooks[b] = {
        get: function (a, c, d) {
          return c
            ? zb.test(n.css(a, "display")) && 0 === a.offsetWidth
              ? n.swap(a, Cb, function () {
                  return Ib(a, b, d);
                })
              : Ib(a, b, d)
            : void 0;
        },
        set: function (a, c, d) {
          var e = d && wb(a);
          return Gb(
            a,
            c,
            d
              ? Hb(a, b, d, "border-box" === n.css(a, "boxSizing", !1, e), e)
              : 0
          );
        },
      };
    }),
    (n.cssHooks.marginRight = yb(k.reliableMarginRight, function (a, b) {
      return b
        ? n.swap(
            a,
            {
              display: "inline-block",
            },
            xb,
            [a, "marginRight"]
          )
        : void 0;
    })),
    n.each(
      {
        margin: "",
        padding: "",
        border: "Width",
      },
      function (a, b) {
        (n.cssHooks[a + b] = {
          expand: function (c) {
            for (
              var d = 0, e = {}, f = "string" == typeof c ? c.split(" ") : [c];
              4 > d;
              d++
            )
              e[a + R[d] + b] = f[d] || f[d - 2] || f[0];
            return e;
          },
        }),
          ub.test(a) || (n.cssHooks[a + b].set = Gb);
      }
    ),
    n.fn.extend({
      css: function (a, b) {
        return J(
          this,
          function (a, b, c) {
            var d,
              e,
              f = {},
              g = 0;
            if (n.isArray(b)) {
              for (d = wb(a), e = b.length; e > g; g++)
                f[b[g]] = n.css(a, b[g], !1, d);
              return f;
            }
            return void 0 !== c ? n.style(a, b, c) : n.css(a, b);
          },
          a,
          b,
          arguments.length > 1
        );
      },
      show: function () {
        return Jb(this, !0);
      },
      hide: function () {
        return Jb(this);
      },
      toggle: function (a) {
        return "boolean" == typeof a
          ? a
            ? this.show()
            : this.hide()
          : this.each(function () {
              S(this) ? n(this).show() : n(this).hide();
            });
      },
    });
  function Kb(a, b, c, d, e) {
    return new Kb.prototype.init(a, b, c, d, e);
  }
  (n.Tween = Kb),
    (Kb.prototype = {
      constructor: Kb,
      init: function (a, b, c, d, e, f) {
        (this.elem = a),
          (this.prop = c),
          (this.easing = e || "swing"),
          (this.options = b),
          (this.start = this.now = this.cur()),
          (this.end = d),
          (this.unit = f || (n.cssNumber[c] ? "" : "px"));
      },
      cur: function () {
        var a = Kb.propHooks[this.prop];
        return a && a.get ? a.get(this) : Kb.propHooks._default.get(this);
      },
      run: function (a) {
        var b,
          c = Kb.propHooks[this.prop];
        return (
          (this.pos = b = this.options.duration
            ? n.easing[this.easing](
                a,
                this.options.duration * a,
                0,
                1,
                this.options.duration
              )
            : a),
          (this.now = (this.end - this.start) * b + this.start),
          this.options.step &&
            this.options.step.call(this.elem, this.now, this),
          c && c.set ? c.set(this) : Kb.propHooks._default.set(this),
          this
        );
      },
    }),
    (Kb.prototype.init.prototype = Kb.prototype),
    (Kb.propHooks = {
      _default: {
        get: function (a) {
          var b;
          return null == a.elem[a.prop] ||
            (a.elem.style && null != a.elem.style[a.prop])
            ? ((b = n.css(a.elem, a.prop, "")), b && "auto" !== b ? b : 0)
            : a.elem[a.prop];
        },
        set: function (a) {
          n.fx.step[a.prop]
            ? n.fx.step[a.prop](a)
            : a.elem.style &&
              (null != a.elem.style[n.cssProps[a.prop]] || n.cssHooks[a.prop])
            ? n.style(a.elem, a.prop, a.now + a.unit)
            : (a.elem[a.prop] = a.now);
        },
      },
    }),
    (Kb.propHooks.scrollTop = Kb.propHooks.scrollLeft = {
      set: function (a) {
        a.elem.nodeType && a.elem.parentNode && (a.elem[a.prop] = a.now);
      },
    }),
    (n.easing = {
      linear: function (a) {
        return a;
      },
      swing: function (a) {
        return 0.5 - Math.cos(a * Math.PI) / 2;
      },
    }),
    (n.fx = Kb.prototype.init),
    (n.fx.step = {});
  var Lb,
    Mb,
    Nb = /^(?:toggle|show|hide)$/,
    Ob = new RegExp("^(?:([+-])=|)(" + Q + ")([a-z%]*)$", "i"),
    Pb = /queueHooks$/,
    Qb = [Vb],
    Rb = {
      "*": [
        function (a, b) {
          var c = this.createTween(a, b),
            d = c.cur(),
            e = Ob.exec(b),
            f = (e && e[3]) || (n.cssNumber[a] ? "" : "px"),
            g =
              (n.cssNumber[a] || ("px" !== f && +d)) &&
              Ob.exec(n.css(c.elem, a)),
            h = 1,
            i = 20;
          if (g && g[3] !== f) {
            (f = f || g[3]), (e = e || []), (g = +d || 1);
            do (h = h || ".5"), (g /= h), n.style(c.elem, a, g + f);
            while (h !== (h = c.cur() / d) && 1 !== h && --i);
          }
          return (
            e &&
              ((g = c.start = +g || +d || 0),
              (c.unit = f),
              (c.end = e[1] ? g + (e[1] + 1) * e[2] : +e[2])),
            c
          );
        },
      ],
    };
  function Sb() {
    return (
      setTimeout(function () {
        Lb = void 0;
      }),
      (Lb = n.now())
    );
  }
  function Tb(a, b) {
    var c,
      d = 0,
      e = {
        height: a,
      };
    for (b = b ? 1 : 0; 4 > d; d += 2 - b)
      (c = R[d]), (e["margin" + c] = e["padding" + c] = a);
    return b && (e.opacity = e.width = a), e;
  }
  function Ub(a, b, c) {
    for (
      var d, e = (Rb[b] || []).concat(Rb["*"]), f = 0, g = e.length;
      g > f;
      f++
    )
      if ((d = e[f].call(c, b, a))) return d;
  }
  function Vb(a, b, c) {
    var d,
      e,
      f,
      g,
      h,
      i,
      j,
      k,
      l = this,
      m = {},
      o = a.style,
      p = a.nodeType && S(a),
      q = L.get(a, "fxshow");
    c.queue ||
      ((h = n._queueHooks(a, "fx")),
      null == h.unqueued &&
        ((h.unqueued = 0),
        (i = h.empty.fire),
        (h.empty.fire = function () {
          h.unqueued || i();
        })),
      h.unqueued++,
      l.always(function () {
        l.always(function () {
          h.unqueued--, n.queue(a, "fx").length || h.empty.fire();
        });
      })),
      1 === a.nodeType &&
        ("height" in b || "width" in b) &&
        ((c.overflow = [o.overflow, o.overflowX, o.overflowY]),
        (j = n.css(a, "display")),
        (k = "none" === j ? L.get(a, "olddisplay") || tb(a.nodeName) : j),
        "inline" === k &&
          "none" === n.css(a, "float") &&
          (o.display = "inline-block")),
      c.overflow &&
        ((o.overflow = "hidden"),
        l.always(function () {
          (o.overflow = c.overflow[0]),
            (o.overflowX = c.overflow[1]),
            (o.overflowY = c.overflow[2]);
        }));
    for (d in b)
      if (((e = b[d]), Nb.exec(e))) {
        if (
          (delete b[d], (f = f || "toggle" === e), e === (p ? "hide" : "show"))
        ) {
          if ("show" !== e || !q || void 0 === q[d]) continue;
          p = !0;
        }
        m[d] = (q && q[d]) || n.style(a, d);
      } else j = void 0;
    if (n.isEmptyObject(m))
      "inline" === ("none" === j ? tb(a.nodeName) : j) && (o.display = j);
    else {
      q ? "hidden" in q && (p = q.hidden) : (q = L.access(a, "fxshow", {})),
        f && (q.hidden = !p),
        p
          ? n(a).show()
          : l.done(function () {
              n(a).hide();
            }),
        l.done(function () {
          var b;
          L.remove(a, "fxshow");
          for (b in m) n.style(a, b, m[b]);
        });
      for (d in m)
        (g = Ub(p ? q[d] : 0, d, l)),
          d in q ||
            ((q[d] = g.start),
            p &&
              ((g.end = g.start),
              (g.start = "width" === d || "height" === d ? 1 : 0)));
    }
  }
  function Wb(a, b) {
    var c, d, e, f, g;
    for (c in a)
      if (
        ((d = n.camelCase(c)),
        (e = b[d]),
        (f = a[c]),
        n.isArray(f) && ((e = f[1]), (f = a[c] = f[0])),
        c !== d && ((a[d] = f), delete a[c]),
        (g = n.cssHooks[d]),
        g && "expand" in g)
      ) {
        (f = g.expand(f)), delete a[d];
        for (c in f) c in a || ((a[c] = f[c]), (b[c] = e));
      } else b[d] = e;
  }
  function Xb(a, b, c) {
    var d,
      e,
      f = 0,
      g = Qb.length,
      h = n.Deferred().always(function () {
        delete i.elem;
      }),
      i = function () {
        if (e) return !1;
        for (
          var b = Lb || Sb(),
            c = Math.max(0, j.startTime + j.duration - b),
            d = c / j.duration || 0,
            f = 1 - d,
            g = 0,
            i = j.tweens.length;
          i > g;
          g++
        )
          j.tweens[g].run(f);
        return (
          h.notifyWith(a, [j, f, c]),
          1 > f && i ? c : (h.resolveWith(a, [j]), !1)
        );
      },
      j = h.promise({
        elem: a,
        props: n.extend({}, b),
        opts: n.extend(
          !0,
          {
            specialEasing: {},
          },
          c
        ),
        originalProperties: b,
        originalOptions: c,
        startTime: Lb || Sb(),
        duration: c.duration,
        tweens: [],
        createTween: function (b, c) {
          var d = n.Tween(
            a,
            j.opts,
            b,
            c,
            j.opts.specialEasing[b] || j.opts.easing
          );
          return j.tweens.push(d), d;
        },
        stop: function (b) {
          var c = 0,
            d = b ? j.tweens.length : 0;
          if (e) return this;
          for (e = !0; d > c; c++) j.tweens[c].run(1);
          return b ? h.resolveWith(a, [j, b]) : h.rejectWith(a, [j, b]), this;
        },
      }),
      k = j.props;
    for (Wb(k, j.opts.specialEasing); g > f; f++)
      if ((d = Qb[f].call(j, a, k, j.opts))) return d;
    return (
      n.map(k, Ub, j),
      n.isFunction(j.opts.start) && j.opts.start.call(a, j),
      n.fx.timer(
        n.extend(i, {
          elem: a,
          anim: j,
          queue: j.opts.queue,
        })
      ),
      j
        .progress(j.opts.progress)
        .done(j.opts.done, j.opts.complete)
        .fail(j.opts.fail)
        .always(j.opts.always)
    );
  }
  (n.Animation = n.extend(Xb, {
    tweener: function (a, b) {
      n.isFunction(a) ? ((b = a), (a = ["*"])) : (a = a.split(" "));
      for (var c, d = 0, e = a.length; e > d; d++)
        (c = a[d]), (Rb[c] = Rb[c] || []), Rb[c].unshift(b);
    },
    prefilter: function (a, b) {
      b ? Qb.unshift(a) : Qb.push(a);
    },
  })),
    (n.speed = function (a, b, c) {
      var d =
        a && "object" == typeof a
          ? n.extend({}, a)
          : {
              complete: c || (!c && b) || (n.isFunction(a) && a),
              duration: a,
              easing: (c && b) || (b && !n.isFunction(b) && b),
            };
      return (
        (d.duration = n.fx.off
          ? 0
          : "number" == typeof d.duration
          ? d.duration
          : d.duration in n.fx.speeds
          ? n.fx.speeds[d.duration]
          : n.fx.speeds._default),
        (null == d.queue || d.queue === !0) && (d.queue = "fx"),
        (d.old = d.complete),
        (d.complete = function () {
          n.isFunction(d.old) && d.old.call(this),
            d.queue && n.dequeue(this, d.queue);
        }),
        d
      );
    }),
    n.fn.extend({
      fadeTo: function (a, b, c, d) {
        return this.filter(S).css("opacity", 0).show().end().animate(
          {
            opacity: b,
          },
          a,
          c,
          d
        );
      },
      animate: function (a, b, c, d) {
        var e = n.isEmptyObject(a),
          f = n.speed(b, c, d),
          g = function () {
            var b = Xb(this, n.extend({}, a), f);
            (e || L.get(this, "finish")) && b.stop(!0);
          };
        return (
          (g.finish = g),
          e || f.queue === !1 ? this.each(g) : this.queue(f.queue, g)
        );
      },
      stop: function (a, b, c) {
        var d = function (a) {
          var b = a.stop;
          delete a.stop, b(c);
        };
        return (
          "string" != typeof a && ((c = b), (b = a), (a = void 0)),
          b && a !== !1 && this.queue(a || "fx", []),
          this.each(function () {
            var b = !0,
              e = null != a && a + "queueHooks",
              f = n.timers,
              g = L.get(this);
            if (e) g[e] && g[e].stop && d(g[e]);
            else for (e in g) g[e] && g[e].stop && Pb.test(e) && d(g[e]);
            for (e = f.length; e--; )
              f[e].elem !== this ||
                (null != a && f[e].queue !== a) ||
                (f[e].anim.stop(c), (b = !1), f.splice(e, 1));
            (b || !c) && n.dequeue(this, a);
          })
        );
      },
      finish: function (a) {
        return (
          a !== !1 && (a = a || "fx"),
          this.each(function () {
            var b,
              c = L.get(this),
              d = c[a + "queue"],
              e = c[a + "queueHooks"],
              f = n.timers,
              g = d ? d.length : 0;
            for (
              c.finish = !0,
                n.queue(this, a, []),
                e && e.stop && e.stop.call(this, !0),
                b = f.length;
              b--;

            )
              f[b].elem === this &&
                f[b].queue === a &&
                (f[b].anim.stop(!0), f.splice(b, 1));
            for (b = 0; g > b; b++)
              d[b] && d[b].finish && d[b].finish.call(this);
            delete c.finish;
          })
        );
      },
    }),
    n.each(["toggle", "show", "hide"], function (a, b) {
      var c = n.fn[b];
      n.fn[b] = function (a, d, e) {
        return null == a || "boolean" == typeof a
          ? c.apply(this, arguments)
          : this.animate(Tb(b, !0), a, d, e);
      };
    }),
    n.each(
      {
        slideDown: Tb("show"),
        slideUp: Tb("hide"),
        slideToggle: Tb("toggle"),
        fadeIn: {
          opacity: "show",
        },
        fadeOut: {
          opacity: "hide",
        },
        fadeToggle: {
          opacity: "toggle",
        },
      },
      function (a, b) {
        n.fn[a] = function (a, c, d) {
          return this.animate(b, a, c, d);
        };
      }
    ),
    (n.timers = []),
    (n.fx.tick = function () {
      var a,
        b = 0,
        c = n.timers;
      for (Lb = n.now(); b < c.length; b++)
        (a = c[b]), a() || c[b] !== a || c.splice(b--, 1);
      c.length || n.fx.stop(), (Lb = void 0);
    }),
    (n.fx.timer = function (a) {
      n.timers.push(a), a() ? n.fx.start() : n.timers.pop();
    }),
    (n.fx.interval = 13),
    (n.fx.start = function () {
      Mb || (Mb = setInterval(n.fx.tick, n.fx.interval));
    }),
    (n.fx.stop = function () {
      clearInterval(Mb), (Mb = null);
    }),
    (n.fx.speeds = {
      slow: 600,
      fast: 200,
      _default: 400,
    }),
    (n.fn.delay = function (a, b) {
      return (
        (a = n.fx ? n.fx.speeds[a] || a : a),
        (b = b || "fx"),
        this.queue(b, function (b, c) {
          var d = setTimeout(b, a);
          c.stop = function () {
            clearTimeout(d);
          };
        })
      );
    }),
    (function () {
      var a = l.createElement("input"),
        b = l.createElement("select"),
        c = b.appendChild(l.createElement("option"));
      (a.type = "checkbox"),
        (k.checkOn = "" !== a.value),
        (k.optSelected = c.selected),
        (b.disabled = !0),
        (k.optDisabled = !c.disabled),
        (a = l.createElement("input")),
        (a.value = "t"),
        (a.type = "radio"),
        (k.radioValue = "t" === a.value);
    })();
  var Yb,
    Zb,
    $b = n.expr.attrHandle;
  n.fn.extend({
    attr: function (a, b) {
      return J(this, n.attr, a, b, arguments.length > 1);
    },
    removeAttr: function (a) {
      return this.each(function () {
        n.removeAttr(this, a);
      });
    },
  }),
    n.extend({
      attr: function (a, b, c) {
        var d,
          e,
          f = a.nodeType;
        if (a && 3 !== f && 8 !== f && 2 !== f)
          return typeof a.getAttribute === U
            ? n.prop(a, b, c)
            : ((1 === f && n.isXMLDoc(a)) ||
                ((b = b.toLowerCase()),
                (d = n.attrHooks[b] || (n.expr.match.bool.test(b) ? Zb : Yb))),
              void 0 === c
                ? d && "get" in d && null !== (e = d.get(a, b))
                  ? e
                  : ((e = n.find.attr(a, b)), null == e ? void 0 : e)
                : null !== c
                ? d && "set" in d && void 0 !== (e = d.set(a, c, b))
                  ? e
                  : (a.setAttribute(b, c + ""), c)
                : void n.removeAttr(a, b));
      },
      removeAttr: function (a, b) {
        var c,
          d,
          e = 0,
          f = b && b.match(E);
        if (f && 1 === a.nodeType)
          while ((c = f[e++]))
            (d = n.propFix[c] || c),
              n.expr.match.bool.test(c) && (a[d] = !1),
              a.removeAttribute(c);
      },
      attrHooks: {
        type: {
          set: function (a, b) {
            if (!k.radioValue && "radio" === b && n.nodeName(a, "input")) {
              var c = a.value;
              return a.setAttribute("type", b), c && (a.value = c), b;
            }
          },
        },
      },
    }),
    (Zb = {
      set: function (a, b, c) {
        return b === !1 ? n.removeAttr(a, c) : a.setAttribute(c, c), c;
      },
    }),
    n.each(n.expr.match.bool.source.match(/\w+/g), function (a, b) {
      var c = $b[b] || n.find.attr;
      $b[b] = function (a, b, d) {
        var e, f;
        return (
          d ||
            ((f = $b[b]),
            ($b[b] = e),
            (e = null != c(a, b, d) ? b.toLowerCase() : null),
            ($b[b] = f)),
          e
        );
      };
    });
  var _b = /^(?:input|select|textarea|button)$/i;
  n.fn.extend({
    prop: function (a, b) {
      return J(this, n.prop, a, b, arguments.length > 1);
    },
    removeProp: function (a) {
      return this.each(function () {
        delete this[n.propFix[a] || a];
      });
    },
  }),
    n.extend({
      propFix: {
        for: "htmlFor",
        class: "className",
      },
      prop: function (a, b, c) {
        var d,
          e,
          f,
          g = a.nodeType;
        if (a && 3 !== g && 8 !== g && 2 !== g)
          return (
            (f = 1 !== g || !n.isXMLDoc(a)),
            f && ((b = n.propFix[b] || b), (e = n.propHooks[b])),
            void 0 !== c
              ? e && "set" in e && void 0 !== (d = e.set(a, c, b))
                ? d
                : (a[b] = c)
              : e && "get" in e && null !== (d = e.get(a, b))
              ? d
              : a[b]
          );
      },
      propHooks: {
        tabIndex: {
          get: function (a) {
            return a.hasAttribute("tabindex") || _b.test(a.nodeName) || a.href
              ? a.tabIndex
              : -1;
          },
        },
      },
    }),
    k.optSelected ||
      (n.propHooks.selected = {
        get: function (a) {
          var b = a.parentNode;
          return b && b.parentNode && b.parentNode.selectedIndex, null;
        },
      }),
    n.each(
      [
        "tabIndex",
        "readOnly",
        "maxLength",
        "cellSpacing",
        "cellPadding",
        "rowSpan",
        "colSpan",
        "useMap",
        "frameBorder",
        "contentEditable",
      ],
      function () {
        n.propFix[this.toLowerCase()] = this;
      }
    );
  var ac = /[\t\r\n\f]/g;
  n.fn.extend({
    addClass: function (a) {
      var b,
        c,
        d,
        e,
        f,
        g,
        h = "string" == typeof a && a,
        i = 0,
        j = this.length;
      if (n.isFunction(a))
        return this.each(function (b) {
          n(this).addClass(a.call(this, b, this.className));
        });
      if (h)
        for (b = (a || "").match(E) || []; j > i; i++)
          if (
            ((c = this[i]),
            (d =
              1 === c.nodeType &&
              (c.className ? (" " + c.className + " ").replace(ac, " ") : " ")))
          ) {
            f = 0;
            while ((e = b[f++])) d.indexOf(" " + e + " ") < 0 && (d += e + " ");
            (g = n.trim(d)), c.className !== g && (c.className = g);
          }
      return this;
    },
    removeClass: function (a) {
      var b,
        c,
        d,
        e,
        f,
        g,
        h = 0 === arguments.length || ("string" == typeof a && a),
        i = 0,
        j = this.length;
      if (n.isFunction(a))
        return this.each(function (b) {
          n(this).removeClass(a.call(this, b, this.className));
        });
      if (h)
        for (b = (a || "").match(E) || []; j > i; i++)
          if (
            ((c = this[i]),
            (d =
              1 === c.nodeType &&
              (c.className ? (" " + c.className + " ").replace(ac, " ") : "")))
          ) {
            f = 0;
            while ((e = b[f++]))
              while (d.indexOf(" " + e + " ") >= 0)
                d = d.replace(" " + e + " ", " ");
            (g = a ? n.trim(d) : ""), c.className !== g && (c.className = g);
          }
      return this;
    },
    toggleClass: function (a, b) {
      var c = typeof a;
      return "boolean" == typeof b && "string" === c
        ? b
          ? this.addClass(a)
          : this.removeClass(a)
        : this.each(
            n.isFunction(a)
              ? function (c) {
                  n(this).toggleClass(a.call(this, c, this.className, b), b);
                }
              : function () {
                  if ("string" === c) {
                    var b,
                      d = 0,
                      e = n(this),
                      f = a.match(E) || [];
                    while ((b = f[d++]))
                      e.hasClass(b) ? e.removeClass(b) : e.addClass(b);
                  } else
                    (c === U || "boolean" === c) &&
                      (this.className &&
                        L.set(this, "__className__", this.className),
                      (this.className =
                        this.className || a === !1
                          ? ""
                          : L.get(this, "__className__") || ""));
                }
          );
    },
    hasClass: function (a) {
      for (var b = " " + a + " ", c = 0, d = this.length; d > c; c++)
        if (
          1 === this[c].nodeType &&
          (" " + this[c].className + " ").replace(ac, " ").indexOf(b) >= 0
        )
          return !0;
      return !1;
    },
  });
  var bc = /\r/g;
  n.fn.extend({
    val: function (a) {
      var b,
        c,
        d,
        e = this[0];
      {
        if (arguments.length)
          return (
            (d = n.isFunction(a)),
            this.each(function (c) {
              var e;
              1 === this.nodeType &&
                ((e = d ? a.call(this, c, n(this).val()) : a),
                null == e
                  ? (e = "")
                  : "number" == typeof e
                  ? (e += "")
                  : n.isArray(e) &&
                    (e = n.map(e, function (a) {
                      return null == a ? "" : a + "";
                    })),
                (b =
                  n.valHooks[this.type] ||
                  n.valHooks[this.nodeName.toLowerCase()]),
                (b && "set" in b && void 0 !== b.set(this, e, "value")) ||
                  (this.value = e));
            })
          );
        if (e)
          return (
            (b = n.valHooks[e.type] || n.valHooks[e.nodeName.toLowerCase()]),
            b && "get" in b && void 0 !== (c = b.get(e, "value"))
              ? c
              : ((c = e.value),
                "string" == typeof c ? c.replace(bc, "") : null == c ? "" : c)
          );
      }
    },
  }),
    n.extend({
      valHooks: {
        option: {
          get: function (a) {
            var b = n.find.attr(a, "value");
            return null != b ? b : n.trim(n.text(a));
          },
        },
        select: {
          get: function (a) {
            for (
              var b,
                c,
                d = a.options,
                e = a.selectedIndex,
                f = "select-one" === a.type || 0 > e,
                g = f ? null : [],
                h = f ? e + 1 : d.length,
                i = 0 > e ? h : f ? e : 0;
              h > i;
              i++
            )
              if (
                ((c = d[i]),
                !(
                  (!c.selected && i !== e) ||
                  (k.optDisabled
                    ? c.disabled
                    : null !== c.getAttribute("disabled")) ||
                  (c.parentNode.disabled &&
                    n.nodeName(c.parentNode, "optgroup"))
                ))
              ) {
                if (((b = n(c).val()), f)) return b;
                g.push(b);
              }
            return g;
          },
          set: function (a, b) {
            var c,
              d,
              e = a.options,
              f = n.makeArray(b),
              g = e.length;
            while (g--)
              (d = e[g]), (d.selected = n.inArray(d.value, f) >= 0) && (c = !0);
            return c || (a.selectedIndex = -1), f;
          },
        },
      },
    }),
    n.each(["radio", "checkbox"], function () {
      (n.valHooks[this] = {
        set: function (a, b) {
          return n.isArray(b)
            ? (a.checked = n.inArray(n(a).val(), b) >= 0)
            : void 0;
        },
      }),
        k.checkOn ||
          (n.valHooks[this].get = function (a) {
            return null === a.getAttribute("value") ? "on" : a.value;
          });
    }),
    n.each(
      "blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(
        " "
      ),
      function (a, b) {
        n.fn[b] = function (a, c) {
          return arguments.length > 0
            ? this.on(b, null, a, c)
            : this.trigger(b);
        };
      }
    ),
    n.fn.extend({
      hover: function (a, b) {
        return this.mouseenter(a).mouseleave(b || a);
      },
      bind: function (a, b, c) {
        return this.on(a, null, b, c);
      },
      unbind: function (a, b) {
        return this.off(a, null, b);
      },
      delegate: function (a, b, c, d) {
        return this.on(b, a, c, d);
      },
      undelegate: function (a, b, c) {
        return 1 === arguments.length
          ? this.off(a, "**")
          : this.off(b, a || "**", c);
      },
    });
  var cc = n.now(),
    dc = /\?/;
  (n.parseJSON = function (a) {
    return JSON.parse(a + "");
  }),
    (n.parseXML = function (a) {
      var b, c;
      if (!a || "string" != typeof a) return null;
      try {
        (c = new DOMParser()), (b = c.parseFromString(a, "text/xml"));
      } catch (d) {
        b = void 0;
      }
      return (
        (!b || b.getElementsByTagName("parsererror").length) &&
          n.error("Invalid XML: " + a),
        b
      );
    });
  var ec,
    fc,
    gc = /#.*$/,
    hc = /([?&])_=[^&]*/,
    ic = /^(.*?):[ \t]*([^\r\n]*)$/gm,
    jc = /^(?:about|app|app-storage|.+-extension|file|res|widget):$/,
    kc = /^(?:GET|HEAD)$/,
    lc = /^\/\//,
    mc = /^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,
    nc = {},
    oc = {},
    pc = "*/".concat("*");
  try {
    fc = location.href;
  } catch (qc) {
    (fc = l.createElement("a")), (fc.href = ""), (fc = fc.href);
  }
  ec = mc.exec(fc.toLowerCase()) || [];
  function rc(a) {
    return function (b, c) {
      "string" != typeof b && ((c = b), (b = "*"));
      var d,
        e = 0,
        f = b.toLowerCase().match(E) || [];
      if (n.isFunction(c))
        while ((d = f[e++]))
          "+" === d[0]
            ? ((d = d.slice(1) || "*"), (a[d] = a[d] || []).unshift(c))
            : (a[d] = a[d] || []).push(c);
    };
  }
  function sc(a, b, c, d) {
    var e = {},
      f = a === oc;
    function g(h) {
      var i;
      return (
        (e[h] = !0),
        n.each(a[h] || [], function (a, h) {
          var j = h(b, c, d);
          return "string" != typeof j || f || e[j]
            ? f
              ? !(i = j)
              : void 0
            : (b.dataTypes.unshift(j), g(j), !1);
        }),
        i
      );
    }
    return g(b.dataTypes[0]) || (!e["*"] && g("*"));
  }
  function tc(a, b) {
    var c,
      d,
      e = n.ajaxSettings.flatOptions || {};
    for (c in b) void 0 !== b[c] && ((e[c] ? a : d || (d = {}))[c] = b[c]);
    return d && n.extend(!0, a, d), a;
  }
  function uc(a, b, c) {
    var d,
      e,
      f,
      g,
      h = a.contents,
      i = a.dataTypes;
    while ("*" === i[0])
      i.shift(),
        void 0 === d && (d = a.mimeType || b.getResponseHeader("Content-Type"));
    if (d)
      for (e in h)
        if (h[e] && h[e].test(d)) {
          i.unshift(e);
          break;
        }
    if (i[0] in c) f = i[0];
    else {
      for (e in c) {
        if (!i[0] || a.converters[e + " " + i[0]]) {
          f = e;
          break;
        }
        g || (g = e);
      }
      f = f || g;
    }
    return f ? (f !== i[0] && i.unshift(f), c[f]) : void 0;
  }
  function vc(a, b, c, d) {
    var e,
      f,
      g,
      h,
      i,
      j = {},
      k = a.dataTypes.slice();
    if (k[1]) for (g in a.converters) j[g.toLowerCase()] = a.converters[g];
    f = k.shift();
    while (f)
      if (
        (a.responseFields[f] && (c[a.responseFields[f]] = b),
        !i && d && a.dataFilter && (b = a.dataFilter(b, a.dataType)),
        (i = f),
        (f = k.shift()))
      )
        if ("*" === f) f = i;
        else if ("*" !== i && i !== f) {
          if (((g = j[i + " " + f] || j["* " + f]), !g))
            for (e in j)
              if (
                ((h = e.split(" ")),
                h[1] === f && (g = j[i + " " + h[0]] || j["* " + h[0]]))
              ) {
                g === !0
                  ? (g = j[e])
                  : j[e] !== !0 && ((f = h[0]), k.unshift(h[1]));
                break;
              }
          if (g !== !0)
            if (g && a["throws"]) b = g(b);
            else
              try {
                b = g(b);
              } catch (l) {
                return {
                  state: "parsererror",
                  error: g ? l : "No conversion from " + i + " to " + f,
                };
              }
        }
    return {
      state: "success",
      data: b,
    };
  }
  n.extend({
    active: 0,
    lastModified: {},
    etag: {},
    ajaxSettings: {
      url: fc,
      type: "GET",
      isLocal: jc.test(ec[1]),
      global: !0,
      processData: !0,
      async: !0,
      contentType: "application/x-www-form-urlencoded; charset=UTF-8",
      accepts: {
        "*": pc,
        text: "text/plain",
        html: "text/html",
        xml: "application/xml, text/xml",
        json: "application/json, text/javascript",
      },
      contents: {
        xml: /xml/,
        html: /html/,
        json: /json/,
      },
      responseFields: {
        xml: "responseXML",
        text: "responseText",
        json: "responseJSON",
      },
      converters: {
        "* text": String,
        "text html": !0,
        "text json": n.parseJSON,
        "text xml": n.parseXML,
      },
      flatOptions: {
        url: !0,
        context: !0,
      },
    },
    ajaxSetup: function (a, b) {
      return b ? tc(tc(a, n.ajaxSettings), b) : tc(n.ajaxSettings, a);
    },
    ajaxPrefilter: rc(nc),
    ajaxTransport: rc(oc),
    ajax: function (a, b) {
      "object" == typeof a && ((b = a), (a = void 0)), (b = b || {});
      var c,
        d,
        e,
        f,
        g,
        h,
        i,
        j,
        k = n.ajaxSetup({}, b),
        l = k.context || k,
        m = k.context && (l.nodeType || l.jquery) ? n(l) : n.event,
        o = n.Deferred(),
        p = n.Callbacks("once memory"),
        q = k.statusCode || {},
        r = {},
        s = {},
        t = 0,
        u = "canceled",
        v = {
          readyState: 0,
          getResponseHeader: function (a) {
            var b;
            if (2 === t) {
              if (!f) {
                f = {};
                while ((b = ic.exec(e))) f[b[1].toLowerCase()] = b[2];
              }
              b = f[a.toLowerCase()];
            }
            return null == b ? null : b;
          },
          getAllResponseHeaders: function () {
            return 2 === t ? e : null;
          },
          setRequestHeader: function (a, b) {
            var c = a.toLowerCase();
            return t || ((a = s[c] = s[c] || a), (r[a] = b)), this;
          },
          overrideMimeType: function (a) {
            return t || (k.mimeType = a), this;
          },
          statusCode: function (a) {
            var b;
            if (a)
              if (2 > t) for (b in a) q[b] = [q[b], a[b]];
              else v.always(a[v.status]);
            return this;
          },
          abort: function (a) {
            var b = a || u;
            return c && c.abort(b), x(0, b), this;
          },
        };
      if (
        ((o.promise(v).complete = p.add),
        (v.success = v.done),
        (v.error = v.fail),
        (k.url = ((a || k.url || fc) + "")
          .replace(gc, "")
          .replace(lc, ec[1] + "//")),
        (k.type = b.method || b.type || k.method || k.type),
        (k.dataTypes = n
          .trim(k.dataType || "*")
          .toLowerCase()
          .match(E) || [""]),
        null == k.crossDomain &&
          ((h = mc.exec(k.url.toLowerCase())),
          (k.crossDomain = !(
            !h ||
            (h[1] === ec[1] &&
              h[2] === ec[2] &&
              (h[3] || ("http:" === h[1] ? "80" : "443")) ===
                (ec[3] || ("http:" === ec[1] ? "80" : "443")))
          ))),
        k.data &&
          k.processData &&
          "string" != typeof k.data &&
          (k.data = n.param(k.data, k.traditional)),
        sc(nc, k, b, v),
        2 === t)
      )
        return v;
      (i = k.global),
        i && 0 === n.active++ && n.event.trigger("ajaxStart"),
        (k.type = k.type.toUpperCase()),
        (k.hasContent = !kc.test(k.type)),
        (d = k.url),
        k.hasContent ||
          (k.data &&
            ((d = k.url += (dc.test(d) ? "&" : "?") + k.data), delete k.data),
          k.cache === !1 &&
            (k.url = hc.test(d)
              ? d.replace(hc, "$1_=" + cc++)
              : d + (dc.test(d) ? "&" : "?") + "_=" + cc++)),
        k.ifModified &&
          (n.lastModified[d] &&
            v.setRequestHeader("If-Modified-Since", n.lastModified[d]),
          n.etag[d] && v.setRequestHeader("If-None-Match", n.etag[d])),
        ((k.data && k.hasContent && k.contentType !== !1) || b.contentType) &&
          v.setRequestHeader("Content-Type", k.contentType),
        v.setRequestHeader(
          "Accept",
          k.dataTypes[0] && k.accepts[k.dataTypes[0]]
            ? k.accepts[k.dataTypes[0]] +
                ("*" !== k.dataTypes[0] ? ", " + pc + "; q=0.01" : "")
            : k.accepts["*"]
        );
      for (j in k.headers) v.setRequestHeader(j, k.headers[j]);
      if (k.beforeSend && (k.beforeSend.call(l, v, k) === !1 || 2 === t))
        return v.abort();
      u = "abort";
      for (j in {
        success: 1,
        error: 1,
        complete: 1,
      })
        v[j](k[j]);
      if ((c = sc(oc, k, b, v))) {
        (v.readyState = 1),
          i && m.trigger("ajaxSend", [v, k]),
          k.async &&
            k.timeout > 0 &&
            (g = setTimeout(function () {
              v.abort("timeout");
            }, k.timeout));
        try {
          (t = 1), c.send(r, x);
        } catch (w) {
          if (!(2 > t)) throw w;
          x(-1, w);
        }
      } else x(-1, "No Transport");
      function x(a, b, f, h) {
        var j,
          r,
          s,
          u,
          w,
          x = b;
        2 !== t &&
          ((t = 2),
          g && clearTimeout(g),
          (c = void 0),
          (e = h || ""),
          (v.readyState = a > 0 ? 4 : 0),
          (j = (a >= 200 && 300 > a) || 304 === a),
          f && (u = uc(k, v, f)),
          (u = vc(k, u, v, j)),
          j
            ? (k.ifModified &&
                ((w = v.getResponseHeader("Last-Modified")),
                w && (n.lastModified[d] = w),
                (w = v.getResponseHeader("etag")),
                w && (n.etag[d] = w)),
              204 === a || "HEAD" === k.type
                ? (x = "nocontent")
                : 304 === a
                ? (x = "notmodified")
                : ((x = u.state), (r = u.data), (s = u.error), (j = !s)))
            : ((s = x), (a || !x) && ((x = "error"), 0 > a && (a = 0))),
          (v.status = a),
          (v.statusText = (b || x) + ""),
          j ? o.resolveWith(l, [r, x, v]) : o.rejectWith(l, [v, x, s]),
          v.statusCode(q),
          (q = void 0),
          i && m.trigger(j ? "ajaxSuccess" : "ajaxError", [v, k, j ? r : s]),
          p.fireWith(l, [v, x]),
          i &&
            (m.trigger("ajaxComplete", [v, k]),
            --n.active || n.event.trigger("ajaxStop")));
      }
      return v;
    },
    getJSON: function (a, b, c) {
      return n.get(a, b, c, "json");
    },
    getScript: function (a, b) {
      return n.get(a, void 0, b, "script");
    },
  }),
    n.each(["get", "post"], function (a, b) {
      n[b] = function (a, c, d, e) {
        return (
          n.isFunction(c) && ((e = e || d), (d = c), (c = void 0)),
          n.ajax({
            url: a,
            type: b,
            dataType: e,
            data: c,
            success: d,
          })
        );
      };
    }),
    n.each(
      [
        "ajaxStart",
        "ajaxStop",
        "ajaxComplete",
        "ajaxError",
        "ajaxSuccess",
        "ajaxSend",
      ],
      function (a, b) {
        n.fn[b] = function (a) {
          return this.on(b, a);
        };
      }
    ),
    (n._evalUrl = function (a) {
      return n.ajax({
        url: a,
        type: "GET",
        dataType: "script",
        async: !1,
        global: !1,
        throws: !0,
      });
    }),
    n.fn.extend({
      wrapAll: function (a) {
        var b;
        return n.isFunction(a)
          ? this.each(function (b) {
              n(this).wrapAll(a.call(this, b));
            })
          : (this[0] &&
              ((b = n(a, this[0].ownerDocument).eq(0).clone(!0)),
              this[0].parentNode && b.insertBefore(this[0]),
              b
                .map(function () {
                  var a = this;
                  while (a.firstElementChild) a = a.firstElementChild;
                  return a;
                })
                .append(this)),
            this);
      },
      wrapInner: function (a) {
        return this.each(
          n.isFunction(a)
            ? function (b) {
                n(this).wrapInner(a.call(this, b));
              }
            : function () {
                var b = n(this),
                  c = b.contents();
                c.length ? c.wrapAll(a) : b.append(a);
              }
        );
      },
      wrap: function (a) {
        var b = n.isFunction(a);
        return this.each(function (c) {
          n(this).wrapAll(b ? a.call(this, c) : a);
        });
      },
      unwrap: function () {
        return this.parent()
          .each(function () {
            n.nodeName(this, "body") || n(this).replaceWith(this.childNodes);
          })
          .end();
      },
    }),
    (n.expr.filters.hidden = function (a) {
      return a.offsetWidth <= 0 && a.offsetHeight <= 0;
    }),
    (n.expr.filters.visible = function (a) {
      return !n.expr.filters.hidden(a);
    });
  var wc = /%20/g,
    xc = /\[\]$/,
    yc = /\r?\n/g,
    zc = /^(?:submit|button|image|reset|file)$/i,
    Ac = /^(?:input|select|textarea|keygen)/i;
  function Bc(a, b, c, d) {
    var e;
    if (n.isArray(b))
      n.each(b, function (b, e) {
        c || xc.test(a)
          ? d(a, e)
          : Bc(a + "[" + ("object" == typeof e ? b : "") + "]", e, c, d);
      });
    else if (c || "object" !== n.type(b)) d(a, b);
    else for (e in b) Bc(a + "[" + e + "]", b[e], c, d);
  }
  (n.param = function (a, b) {
    var c,
      d = [],
      e = function (a, b) {
        (b = n.isFunction(b) ? b() : null == b ? "" : b),
          (d[d.length] = encodeURIComponent(a) + "=" + encodeURIComponent(b));
      };
    if (
      (void 0 === b && (b = n.ajaxSettings && n.ajaxSettings.traditional),
      n.isArray(a) || (a.jquery && !n.isPlainObject(a)))
    )
      n.each(a, function () {
        e(this.name, this.value);
      });
    else for (c in a) Bc(c, a[c], b, e);
    return d.join("&").replace(wc, "+");
  }),
    n.fn.extend({
      serialize: function () {
        return n.param(this.serializeArray());
      },
      serializeArray: function () {
        return this.map(function () {
          var a = n.prop(this, "elements");
          return a ? n.makeArray(a) : this;
        })
          .filter(function () {
            var a = this.type;
            return (
              this.name &&
              !n(this).is(":disabled") &&
              Ac.test(this.nodeName) &&
              !zc.test(a) &&
              (this.checked || !T.test(a))
            );
          })
          .map(function (a, b) {
            var c = n(this).val();
            return null == c
              ? null
              : n.isArray(c)
              ? n.map(c, function (a) {
                  return {
                    name: b.name,
                    value: a.replace(yc, "\r\n"),
                  };
                })
              : {
                  name: b.name,
                  value: c.replace(yc, "\r\n"),
                };
          })
          .get();
      },
    }),
    (n.ajaxSettings.xhr = function () {
      try {
        return new XMLHttpRequest();
      } catch (a) {}
    });
  var Cc = 0,
    Dc = {},
    Ec = {
      0: 200,
      1223: 204,
    },
    Fc = n.ajaxSettings.xhr();
  a.ActiveXObject &&
    n(a).on("unload", function () {
      for (var a in Dc) Dc[a]();
    }),
    (k.cors = !!Fc && "withCredentials" in Fc),
    (k.ajax = Fc = !!Fc),
    n.ajaxTransport(function (a) {
      var b;
      return k.cors || (Fc && !a.crossDomain)
        ? {
            send: function (c, d) {
              var e,
                f = a.xhr(),
                g = ++Cc;
              if (
                (f.open(a.type, a.url, a.async, a.username, a.password),
                a.xhrFields)
              )
                for (e in a.xhrFields) f[e] = a.xhrFields[e];
              a.mimeType &&
                f.overrideMimeType &&
                f.overrideMimeType(a.mimeType),
                a.crossDomain ||
                  c["X-Requested-With"] ||
                  (c["X-Requested-With"] = "XMLHttpRequest");
              for (e in c) f.setRequestHeader(e, c[e]);
              (b = function (a) {
                return function () {
                  b &&
                    (delete Dc[g],
                    (b = f.onload = f.onerror = null),
                    "abort" === a
                      ? f.abort()
                      : "error" === a
                      ? d(f.status, f.statusText)
                      : d(
                          Ec[f.status] || f.status,
                          f.statusText,
                          "string" == typeof f.responseText
                            ? {
                                text: f.responseText,
                              }
                            : void 0,
                          f.getAllResponseHeaders()
                        ));
                };
              }),
                (f.onload = b()),
                (f.onerror = b("error")),
                (b = Dc[g] = b("abort"));
              try {
                f.send((a.hasContent && a.data) || null);
              } catch (h) {
                if (b) throw h;
              }
            },
            abort: function () {
              b && b();
            },
          }
        : void 0;
    }),
    n.ajaxSetup({
      accepts: {
        script:
          "text/javascript, application/javascript, application/ecmascript, application/x-ecmascript",
      },
      contents: {
        script: /(?:java|ecma)script/,
      },
      converters: {
        "text script": function (a) {
          return n.globalEval(a), a;
        },
      },
    }),
    n.ajaxPrefilter("script", function (a) {
      void 0 === a.cache && (a.cache = !1), a.crossDomain && (a.type = "GET");
    }),
    n.ajaxTransport("script", function (a) {
      if (a.crossDomain) {
        var b, c;
        return {
          send: function (d, e) {
            (b = n("<script>")
              .prop({
                async: !0,
                charset: a.scriptCharset,
                src: a.url,
              })
              .on(
                "load error",
                (c = function (a) {
                  b.remove(),
                    (c = null),
                    a && e("error" === a.type ? 404 : 200, a.type);
                })
              )),
              l.head.appendChild(b[0]);
          },
          abort: function () {
            c && c();
          },
        };
      }
    });
  var Gc = [],
    Hc = /(=)\?(?=&|$)|\?\?/;
  n.ajaxSetup({
    jsonp: "callback",
    jsonpCallback: function () {
      var a = Gc.pop() || n.expando + "_" + cc++;
      return (this[a] = !0), a;
    },
  }),
    n.ajaxPrefilter("json jsonp", function (b, c, d) {
      var e,
        f,
        g,
        h =
          b.jsonp !== !1 &&
          (Hc.test(b.url)
            ? "url"
            : "string" == typeof b.data &&
              !(b.contentType || "").indexOf(
                "application/x-www-form-urlencoded"
              ) &&
              Hc.test(b.data) &&
              "data");
      return h || "jsonp" === b.dataTypes[0]
        ? ((e = b.jsonpCallback = n.isFunction(b.jsonpCallback)
            ? b.jsonpCallback()
            : b.jsonpCallback),
          h
            ? (b[h] = b[h].replace(Hc, "$1" + e))
            : b.jsonp !== !1 &&
              (b.url += (dc.test(b.url) ? "&" : "?") + b.jsonp + "=" + e),
          (b.converters["script json"] = function () {
            return g || n.error(e + " was not called"), g[0];
          }),
          (b.dataTypes[0] = "json"),
          (f = a[e]),
          (a[e] = function () {
            g = arguments;
          }),
          d.always(function () {
            (a[e] = f),
              b[e] && ((b.jsonpCallback = c.jsonpCallback), Gc.push(e)),
              g && n.isFunction(f) && f(g[0]),
              (g = f = void 0);
          }),
          "script")
        : void 0;
    }),
    (n.parseHTML = function (a, b, c) {
      if (!a || "string" != typeof a) return null;
      "boolean" == typeof b && ((c = b), (b = !1)), (b = b || l);
      var d = v.exec(a),
        e = !c && [];
      return d
        ? [b.createElement(d[1])]
        : ((d = n.buildFragment([a], b, e)),
          e && e.length && n(e).remove(),
          n.merge([], d.childNodes));
    });
  var Ic = n.fn.load;
  (n.fn.load = function (a, b, c) {
    if ("string" != typeof a && Ic) return Ic.apply(this, arguments);
    var d,
      e,
      f,
      g = this,
      h = a.indexOf(" ");
    return (
      h >= 0 && ((d = n.trim(a.slice(h))), (a = a.slice(0, h))),
      n.isFunction(b)
        ? ((c = b), (b = void 0))
        : b && "object" == typeof b && (e = "POST"),
      g.length > 0 &&
        n
          .ajax({
            url: a,
            type: e,
            dataType: "html",
            data: b,
          })
          .done(function (a) {
            (f = arguments),
              g.html(d ? n("<div>").append(n.parseHTML(a)).find(d) : a);
          })
          .complete(
            c &&
              function (a, b) {
                g.each(c, f || [a.responseText, b, a]);
              }
          ),
      this
    );
  }),
    (n.expr.filters.animated = function (a) {
      return n.grep(n.timers, function (b) {
        return a === b.elem;
      }).length;
    });
  var Jc = a.document.documentElement;
  function Kc(a) {
    return n.isWindow(a) ? a : 9 === a.nodeType && a.defaultView;
  }
  (n.offset = {
    setOffset: function (a, b, c) {
      var d,
        e,
        f,
        g,
        h,
        i,
        j,
        k = n.css(a, "position"),
        l = n(a),
        m = {};
      "static" === k && (a.style.position = "relative"),
        (h = l.offset()),
        (f = n.css(a, "top")),
        (i = n.css(a, "left")),
        (j =
          ("absolute" === k || "fixed" === k) && (f + i).indexOf("auto") > -1),
        j
          ? ((d = l.position()), (g = d.top), (e = d.left))
          : ((g = parseFloat(f) || 0), (e = parseFloat(i) || 0)),
        n.isFunction(b) && (b = b.call(a, c, h)),
        null != b.top && (m.top = b.top - h.top + g),
        null != b.left && (m.left = b.left - h.left + e),
        "using" in b ? b.using.call(a, m) : l.css(m);
    },
  }),
    n.fn.extend({
      offset: function (a) {
        if (arguments.length)
          return void 0 === a
            ? this
            : this.each(function (b) {
                n.offset.setOffset(this, a, b);
              });
        var b,
          c,
          d = this[0],
          e = {
            top: 0,
            left: 0,
          },
          f = d && d.ownerDocument;
        if (f)
          return (
            (b = f.documentElement),
            n.contains(b, d)
              ? (typeof d.getBoundingClientRect !== U &&
                  (e = d.getBoundingClientRect()),
                (c = Kc(f)),
                {
                  top: e.top + c.pageYOffset - b.clientTop,
                  left: e.left + c.pageXOffset - b.clientLeft,
                })
              : e
          );
      },
      position: function () {
        if (this[0]) {
          var a,
            b,
            c = this[0],
            d = {
              top: 0,
              left: 0,
            };
          return (
            "fixed" === n.css(c, "position")
              ? (b = c.getBoundingClientRect())
              : ((a = this.offsetParent()),
                (b = this.offset()),
                n.nodeName(a[0], "html") || (d = a.offset()),
                (d.top += n.css(a[0], "borderTopWidth", !0)),
                (d.left += n.css(a[0], "borderLeftWidth", !0))),
            {
              top: b.top - d.top - n.css(c, "marginTop", !0),
              left: b.left - d.left - n.css(c, "marginLeft", !0),
            }
          );
        }
      },
      offsetParent: function () {
        return this.map(function () {
          var a = this.offsetParent || Jc;
          while (
            a &&
            !n.nodeName(a, "html") &&
            "static" === n.css(a, "position")
          )
            a = a.offsetParent;
          return a || Jc;
        });
      },
    }),
    n.each(
      {
        scrollLeft: "pageXOffset",
        scrollTop: "pageYOffset",
      },
      function (b, c) {
        var d = "pageYOffset" === c;
        n.fn[b] = function (e) {
          return J(
            this,
            function (b, e, f) {
              var g = Kc(b);
              return void 0 === f
                ? g
                  ? g[c]
                  : b[e]
                : void (g
                    ? g.scrollTo(d ? a.pageXOffset : f, d ? f : a.pageYOffset)
                    : (b[e] = f));
            },
            b,
            e,
            arguments.length,
            null
          );
        };
      }
    ),
    n.each(["top", "left"], function (a, b) {
      n.cssHooks[b] = yb(k.pixelPosition, function (a, c) {
        return c
          ? ((c = xb(a, b)), vb.test(c) ? n(a).position()[b] + "px" : c)
          : void 0;
      });
    }),
    n.each(
      {
        Height: "height",
        Width: "width",
      },
      function (a, b) {
        n.each(
          {
            padding: "inner" + a,
            content: b,
            "": "outer" + a,
          },
          function (c, d) {
            n.fn[d] = function (d, e) {
              var f = arguments.length && (c || "boolean" != typeof d),
                g = c || (d === !0 || e === !0 ? "margin" : "border");
              return J(
                this,
                function (b, c, d) {
                  var e;
                  return n.isWindow(b)
                    ? b.document.documentElement["client" + a]
                    : 9 === b.nodeType
                    ? ((e = b.documentElement),
                      Math.max(
                        b.body["scroll" + a],
                        e["scroll" + a],
                        b.body["offset" + a],
                        e["offset" + a],
                        e["client" + a]
                      ))
                    : void 0 === d
                    ? n.css(b, c, g)
                    : n.style(b, c, d, g);
                },
                b,
                f ? d : void 0,
                f,
                null
              );
            };
          }
        );
      }
    ),
    (n.fn.size = function () {
      return this.length;
    }),
    (n.fn.andSelf = n.fn.addBack),
    "function" == typeof define &&
      define.amd &&
      define("jquery", [], function () {
        return n;
      });
  var Lc = a.jQuery,
    Mc = a.$;
  return (
    (n.noConflict = function (b) {
      return a.$ === n && (a.$ = Mc), b && a.jQuery === n && (a.jQuery = Lc), n;
    }),
    typeof b === U && (a.jQuery = a.$ = n),
    n
  );
});
//# sourceMappingURL=jquery.min.map
var $jq111 = jQuery.noConflict(true);
/**
 * Owl Carousel v2.2.1
 * Copyright 2013-2017 David Deutsch
 * Licensed under  ()
 */
/**
 * Owl carousel
 * @version 2.1.6
 * @author Bartosz Wojciechowski
 * @author David Deutsch
 * @license The MIT License (MIT)
 * @todo Lazy Load Icon
 * @todo prevent animationend bubling
 * @todo itemsScaleUp
 * @todo Test Zepto
 * @todo stagePadding calculate wrong active classes
 */
(function ($, window, document, undefined) {
  /**
   * Creates a carousel.
   * @class The Owl Carousel.
   * @public
   * @param {HTMLElement|jQuery} element - The element to create the carousel for.
   * @param {Object} [options] - The options
   */
  function Owl(element, options) {
    /**
     * Current settings for the carousel.
     * @public
     */
    this.settings = null;

    /**
     * Current options set by the caller including defaults.
     * @public
     */
    this.options = $.extend({}, Owl.Defaults, options);

    /**
     * Plugin element.
     * @public
     */
    this.$element = $(element);

    /**
     * Proxied event handlers.
     * @protected
     */
    this._handlers = {};

    /**
     * References to the running plugins of this carousel.
     * @protected
     */
    this._plugins = {};

    /**
     * Currently suppressed events to prevent them from beeing retriggered.
     * @protected
     */
    this._supress = {};

    /**
     * Absolute current position.
     * @protected
     */
    this._current = null;

    /**
     * Animation speed in milliseconds.
     * @protected
     */
    this._speed = null;

    /**
     * Coordinates of all items in pixel.
     * @todo The name of this member is missleading.
     * @protected
     */
    this._coordinates = [];

    /**
     * Current breakpoint.
     * @todo Real media queries would be nice.
     * @protected
     */
    this._breakpoint = null;

    /**
     * Current width of the plugin element.
     */
    this._width = null;

    /**
     * All real items.
     * @protected
     */
    this._items = [];

    /**
     * All cloned items.
     * @protected
     */
    this._clones = [];

    /**
     * Merge values of all items.
     * @todo Maybe this could be part of a plugin.
     * @protected
     */
    this._mergers = [];

    /**
     * Widths of all items.
     */
    this._widths = [];

    /**
     * Invalidated parts within the update process.
     * @protected
     */
    this._invalidated = {};

    /**
     * Ordered list of workers for the update process.
     * @protected
     */
    this._pipe = [];

    /**
     * Current state information for the drag operation.
     * @todo #261
     * @protected
     */
    this._drag = {
      time: null,
      target: null,
      pointer: null,
      stage: {
        start: null,
        current: null,
      },
      direction: null,
    };

    /**
     * Current state information and their tags.
     * @type {Object}
     * @protected
     */
    this._states = {
      current: {},
      tags: {
        initializing: ["busy"],
        animating: ["busy"],
        dragging: ["interacting"],
      },
    };

    $.each(
      ["onResize", "onThrottledResize"],
      $.proxy(function (i, handler) {
        this._handlers[handler] = $.proxy(this[handler], this);
      }, this)
    );

    $.each(
      Owl.Plugins,
      $.proxy(function (key, plugin) {
        this._plugins[key.charAt(0).toLowerCase() + key.slice(1)] = new plugin(
          this
        );
      }, this)
    );

    $.each(
      Owl.Workers,
      $.proxy(function (priority, worker) {
        this._pipe.push({
          filter: worker.filter,
          run: $.proxy(worker.run, this),
        });
      }, this)
    );

    this.setup();
    this.initialize();
  }

  /**
   * Default options for the carousel.
   * @public
   */
  Owl.Defaults = {
    items: 3,
    loop: false,
    center: false,
    rewind: false,

    mouseDrag: true,
    touchDrag: true,
    pullDrag: true,
    freeDrag: false,

    margin: 0,
    stagePadding: 0,

    merge: false,
    mergeFit: true,
    autoWidth: false,

    startPosition: 0,
    rtl: false,

    smartSpeed: 250,
    fluidSpeed: false,
    dragEndSpeed: false,

    responsive: {},
    responsiveRefreshRate: 200,
    responsiveBaseElement: window,

    fallbackEasing: "swing",

    info: false,

    nestedItemSelector: false,
    itemElement: "div",
    stageElement: "div",

    refreshClass: "owl-refresh",
    loadedClass: "owl-loaded",
    loadingClass: "owl-loading",
    rtlClass: "owl-rtl",
    responsiveClass: "owl-responsive",
    dragClass: "owl-drag",
    itemClass: "owl-item",
    stageClass: "owl-stage",
    stageOuterClass: "owl-stage-outer",
    grabClass: "owl-grab",
  };

  /**
   * Enumeration for width.
   * @public
   * @readonly
   * @enum {String}
   */
  Owl.Width = {
    Default: "default",
    Inner: "inner",
    Outer: "outer",
  };

  /**
   * Enumeration for types.
   * @public
   * @readonly
   * @enum {String}
   */
  Owl.Type = {
    Event: "event",
    State: "state",
  };

  /**
   * Contains all registered plugins.
   * @public
   */
  Owl.Plugins = {};

  /**
   * List of workers involved in the update process.
   */
  Owl.Workers = [
    {
      filter: ["width", "settings"],
      run: function () {
        this._width = this.$element.width();
      },
    },
    {
      filter: ["width", "items", "settings"],
      run: function (cache) {
        cache.current =
          this._items && this._items[this.relative(this._current)];
      },
    },
    {
      filter: ["items", "settings"],
      run: function () {
        this.$stage.children(".cloned").remove();
      },
    },
    {
      filter: ["width", "items", "settings"],
      run: function (cache) {
        var margin = this.settings.margin || "",
          grid = !this.settings.autoWidth,
          rtl = this.settings.rtl,
          css = {
            width: "auto",
            "margin-left": rtl ? margin : "",
            "margin-right": rtl ? "" : margin,
          };

        !grid && this.$stage.children().css(css);

        cache.css = css;
      },
    },
    {
      filter: ["width", "items", "settings"],
      run: function (cache) {
        var width =
            (this.width() / this.settings.items).toFixed(3) -
            this.settings.margin,
          merge = null,
          iterator = this._items.length,
          grid = !this.settings.autoWidth,
          widths = [];

        cache.items = {
          merge: false,
          width: width,
        };

        while (iterator--) {
          merge = this._mergers[iterator];
          merge =
            (this.settings.mergeFit && Math.min(merge, this.settings.items)) ||
            merge;

          cache.items.merge = merge > 1 || cache.items.merge;

          widths[iterator] = !grid
            ? this._items[iterator].width()
            : width * merge;
        }

        this._widths = widths;
      },
    },
    {
      filter: ["items", "settings"],
      run: function () {
        var clones = [],
          items = this._items,
          settings = this.settings,
          // TODO: Should be computed from number of min width items in stage
          view = Math.max(settings.items * 2, 4),
          size = Math.ceil(items.length / 2) * 2,
          repeat =
            settings.loop && items.length
              ? settings.rewind
                ? view
                : Math.max(view, size)
              : 0,
          append = "",
          prepend = "";

        repeat /= 2;

        while (repeat--) {
          // Switch to only using appended clones
          clones.push(this.normalize(clones.length / 2, true));
          append = append + items[clones[clones.length - 1]][0].outerHTML;
          clones.push(
            this.normalize(items.length - 1 - (clones.length - 1) / 2, true)
          );
          prepend = items[clones[clones.length - 1]][0].outerHTML + prepend;
        }

        this._clones = clones;

        $(append).addClass("cloned").appendTo(this.$stage);
        $(prepend).addClass("cloned").prependTo(this.$stage);
      },
    },
    {
      filter: ["width", "items", "settings"],
      run: function () {
        var rtl = this.settings.rtl ? 1 : -1,
          size = this._clones.length + this._items.length,
          iterator = -1,
          previous = 0,
          current = 0,
          coordinates = [];

        while (++iterator < size) {
          previous = coordinates[iterator - 1] || 0;
          current =
            this._widths[this.relative(iterator)] + this.settings.margin;
          coordinates.push(previous + current * rtl);
        }

        this._coordinates = coordinates;
      },
    },
    {
      filter: ["width", "items", "settings"],
      run: function () {
        var padding = this.settings.stagePadding,
          coordinates = this._coordinates,
          css = {
            width:
              Math.ceil(Math.abs(coordinates[coordinates.length - 1])) +
              padding * 2,
            "padding-left": padding || "",
            "padding-right": padding || "",
          };

        this.$stage.css(css);
      },
    },
    {
      filter: ["width", "items", "settings"],
      run: function (cache) {
        var iterator = this._coordinates.length,
          grid = !this.settings.autoWidth,
          items = this.$stage.children();

        if (grid && cache.items.merge) {
          while (iterator--) {
            cache.css.width = this._widths[this.relative(iterator)];
            items.eq(iterator).css(cache.css);
          }
        } else if (grid) {
          cache.css.width = cache.items.width;
          items.css(cache.css);
        }
      },
    },
    {
      filter: ["items"],
      run: function () {
        this._coordinates.length < 1 && this.$stage.removeAttr("style");
      },
    },
    {
      filter: ["width", "items", "settings"],
      run: function (cache) {
        cache.current = cache.current
          ? this.$stage.children().index(cache.current)
          : 0;
        cache.current = Math.max(
          this.minimum(),
          Math.min(this.maximum(), cache.current)
        );
        this.reset(cache.current);
      },
    },
    {
      filter: ["position"],
      run: function () {
        this.animate(this.coordinates(this._current));
      },
    },
    {
      filter: ["width", "position", "items", "settings"],
      run: function () {
        var rtl = this.settings.rtl ? 1 : -1,
          padding = this.settings.stagePadding * 2,
          begin = this.coordinates(this.current()) + padding,
          end = begin + this.width() * rtl,
          inner,
          outer,
          matches = [],
          i,
          n;

        for (i = 0, n = this._coordinates.length; i < n; i++) {
          inner = this._coordinates[i - 1] || 0;
          outer = Math.abs(this._coordinates[i]) + padding * rtl;

          if (
            (this.op(inner, "<=", begin) && this.op(inner, ">", end)) ||
            (this.op(outer, "<", begin) && this.op(outer, ">", end))
          ) {
            matches.push(i);
          }
        }

        this.$stage.children(".active").removeClass("active");
        this.$stage
          .children(":eq(" + matches.join("), :eq(") + ")")
          .addClass("active");

        if (this.settings.center) {
          this.$stage.children(".center").removeClass("center");
          this.$stage.children().eq(this.current()).addClass("center");
        }
      },
    },
  ];

  /**
   * Initializes the carousel.
   * @protected
   */
  Owl.prototype.initialize = function () {
    this.enter("initializing");
    this.trigger("initialize");

    this.$element.toggleClass(this.settings.rtlClass, this.settings.rtl);

    if (this.settings.autoWidth && !this.is("pre-loading")) {
      var imgs, nestedSelector, width;
      imgs = this.$element.find("img");
      nestedSelector = this.settings.nestedItemSelector
        ? "." + this.settings.nestedItemSelector
        : undefined;
      width = this.$element.children(nestedSelector).width();

      if (imgs.length && width <= 0) {
        this.preloadAutoWidthImages(imgs);
      }
    }

    this.$element.addClass(this.options.loadingClass);

    // create stage
    this.$stage = $(
      "<" +
        this.settings.stageElement +
        ' class="' +
        this.settings.stageClass +
        '"/>'
    ).wrap('<div class="' + this.settings.stageOuterClass + '"/>');

    // append stage
    this.$element.append(this.$stage.parent());

    // append content
    this.replace(this.$element.children().not(this.$stage.parent()));

    // check visibility
    if (this.$element.is(":visible")) {
      // update view
      this.refresh();
    } else {
      // invalidate width
      this.invalidate("width");
    }

    this.$element
      .removeClass(this.options.loadingClass)
      .addClass(this.options.loadedClass);

    // register event handlers
    this.registerEventHandlers();

    this.leave("initializing");
    this.trigger("initialized");
  };

  /**
   * Setups the current settings.
   * @todo Remove responsive classes. Why should adaptive designs be brought into IE8?
   * @todo Support for media queries by using `matchMedia` would be nice.
   * @public
   */
  Owl.prototype.setup = function () {
    var viewport = this.viewport(),
      overwrites = this.options.responsive,
      match = -1,
      settings = null;

    if (!overwrites) {
      settings = $.extend({}, this.options);
    } else {
      $.each(overwrites, function (breakpoint) {
        if (breakpoint <= viewport && breakpoint > match) {
          match = Number(breakpoint);
        }
      });

      settings = $.extend({}, this.options, overwrites[match]);
      if (typeof settings.stagePadding === "function") {
        settings.stagePadding = settings.stagePadding();
      }
      delete settings.responsive;

      // responsive class
      if (settings.responsiveClass) {
        this.$element.attr(
          "class",
          this.$element
            .attr("class")
            .replace(
              new RegExp("(" + this.options.responsiveClass + "-)\\S+\\s", "g"),
              "$1" + match
            )
        );
      }
    }

    this.trigger("change", { property: { name: "settings", value: settings } });
    this._breakpoint = match;
    this.settings = settings;
    this.invalidate("settings");
    this.trigger("changed", {
      property: { name: "settings", value: this.settings },
    });
  };

  /**
   * Updates option logic if necessery.
   * @protected
   */
  Owl.prototype.optionsLogic = function () {
    if (this.settings.autoWidth) {
      this.settings.stagePadding = false;
      this.settings.merge = false;
    }
  };

  /**
   * Prepares an item before add.
   * @todo Rename event parameter `content` to `item`.
   * @protected
   * @returns {jQuery|HTMLElement} - The item container.
   */
  Owl.prototype.prepare = function (item) {
    var event = this.trigger("prepare", { content: item });

    if (!event.data) {
      event.data = $("<" + this.settings.itemElement + "/>")
        .addClass(this.options.itemClass)
        .append(item);
    }

    this.trigger("prepared", { content: event.data });

    return event.data;
  };

  /**
   * Updates the view.
   * @public
   */
  Owl.prototype.update = function () {
    var i = 0,
      n = this._pipe.length,
      filter = $.proxy(function (p) {
        return this[p];
      }, this._invalidated),
      cache = {};

    while (i < n) {
      if (
        this._invalidated.all ||
        $.grep(this._pipe[i].filter, filter).length > 0
      ) {
        this._pipe[i].run(cache);
      }
      i++;
    }

    this._invalidated = {};

    !this.is("valid") && this.enter("valid");
  };

  /**
   * Gets the width of the view.
   * @public
   * @param {Owl.Width} [dimension=Owl.Width.Default] - The dimension to return.
   * @returns {Number} - The width of the view in pixel.
   */
  Owl.prototype.width = function (dimension) {
    dimension = dimension || Owl.Width.Default;
    switch (dimension) {
      case Owl.Width.Inner:
      case Owl.Width.Outer:
        return this._width;
      default:
        return (
          this._width - this.settings.stagePadding * 2 + this.settings.margin
        );
    }
  };

  /**
   * Refreshes the carousel primarily for adaptive purposes.
   * @public
   */
  Owl.prototype.refresh = function () {
    this.enter("refreshing");
    this.trigger("refresh");

    this.setup();

    this.optionsLogic();

    this.$element.addClass(this.options.refreshClass);

    this.update();

    this.$element.removeClass(this.options.refreshClass);

    this.leave("refreshing");
    this.trigger("refreshed");
  };

  /**
   * Checks window `resize` event.
   * @protected
   */
  Owl.prototype.onThrottledResize = function () {
    window.clearTimeout(this.resizeTimer);
    this.resizeTimer = window.setTimeout(
      this._handlers.onResize,
      this.settings.responsiveRefreshRate
    );
  };

  /**
   * Checks window `resize` event.
   * @protected
   */
  Owl.prototype.onResize = function () {
    if (!this._items.length) {
      return false;
    }

    if (this._width === this.$element.width()) {
      return false;
    }

    if (!this.$element.is(":visible")) {
      return false;
    }

    this.enter("resizing");

    if (this.trigger("resize").isDefaultPrevented()) {
      this.leave("resizing");
      return false;
    }

    this.invalidate("width");

    this.refresh();

    this.leave("resizing");
    this.trigger("resized");
  };

  /**
   * Registers event handlers.
   * @todo Check `msPointerEnabled`
   * @todo #261
   * @protected
   */
  Owl.prototype.registerEventHandlers = function () {
    if ($.support.transition) {
      this.$stage.on(
        $.support.transition.end + ".owl.core",
        $.proxy(this.onTransitionEnd, this)
      );
    }

    if (this.settings.responsive !== false) {
      this.on(window, "resize", this._handlers.onThrottledResize);
    }

    if (this.settings.mouseDrag) {
      this.$element.addClass(this.options.dragClass);
      this.$stage.on("mousedown.owl.core", $.proxy(this.onDragStart, this));
      this.$stage.on("dragstart.owl.core selectstart.owl.core", function () {
        return false;
      });
    }

    if (this.settings.touchDrag) {
      this.$stage.on("touchstart.owl.core", $.proxy(this.onDragStart, this));
      this.$stage.on("touchcancel.owl.core", $.proxy(this.onDragEnd, this));
    }
  };

  /**
   * Handles `touchstart` and `mousedown` events.
   * @todo Horizontal swipe threshold as option
   * @todo #261
   * @protected
   * @param {Event} event - The event arguments.
   */
  Owl.prototype.onDragStart = function (event) {
    var stage = null;

    if (event.which === 3) {
      return;
    }

    if ($.support.transform) {
      stage = this.$stage
        .css("transform")
        .replace(/.*\(|\)| /g, "")
        .split(",");
      stage = {
        x: stage[stage.length === 16 ? 12 : 4],
        y: stage[stage.length === 16 ? 13 : 5],
      };
    } else {
      stage = this.$stage.position();
      stage = {
        x: this.settings.rtl
          ? stage.left +
            this.$stage.width() -
            this.width() +
            this.settings.margin
          : stage.left,
        y: stage.top,
      };
    }

    if (this.is("animating")) {
      $.support.transform ? this.animate(stage.x) : this.$stage.stop();
      this.invalidate("position");
    }

    this.$element.toggleClass(
      this.options.grabClass,
      event.type === "mousedown"
    );

    this.speed(0);

    this._drag.time = new Date().getTime();
    this._drag.target = $(event.target);
    this._drag.stage.start = stage;
    this._drag.stage.current = stage;
    this._drag.pointer = this.pointer(event);

    $(document).on(
      "mouseup.owl.core touchend.owl.core",
      $.proxy(this.onDragEnd, this)
    );

    $(document).one(
      "mousemove.owl.core touchmove.owl.core",
      $.proxy(function (event) {
        var delta = this.difference(this._drag.pointer, this.pointer(event));

        $(document).on(
          "mousemove.owl.core touchmove.owl.core",
          $.proxy(this.onDragMove, this)
        );

        if (Math.abs(delta.x) < Math.abs(delta.y) && this.is("valid")) {
          return;
        }

        event.preventDefault();

        this.enter("dragging");
        this.trigger("drag");
      }, this)
    );
  };

  /**
   * Handles the `touchmove` and `mousemove` events.
   * @todo #261
   * @protected
   * @param {Event} event - The event arguments.
   */
  Owl.prototype.onDragMove = function (event) {
    var minimum = null,
      maximum = null,
      pull = null,
      delta = this.difference(this._drag.pointer, this.pointer(event)),
      stage = this.difference(this._drag.stage.start, delta);

    if (!this.is("dragging")) {
      return;
    }

    event.preventDefault();

    if (this.settings.loop) {
      minimum = this.coordinates(this.minimum());
      maximum = this.coordinates(this.maximum() + 1) - minimum;
      stage.x =
        ((((stage.x - minimum) % maximum) + maximum) % maximum) + minimum;
    } else {
      minimum = this.settings.rtl
        ? this.coordinates(this.maximum())
        : this.coordinates(this.minimum());
      maximum = this.settings.rtl
        ? this.coordinates(this.minimum())
        : this.coordinates(this.maximum());
      pull = this.settings.pullDrag ? (-1 * delta.x) / 5 : 0;
      stage.x = Math.max(Math.min(stage.x, minimum + pull), maximum + pull);
    }

    this._drag.stage.current = stage;

    this.animate(stage.x);
  };

  /**
   * Handles the `touchend` and `mouseup` events.
   * @todo #261
   * @todo Threshold for click event
   * @protected
   * @param {Event} event - The event arguments.
   */
  Owl.prototype.onDragEnd = function (event) {
    var delta = this.difference(this._drag.pointer, this.pointer(event)),
      stage = this._drag.stage.current,
      direction = (delta.x > 0) ^ this.settings.rtl ? "left" : "right";

    $(document).off(".owl.core");

    this.$element.removeClass(this.options.grabClass);

    if ((delta.x !== 0 && this.is("dragging")) || !this.is("valid")) {
      this.speed(this.settings.dragEndSpeed || this.settings.smartSpeed);
      this.current(
        this.closest(stage.x, delta.x !== 0 ? direction : this._drag.direction)
      );
      this.invalidate("position");
      this.update();

      this._drag.direction = direction;

      if (
        Math.abs(delta.x) > 3 ||
        new Date().getTime() - this._drag.time > 300
      ) {
        this._drag.target.one("click.owl.core", function () {
          return false;
        });
      }
    }

    if (!this.is("dragging")) {
      return;
    }

    this.leave("dragging");
    this.trigger("dragged");
  };

  /**
   * Gets absolute position of the closest item for a coordinate.
   * @todo Setting `freeDrag` makes `closest` not reusable. See #165.
   * @protected
   * @param {Number} coordinate - The coordinate in pixel.
   * @param {String} direction - The direction to check for the closest item. Ether `left` or `right`.
   * @return {Number} - The absolute position of the closest item.
   */
  Owl.prototype.closest = function (coordinate, direction) {
    var position = -1,
      pull = 30,
      width = this.width(),
      coordinates = this.coordinates();

    if (!this.settings.freeDrag) {
      // check closest item
      $.each(
        coordinates,
        $.proxy(function (index, value) {
          // on a left pull, check on current index
          if (
            direction === "left" &&
            coordinate > value - pull &&
            coordinate < value + pull
          ) {
            position = index;
            // on a right pull, check on previous index
            // to do so, subtract width from value and set position = index + 1
          } else if (
            direction === "right" &&
            coordinate > value - width - pull &&
            coordinate < value - width + pull
          ) {
            position = index + 1;
          } else if (
            this.op(coordinate, "<", value) &&
            this.op(coordinate, ">", coordinates[index + 1] || value - width)
          ) {
            position = direction === "left" ? index + 1 : index;
          }
          return position === -1;
        }, this)
      );
    }

    if (!this.settings.loop) {
      // non loop boundries
      if (this.op(coordinate, ">", coordinates[this.minimum()])) {
        position = coordinate = this.minimum();
      } else if (this.op(coordinate, "<", coordinates[this.maximum()])) {
        position = coordinate = this.maximum();
      }
    }

    return position;
  };

  /**
   * Animates the stage.
   * @todo #270
   * @public
   * @param {Number} coordinate - The coordinate in pixels.
   */
  Owl.prototype.animate = function (coordinate) {
    var animate = this.speed() > 0;

    this.is("animating") && this.onTransitionEnd();

    if (animate) {
      this.enter("animating");
      this.trigger("translate");
    }

    if ($.support.transform3d && $.support.transition) {
      this.$stage.css({
        transform: "translate3d(" + coordinate + "px,0px,0px)",
        transition: this.speed() / 1000 + "s",
      });
    } else if (animate) {
      this.$stage.animate(
        {
          left: coordinate + "px",
        },
        this.speed(),
        this.settings.fallbackEasing,
        $.proxy(this.onTransitionEnd, this)
      );
    } else {
      this.$stage.css({
        left: coordinate + "px",
      });
    }
  };

  /**
   * Checks whether the carousel is in a specific state or not.
   * @param {String} state - The state to check.
   * @returns {Boolean} - The flag which indicates if the carousel is busy.
   */
  Owl.prototype.is = function (state) {
    return this._states.current[state] && this._states.current[state] > 0;
  };

  /**
   * Sets the absolute position of the current item.
   * @public
   * @param {Number} [position] - The new absolute position or nothing to leave it unchanged.
   * @returns {Number} - The absolute position of the current item.
   */
  Owl.prototype.current = function (position) {
    if (position === undefined) {
      return this._current;
    }

    if (this._items.length === 0) {
      return undefined;
    }

    position = this.normalize(position);

    if (this._current !== position) {
      var event = this.trigger("change", {
        property: { name: "position", value: position },
      });

      if (event.data !== undefined) {
        position = this.normalize(event.data);
      }

      this._current = position;

      this.invalidate("position");

      this.trigger("changed", {
        property: { name: "position", value: this._current },
      });
    }

    return this._current;
  };

  /**
   * Invalidates the given part of the update routine.
   * @param {String} [part] - The part to invalidate.
   * @returns {Array.<String>} - The invalidated parts.
   */
  Owl.prototype.invalidate = function (part) {
    if ($.type(part) === "string") {
      this._invalidated[part] = true;
      this.is("valid") && this.leave("valid");
    }
    return $.map(this._invalidated, function (v, i) {
      return i;
    });
  };

  /**
   * Resets the absolute position of the current item.
   * @public
   * @param {Number} position - The absolute position of the new item.
   */
  Owl.prototype.reset = function (position) {
    position = this.normalize(position);

    if (position === undefined) {
      return;
    }

    this._speed = 0;
    this._current = position;

    this.suppress(["translate", "translated"]);

    this.animate(this.coordinates(position));

    this.release(["translate", "translated"]);
  };

  /**
   * Normalizes an absolute or a relative position of an item.
   * @public
   * @param {Number} position - The absolute or relative position to normalize.
   * @param {Boolean} [relative=false] - Whether the given position is relative or not.
   * @returns {Number} - The normalized position.
   */
  Owl.prototype.normalize = function (position, relative) {
    var n = this._items.length,
      m = relative ? 0 : this._clones.length;

    if (!this.isNumeric(position) || n < 1) {
      position = undefined;
    } else if (position < 0 || position >= n + m) {
      position = ((((position - m / 2) % n) + n) % n) + m / 2;
    }

    return position;
  };

  /**
   * Converts an absolute position of an item into a relative one.
   * @public
   * @param {Number} position - The absolute position to convert.
   * @returns {Number} - The converted position.
   */
  Owl.prototype.relative = function (position) {
    position -= this._clones.length / 2;
    return this.normalize(position, true);
  };

  /**
   * Gets the maximum position for the current item.
   * @public
   * @param {Boolean} [relative=false] - Whether to return an absolute position or a relative position.
   * @returns {Number}
   */
  Owl.prototype.maximum = function (relative) {
    var settings = this.settings,
      maximum = this._coordinates.length,
      iterator,
      reciprocalItemsWidth,
      elementWidth;

    if (settings.loop) {
      maximum = this._clones.length / 2 + this._items.length - 1;
    } else if (settings.autoWidth || settings.merge) {
      iterator = this._items.length;
      reciprocalItemsWidth = this._items[--iterator].width();
      elementWidth = this.$element.width();
      while (iterator--) {
        reciprocalItemsWidth +=
          this._items[iterator].width() + this.settings.margin;
        if (reciprocalItemsWidth > elementWidth) {
          break;
        }
      }
      maximum = iterator + 1;
    } else if (settings.center) {
      maximum = this._items.length - 1;
    } else {
      maximum = this._items.length - settings.items;
    }

    if (relative) {
      maximum -= this._clones.length / 2;
    }

    return Math.max(maximum, 0);
  };

  /**
   * Gets the minimum position for the current item.
   * @public
   * @param {Boolean} [relative=false] - Whether to return an absolute position or a relative position.
   * @returns {Number}
   */
  Owl.prototype.minimum = function (relative) {
    return relative ? 0 : this._clones.length / 2;
  };

  /**
   * Gets an item at the specified relative position.
   * @public
   * @param {Number} [position] - The relative position of the item.
   * @return {jQuery|Array.<jQuery>} - The item at the given position or all items if no position was given.
   */
  Owl.prototype.items = function (position) {
    if (position === undefined) {
      return this._items.slice();
    }

    position = this.normalize(position, true);
    return this._items[position];
  };

  /**
   * Gets an item at the specified relative position.
   * @public
   * @param {Number} [position] - The relative position of the item.
   * @return {jQuery|Array.<jQuery>} - The item at the given position or all items if no position was given.
   */
  Owl.prototype.mergers = function (position) {
    if (position === undefined) {
      return this._mergers.slice();
    }

    position = this.normalize(position, true);
    return this._mergers[position];
  };

  /**
   * Gets the absolute positions of clones for an item.
   * @public
   * @param {Number} [position] - The relative position of the item.
   * @returns {Array.<Number>} - The absolute positions of clones for the item or all if no position was given.
   */
  Owl.prototype.clones = function (position) {
    var odd = this._clones.length / 2,
      even = odd + this._items.length,
      map = function (index) {
        return index % 2 === 0 ? even + index / 2 : odd - (index + 1) / 2;
      };

    if (position === undefined) {
      return $.map(this._clones, function (v, i) {
        return map(i);
      });
    }

    return $.map(this._clones, function (v, i) {
      return v === position ? map(i) : null;
    });
  };

  /**
   * Sets the current animation speed.
   * @public
   * @param {Number} [speed] - The animation speed in milliseconds or nothing to leave it unchanged.
   * @returns {Number} - The current animation speed in milliseconds.
   */
  Owl.prototype.speed = function (speed) {
    if (speed !== undefined) {
      this._speed = speed;
    }

    return this._speed;
  };

  /**
   * Gets the coordinate of an item.
   * @todo The name of this method is missleanding.
   * @public
   * @param {Number} position - The absolute position of the item within `minimum()` and `maximum()`.
   * @returns {Number|Array.<Number>} - The coordinate of the item in pixel or all coordinates.
   */
  Owl.prototype.coordinates = function (position) {
    var multiplier = 1,
      newPosition = position - 1,
      coordinate;

    if (position === undefined) {
      return $.map(
        this._coordinates,
        $.proxy(function (coordinate, index) {
          return this.coordinates(index);
        }, this)
      );
    }

    if (this.settings.center) {
      if (this.settings.rtl) {
        multiplier = -1;
        newPosition = position + 1;
      }

      coordinate = this._coordinates[position];
      coordinate +=
        ((this.width() - coordinate + (this._coordinates[newPosition] || 0)) /
          2) *
        multiplier;
    } else {
      coordinate = this._coordinates[newPosition] || 0;
    }

    coordinate = Math.ceil(coordinate);

    return coordinate;
  };

  /**
   * Calculates the speed for a translation.
   * @protected
   * @param {Number} from - The absolute position of the start item.
   * @param {Number} to - The absolute position of the target item.
   * @param {Number} [factor=undefined] - The time factor in milliseconds.
   * @returns {Number} - The time in milliseconds for the translation.
   */
  Owl.prototype.duration = function (from, to, factor) {
    if (factor === 0) {
      return 0;
    }

    return (
      Math.min(Math.max(Math.abs(to - from), 1), 6) *
      Math.abs(factor || this.settings.smartSpeed)
    );
  };

  /**
   * Slides to the specified item.
   * @public
   * @param {Number} position - The position of the item.
   * @param {Number} [speed] - The time in milliseconds for the transition.
   */
  Owl.prototype.to = function (position, speed) {
    var current = this.current(),
      revert = null,
      distance = position - this.relative(current),
      direction = (distance > 0) - (distance < 0),
      items = this._items.length,
      minimum = this.minimum(),
      maximum = this.maximum();

    if (this.settings.loop) {
      if (!this.settings.rewind && Math.abs(distance) > items / 2) {
        distance += direction * -1 * items;
      }

      position = current + distance;
      revert = ((((position - minimum) % items) + items) % items) + minimum;

      if (
        revert !== position &&
        revert - distance <= maximum &&
        revert - distance > 0
      ) {
        current = revert - distance;
        position = revert;
        this.reset(current);
      }
    } else if (this.settings.rewind) {
      maximum += 1;
      position = ((position % maximum) + maximum) % maximum;
    } else {
      position = Math.max(minimum, Math.min(maximum, position));
    }

    this.speed(this.duration(current, position, speed));
    this.current(position);

    if (this.$element.is(":visible")) {
      this.update();
    }
  };

  /**
   * Slides to the next item.
   * @public
   * @param {Number} [speed] - The time in milliseconds for the transition.
   */
  Owl.prototype.next = function (speed) {
    speed = speed || false;
    this.to(this.relative(this.current()) + 1, speed);
  };

  /**
   * Slides to the previous item.
   * @public
   * @param {Number} [speed] - The time in milliseconds for the transition.
   */
  Owl.prototype.prev = function (speed) {
    speed = speed || false;
    this.to(this.relative(this.current()) - 1, speed);
  };

  /**
   * Handles the end of an animation.
   * @protected
   * @param {Event} event - The event arguments.
   */
  Owl.prototype.onTransitionEnd = function (event) {
    // if css2 animation then event object is undefined
    if (event !== undefined) {
      event.stopPropagation();

      // Catch only owl-stage transitionEnd event
      if (
        (event.target || event.srcElement || event.originalTarget) !==
        this.$stage.get(0)
      ) {
        return false;
      }
    }

    this.leave("animating");
    this.trigger("translated");
  };

  /**
   * Gets viewport width.
   * @protected
   * @return {Number} - The width in pixel.
   */
  Owl.prototype.viewport = function () {
    var width;
    if (this.options.responsiveBaseElement !== window) {
      width = $(this.options.responsiveBaseElement).width();
    } else if (window.innerWidth) {
      width = window.innerWidth;
    } else if (
      document.documentElement &&
      document.documentElement.clientWidth
    ) {
      width = document.documentElement.clientWidth;
    } else {
      console.warn("Can not detect viewport width.");
    }
    return width;
  };

  /**
   * Replaces the current content.
   * @public
   * @param {HTMLElement|jQuery|String} content - The new content.
   */
  Owl.prototype.replace = function (content) {
    this.$stage.empty();
    this._items = [];

    if (content) {
      content = content instanceof $jq111 ? content : $(content);
    }

    if (this.settings.nestedItemSelector) {
      content = content.find("." + this.settings.nestedItemSelector);
    }

    content
      .filter(function () {
        return this.nodeType === 1;
      })
      .each(
        $.proxy(function (index, item) {
          item = this.prepare(item);
          this.$stage.append(item);
          this._items.push(item);
          this._mergers.push(
            item
              .find("[data-merge]")
              .addBack("[data-merge]")
              .attr("data-merge") * 1 || 1
          );
        }, this)
      );

    this.reset(
      this.isNumeric(this.settings.startPosition)
        ? this.settings.startPosition
        : 0
    );

    this.invalidate("items");
  };

  /**
   * Adds an item.
   * @todo Use `item` instead of `content` for the event arguments.
   * @public
   * @param {HTMLElement|jQuery|String} content - The item content to add.
   * @param {Number} [position] - The relative position at which to insert the item otherwise the item will be added to the end.
   */
  Owl.prototype.add = function (content, position) {
    var current = this.relative(this._current);

    position =
      position === undefined
        ? this._items.length
        : this.normalize(position, true);
    content = content instanceof jQuery ? content : $(content);

    this.trigger("add", { content: content, position: position });

    content = this.prepare(content);

    if (this._items.length === 0 || position === this._items.length) {
      this._items.length === 0 && this.$stage.append(content);
      this._items.length !== 0 && this._items[position - 1].after(content);
      this._items.push(content);
      this._mergers.push(
        content
          .find("[data-merge]")
          .addBack("[data-merge]")
          .attr("data-merge") * 1 || 1
      );
    } else {
      this._items[position].before(content);
      this._items.splice(position, 0, content);
      this._mergers.splice(
        position,
        0,
        content
          .find("[data-merge]")
          .addBack("[data-merge]")
          .attr("data-merge") * 1 || 1
      );
    }

    this._items[current] && this.reset(this._items[current].index());

    this.invalidate("items");

    this.trigger("added", { content: content, position: position });
  };

  /**
   * Removes an item by its position.
   * @todo Use `item` instead of `content` for the event arguments.
   * @public
   * @param {Number} position - The relative position of the item to remove.
   */
  Owl.prototype.remove = function (position) {
    position = this.normalize(position, true);

    if (position === undefined) {
      return;
    }

    this.trigger("remove", {
      content: this._items[position],
      position: position,
    });

    this._items[position].remove();
    this._items.splice(position, 1);
    this._mergers.splice(position, 1);

    this.invalidate("items");

    this.trigger("removed", { content: null, position: position });
  };

  /**
   * Preloads images with auto width.
   * @todo Replace by a more generic approach
   * @protected
   */
  Owl.prototype.preloadAutoWidthImages = function (images) {
    images.each(
      $.proxy(function (i, element) {
        this.enter("pre-loading");
        element = $(element);
        $(new Image())
          .one(
            "load",
            $.proxy(function (e) {
              element.attr("src", e.target.src);
              element.css("opacity", 1);
              this.leave("pre-loading");
              !this.is("pre-loading") &&
                !this.is("initializing") &&
                this.refresh();
            }, this)
          )
          .attr(
            "src",
            element.attr("src") ||
              element.attr("data-src") ||
              element.attr("data-src-retina")
          );
      }, this)
    );
  };

  /**
   * Destroys the carousel.
   * @public
   */
  Owl.prototype.destroy = function () {
    this.$element.off(".owl.core");
    this.$stage.off(".owl.core");
    $(document).off(".owl.core");

    if (this.settings.responsive !== false) {
      window.clearTimeout(this.resizeTimer);
      this.off(window, "resize", this._handlers.onThrottledResize);
    }

    for (var i in this._plugins) {
      this._plugins[i].destroy();
    }

    this.$stage.children(".cloned").remove();

    this.$stage.unwrap();
    this.$stage.children().contents().unwrap();
    this.$stage.children().unwrap();

    this.$element
      .removeClass(this.options.refreshClass)
      .removeClass(this.options.loadingClass)
      .removeClass(this.options.loadedClass)
      .removeClass(this.options.rtlClass)
      .removeClass(this.options.dragClass)
      .removeClass(this.options.grabClass)
      .attr(
        "class",
        this.$element
          .attr("class")
          .replace(
            new RegExp(this.options.responsiveClass + "-\\S+\\s", "g"),
            ""
          )
      )
      .removeData("owl.carousel");
  };

  /**
   * Operators to calculate right-to-left and left-to-right.
   * @protected
   * @param {Number} [a] - The left side operand.
   * @param {String} [o] - The operator.
   * @param {Number} [b] - The right side operand.
   */
  Owl.prototype.op = function (a, o, b) {
    var rtl = this.settings.rtl;
    switch (o) {
      case "<":
        return rtl ? a > b : a < b;
      case ">":
        return rtl ? a < b : a > b;
      case ">=":
        return rtl ? a <= b : a >= b;
      case "<=":
        return rtl ? a >= b : a <= b;
      default:
        break;
    }
  };

  /**
   * Attaches to an internal event.
   * @protected
   * @param {HTMLElement} element - The event source.
   * @param {String} event - The event name.
   * @param {Function} listener - The event handler to attach.
   * @param {Boolean} capture - Wether the event should be handled at the capturing phase or not.
   */
  Owl.prototype.on = function (element, event, listener, capture) {
    if (element.addEventListener) {
      element.addEventListener(event, listener, capture);
    } else if (element.attachEvent) {
      element.attachEvent("on" + event, listener);
    }
  };

  /**
   * Detaches from an internal event.
   * @protected
   * @param {HTMLElement} element - The event source.
   * @param {String} event - The event name.
   * @param {Function} listener - The attached event handler to detach.
   * @param {Boolean} capture - Wether the attached event handler was registered as a capturing listener or not.
   */
  Owl.prototype.off = function (element, event, listener, capture) {
    if (element.removeEventListener) {
      element.removeEventListener(event, listener, capture);
    } else if (element.detachEvent) {
      element.detachEvent("on" + event, listener);
    }
  };

  /**
   * Triggers a public event.
   * @todo Remove `status`, `relatedTarget` should be used instead.
   * @protected
   * @param {String} name - The event name.
   * @param {*} [data=null] - The event data.
   * @param {String} [namespace=carousel] - The event namespace.
   * @param {String} [state] - The state which is associated with the event.
   * @param {Boolean} [enter=false] - Indicates if the call enters the specified state or not.
   * @returns {Event} - The event arguments.
   */
  Owl.prototype.trigger = function (name, data, namespace, state, enter) {
    var status = {
        item: { count: this._items.length, index: this.current() },
      },
      handler = $.camelCase(
        $.grep(["on", name, namespace], function (v) {
          return v;
        })
          .join("-")
          .toLowerCase()
      ),
      event = $.Event(
        [name, "owl", namespace || "carousel"].join(".").toLowerCase(),
        $.extend({ relatedTarget: this }, status, data)
      );

    if (!this._supress[name]) {
      $.each(this._plugins, function (name, plugin) {
        if (plugin.onTrigger) {
          plugin.onTrigger(event);
        }
      });

      this.register({ type: Owl.Type.Event, name: name });
      this.$element.trigger(event);

      if (this.settings && typeof this.settings[handler] === "function") {
        this.settings[handler].call(this, event);
      }
    }

    return event;
  };

  /**
   * Enters a state.
   * @param name - The state name.
   */
  Owl.prototype.enter = function (name) {
    $.each(
      [name].concat(this._states.tags[name] || []),
      $.proxy(function (i, name) {
        if (this._states.current[name] === undefined) {
          this._states.current[name] = 0;
        }

        this._states.current[name]++;
      }, this)
    );
  };

  /**
   * Leaves a state.
   * @param name - The state name.
   */
  Owl.prototype.leave = function (name) {
    $.each(
      [name].concat(this._states.tags[name] || []),
      $.proxy(function (i, name) {
        this._states.current[name]--;
      }, this)
    );
  };

  /**
   * Registers an event or state.
   * @public
   * @param {Object} object - The event or state to register.
   */
  Owl.prototype.register = function (object) {
    if (object.type === Owl.Type.Event) {
      if (!$.event.special[object.name]) {
        $.event.special[object.name] = {};
      }

      if (!$.event.special[object.name].owl) {
        var _default = $.event.special[object.name]._default;
        $.event.special[object.name]._default = function (e) {
          if (
            _default &&
            _default.apply &&
            (!e.namespace || e.namespace.indexOf("owl") === -1)
          ) {
            return _default.apply(this, arguments);
          }
          return e.namespace && e.namespace.indexOf("owl") > -1;
        };
        $.event.special[object.name].owl = true;
      }
    } else if (object.type === Owl.Type.State) {
      if (!this._states.tags[object.name]) {
        this._states.tags[object.name] = object.tags;
      } else {
        this._states.tags[object.name] = this._states.tags[object.name].concat(
          object.tags
        );
      }

      this._states.tags[object.name] = $.grep(
        this._states.tags[object.name],
        $.proxy(function (tag, i) {
          return $.inArray(tag, this._states.tags[object.name]) === i;
        }, this)
      );
    }
  };

  /**
   * Suppresses events.
   * @protected
   * @param {Array.<String>} events - The events to suppress.
   */
  Owl.prototype.suppress = function (events) {
    $.each(
      events,
      $.proxy(function (index, event) {
        this._supress[event] = true;
      }, this)
    );
  };

  /**
   * Releases suppressed events.
   * @protected
   * @param {Array.<String>} events - The events to release.
   */
  Owl.prototype.release = function (events) {
    $.each(
      events,
      $.proxy(function (index, event) {
        delete this._supress[event];
      }, this)
    );
  };

  /**
   * Gets unified pointer coordinates from event.
   * @todo #261
   * @protected
   * @param {Event} - The `mousedown` or `touchstart` event.
   * @returns {Object} - Contains `x` and `y` coordinates of current pointer position.
   */
  Owl.prototype.pointer = function (event) {
    var result = { x: null, y: null };

    event = event.originalEvent || event || window.event;

    event =
      event.touches && event.touches.length
        ? event.touches[0]
        : event.changedTouches && event.changedTouches.length
        ? event.changedTouches[0]
        : event;

    if (event.pageX) {
      result.x = event.pageX;
      result.y = event.pageY;
    } else {
      result.x = event.clientX;
      result.y = event.clientY;
    }

    return result;
  };

  /**
   * Determines if the input is a Number or something that can be coerced to a Number
   * @protected
   * @param {Number|String|Object|Array|Boolean|RegExp|Function|Symbol} - The input to be tested
   * @returns {Boolean} - An indication if the input is a Number or can be coerced to a Number
   */
  Owl.prototype.isNumeric = function (number) {
    return !isNaN(parseFloat(number));
  };

  /**
   * Gets the difference of two vectors.
   * @todo #261
   * @protected
   * @param {Object} - The first vector.
   * @param {Object} - The second vector.
   * @returns {Object} - The difference.
   */
  Owl.prototype.difference = function (first, second) {
    return {
      x: first.x - second.x,
      y: first.y - second.y,
    };
  };

  /**
   * The jQuery Plugin for the Owl Carousel
   * @todo Navigation plugin `next` and `prev`
   * @public
   */
  $.fn.owlCarousel = function (option) {
    var args = Array.prototype.slice.call(arguments, 1);

    return this.each(function () {
      var $this = $(this),
        data = $this.data("owl.carousel");

      if (!data) {
        data = new Owl(this, typeof option == "object" && option);
        $this.data("owl.carousel", data);

        $.each(
          [
            "next",
            "prev",
            "to",
            "destroy",
            "refresh",
            "replace",
            "add",
            "remove",
          ],
          function (i, event) {
            data.register({ type: Owl.Type.Event, name: event });
            data.$element.on(
              event + ".owl.carousel.core",
              $.proxy(function (e) {
                if (e.namespace && e.relatedTarget !== this) {
                  this.suppress([event]);
                  data[event].apply(this, [].slice.call(arguments, 1));
                  this.release([event]);
                }
              }, data)
            );
          }
        );
      }

      if (typeof option == "string" && option.charAt(0) !== "_") {
        data[option].apply(data, args);
      }
    });
  };

  /**
   * The constructor for the jQuery Plugin
   * @public
   */
  $.fn.owlCarousel.Constructor = Owl;
})(window.Zepto || window.$jq111, window, document);

/**
 * AutoRefresh Plugin
 * @version 2.1.0
 * @author Artus Kolanowski
 * @author David Deutsch
 * @license The MIT License (MIT)
 */
(function ($, window, document, undefined) {
  /**
   * Creates the auto refresh plugin.
   * @class The Auto Refresh Plugin
   * @param {Owl} carousel - The Owl Carousel
   */
  var AutoRefresh = function (carousel) {
    /**
     * Reference to the core.
     * @protected
     * @type {Owl}
     */
    this._core = carousel;

    /**
     * Refresh interval.
     * @protected
     * @type {number}
     */
    this._interval = null;

    /**
     * Whether the element is currently visible or not.
     * @protected
     * @type {Boolean}
     */
    this._visible = null;

    /**
     * All event handlers.
     * @protected
     * @type {Object}
     */
    this._handlers = {
      "initialized.owl.carousel": $.proxy(function (e) {
        if (e.namespace && this._core.settings.autoRefresh) {
          this.watch();
        }
      }, this),
    };

    // set default options
    this._core.options = $.extend({}, AutoRefresh.Defaults, this._core.options);

    // register event handlers
    this._core.$element.on(this._handlers);
  };

  /**
   * Default options.
   * @public
   */
  AutoRefresh.Defaults = {
    autoRefresh: true,
    autoRefreshInterval: 500,
  };

  /**
   * Watches the element.
   */
  AutoRefresh.prototype.watch = function () {
    if (this._interval) {
      return;
    }

    this._visible = this._core.$element.is(":visible");
    this._interval = window.setInterval(
      $.proxy(this.refresh, this),
      this._core.settings.autoRefreshInterval
    );
  };

  /**
   * Refreshes the element.
   */
  AutoRefresh.prototype.refresh = function () {
    if (this._core.$element.is(":visible") === this._visible) {
      return;
    }

    this._visible = !this._visible;

    this._core.$element.toggleClass("owl-hidden", !this._visible);

    this._visible && this._core.invalidate("width") && this._core.refresh();
  };

  /**
   * Destroys the plugin.
   */
  AutoRefresh.prototype.destroy = function () {
    var handler, property;

    window.clearInterval(this._interval);

    for (handler in this._handlers) {
      this._core.$element.off(handler, this._handlers[handler]);
    }
    for (property in Object.getOwnPropertyNames(this)) {
      typeof this[property] != "function" && (this[property] = null);
    }
  };

  $.fn.owlCarousel.Constructor.Plugins.AutoRefresh = AutoRefresh;
})(window.Zepto || window.$jq111, window, document);

/**
 * Lazy Plugin
 * @version 2.1.0
 * @author Bartosz Wojciechowski
 * @author David Deutsch
 * @license The MIT License (MIT)
 */
(function ($, window, document, undefined) {
  /**
   * Creates the lazy plugin.
   * @class The Lazy Plugin
   * @param {Owl} carousel - The Owl Carousel
   */
  var Lazy = function (carousel) {
    /**
     * Reference to the core.
     * @protected
     * @type {Owl}
     */
    this._core = carousel;

    /**
     * Already loaded items.
     * @protected
     * @type {Array.<jQuery>}
     */
    this._loaded = [];

    /**
     * Event handlers.
     * @protected
     * @type {Object}
     */
    this._handlers = {
      "initialized.owl.carousel change.owl.carousel resized.owl.carousel": $.proxy(
        function (e) {
          if (!e.namespace) {
            return;
          }

          if (!this._core.settings || !this._core.settings.lazyLoad) {
            return;
          }

          if (
            (e.property && e.property.name == "position") ||
            e.type == "initialized"
          ) {
            var settings = this._core.settings,
              n =
                (settings.center && Math.ceil(settings.items / 2)) ||
                settings.items,
              i = (settings.center && n * -1) || 0,
              position =
                (e.property && e.property.value !== undefined
                  ? e.property.value
                  : this._core.current()) + i,
              clones = this._core.clones().length,
              load = $.proxy(function (i, v) {
                this.load(v);
              }, this);

            while (i++ < n) {
              this.load(clones / 2 + this._core.relative(position));
              clones &&
                $.each(this._core.clones(this._core.relative(position)), load);
              position++;
            }
          }
        },
        this
      ),
    };

    // set the default options
    this._core.options = $.extend({}, Lazy.Defaults, this._core.options);

    // register event handler
    this._core.$element.on(this._handlers);
  };

  /**
   * Default options.
   * @public
   */
  Lazy.Defaults = {
    lazyLoad: false,
  };

  /**
   * Loads all resources of an item at the specified position.
   * @param {Number} position - The absolute position of the item.
   * @protected
   */
  Lazy.prototype.load = function (position) {
    var $item = this._core.$stage.children().eq(position),
      $elements = $item && $item.find(".owl-lazy");

    if (!$elements || $.inArray($item.get(0), this._loaded) > -1) {
      return;
    }

    $elements.each(
      $.proxy(function (index, element) {
        var $element = $(element),
          image,
          url =
            (window.devicePixelRatio > 1 && $element.attr("data-src-retina")) ||
            $element.attr("data-src");

        this._core.trigger("load", { element: $element, url: url }, "lazy");

        if ($element.is("img")) {
          $element
            .one(
              "load.owl.lazy",
              $.proxy(function () {
                $element.css("opacity", 1);
                this._core.trigger(
                  "loaded",
                  { element: $element, url: url },
                  "lazy"
                );
              }, this)
            )
            .attr("src", url);
        } else {
          image = new Image();
          image.onload = $.proxy(function () {
            $element.css({
              "background-image": 'url("' + url + '")',
              opacity: "1",
            });
            this._core.trigger(
              "loaded",
              { element: $element, url: url },
              "lazy"
            );
          }, this);
          image.src = url;
        }
      }, this)
    );

    this._loaded.push($item.get(0));
  };

  /**
   * Destroys the plugin.
   * @public
   */
  Lazy.prototype.destroy = function () {
    var handler, property;

    for (handler in this.handlers) {
      this._core.$element.off(handler, this.handlers[handler]);
    }
    for (property in Object.getOwnPropertyNames(this)) {
      typeof this[property] != "function" && (this[property] = null);
    }
  };

  $.fn.owlCarousel.Constructor.Plugins.Lazy = Lazy;
})(window.Zepto || window.$jq111, window, document);

/**
 * AutoHeight Plugin
 * @version 2.1.0
 * @author Bartosz Wojciechowski
 * @author David Deutsch
 * @license The MIT License (MIT)
 */
(function ($, window, document, undefined) {
  /**
   * Creates the auto height plugin.
   * @class The Auto Height Plugin
   * @param {Owl} carousel - The Owl Carousel
   */
  var AutoHeight = function (carousel) {
    /**
     * Reference to the core.
     * @protected
     * @type {Owl}
     */
    this._core = carousel;

    /**
     * All event handlers.
     * @protected
     * @type {Object}
     */
    this._handlers = {
      "initialized.owl.carousel refreshed.owl.carousel": $.proxy(function (e) {
        if (e.namespace && this._core.settings.autoHeight) {
          this.update();
        }
      }, this),
      "changed.owl.carousel": $.proxy(function (e) {
        if (
          e.namespace &&
          this._core.settings.autoHeight &&
          e.property.name == "position"
        ) {
          this.update();
        }
      }, this),
      "loaded.owl.lazy": $.proxy(function (e) {
        if (
          e.namespace &&
          this._core.settings.autoHeight &&
          e.element.closest("." + this._core.settings.itemClass).index() ===
            this._core.current()
        ) {
          this.update();
        }
      }, this),
    };

    // set default options
    this._core.options = $.extend({}, AutoHeight.Defaults, this._core.options);

    // register event handlers
    this._core.$element.on(this._handlers);
  };

  /**
   * Default options.
   * @public
   */
  AutoHeight.Defaults = {
    autoHeight: false,
    autoHeightClass: "owl-height",
  };

  /**
   * Updates the view.
   */
  AutoHeight.prototype.update = function () {
    var start = this._core._current,
      end = start + this._core.settings.items,
      visible = this._core.$stage.children().toArray().slice(start, end),
      heights = [],
      maxheight = 0;

    $.each(visible, function (index, item) {
      heights.push($(item).height());
    });

    maxheight = Math.max.apply(null, heights);

    this._core.$stage
      .parent()
      .height(maxheight)
      .addClass(this._core.settings.autoHeightClass);
  };

  AutoHeight.prototype.destroy = function () {
    var handler, property;

    for (handler in this._handlers) {
      this._core.$element.off(handler, this._handlers[handler]);
    }
    for (property in Object.getOwnPropertyNames(this)) {
      typeof this[property] != "function" && (this[property] = null);
    }
  };

  $.fn.owlCarousel.Constructor.Plugins.AutoHeight = AutoHeight;
})(window.Zepto || window.$jq111, window, document);

/**
 * Video Plugin
 * @version 2.1.0
 * @author Bartosz Wojciechowski
 * @author David Deutsch
 * @license The MIT License (MIT)
 */
(function ($, window, document, undefined) {
  /**
   * Creates the video plugin.
   * @class The Video Plugin
   * @param {Owl} carousel - The Owl Carousel
   */
  var Video = function (carousel) {
    /**
     * Reference to the core.
     * @protected
     * @type {Owl}
     */
    this._core = carousel;

    /**
     * Cache all video URLs.
     * @protected
     * @type {Object}
     */
    this._videos = {};

    /**
     * Current playing item.
     * @protected
     * @type {jQuery}
     */
    this._playing = null;

    /**
     * All event handlers.
     * @todo The cloned content removale is too late
     * @protected
     * @type {Object}
     */
    this._handlers = {
      "initialized.owl.carousel": $.proxy(function (e) {
        if (e.namespace) {
          this._core.register({
            type: "state",
            name: "playing",
            tags: ["interacting"],
          });
        }
      }, this),
      "resize.owl.carousel": $.proxy(function (e) {
        if (e.namespace && this._core.settings.video && this.isInFullScreen()) {
          e.preventDefault();
        }
      }, this),
      "refreshed.owl.carousel": $.proxy(function (e) {
        if (e.namespace && this._core.is("resizing")) {
          this._core.$stage.find(".cloned .owl-video-frame").remove();
        }
      }, this),
      "changed.owl.carousel": $.proxy(function (e) {
        if (e.namespace && e.property.name === "position" && this._playing) {
          this.stop();
        }
      }, this),
      "prepared.owl.carousel": $.proxy(function (e) {
        if (!e.namespace) {
          return;
        }

        var $element = $(e.content).find(".owl-video");

        if ($element.length) {
          $element.css("display", "none");
          this.fetch($element, $(e.content));
        }
      }, this),
    };

    // set default options
    this._core.options = $.extend({}, Video.Defaults, this._core.options);

    // register event handlers
    this._core.$element.on(this._handlers);

    this._core.$element.on(
      "click.owl.video",
      ".owl-video-play-icon",
      $.proxy(function (e) {
        this.play(e);
      }, this)
    );
  };

  /**
   * Default options.
   * @public
   */
  Video.Defaults = {
    video: false,
    videoHeight: false,
    videoWidth: false,
  };

  /**
   * Gets the video ID and the type (YouTube/Vimeo/vzaar only).
   * @protected
   * @param {jQuery} target - The target containing the video data.
   * @param {jQuery} item - The item containing the video.
   */
  Video.prototype.fetch = function (target, item) {
    var type = (function () {
        if (target.attr("data-vimeo-id")) {
          return "vimeo";
        } else if (target.attr("data-vzaar-id")) {
          return "vzaar";
        } else {
          return "youtube";
        }
      })(),
      id =
        target.attr("data-vimeo-id") ||
        target.attr("data-youtube-id") ||
        target.attr("data-vzaar-id"),
      width = target.attr("data-width") || this._core.settings.videoWidth,
      height = target.attr("data-height") || this._core.settings.videoHeight,
      url = target.attr("href");

    if (url) {
      /*
					Parses the id's out of the following urls (and probably more):
					https://www.youtube.com/watch?v=:id
					https://youtu.be/:id
					https://vimeo.com/:id
					https://vimeo.com/channels/:channel/:id
					https://vimeo.com/groups/:group/videos/:id
					https://app.vzaar.com/videos/:id

					Visual example: https://regexper.com/#(http%3A%7Chttps%3A%7C)%5C%2F%5C%2F(player.%7Cwww.%7Capp.)%3F(vimeo%5C.com%7Cyoutu(be%5C.com%7C%5C.be%7Cbe%5C.googleapis%5C.com)%7Cvzaar%5C.com)%5C%2F(video%5C%2F%7Cvideos%5C%2F%7Cembed%5C%2F%7Cchannels%5C%2F.%2B%5C%2F%7Cgroups%5C%2F.%2B%5C%2F%7Cwatch%5C%3Fv%3D%7Cv%5C%2F)%3F(%5BA-Za-z0-9._%25-%5D*)(%5C%26%5CS%2B)%3F
			*/

      id = url.match(
        /(http:|https:|)\/\/(player.|www.|app.)?(vimeo\.com|youtu(be\.com|\.be|be\.googleapis\.com)|vzaar\.com)\/(video\/|videos\/|embed\/|channels\/.+\/|groups\/.+\/|watch\?v=|v\/)?([A-Za-z0-9._%-]*)(\&\S+)?/
      );

      if (id[3].indexOf("youtu") > -1) {
        type = "youtube";
      } else if (id[3].indexOf("vimeo") > -1) {
        type = "vimeo";
      } else if (id[3].indexOf("vzaar") > -1) {
        type = "vzaar";
      } else {
        throw new Error("Video URL not supported.");
      }
      id = id[6];
    } else {
      throw new Error("Missing video URL.");
    }

    this._videos[url] = {
      type: type,
      id: id,
      width: width,
      height: height,
    };

    item.attr("data-video", url);

    this.thumbnail(target, this._videos[url]);
  };

  /**
   * Creates video thumbnail.
   * @protected
   * @param {jQuery} target - The target containing the video data.
   * @param {Object} info - The video info object.
   * @see `fetch`
   */
  Video.prototype.thumbnail = function (target, video) {
    var tnLink,
      icon,
      path,
      dimensions =
        video.width && video.height
          ? 'style="width:' + video.width + "px;height:" + video.height + 'px;"'
          : "",
      customTn = target.find("img"),
      srcType = "src",
      lazyClass = "",
      settings = this._core.settings,
      create = function (path) {
        icon = '<div class="owl-video-play-icon"></div>';

        if (settings.lazyLoad) {
          tnLink =
            '<div class="owl-video-tn ' +
            lazyClass +
            '" ' +
            srcType +
            '="' +
            path +
            '"></div>';
        } else {
          tnLink =
            '<div class="owl-video-tn" style="opacity:1;background-image:url(' +
            path +
            ')"></div>';
        }
        target.after(tnLink);
        target.after(icon);
      };

    // wrap video content into owl-video-wrapper div
    target.wrap('<div class="owl-video-wrapper"' + dimensions + "></div>");

    if (this._core.settings.lazyLoad) {
      srcType = "data-src";
      lazyClass = "owl-lazy";
    }

    // custom thumbnail
    if (customTn.length) {
      create(customTn.attr(srcType));
      customTn.remove();
      return false;
    }

    if (video.type === "youtube") {
      path = "//img.youtube.com/vi/" + video.id + "/hqdefault.jpg";
      create(path);
    } else if (video.type === "vimeo") {
      $.ajax({
        type: "GET",
        url: "//vimeo.com/api/v2/video/" + video.id + ".json",
        jsonp: "callback",
        dataType: "jsonp",
        success: function (data) {
          path = data[0].thumbnail_large;
          create(path);
        },
      });
    } else if (video.type === "vzaar") {
      $.ajax({
        type: "GET",
        url: "//vzaar.com/api/videos/" + video.id + ".json",
        jsonp: "callback",
        dataType: "jsonp",
        success: function (data) {
          path = data.framegrab_url;
          create(path);
        },
      });
    }
  };

  /**
   * Stops the current video.
   * @public
   */
  Video.prototype.stop = function () {
    this._core.trigger("stop", null, "video");
    this._playing.find(".owl-video-frame").remove();
    this._playing.removeClass("owl-video-playing");
    this._playing = null;
    this._core.leave("playing");
    this._core.trigger("stopped", null, "video");
  };

  /**
   * Starts the current video.
   * @public
   * @param {Event} event - The event arguments.
   */
  Video.prototype.play = function (event) {
    var target = $(event.target),
      item = target.closest("." + this._core.settings.itemClass),
      video = this._videos[item.attr("data-video")],
      width = video.width || "100%",
      height = video.height || this._core.$stage.height(),
      html;

    if (this._playing) {
      return;
    }

    this._core.enter("playing");
    this._core.trigger("play", null, "video");

    item = this._core.items(this._core.relative(item.index()));

    this._core.reset(item.index());

    if (video.type === "youtube") {
      html =
        '<iframe width="' +
        width +
        '" height="' +
        height +
        '" src="//www.youtube.com/embed/' +
        video.id +
        "?autoplay=1&rel=0&v=" +
        video.id +
        '" frameborder="0" allowfullscreen></iframe>';
    } else if (video.type === "vimeo") {
      html =
        '<iframe src="//player.vimeo.com/video/' +
        video.id +
        '?autoplay=1" width="' +
        width +
        '" height="' +
        height +
        '" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>';
    } else if (video.type === "vzaar") {
      html =
        '<iframe frameborder="0"' +
        'height="' +
        height +
        '"' +
        'width="' +
        width +
        '" allowfullscreen mozallowfullscreen webkitAllowFullScreen ' +
        'src="//view.vzaar.com/' +
        video.id +
        '/player?autoplay=true"></iframe>';
    }

    $('<div class="owl-video-frame">' + html + "</div>").insertAfter(
      item.find(".owl-video")
    );

    this._playing = item.addClass("owl-video-playing");
  };

  /**
   * Checks whether an video is currently in full screen mode or not.
   * @todo Bad style because looks like a readonly method but changes members.
   * @protected
   * @returns {Boolean}
   */
  Video.prototype.isInFullScreen = function () {
    var element =
      document.fullscreenElement ||
      document.mozFullScreenElement ||
      document.webkitFullscreenElement;

    return element && $(element).parent().hasClass("owl-video-frame");
  };

  /**
   * Destroys the plugin.
   */
  Video.prototype.destroy = function () {
    var handler, property;

    this._core.$element.off("click.owl.video");

    for (handler in this._handlers) {
      this._core.$element.off(handler, this._handlers[handler]);
    }
    for (property in Object.getOwnPropertyNames(this)) {
      typeof this[property] != "function" && (this[property] = null);
    }
  };

  $.fn.owlCarousel.Constructor.Plugins.Video = Video;
})(window.Zepto || window.$jq111, window, document);

/**
 * Animate Plugin
 * @version 2.1.0
 * @author Bartosz Wojciechowski
 * @author David Deutsch
 * @license The MIT License (MIT)
 */
(function ($, window, document, undefined) {
  /**
   * Creates the animate plugin.
   * @class The Navigation Plugin
   * @param {Owl} scope - The Owl Carousel
   */
  var Animate = function (scope) {
    this.core = scope;
    this.core.options = $.extend({}, Animate.Defaults, this.core.options);
    this.swapping = true;
    this.previous = undefined;
    this.next = undefined;

    this.handlers = {
      "change.owl.carousel": $.proxy(function (e) {
        if (e.namespace && e.property.name == "position") {
          this.previous = this.core.current();
          this.next = e.property.value;
        }
      }, this),
      "drag.owl.carousel dragged.owl.carousel translated.owl.carousel": $.proxy(
        function (e) {
          if (e.namespace) {
            this.swapping = e.type == "translated";
          }
        },
        this
      ),
      "translate.owl.carousel": $.proxy(function (e) {
        if (
          e.namespace &&
          this.swapping &&
          (this.core.options.animateOut || this.core.options.animateIn)
        ) {
          this.swap();
        }
      }, this),
    };

    this.core.$element.on(this.handlers);
  };

  /**
   * Default options.
   * @public
   */
  Animate.Defaults = {
    animateOut: false,
    animateIn: false,
  };

  /**
   * Toggles the animation classes whenever an translations starts.
   * @protected
   * @returns {Boolean|undefined}
   */
  Animate.prototype.swap = function () {
    if (this.core.settings.items !== 1) {
      return;
    }

    if (!$.support.animation || !$.support.transition) {
      return;
    }

    this.core.speed(0);

    var left,
      clear = $.proxy(this.clear, this),
      previous = this.core.$stage.children().eq(this.previous),
      next = this.core.$stage.children().eq(this.next),
      incoming = this.core.settings.animateIn,
      outgoing = this.core.settings.animateOut;

    if (this.core.current() === this.previous) {
      return;
    }

    if (outgoing) {
      left =
        this.core.coordinates(this.previous) - this.core.coordinates(this.next);
      previous
        .one($.support.animation.end, clear)
        .css({ left: left + "px" })
        .addClass("animated owl-animated-out")
        .addClass(outgoing);
    }

    if (incoming) {
      next
        .one($.support.animation.end, clear)
        .addClass("animated owl-animated-in")
        .addClass(incoming);
    }
  };

  Animate.prototype.clear = function (e) {
    $(e.target)
      .css({ left: "" })
      .removeClass("animated owl-animated-out owl-animated-in")
      .removeClass(this.core.settings.animateIn)
      .removeClass(this.core.settings.animateOut);
    this.core.onTransitionEnd();
  };

  /**
   * Destroys the plugin.
   * @public
   */
  Animate.prototype.destroy = function () {
    var handler, property;

    for (handler in this.handlers) {
      this.core.$element.off(handler, this.handlers[handler]);
    }
    for (property in Object.getOwnPropertyNames(this)) {
      typeof this[property] != "function" && (this[property] = null);
    }
  };

  $.fn.owlCarousel.Constructor.Plugins.Animate = Animate;
})(window.Zepto || window.$jq111, window, document);

/**
 * Autoplay Plugin
 * @version 2.1.0
 * @author Bartosz Wojciechowski
 * @author Artus Kolanowski
 * @author David Deutsch
 * @license The MIT License (MIT)
 */
(function ($, window, document, undefined) {
  /**
   * Creates the autoplay plugin.
   * @class The Autoplay Plugin
   * @param {Owl} scope - The Owl Carousel
   */
  var Autoplay = function (carousel) {
    /**
     * Reference to the core.
     * @protected
     * @type {Owl}
     */
    this._core = carousel;

    /**
     * The autoplay timeout.
     * @type {Timeout}
     */
    this._timeout = null;

    /**
     * Indicates whenever the autoplay is paused.
     * @type {Boolean}
     */
    this._paused = false;

    /**
     * All event handlers.
     * @protected
     * @type {Object}
     */
    this._handlers = {
      "changed.owl.carousel": $.proxy(function (e) {
        if (e.namespace && e.property.name === "settings") {
          if (this._core.settings.autoplay) {
            this.play();
          } else {
            this.stop();
          }
        } else if (e.namespace && e.property.name === "position") {
          //console.log('play?', e);
          if (this._core.settings.autoplay) {
            this._setAutoPlayInterval();
          }
        }
      }, this),
      "initialized.owl.carousel": $.proxy(function (e) {
        if (e.namespace && this._core.settings.autoplay) {
          this.play();
        }
      }, this),
      "play.owl.autoplay": $.proxy(function (e, t, s) {
        if (e.namespace) {
          this.play(t, s);
        }
      }, this),
      "stop.owl.autoplay": $.proxy(function (e) {
        if (e.namespace) {
          this.stop();
        }
      }, this),
      "mouseover.owl.autoplay": $.proxy(function () {
        if (
          this._core.settings.autoplayHoverPause &&
          this._core.is("rotating")
        ) {
          this.pause();
        }
      }, this),
      "mouseleave.owl.autoplay": $.proxy(function () {
        if (
          this._core.settings.autoplayHoverPause &&
          this._core.is("rotating")
        ) {
          this.play();
        }
      }, this),
      "touchstart.owl.core": $.proxy(function () {
        if (
          this._core.settings.autoplayHoverPause &&
          this._core.is("rotating")
        ) {
          this.pause();
        }
      }, this),
      "touchend.owl.core": $.proxy(function () {
        if (this._core.settings.autoplayHoverPause) {
          this.play();
        }
      }, this),
    };

    // register event handlers
    this._core.$element.on(this._handlers);

    // set default options
    this._core.options = $.extend({}, Autoplay.Defaults, this._core.options);
  };

  /**
   * Default options.
   * @public
   */
  Autoplay.Defaults = {
    autoplay: false,
    autoplayTimeout: 5000,
    autoplayHoverPause: false,
    autoplaySpeed: false,
  };

  /**
   * Starts the autoplay.
   * @public
   * @param {Number} [timeout] - The interval before the next animation starts.
   * @param {Number} [speed] - The animation speed for the animations.
   */
  Autoplay.prototype.play = function (timeout, speed) {
    this._paused = false;

    if (this._core.is("rotating")) {
      return;
    }

    this._core.enter("rotating");

    this._setAutoPlayInterval();
  };

  /**
   * Gets a new timeout
   * @private
   * @param {Number} [timeout] - The interval before the next animation starts.
   * @param {Number} [speed] - The animation speed for the animations.
   * @return {Timeout}
   */
  Autoplay.prototype._getNextTimeout = function (timeout, speed) {
    if (this._timeout) {
      window.clearTimeout(this._timeout);
    }
    return window.setTimeout(
      $.proxy(function () {
        if (
          this._paused ||
          this._core.is("busy") ||
          this._core.is("interacting") ||
          document.hidden
        ) {
          return;
        }
        this._core.next(speed || this._core.settings.autoplaySpeed);
      }, this),
      timeout || this._core.settings.autoplayTimeout
    );
  };

  /**
   * Sets autoplay in motion.
   * @private
   */
  Autoplay.prototype._setAutoPlayInterval = function () {
    this._timeout = this._getNextTimeout();
  };

  /**
   * Stops the autoplay.
   * @public
   */
  Autoplay.prototype.stop = function () {
    if (!this._core.is("rotating")) {
      return;
    }

    window.clearTimeout(this._timeout);
    this._core.leave("rotating");
  };

  /**
   * Stops the autoplay.
   * @public
   */
  Autoplay.prototype.pause = function () {
    if (!this._core.is("rotating")) {
      return;
    }

    this._paused = true;
  };

  /**
   * Destroys the plugin.
   */
  Autoplay.prototype.destroy = function () {
    var handler, property;

    this.stop();

    for (handler in this._handlers) {
      this._core.$element.off(handler, this._handlers[handler]);
    }
    for (property in Object.getOwnPropertyNames(this)) {
      typeof this[property] != "function" && (this[property] = null);
    }
  };

  $.fn.owlCarousel.Constructor.Plugins.autoplay = Autoplay;
})(window.Zepto || window.$jq111, window, document);

/**
 * Navigation Plugin
 * @version 2.1.0
 * @author Artus Kolanowski
 * @author David Deutsch
 * @license The MIT License (MIT)
 */
(function ($, window, document, undefined) {
  "use strict";

  /**
   * Creates the navigation plugin.
   * @class The Navigation Plugin
   * @param {Owl} carousel - The Owl Carousel.
   */
  var Navigation = function (carousel) {
    /**
     * Reference to the core.
     * @protected
     * @type {Owl}
     */
    this._core = carousel;

    /**
     * Indicates whether the plugin is initialized or not.
     * @protected
     * @type {Boolean}
     */
    this._initialized = false;

    /**
     * The current paging indexes.
     * @protected
     * @type {Array}
     */
    this._pages = [];

    /**
     * All DOM elements of the user interface.
     * @protected
     * @type {Object}
     */
    this._controls = {};

    /**
     * Markup for an indicator.
     * @protected
     * @type {Array.<String>}
     */
    this._templates = [];

    /**
     * The carousel element.
     * @type {jQuery}
     */
    this.$element = this._core.$element;

    /**
     * Overridden methods of the carousel.
     * @protected
     * @type {Object}
     */
    this._overrides = {
      next: this._core.next,
      prev: this._core.prev,
      to: this._core.to,
    };

    /**
     * All event handlers.
     * @protected
     * @type {Object}
     */
    this._handlers = {
      "prepared.owl.carousel": $.proxy(function (e) {
        if (e.namespace && this._core.settings.dotsData) {
          this._templates.push(
            '<div class="' +
              this._core.settings.dotClass +
              '">' +
              $(e.content)
                .find("[data-dot]")
                .addBack("[data-dot]")
                .attr("data-dot") +
              "</div>"
          );
        }
      }, this),
      "added.owl.carousel": $.proxy(function (e) {
        if (e.namespace && this._core.settings.dotsData) {
          this._templates.splice(e.position, 0, this._templates.pop());
        }
      }, this),
      "remove.owl.carousel": $.proxy(function (e) {
        if (e.namespace && this._core.settings.dotsData) {
          this._templates.splice(e.position, 1);
        }
      }, this),
      "changed.owl.carousel": $.proxy(function (e) {
        if (e.namespace && e.property.name == "position") {
          this.draw();
        }
      }, this),
      "initialized.owl.carousel": $.proxy(function (e) {
        if (e.namespace && !this._initialized) {
          this._core.trigger("initialize", null, "navigation");
          this.initialize();
          this.update();
          this.draw();
          this._initialized = true;
          this._core.trigger("initialized", null, "navigation");
        }
      }, this),
      "refreshed.owl.carousel": $.proxy(function (e) {
        if (e.namespace && this._initialized) {
          this._core.trigger("refresh", null, "navigation");
          this.update();
          this.draw();
          this._core.trigger("refreshed", null, "navigation");
        }
      }, this),
    };

    // set default options
    this._core.options = $.extend({}, Navigation.Defaults, this._core.options);

    // register event handlers
    this.$element.on(this._handlers);
  };

  /**
   * Default options.
   * @public
   * @todo Rename `slideBy` to `navBy`
   */
  Navigation.Defaults = {
    nav: false,
    navText: ["prev", "next"],
    navSpeed: false,
    navElement: "div",
    navContainer: false,
    navContainerClass: "owl-nav",
    navClass: ["owl-prev", "owl-next"],
    slideBy: 1,
    dotClass: "owl-dot",
    dotsClass: "owl-dots",
    dots: true,
    dotsEach: false,
    dotsData: false,
    dotsSpeed: false,
    dotsContainer: false,
  };

  /**
   * Initializes the layout of the plugin and extends the carousel.
   * @protected
   */
  Navigation.prototype.initialize = function () {
    var override,
      settings = this._core.settings;

    // create DOM structure for relative navigation
    this._controls.$relative = (settings.navContainer
      ? $(settings.navContainer)
      : $("<div>").addClass(settings.navContainerClass).appendTo(this.$element)
    ).addClass("disabled");

    this._controls.$previous = $("<" + settings.navElement + ">")
      .addClass(settings.navClass[0])
      .html(settings.navText[0])
      .prependTo(this._controls.$relative)
      .on(
        "click",
        $.proxy(function (e) {
          this.prev(settings.navSpeed);
        }, this)
      );
    this._controls.$next = $("<" + settings.navElement + ">")
      .addClass(settings.navClass[1])
      .html(settings.navText[1])
      .appendTo(this._controls.$relative)
      .on(
        "click",
        $.proxy(function (e) {
          this.next(settings.navSpeed);
        }, this)
      );

    // create DOM structure for absolute navigation
    if (!settings.dotsData) {
      this._templates = [
        $("<div>")
          .addClass(settings.dotClass)
          .append($("<span>"))
          .prop("outerHTML"),
      ];
    }

    this._controls.$absolute = (settings.dotsContainer
      ? $(settings.dotsContainer)
      : $("<div>").addClass(settings.dotsClass).appendTo(this.$element)
    ).addClass("disabled");

    this._controls.$absolute.on(
      "click",
      "div",
      $.proxy(function (e) {
        var index = $(e.target).parent().is(this._controls.$absolute)
          ? $(e.target).index()
          : $(e.target).parent().index();

        e.preventDefault();

        this.to(index, settings.dotsSpeed);
      }, this)
    );

    // override public methods of the carousel
    for (override in this._overrides) {
      this._core[override] = $.proxy(this[override], this);
    }
  };

  /**
   * Destroys the plugin.
   * @protected
   */
  Navigation.prototype.destroy = function () {
    var handler, control, property, override;

    for (handler in this._handlers) {
      this.$element.off(handler, this._handlers[handler]);
    }
    for (control in this._controls) {
      this._controls[control].remove();
    }
    for (override in this.overides) {
      this._core[override] = this._overrides[override];
    }
    for (property in Object.getOwnPropertyNames(this)) {
      typeof this[property] != "function" && (this[property] = null);
    }
  };

  /**
   * Updates the internal state.
   * @protected
   */
  Navigation.prototype.update = function () {
    var i,
      j,
      k,
      lower = this._core.clones().length / 2,
      upper = lower + this._core.items().length,
      maximum = this._core.maximum(true),
      settings = this._core.settings,
      size =
        settings.center || settings.autoWidth || settings.dotsData
          ? 1
          : settings.dotsEach || settings.items;

    if (settings.slideBy !== "page") {
      settings.slideBy = Math.min(settings.slideBy, settings.items);
    }

    if (settings.dots || settings.slideBy == "page") {
      this._pages = [];

      for (i = lower, j = 0, k = 0; i < upper; i++) {
        if (j >= size || j === 0) {
          this._pages.push({
            start: Math.min(maximum, i - lower),
            end: i - lower + size - 1,
          });
          if (Math.min(maximum, i - lower) === maximum) {
            break;
          }
          (j = 0), ++k;
        }
        j += this._core.mergers(this._core.relative(i));
      }
    }
  };

  /**
   * Draws the user interface.
   * @todo The option `dotsData` wont work.
   * @protected
   */
  Navigation.prototype.draw = function () {
    var difference,
      settings = this._core.settings,
      disabled = this._core.items().length <= settings.items,
      index = this._core.relative(this._core.current()),
      loop = settings.loop || settings.rewind;

    this._controls.$relative.toggleClass("disabled", !settings.nav || disabled);

    if (settings.nav) {
      this._controls.$previous.toggleClass(
        "disabled",
        !loop && index <= this._core.minimum(true)
      );
      this._controls.$next.toggleClass(
        "disabled",
        !loop && index >= this._core.maximum(true)
      );
    }

    this._controls.$absolute.toggleClass(
      "disabled",
      !settings.dots || disabled
    );

    if (settings.dots) {
      difference =
        this._pages.length - this._controls.$absolute.children().length;

      if (settings.dotsData && difference !== 0) {
        this._controls.$absolute.html(this._templates.join(""));
      } else if (difference > 0) {
        this._controls.$absolute.append(
          new Array(difference + 1).join(this._templates[0])
        );
      } else if (difference < 0) {
        this._controls.$absolute.children().slice(difference).remove();
      }

      this._controls.$absolute.find(".active").removeClass("active");
      this._controls.$absolute
        .children()
        .eq($.inArray(this.current(), this._pages))
        .addClass("active");
    }
  };

  /**
   * Extends event data.
   * @protected
   * @param {Event} event - The event object which gets thrown.
   */
  Navigation.prototype.onTrigger = function (event) {
    var settings = this._core.settings;

    event.page = {
      index: $.inArray(this.current(), this._pages),
      count: this._pages.length,
      size:
        settings &&
        (settings.center || settings.autoWidth || settings.dotsData
          ? 1
          : settings.dotsEach || settings.items),
    };
  };

  /**
   * Gets the current page position of the carousel.
   * @protected
   * @returns {Number}
   */
  Navigation.prototype.current = function () {
    var current = this._core.relative(this._core.current());
    return $.grep(
      this._pages,
      $.proxy(function (page, index) {
        return page.start <= current && page.end >= current;
      }, this)
    ).pop();
  };

  /**
   * Gets the current succesor/predecessor position.
   * @protected
   * @returns {Number}
   */
  Navigation.prototype.getPosition = function (successor) {
    var position,
      length,
      settings = this._core.settings;

    if (settings.slideBy == "page") {
      position = $.inArray(this.current(), this._pages);
      length = this._pages.length;
      successor ? ++position : --position;
      position = this._pages[((position % length) + length) % length].start;
    } else {
      position = this._core.relative(this._core.current());
      length = this._core.items().length;
      successor
        ? (position += settings.slideBy)
        : (position -= settings.slideBy);
    }

    return position;
  };

  /**
   * Slides to the next item or page.
   * @public
   * @param {Number} [speed=false] - The time in milliseconds for the transition.
   */
  Navigation.prototype.next = function (speed) {
    $.proxy(this._overrides.to, this._core)(this.getPosition(true), speed);
  };

  /**
   * Slides to the previous item or page.
   * @public
   * @param {Number} [speed=false] - The time in milliseconds for the transition.
   */
  Navigation.prototype.prev = function (speed) {
    $.proxy(this._overrides.to, this._core)(this.getPosition(false), speed);
  };

  /**
   * Slides to the specified item or page.
   * @public
   * @param {Number} position - The position of the item or page.
   * @param {Number} [speed] - The time in milliseconds for the transition.
   * @param {Boolean} [standard=false] - Whether to use the standard behaviour or not.
   */
  Navigation.prototype.to = function (position, speed, standard) {
    var length;

    if (!standard && this._pages.length) {
      length = this._pages.length;
      $.proxy(this._overrides.to, this._core)(
        this._pages[((position % length) + length) % length].start,
        speed
      );
    } else {
      $.proxy(this._overrides.to, this._core)(position, speed);
    }
  };

  $.fn.owlCarousel.Constructor.Plugins.Navigation = Navigation;
})(window.Zepto || window.$jq111, window, document);

/**
 * Hash Plugin
 * @version 2.1.0
 * @author Artus Kolanowski
 * @author David Deutsch
 * @license The MIT License (MIT)
 */
(function ($, window, document, undefined) {
  "use strict";

  /**
   * Creates the hash plugin.
   * @class The Hash Plugin
   * @param {Owl} carousel - The Owl Carousel
   */
  var Hash = function (carousel) {
    /**
     * Reference to the core.
     * @protected
     * @type {Owl}
     */
    this._core = carousel;

    /**
     * Hash index for the items.
     * @protected
     * @type {Object}
     */
    this._hashes = {};

    /**
     * The carousel element.
     * @type {jQuery}
     */
    this.$element = this._core.$element;

    /**
     * All event handlers.
     * @protected
     * @type {Object}
     */
    this._handlers = {
      "initialized.owl.carousel": $.proxy(function (e) {
        if (e.namespace && this._core.settings.startPosition === "URLHash") {
          $(window).trigger("hashchange.owl.navigation");
        }
      }, this),
      "prepared.owl.carousel": $.proxy(function (e) {
        if (e.namespace) {
          var hash = $(e.content)
            .find("[data-hash]")
            .addBack("[data-hash]")
            .attr("data-hash");

          if (!hash) {
            return;
          }

          this._hashes[hash] = e.content;
        }
      }, this),
      "changed.owl.carousel": $.proxy(function (e) {
        if (e.namespace && e.property.name === "position") {
          var current = this._core.items(
              this._core.relative(this._core.current())
            ),
            hash = $.map(this._hashes, function (item, hash) {
              return item === current ? hash : null;
            }).join();

          if (!hash || window.location.hash.slice(1) === hash) {
            return;
          }

          window.location.hash = hash;
        }
      }, this),
    };

    // set default options
    this._core.options = $.extend({}, Hash.Defaults, this._core.options);

    // register the event handlers
    this.$element.on(this._handlers);

    // register event listener for hash navigation
    $(window).on(
      "hashchange.owl.navigation",
      $.proxy(function (e) {
        var hash = window.location.hash.substring(1),
          items = this._core.$stage.children(),
          position = this._hashes[hash] && items.index(this._hashes[hash]);

        if (position === undefined || position === this._core.current()) {
          return;
        }

        this._core.to(this._core.relative(position), false, true);
      }, this)
    );
  };

  /**
   * Default options.
   * @public
   */
  Hash.Defaults = {
    URLhashListener: false,
  };

  /**
   * Destroys the plugin.
   * @public
   */
  Hash.prototype.destroy = function () {
    var handler, property;

    $(window).off("hashchange.owl.navigation");

    for (handler in this._handlers) {
      this._core.$element.off(handler, this._handlers[handler]);
    }
    for (property in Object.getOwnPropertyNames(this)) {
      typeof this[property] != "function" && (this[property] = null);
    }
  };

  $.fn.owlCarousel.Constructor.Plugins.Hash = Hash;
})(window.Zepto || window.$jq111, window, document);

/**
 * Support Plugin
 *
 * @version 2.1.0
 * @author Vivid Planet Software GmbH
 * @author Artus Kolanowski
 * @author David Deutsch
 * @license The MIT License (MIT)
 */
(function ($, window, document, undefined) {
  var style = $("<support>").get(0).style,
    prefixes = "Webkit Moz O ms".split(" "),
    events = {
      transition: {
        end: {
          WebkitTransition: "webkitTransitionEnd",
          MozTransition: "transitionend",
          OTransition: "oTransitionEnd",
          transition: "transitionend",
        },
      },
      animation: {
        end: {
          WebkitAnimation: "webkitAnimationEnd",
          MozAnimation: "animationend",
          OAnimation: "oAnimationEnd",
          animation: "animationend",
        },
      },
    },
    tests = {
      csstransforms: function () {
        return !!test("transform");
      },
      csstransforms3d: function () {
        return !!test("perspective");
      },
      csstransitions: function () {
        return !!test("transition");
      },
      cssanimations: function () {
        return !!test("animation");
      },
    };

  function test(property, prefixed) {
    var result = false,
      upper = property.charAt(0).toUpperCase() + property.slice(1);

    $.each(
      (property + " " + prefixes.join(upper + " ") + upper).split(" "),
      function (i, property) {
        if (style[property] !== undefined) {
          result = prefixed ? property : true;
          return false;
        }
      }
    );

    return result;
  }

  function prefixed(property) {
    return test(property, true);
  }

  if (tests.csstransitions()) {
    /* jshint -W053 */
    $.support.transition = new String(prefixed("transition"));
    $.support.transition.end = events.transition.end[$.support.transition];
  }

  if (tests.cssanimations()) {
    /* jshint -W053 */
    $.support.animation = new String(prefixed("animation"));
    $.support.animation.end = events.animation.end[$.support.animation];
  }

  if (tests.csstransforms()) {
    /* jshint -W053 */
    $.support.transform = new String(prefixed("transform"));
    $.support.transform3d = tests.csstransforms3d();
  }
})(window.Zepto || window.$jq111, window, document);

(function (p, u, s, h) {
  p._pcq = p._pcq || [];
  p._pcq.push(["_currentTime", Date.now()]);
  s = u.createElement("script");
  s.type = "text/javascript";
  s.async = true;
  s.crossOrigin = "anonymous";
  s.src = "https://cdn.pushcrew.com/js/cf8804854060413cb533c536975b73c9.js";
  h = u.getElementsByTagName("script")[0];
  h.parentNode.insertBefore(s, h);
})(window, document);

/* DTM Starts for Video */

function extractVideoID(url) {
  var regExp = /^.*((youtu-nocookie.com\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?)|\/feeds\/api\/videos\/|\/user\S*[^\w\-\s]|\/ytscreeningroom\?)\??v?=?([^#\&\?]*).*/;
  var regPlaylist = /[?&]list=([^#\&\?]+)/;
  var youtubeID = "";
  var match = url.match(regExp);
  if (match && match[7].length == 11) {
    youtubeID = match[7];
    //return match[7];
  } else {
    //match = url.match(regPlaylist);
    //return match[1] ;
    var list = url.match("list=([a-zA-Z0-9-_]+)&?");
    list = list ? list[1] : match[7];
    youtubeID = list;
    //return list;
  }
  return youtubeID;
}

function playMusicVideo(event) {
  event.target.playVideo();
}

function getUrlVars(ytLocation) {
  var vars = [],
    hash;
  var hashes = ytLocation.slice(ytLocation.indexOf("?") + 1).split("&");
  for (var i = 0; i < hashes.length; i++) {
    hash = hashes[i].split("=");
    vars.push(hash[0]);
    vars[hash[0]] = hash[1];
  }
  return vars;
}

function fancycallVideoPage() {
  var ytEmbedUrl = "";
  jQuery(".playIcon").click(function (e) {
    e.preventDefault();
    var ytID = getUrlVars(jQuery(this).parent().attr("href"))["v"];
    ytEmbedUrl =
      "http://www.youtube-nocookie.com/embed/" + ytID + "?rel=0&autoplay=1";
  });
}

function fancycallHomePage() {
  var ytEmbedUrl = "";
  jQuery(".play-icon").click(function (e) {
    e.preventDefault();
    var ytID = getUrlVars(jQuery(this).parent().attr("href"))["v"];
    ytEmbedUrl =
      "http://www.youtube-nocookie.com/embed/" + ytID + "?rel=0&autoplay=1";
  });
}

// iFrame Player API code
var tag = document.createElement("script");
tag.src = "https://www.youtube.com/iframe_api";
var firstScriptTag = document.getElementsByTagName("script")[0];
firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

var ytPlayer;

/* DTM Ends for Video */

function videoMagnific() {
  $jq18('a.fancyboxcaller-video[rel="set1"]').magnificPopup({
    type: "iframe",
    closeOnContentClick: false,
    closeBtnInside: false,
    fixedContentPos: true,
    mainClass: "mfp-no-margins mfp-with-zoom mfp-iframe", // class to remove default margin from left and right side
    image: {
      verticalFit: true,
    },
    iframe: {
      verticalFit: true,
      /* DTM */
      markup:
        '<div class="mfp-iframe-scaler"><div class="mfp-close"></div><iframe id="player" class="mfp-iframe" frameborder="0" allowfullscreen></iframe>' +
        "</div>",
      patterns: {
        youtube: {
          index: "youtube.com",
          id: "v=",
          src: "//www.youtube-nocookie.com/embed/%id%?enablejsapi=1", // URL that will be set as a source for iframe.
        },
      },
    },
    gallery: {
      enabled: false,
      tCounter: " ",
    },
    zoom: {
      enabled: true,
      duration: 300, // don't foget to change the duration also in CSS
      opener: function (element) {
        return element.find("img");
      },
    },
    callbacks: {
      open: function () {
        // this part overrides "close" method in MagnificPopup object
        $jq18.magnificPopup.instance.close = function () {
          $jq18("body").unbind("touchmove");
          //$jq18.scrollify.enable();
          $jq18.magnificPopup.proto.close.call(this);
        };
        /* DTM */
        ytPlayer = new YT.Player("player", {
          // iframe ID
          host: "https://www.youtube-nocookie.com",
          events: {
            onReady: onPlayerReady,
            onStateChange: onPlayerStateChange,
          },
        });
      },
      beforeClose: function () {
        ytPlayer.stopVideo();
        ytPlayer.destroy();
      },
    },
  });
  /* DTM */
  function onPlayerReady(event) {
    event.target.playVideo();
  }
}

function socialShare() {
  jQuery(".blog-socials").unbind("mouseenter mouseleave");
  jQuery(".blog-socials,.fblink a").unbind("click");

  if (Modernizr.mq("only screen and (min-width: 1024px)")) {
    if (navigator.userAgent.indexOf("iPad") == -1) {
      jQuery(".blog-socials").hover(function () {
        jQuery(this).find(".social-wrapper").toggleClass("showed");
      });
    }
  } else {
    jQuery(".blog-socials").click(function () {
      jQuery(this).find(".social-wrapper").toggleClass("showed");
    });
  }

  /* News Landing Share */
  jQuery(".fblink a").click(function () {
    var parentDOM = jQuery(this).closest(".views-row");
    var path = parentDOM.find(".custom-share .custom-path").text();
    var ogimg = parentDOM.find(".custom-share .custom-media img").attr("src");
    var customtitle = parentDOM.find(".custom-share .custom-title").text();
    var custombody = parentDOM.find(".custom-share .custom-body").text();
    var obj = {
      // app_id: "1415761508442799",
      app_id: "1654843911441112",
      method: "feed",
      link: path,
      picture: ogimg,
      name: customtitle,
      description: custombody,
      display: "popup",
    };
    FB.ui(obj);
    return false;
  });
  jQuery(".twitter a").click(function () {
    var parentDOM = jQuery(this).closest(".views-row");
    var path = parentDOM.find(".custom-share .custom-path").text();
    var customtitle = parentDOM.find(".custom-share .custom-title").text();
    var twitterURL =
      "https://twitter.com/intent/tweet?original_referer=" +
      path +
      "&text=" +
      encodeURIComponent(customtitle) +
      " " +
      encodeURIComponent(path) +
      "&via=muse";
    //  var twitterURL = 'https://twitter.com/intent/tweet?original_referer=' + path + '&text=' + '&via=muse';
    jQuery(".twitter a").attr("href", twitterURL);
  });
  jQuery(".gplus a").click(function () {
    var parentDOM = jQuery(this).closest(".views-row");
    var path = parentDOM.find(".custom-share .custom-path").text();
    path = jQuery.trim(path);
    var customtitle = parentDOM.find(".custom-share .custom-title").text();
    var googleplusURL =
      "https://plus.google.com/share?url=" +
      path +
      "&text=" +
      encodeURIComponent(customtitle) +
      " " +
      encodeURIComponent(path);
    jQuery(".gplus a").attr("href", googleplusURL);
  });
}

function updateURL(query) {
  if (history.pushState) {
    var newurl =
      window.location.protocol +
      "//" +
      window.location.host +
      window.location.pathname +
      "?page=" +
      query;
    window.history.pushState({ path: newurl }, "", newurl);
  }
}

function albumSelector() {
  jQuery("div#block-views-music-block-3 .item-list ul li .album_title").each(
    function () {
      jQuery(this).click(function (e) {
        e.preventDefault();
        jQuery("div#block-views-music-block-3 .item-list ul li").removeClass(
          "active"
        );
        jQuery(this).parents("li").addClass("active");
        var id = jQuery(this).closest(".views-row").attr("class").slice(20, 22);
        //console.info("li number is " + id);
        jQuery(".view-music.view-display-id-page ul.pager li").each(
          function () {
            var page = jQuery(this).find("a").text();
            if (id.trim() == page.trim()) {
              jQuery(this).find("a").trigger("click");
              //console.info("page number is " + page);
              updateURL(id - 1);
              jQuery(window).scrollTop(30);
            }
          }
        );
      });
      /*jQuery('.page-music #block-views-music-block-3 .view-content .item-list ul .views-row.views-row-first .album_title').click(function (e) {
            e.preventDefault();
            jQuery(".view-music.view-display-id-page ul.pager li.pager-first a").trigger('click');
        });*/
    }
  );
}

function musicPageUpdate() {
  var listId;
  length = jQuery("#block-views-music-block-3 .view-content .item-list ul li")
    .length;
  var index = window.location.href.lastIndexOf("=");
  var lastString = window.location.href.substring(index + 1);
  if (index == -1) {
    lastString = 0;
  }
  //console.info("lastString " + lastString);
  for (listId = 0; listId < length; listId++) {
    if (listId == lastString) {
      //console.info("string matched " + lastString + listId);
      jQuery(
        ".page-music #block-views-music-block-3 .view-content .item-list ul .views-row.views-row-first"
      ).removeClass("active");
      jQuery("div#block-views-music-block-3 .item-list ul li").removeClass(
        "active"
      );
      jQuery(
        ".page-music #block-views-music-block-3 .view-content .item-list ul li.views-row-" +
          (listId + 1)
      ).addClass("active");
    }
  }

  /* jQuery(".view-id-music.view-display-id-page .pager-next a").click(function () {
         var num = parseInt(lastString);
         updateURL(num + 1);
         jQuery('div#block-views-music-block-3 .item-list ul li').removeClass('active');
         jQuery(".page-music #block-views-music-block-3 .view-content .item-list ul li.views-row-" + (num + 1)).addClass("active");
     });
     jQuery(".view-id-music.view-display-id-page .pager-previous a").click(function () {
         updateURL(parseInt(lastString) - 1);
     });*/
}

function updateURLName(query) {
  if (history.pushState) {
    var newurl =
      window.location.protocol +
      "//" +
      window.location.host +
      window.location.pathname +
      "?album=" +
      query;
    window.history.pushState({ path: newurl }, "", newurl);
  }
}

function activeSwitcher() {
  var albumTitle = jQuery(".page-music .view-music .coverWrapper .albumTitle")
    .html()
    .toLowerCase()
    .trim();
  jQuery(
    ".page-music #block-views-music-block-3 .view-content .item-list ul li"
  ).each(function () {
    if (
      jQuery(this).find(" .album_title a").html().toLowerCase() == albumTitle
    ) {
      jQuery("div#block-views-music-block-3 .item-list ul li").removeClass(
        "active"
      );
      jQuery(this).addClass("active");
      updateURLName(albumTitle.replace(/ /g, "_").replace(/%20/g, "_"));
    }
  });
}

function moveToAlbum() {
  var index = window.location.href.lastIndexOf("=");
  var lastString = window.location.href.substring(index + 1);
  jQuery(
    ".page-music #block-views-music-block-3 .view-content .item-list ul li"
  ).each(function () {
    if (
      jQuery(this).find(" .album_title a").html().toLowerCase() ==
      lastString.toLowerCase().replace(/_/g, " ").replace(/%20/g, " ")
    ) {
      //alert(jQuery(this).index());
      jQuery(this).find("a").trigger("click");
      var modifiedurl = jQuery(this).find("a").attr("href").replace(/ /g, "_");
      jQuery(this).find("a").attr("href", modifiedurl);
      return false;
    }
  });
}

function streamSelector() {
  jQuery(".view-footer .embedSection").clone().insertAfter(".selectDown");
  jQuery(".embedSection .youtube").each(function (index) {});
  jQuery(".streamSelector").each(function () {
    jQuery(this)
      .find(".selectDown .dropdown a")
      .each(function () {
        if (jQuery(this).find(".iframelink").text().trim().length == 0) {
          jQuery(this).addClass("inActive");
        }
      });
    var iframeLinkActive = jQuery(this)
      .find(".selectDown > a .iframelink")
      .text()
      .trim();
    jQuery(this)
      .find(".embedSection div.active > span iframe")
      .attr("data-src", iframeLinkActive);
  });
  jQuery(".selectDown").click(function () {
    jQuery(this).find(".dropdown").slideToggle();
  });
  jQuery(".dropdown a:not(.youtube)").click(function () {
    var text = jQuery(this).text();
    var classname = jQuery(this).attr("class");
    jQuery(this)
      .parents(".selectDown")
      .find(".dropdown a")
      .removeClass("active");
    jQuery(this).addClass("active");
    jQuery(this)
      .parents(".streamSelector")
      .find(".selectDown a#showText")
      .removeClass();
    jQuery(this)
      .parents(".streamSelector")
      .find(".selectDown a#showText")
      .addClass(classname);
    jQuery(this)
      .parents(".streamSelector")
      .find(".selectDown a#showText")
      .html(jQuery(this).html());
    var index = jQuery(this).index();
    jQuery(this).parents(".streamSelector").find(".embedSection > div").hide();
    jQuery(".streamSelector")
      .find(".embedSection > div > span.refreshiframe iframe")
      .each(function () {
        //alert('stream');
        jQuery(this).attr("data-src", jQuery(this).attr("src"));
      });
    var src1 = jQuery(this).find(".iframelink").text().trim();
    var streamDev = jQuery(this)
      .parents(".streamSelector")
      .find(".embedSection > div")
      .eq(index);
    jQuery(streamDev).find("span iframe").attr("data-src", src1);
    //alert(jQuery(streamDev).html());
    //jQuery(streamDev).find("iframe").attr("data-src", src1);
    jQuery(this)
      .parents(".streamSelector")
      .find(".embedSection > div")
      .eq(index)
      .show();
  });
  jQuery(".dropdown a.youtube").click(function () {
    var text = jQuery(this).text();
    var classname = jQuery(this).attr("class");
    jQuery(this)
      .parents(".selectDown")
      .find(".dropdown a")
      .removeClass("active");
    jQuery(this).addClass("active");
    jQuery(this)
      .parents(".streamSelector")
      .find(".selectDown a#showText")
      .removeClass();
    jQuery(this)
      .parents(".streamSelector")
      .find(".selectDown a#showText")
      .addClass(classname);
    jQuery(this)
      .parents(".streamSelector")
      .find(".selectDown a#showText")
      .html(jQuery(this).html());
    var index = jQuery(this).index();
    jQuery(this).parents(".streamSelector").find(".embedSection > div").hide();
    jQuery(".streamSelector")
      .find(".embedSection > div > span.refreshiframe iframe")
      .each(function () {
        //alert('stream');
        jQuery(this).attr("src", jQuery(this).attr("src"));
      });
    var src1 = jQuery(this).find(".iframelink").text().trim();
    var streamDev = jQuery(this)
      .parents(".streamSelector")
      .find(".embedSection > div")
      .eq(index);

    // jQuery(streamDev).find("span iframe").attr("src", src1);

    var currentid = jQuery(streamDev).find("span iframe").attr("id");
    var currentplayerid = currentid + index;
    jQuery(streamDev).find("span iframe").attr("id", currentplayerid);

    var playerListID = "";
    var ytplayer,
      youtubeID = "";
    var newlink = "";
    var link = jQuery(streamDev).find("span iframe").attr("src");
    var vID = extractVideoID(link);

    if (vID.length > 11) {
      playerListID = vID;
      //newlink = 'https://www.youtube-nocookie.com/embed/?listType=playlist&controls=1&list='+ playerListID +'&enablejsapi=1';
    } else {
      youtubeID = vID;
      //newlink = link;
    }
    if (link.indexOf("enablejsapi") === -1) {
      // ...check whether there is already a query string or not:
      // (ie. whether to prefix "enablejsapi" with a "?" or an "&")
      var prefix = link.indexOf("?") === -1 ? "?" : "&amp;";
      link += prefix + "enablejsapi=true";
      newlink = link;
    } else {
      newlink = link;
    }
    jQuery(streamDev).find("span iframe").attr("src", newlink);
    var playerID = jQuery(streamDev).find("span iframe").attr("id");
    var player = new YT.Player(playerID, {
      height: "390",
      width: "340",
      videoId: youtubeID,
      playerVars: {
        listType: "playlist",
        controls: 1,
        list: playerListID,
        autoplay: 0,
      },
      host: "https://www.youtube-nocookie.com",
      events: {
        onReady: playMusicVideo,
        onStateChange: onPlayerStateChange,
      },
    });
    //alert(jQuery(streamDev).html());
    //jQuery(streamDev).find("iframe").attr("src", src1);
    jQuery(this)
      .parents(".streamSelector")
      .find(".embedSection > div")
      .eq(index)
      .show();
  });
}

function redirects() {
  if (jQuery("body").hasClass("logged-in")) {
    jQuery("ul.menu li.menu-link-32266 a").attr("href", "/member");
    jQuery(".page-node-57066 a.membersArea").attr("href", "/member");
  } else {
    jQuery("ul.menu li.menu-link-32266 a").attr("href", "/user/login");
    jQuery(".page-node-57066 a.membersArea").attr("href", "/user/login");
    if (
      window.location.pathname == "/member" ||
      window.location.pathname == "/downloads"
    ) {
      window.location.pathname = "/user/login";
    }
  }
}

jQuery(document).ready(function () {
  var tag = document.createElement("script");
  tag.src = "https://www.youtube.com/iframe_api";
  var firstScriptTag = document.getElementsByTagName("script")[0];
  firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
  socialShare();
  redirects();
  if (
    jQuery("body").hasClass("page-tour-archive") ||
    jQuery("body").hasClass("page-tour") ||
    jQuery("body").hasClass("page-user")
  ) {
    getCountryInfoForUser();
  }
  if (jQuery("body").hasClass("page-music")) {
    streamSelector();
    albumSelector();
    musicPageUpdate();
    moveToAlbum();
  }
  fancycallVideoPage();
  fancycallHomePage();
  jQuery(".front .menu-link-32111 a").removeClass("active");
  jQuery("#page-title").wrap("<div id='wrap'></div>");

  if (
    jQuery("body").hasClass("front") ||
    jQuery("body").hasClass("page-node-11811") ||
    jQuery("body").hasClass("page-video-v1")
  ) {
    videoMagnific();
  }
  if (
    jQuery("body").hasClass("page-tour-archive") ||
    jQuery("body").hasClass("node-type-tour")
  ) {
    jQuery(".menu-link-24806 a").addClass("active");
  }
  if (
    jQuery("body").hasClass("node-type-node-gallery-gallery") ||
    jQuery("body").hasClass("node-type-node-gallery-item")
  ) {
    jQuery(".menu-link-27981 a").addClass("active");
  }
  if (
    jQuery("body").hasClass("page-downloads") ||
    jQuery("body").hasClass("page-member") ||
    jQuery("body.logged-in").hasClass("page-user") ||
    jQuery("body").hasClass("page-user-login") ||
    jQuery("body").hasClass("page-user-register") ||
    jQuery("body").hasClass("page-user-password")
  ) {
    jQuery(".menu-link-32266 a").addClass("active");
  }

  var date = new Date();
  var month = date.getMonth() + 1;
  var day = date.getDate();
  var currentDate =
    (month.length < 2 ? "0" : "") +
    month +
    "." +
    (("" + day).length < 2 ? "0" : "") +
    day +
    "." +
    date.getFullYear();
  var eventDate = jQuery(
    "#block-views-events-block-4 .view-header .eventDate"
  ).text();

  if (eventDate != "" && eventDate < currentDate) {
    jQuery("body").addClass("archive-detail");
  }

  jQuery("ul.menu li.expanded").append('<span class="showsubmenu"> + </span>');
  jQuery("ul.menu li.expanded > a").addClass("main").removeClass("active");

  jQuery("ul.menu li.expanded").unbind("click");
  jQuery("ul.menu li.expanded .showsubmenu, ul.menu li.expanded a.main").live(
    "click",
    function (e) {
      //jQuery("ul.menu li.expanded a.main").live('click', function (e) {
      e.preventDefault();
      jQuery("ul.menu li.expanded .showsubmenu").toggleClass("less");
      var plus = jQuery("ul.menu li.expanded .showsubmenu").html().trim();
      if (plus == "+") {
        jQuery("ul.menu li.expanded .showsubmenu").html("-");
      } else {
        jQuery("ul.menu li.expanded .showsubmenu").html("+");
      }
      jQuery("ul.menu li.expanded ul.menu").slideToggle();
    }
  );

  jQuery(".nav-toggle").live("click", function (e) {
    e.preventDefault();
    jQuery(
      "#block-menu-menu-home-one-page-linked .content > ul.menu"
    ).slideToggle();
    jQuery(this).toggleClass("close");
  });
  //  jQuery(".logged-in.page-node-57066 .membersArea").attr("href", "/member");

  if (
    jQuery("body").hasClass("page-user") &&
    window.location.pathname.slice(1, 8) == "member/"
  ) {
    jQuery("body").addClass("memberDetails");
  }

  /* if ((jQuery('body').hasClass('page-downloads')) || (jQuery('body').hasClass('page-member'))) {
         var x = jQuery(".editdetails a").attr("href").replace("edit", "edit-profile");
         jQuery(".editdetails a").attr("href", x);
     }*/

  if (
    (jQuery("body").hasClass("page-user") &&
      window.location.pathname.slice(0, 6) == "/user/") ||
    jQuery("body").hasClass("memberDetails")
  ) {
    jQuery(
      "<a id='backTo' href='/member'> < Back to Members Page</a>"
    ).insertBefore("#block-views-user-profile-block-3");
  }
  if (jQuery("body").hasClass("logged-in")) {
    jQuery("ul.menu li.menu-link-32266 a").attr("href", "/member");
  } else {
    jQuery("ul.menu li.menu-link-32266 a").attr("href", "/user/login");
  }

  jQuery(".page-user-login h1.title#page-title").html("Members Area");
  jQuery(".page-user-login #wrap").append(
    '<div class="joinMsg"> Join muse.mu to access exclusive downloads and tour pre-sales. </div>'
  );
  jQuery(
    '<div class="loginMsg"> Please note you will need to reset your password to gain access to your old account. </div>'
  ).insertBefore(".page-user-login form#user-login");

  if (jQuery("body").hasClass("page-user-password")) {
    var input = jQuery("input#edit-name").val();
    if (input != "") {
      jQuery("div.messages.error").append(
        '<span class="errorMsg">  Please register for a new account. </span>'
      );
    }
  }

  if (jQuery(".tickets.drop").children("a").length == 0) {
    jQuery(".tickets.drop").hide();
  }
});

jQuery(window).load(function () {
  redirects();
  /* if (jQuery('body').hasClass('page-music')) {
        albumSelector();
        musicPageUpdate();
    }*/
  /*jQuery('.play-icon').click(function () {
        console.log("Play icon clicked-home page");
        $jq18('body').bind('touchmove', function (e) { e.preventDefault(); });
        $jq18.scrollify.disable();
    });
    jQuery('.mfp-close').click(function (e) {
        e.preventDefault();
        $jq18.scrollify.enable();
    });*/

  jQuery(
    ".page-tour-archive #edit-field-event-city-value, .page-tour #edit-field-event-city-value"
  ).attr("placeholder", "CITY");
  jQuery(
    ".page-tour-archive #edit-field-event-state-value, .page-tour #edit-field-event-state-value"
  ).attr("placeholder", "COUNTRY");
  jQuery(
    ".page-tour-archive .date-year.form-select option:first-child, .page-tour .date-year.form-select option:first-child"
  ).text("YEAR");
  jQuery(
    ".page-tour #block-views-events-block-1 .view-events .form-radios .form-item:first-child .option"
  ).text("All Dates");
  jQuery(".page-gallery .date-year.form-select option:first-child").text(
    "YEAR"
  );
  jQuery(".merchDetail a").attr("target", "_blank");
  jQuery(".page-tour .retailLinks a").attr("target", "_blank");
  jQuery(".merchBuy a").attr("target", "_blank");
  jQuery(".form-item input[type='radio']:checked").parent().addClass("active");
  jQuery(".form-radios .form-item").each(function () {
    jQuery(this)
      .find("label")
      .click(function () {
        jQuery(".form-radios .form-item").removeClass("active");
        jQuery(this).parent().addClass("active");
        setTimeout(function () {
          jQuery(
            ".region-content .views-exposed-form .views-exposed-widget .form-submit"
          ).trigger("click");
        }, 500);
        setTimeout(function () {
          if (
            jQuery(
              ".region-content .form-radios .form-item:not(:nth-child(2))"
            ).hasClass("active")
          ) {
            //jQuery('.region-content .view-events .view-content .views-row').addClass('show');
          } else {
            //jQuery('.region-content .view-events .view-content .views-row.show').removeClass('show');
          }
        }, 3500);
      });
  });

  if (
    jQuery("body").hasClass("node-type-node-gallery-gallery") ||
    jQuery("body").hasClass("node-type-node-gallery-item")
  ) {
    jQuery(".menu-link-27981 a").addClass("active");
  }
  if (
    jQuery("body").hasClass("page-downloads") ||
    jQuery("body").hasClass("page-member") ||
    jQuery("body.logged-in").hasClass("page-user") ||
    jQuery("body").hasClass("page-user-login") ||
    jQuery("body").hasClass("page-user-register") ||
    jQuery("body").hasClass("page-user-password")
  ) {
    jQuery(".menu-link-32266 a").addClass("active");
  }
  if (
    jQuery("body").hasClass("page-music") &&
    window.location.href.indexOf("page=0") != -1
  ) {
    jQuery(
      ".page-music #block-views-music-block-3 .view-content .item-list ul .views-row.views-row-first"
    ).addClass("active");
  }
  jQuery(
    ".page-user #page #content #main .form-type-password .description a"
  ).unbind("click");
  jQuery(
    ".page-user #page #content #main .form-type-password .description a"
  ).live("click", function (e) {
    jQuery(
      ".page-user #page #content #main .form-type-password .description a"
    ).attr("href", "/user/password");
    jQuery(
      ".page-user #page #content #main .form-type-password .description a"
    ).removeClass("ajax-processed");
    jQuery(
      ".page-user #page #content #main .form-type-password .description a"
    ).removeClass("use-dialog-processed");
    jQuery(
      ".page-user #page #content #main .form-type-password .description a"
    ).removeClass("user-dialog-processed");
  });
  if (jQuery(".embedSection .active iframe").attr("src") == "") {
    jQuery(".streamSelector").addClass("disabled");
  }
  if (
    jQuery(
      ".embedSection .appleMusic iframe, .embedSection .youtube iframe, .embedSection .soundcloud iframe, .embedSection .deezer iframe"
    ).attr("src") == ""
  ) {
    jQuery("#showText").addClass("disabled");
  }
  // jQuery(".logged-in.page-node-57066 .membersArea").attr("href", "/member");

  if (
    jQuery("body").hasClass("page-downloads") ||
    jQuery("body").hasClass("page-member")
  ) {
    var x = jQuery(".editdetails a")
      .attr("href")
      .replace("edit", "edit-profile");
    jQuery(".editdetails a").attr("href", x);
  }
  /* if (jQuery('body').hasClass('logged-in')) {
         jQuery('ul.menu li.menu-link-32266 a').attr('href', '/member');
     } else {
         jQuery('ul.menu li.menu-link-32266 a').attr('href', '/user/login');
        if(window.location.pathname == "/member") {
               window.location.pathname = "/user/login";
        }
     }*/

  /*! Fades in page on load 
    setTimeout(function () {
        jQuery('body').addClass('loaded');
    }, 500);*/
});

/* Video Carousel */
jQuery(window).load(function () {
  jQuery("div#block-block-841 .homepageVideoWrapper").addClass("owl-carousel");
  //var owl = jQuery('div#block-block-841 .homepageVideoWrapper .owl-carousel');
  $jq111("div#block-block-841 .homepageVideoWrapper").owlCarousel({
    items: 1,
    autoplay: false,
    loop: true,
    center: true,
    margin: 0,
    stagePadding: 0,
    nav: true,
    pagination: false,
    afterAction: function (current) {
      current.find("video").get(0).play();
    },
  });
});

/* DTM for Buy Now Merch Link */
function CallOmniture(text) {
  var s = s_gi("wmg,wmggbglobal,wmgmuse.mu,wmgmuse");
  s_dtm.linkTrackVars = "prop1,eVar4";
  s_dtm.prop1 = "Muse";
  s_dtm.eVar4 = "Muse";
  s_dtm.tl(this, "o", text);
}

/* Tour Landing Livefyre */
function loadLiveFyreTourLanding() {
  var columns = 2;
  if (jQuery(window).width() < 768) {
    columns = 1;
  }
  Livefyre.require(
    ["streamhub-sdk#2", "streamhub-wall#3", "inherits"],
    function (SDK, LiveMediaWall, Inherits) {
      var CustomWall = function (opts) {
        LiveMediaWall.call(this, opts);
      };
      Inherits(CustomWall, LiveMediaWall);
      var wallArt = (window.wallArt = new CustomWall({
        el: document.getElementById("wall"),
        collection: new SDK.Collection({
          network: "wmg.fyre.co",
          siteId: "364321",
          articleId: "designer-app-1540272143076",
        }),
        postButton: false,
        initial: 8,
        modal: true,
        columns: columns,
      }));
    }
  );
}

jQuery(document).ready(function () {
  jQuery(".merchBuy a").click(function () {
    var merchname = jQuery(this)
      .parent(".merchBuy")
      .siblings(".merchName")
      .find("a")
      .text();
    CallOmniture("Muse: " + merchname + ":Buy Now Link Click");
  });
  if (
    jQuery("body").hasClass("page-tour") ||
    jQuery("body").hasClass("page-tour-archive")
  ) {
    loadLiveFyreTourLanding();
  }
});
jQuery(document).ajaxComplete(function () {
  socialShare();
  redirects();
  if (jQuery("body").hasClass("page-music")) {
    streamSelector();
    albumSelector();
    musicPageUpdate();
    activeSwitcher();
  }
  fancycallVideoPage();
  fancycallHomePage();
  jQuery(
    ".page-tour-archive #edit-field-event-city-value, .page-tour #edit-field-event-city-value"
  ).attr("placeholder", "CITY");
  jQuery(
    ".page-tour-archive #edit-field-event-state-value, .page-tour #edit-field-event-state-value"
  ).attr("placeholder", "COUNTRY");
  jQuery(
    ".page-tour-archive .date-year.form-select option:first-child, .page-tour .date-year.form-select option:first-child"
  ).text("YEAR");
  jQuery(
    ".page-tour #block-views-events-block-1 .view-events .form-radios .form-item:first-child .option"
  ).text("All Dates");
  jQuery(".page-gallery .date-year.form-select option:first-child").text(
    "YEAR"
  );

  if (
    jQuery("body").hasClass("front") ||
    jQuery("body").hasClass("page-node-11811") ||
    jQuery("body").hasClass("page-video-v1")
  ) {
    videoMagnific();
  }
  /*jQuery('.mfp-close').click(function () {
        console.log("Close icon clicked-home page");
        $jq18.scrollify.enable();
    });*/
  jQuery(".form-item input[type='radio']:checked").parent().addClass("active");
  jQuery(".form-radios .form-item").each(function () {
    jQuery(this)
      .find("label")
      .click(function () {
        jQuery(".form-radios .form-item").removeClass("active");
        jQuery(this).parent().addClass("active");
        setTimeout(function () {
          jQuery(
            ".region-content .views-exposed-form .views-exposed-widget .form-submit"
          ).trigger("click");
        }, 500);
        setTimeout(function () {
          if (
            jQuery(
              ".region-content .form-radios .form-item:not(:nth-child(2))"
            ).hasClass("active")
          ) {
            //jQuery('.region-content .view-events .view-content .views-row').addClass('show');
          } else {
            //jQuery('.region-content .view-events .view-content .views-row.show').removeClass('show');
          }
        }, 3500);
      });
  });

  if (
    jQuery("body").hasClass("node-type-node-gallery-gallery") ||
    jQuery("body").hasClass("node-type-node-gallery-item")
  ) {
    jQuery(".menu-link-27981 a").addClass("active");
  }
  if (
    jQuery("body").hasClass("page-downloads") ||
    jQuery("body").hasClass("page-member") ||
    jQuery("body.logged-in").hasClass("page-user")
  ) {
    jQuery(".menu-link-32266 a").addClass("active");
  }
  if (jQuery(".embedSection .active iframe").attr("src") == "") {
    jQuery(".streamSelector").addClass("disabled");
  }
  if (
    jQuery(
      ".embedSection .appleMusic iframe, .embedSection .youtube iframe, .embedSection .soundcloud iframe, .embedSection .deezer iframe"
    ).attr("src") == ""
  ) {
    jQuery("#showText").addClass("disabled");
  }
});

var getCountryInfoForUser = function () {
  jQuery.ajax({
    url: "https://ip2location.wmgartistservices.com/example2.php",
    dataType: "jsonp",
    success: function (data) {
      var country = data.countryName;
      country = country.toLowerCase();
      var countrylength = country.split(" ");
      var country1 = "";
      if (countrylength.length > 1) {
        for (var i = 0; i < countrylength.length; i++) {
          country1 +=
            countrylength[i].substr(0, 1).toUpperCase() +
            countrylength[i].substr(1) +
            " ";
        }
      } else {
        country1 = country.substr(0, 1).toUpperCase() + country.substr(1);
      }
      country1 = country1.trim();
      console.info(country1);
      jQuery(
        '#edit-field-country .form-select option[value="' + country1 + '"]'
      ).attr("selected", "selected");
    },
  });
};
